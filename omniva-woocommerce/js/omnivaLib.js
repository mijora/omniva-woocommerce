// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.9/esri/copyright.txt for details.
//>>built
(function(b,e){var n,h=function(){return"undefined"!==typeof w&&"function"!==typeof w?w:"undefined"!==typeof window?window:"undefined"!==typeof self?self:this}(),l=function(){},m=function(g){for(var c in g)return 0;return 1},k={}.toString,a=function(g){return"[object Function]"==k.call(g)},f=function(g){return"[object String]"==k.call(g)},d=function(g){return"[object Array]"==k.call(g)},c=function(g,c){if(g)for(var a=0;a<g.length;)c(g[a++])},q=function(g,c){for(var a in c)g[a]=c[a];return g},r=function(g,
c){return q(Error(g),{src:"dojoLoader",info:c})},x=1,z=function(){return"_"+x++},v=function(g,c,a){return qa(g,c,a,0,v)},w=h,p=w.document,y=p&&p.createElement("DiV"),g=v.has=function(g){return a(u[g])?u[g]=u[g](w,p,y):u[g]},u=g.cache=e.hasCache;a(b)&&(b=b(h));g.add=function(c,a,d,p){(void 0===u[c]||p)&&(u[c]=a);return d&&g(c)};g.add("host-webworker","undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope);g("host-webworker")&&(q(e.hasCache,{"host-browser":0,dom:0,"dojo-dom-ready-api":0,
"dojo-sniff":0,"dojo-inject-api":1,"host-webworker":1,"dojo-guarantee-console":0}),e.loaderPatch={injectUrl:function(g,c){try{importScripts(g),c()}catch(mb){console.info("failed to load resource ("+g+")"),console.error(mb)}}});for(var t in b.has)g.add(t,b.has[t],0,1);v.async=1;var A=g("csp-restrictions")?function(){}:new Function("return eval(arguments[0]);");v.eval=function(g,c){return A(g+"\r\n//# sourceURL\x3d"+c)};var C={},B=v.signal=function(g,a){g=C[g];c(g&&g.slice(0),function(g){g.apply(null,
d(a)?a:[a])})};t=v.on=function(g,c){var a=C[g]||(C[g]=[]);a.push(c);return{remove:function(){for(var g=0;g<a.length;g++)if(a[g]===c){a.splice(g,1);break}}}};var F=[],D={},H=[],aa={},ga=v.map={},P=[],K={},ja="",M={},X={},h={},O=0;if(!g("foreign-loader"))var L=function(g,c){c=!1!==c;var a,d,p,u;for(a in X)d=X[a],(p=a.match(/^url\:(.+)/))?M["url:"+Za(p[1],g)]=d:"*now"==a?u=d:"*noref"!=a&&(p=Wa(a,g,!0),M[p.mid]=M["url:"+p.url]=d);u&&u(Ca(g));c&&(X={})};var Q=function(g){return g.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,
function(g){return"\\"+g})},G=function(g,c){c.splice(0,c.length);for(var a in g)c.push([a,g[a],new RegExp("^"+Q(a)+"(/|$)"),a.length]);c.sort(function(g,c){return c[3]-g[3]});return c},V=function(g,a){c(g,function(g){a.push([f(g[0])?new RegExp("^"+Q(g[0])+"$"):g[0],g[1]])})},U=function(g){var c=g.name;c||(c=g,g={name:c});g=q({main:"main"},g);g.location=g.location?g.location:c;g.packageMap&&(ga[c]=g.packageMap);g.main.indexOf("./")||(g.main=g.main.substring(2));aa[c]=g},Y=[],N=function(a,d,p){for(var t in a){"waitSeconds"==
t&&(v.waitms=1E3*(a[t]||0));"cacheBust"==t&&(ja=a[t]?f(a[t])?a[t]:(new Date).getTime()+"":"");if("baseUrl"==t||"combo"==t)v[t]=a[t];a[t]!==u&&(v.rawConfig[t]=a[t],"has"!=t&&g.add("config-"+t,a[t],0,d))}v.baseUrl||(v.baseUrl="./");/\/$/.test(v.baseUrl)||(v.baseUrl+="/");for(t in a.has)g.add(t,a.has[t],0,d);c(a.packages,U);for(var b in a.packagePaths)c(a.packagePaths[b],function(g){var a=b+"/"+g;f(g)&&(g={name:g});g.location=a;U(g)});G(q(ga,a.map),P);c(P,function(g){g[1]=G(g[1],[]);"*"==g[0]&&(P.star=
g)});G(q(D,a.paths),H);V(a.aliases,F);if(!g("foreign-loader")){if(d)Y.push({config:a.config});else for(t in a.config)d=Ia(t,p),d.config=q(d.config||{},a.config[t]);a.cache&&(L(),X=a.cache,L(0,!!a.cache["*noref"]))}B("config",[a,v.rawConfig])};if(g("dojo-cdn")){var T=p.getElementsByTagName("script");n=0;for(var ba,fa,la,pa;n<T.length;)if(ba=T[n++],(la=ba.getAttribute("src"))&&(pa=la.match(/(((.*)\/)|^)dojo\.js(\W|$)/i))&&(fa=pa[3]||"",e.baseUrl=e.baseUrl||fa,O=ba),la=ba.getAttribute("data-dojo-config")||
ba.getAttribute("djConfig"))h=v.eval("({ "+la+" })","data-dojo-config"),O=ba}v.rawConfig={};N(e,1);g("dojo-cdn")&&((aa.dojo.location=fa)&&(fa+="/"),aa.dijit.location=fa+"../dijit/",aa.dojox.location=fa+"../dojox/");N(b,1);N(h,1);if(!g("foreign-loader"))var ha=function(g){E(function(){c(g.deps,J)})},qa=function(g,a,c,p,u){var t;if(f(g)){if((t=Ia(g,p,!0))&&t.executed)return t.result;throw r("undefinedModule",g);}d(g)||(N(g,0,p),g=a,a=c);if(d(g))if(g.length){c="require*"+z();for(var b,y=[],h=0;h<g.length;)b=
g[h++],y.push(Ia(b,p));t=q(Aa("",c,0,""),{injected:2,deps:y,def:a||l,require:p?p.require:v,gc:1});K[t.mid]=t;ha(t);var k=ma&&!0;E(function(){I(t,k)});t.executed||sa.push(t);ca()}else a&&a();return u},Ca=function(g){if(!g)return v;var a=g.require;a||(a=function(c,d,p){return qa(c,d,p,g,a)},g.require=q(a,v),a.module=g,a.toUrl=function(a){return Za(a,g)},a.toAbsMid=function(a){return Fa(a,g)});return a},sa=[],Ba=[],wa={},Da=function(g){g.injected=1;wa[g.mid]=1;g.url&&(wa[g.url]=g.pack||1);wb()},Ga=function(g){g.injected=
2;delete wa[g.mid];g.url&&delete wa[g.url];m(wa)&&$a()},Sa=v.idle=function(){return!Ba.length&&m(wa)&&!sa.length&&!ma};var ra=function(g,a){if(a)for(var c=0;c<a.length;c++)if(a[c][2].test(g))return a[c];return 0},da=function(g){var a=[],c,d;for(g=g.replace(/\\/g,"/").split("/");g.length;)c=g.shift(),".."==c&&a.length&&".."!=d?(a.pop(),d=a[a.length-1]):"."!=c&&a.push(d=c);return a.join("/")},Aa=function(g,a,c,d){return{pid:g,mid:a,pack:c,url:d,executed:0,def:0}},Ma=function(g,d,p,u,t,f,q,b,y,h){var k,
x,e,l;l=/^\./.test(g);if(/(^\/)|(\:)|(\.js$)/.test(g)||l&&!d)return Aa(0,g,0,g);g=da(l?d.mid+"/../"+g:g);if(/^\./.test(g))throw r("irrationalPath",g);h||l||!f.star||(e=ra(g,f.star[1]));!e&&d&&(e=(e=ra(d.mid,f))&&ra(g,e[1]));e&&(g=e[1]+g.substring(e[3]));d=(pa=g.match(/^([^\/]+)(\/(.+))?$/))?pa[1]:"";(k=p[d])?g=d+"/"+(x=pa[3]||k.main):d="";var z=0;c(b,function(c){var d=g.match(c[0]);d&&0<d.length&&(z=a(c[1])?g.replace(c[0],c[1]):c[1])});if(z)return Ma(z,0,p,u,t,f,q,b,y);if(p=u[g])return y?Aa(p.pid,
p.mid,p.pack,p.url):u[g];u=(e=ra(g,q))?e[1]+g.substring(e[3]):d?("/"===k.location.slice(-1)?k.location.slice(0,-1):k.location)+"/"+x:g;/(^\/)|(\:)/.test(u)||(u=t+u);return Aa(d,g,k,da(u+".js"))},Wa=function(g,a,c){return Ma(g,a,aa,K,v.baseUrl,P,H,F,void 0,c)};if(!g("foreign-loader"))var Ka=function(g,a,c){return g.normalize?g.normalize(a,function(g){return Fa(g,c)}):Fa(a,c)},La=0,Ia=function(g,a,c){var d,p;(d=g.match(/^(.+?)\!(.*)$/))?(p=Ia(d[1],a,c),5!==p.executed||p.load||Qa(p),p.load?(d=Ka(p,d[2],
a),g=p.mid+"!"+(p.dynamic?++La+"!":"")+d):(d=d[2],g=p.mid+"!"+ ++La+"!waitingForPlugin"),g={plugin:p,mid:g,req:Ca(a),prid:d}):g=Wa(g,a);return K[g.mid]||!c&&(K[g.mid]=g)};var Fa=v.toAbsMid=function(g,a){return Wa(g,a).mid},Za=v.toUrl=function(g,a){a=Wa(g+"/x",a);var c=a.url;return ia(0===a.pid?g:c.substring(0,c.length-5))};if(!g("foreign-loader")){var Ja={injected:2,executed:5,def:3,result:3};fa=function(g){return K[g]=q({mid:g},Ja)};var Ra=fa("require"),R=fa("exports"),Ha=fa("module"),va={},ea=0,
Qa=function(g){var a=g.result;g.dynamic=a.dynamic;g.normalize=a.normalize;g.load=a.load;return g},Na=function(g){var a={};c(g.loadQ,function(c){var d=Ka(g,c.prid,c.req.module),p=g.dynamic?c.mid.replace(/waitingForPlugin$/,d):g.mid+"!"+d,d=q(q({},c),{mid:p,prid:d,injected:0});K[p]&&K[p].injected||na(K[p]=d);a[c.mid]=K[p];Ga(c);delete K[c.mid]});g.loadQ=0;var d=function(g){for(var c=g.deps||[],d=0;d<c.length;d++)(g=a[c[d].mid])&&(c[d]=g)},p;for(p in K)d(K[p]);c(sa,d)},ka=function(g){v.trace("loader-finish-exec",
[g.mid]);g.executed=5;g.defOrder=ea++;g.loadQ&&(Qa(g),Na(g));for(n=0;n<sa.length;)sa[n]===g?sa.splice(n,1):n++;/^require\*/.test(g.mid)&&delete K[g.mid]},eb=[],I=function(g,c){if(4===g.executed)return v.trace("loader-circular-dependency",[eb.concat(g.mid).join("-\x3e")]),!g.def||c?va:g.cjs&&g.cjs.exports;if(!g.executed){if(!g.def)return va;var d=g.mid,p=g.deps||[],u,t=[],f=0;for(g.executed=4;u=p[f++];){u=u===Ra?Ca(g):u===R?g.cjs.exports:u===Ha?g.cjs:I(u,c);if(u===va)return g.executed=0,v.trace("loader-exec-module",
["abort",d]),va;t.push(u)}v.trace("loader-run-factory",[g.mid]);c=g.def;t=a(c)?c.apply(null,t):c;g.result=void 0===t&&g.cjs?g.cjs.exports:t;ka(g)}return g.result},ma=0,E=function(g){try{ma++,g()}catch(ub){throw ub;}finally{ma--}Sa()&&B("idle",[])},ca=function(){ma||E(function(){for(var g,a,c=0;c<sa.length;)g=ea,a=sa[c],I(a),g!=ea?c=0:c++})}}var ia="function"==typeof b.fixupUrl?b.fixupUrl:function(g){g+="";return g+(ja?(/\?/.test(g)?"\x26":"?")+ja:"")};void 0===g("dojo-loader-eval-hint-url")&&g.add("dojo-loader-eval-hint-url",
1);var na=function(g){var a=g.plugin;5!==a.executed||a.load||Qa(a);var c=function(a){g.result=a;Ga(g);ka(g);ca()};a.load?a.load(g.prid,g.req,c):a.loadQ?a.loadQ.push(g):(a.loadQ=[g],sa.unshift(a),J(a))},W=0,Z=function(a,c){g("config-stripStrict")&&(a=a.replace(/(["'])use strict\1/g,""));a===W?W.call(null):v.eval(a,g("dojo-loader-eval-hint-url")?c.url:c.mid)},J=function(a){var c=a.mid,d=a.url;if(!(a.executed||a.injected||wa[c]||a.url&&(a.pack&&wa[a.url]===a.pack||1==wa[a.url])))if(Da(a),a.plugin)na(a);
else{var p=function(){Oa(a);if(2!==a.injected){if(g("dojo-enforceDefine")){B("error",r("noDefine",a));return}Ga(a);q(a,Ja);v.trace("loader-define-nonmodule",[a.url])}ca()};(W=M[c]||M["url:"+a.url])?(v.trace("loader-inject",["cache",a.mid,d]),Z(W,a),p()):(v.trace("loader-inject",["script",a.mid,d]),v.injectUrl(ia(d),p,a))}},nb=function(g,c,d){v.trace("loader-define-module",[g.mid,c]);if(2===g.injected)return B("error",r("multipleDefine",g)),g;q(g,{deps:c,def:d,cjs:{id:g.mid,uri:g.url,exports:g.result=
{},setExports:function(a){g.cjs.exports=a},config:function(){return g.config}}});for(var p=0;c[p];p++)c[p]=Ia(c[p],g);Ga(g);a(d)||c.length||(g.result=d,ka(g));return g},Oa=function(g,a){for(var d=[],p,u;Ba.length;)u=Ba.shift(),a&&(u[0]=a.shift()),p=u[0]&&Ia(u[0])||g,d.push([p,u[1],u[2]]);L(g);c(d,function(g){ha(nb.apply(null,g))})},$a=l,wb=l;g("dom");if(g("dom")){var Ta=function(g,a,c,d){g.addEventListener(a,d,!1);return function(){g.removeEventListener(a,d,!1)}},yb=Ta(window,"load","onload",function(){v.pageLoaded=
1;try{"complete"!=p.readyState&&(p.readyState="complete")}catch(tb){}yb()}),T=p.getElementsByTagName("script");for(n=0;!O;)/^dojo/.test((ba=T[n++])&&ba.type)||(O=ba);v.injectUrl=function(g,a,c){c=c.node=p.createElement("script");var d=Ta(c,"load","onreadystatechange",function(g){g=g||window.event;var c=g.target||g.srcElement;if("load"===g.type||/complete|loaded/.test(c.readyState))d(),u(),a&&a()}),u=Ta(c,"error","onerror",function(a){d();u();B("error",r("scriptError",[g,a]))});c.type="text/javascript";
c.charset="utf-8";c.src=g;O.parentNode.insertBefore(c,O);return c}}v.log=l;v.trace=l;g("foreign-loader")?ba=l:(ba=function(g,c,d){var p=arguments.length,u=["require","exports","module"],t=[0,g,c];1==p?t=[0,a(g)?u:[],g]:2==p&&f(g)?t=[g,a(c)?u:[],c]:3==p&&(t=[g,c,d]);v.trace("loader-define",t.slice(0,2));(p=t[0]&&Ia(t[0]))&&!wa[p.mid]?ha(nb(p,t[1],t[2])):Ba.push(t)},ba.amd={vendor:"dojotoolkit.org"});q(q(v,e.loaderPatch),b.loaderPatch);t("error",function(g){try{if(console.error(g),g instanceof Error){for(var a in g)console.log(a+
":",g[a]);console.log(".")}}catch(mb){}});q(v,{uid:z,cache:M,packs:aa});w.define||(w.define=ba,w.require=v,g("foreign-loader")||(c(Y,function(g){N(g)}),ba=h.deps||b.deps||e.deps,b=h.callback||b.callback||e.callback,v.boot=ba||b?[ba||[],b]:0))})(function(b){return b.dojoConfig||b.djConfig||b.require||{}},{aliases:[[/^webgl-engine/,function(){return"esri/views/3d/webgl-engine"}],[/^engine/,function(){return"esri/views/3d/webgl-engine"}],[/^esri-hydra/,function(){return"esri"}]],async:1,baseUrl:"https://js.arcgis.com/4.9/dojo",
hasCache:{"config-deferredInstrumentation":0,"config-selectorEngine":"lite","config-tlmSiblingOfDojo":1,"dojo-built":1,"dojo-has-api":1,"dojo-loader":1,"dojo-undef-api":0,dom:1,"esri-built":1,"esri-featurelayer-webgl":1,"esri-promise-compatibility":1,"esri-promise-compatibility-deprecation-warnings":1,"host-browser":1},map:{globalize:{cldr:"cldrjs/dist/cldr","cldr/event":"cldrjs/dist/cldr/event","cldr/supplemental":"cldrjs/dist/cldr/supplemental","cldr/unresolved":"cldrjs/dist/cldr/unresolved"}},
packages:[{location:".",name:"dojo"},{location:"../dijit",name:"dijit"},{location:"../dojox",name:"dojox"},{location:"../dgrid",main:"OnDemandGrid",name:"dgrid"},{location:"../dstore",main:"Store",name:"dstore"},{location:"../esri",name:"esri"},{location:"../moment",main:"moment",name:"moment"},{location:"../@dojo",name:"@dojo"},{location:"../cldrjs",main:"dist/cldr",name:"cldrjs"},{location:"../globalize",main:"dist/globalize",name:"globalize"},{location:"../maquette",main:"dist/maquette.umd",name:"maquette"},
{location:"../maquette-css-transitions",main:"dist/maquette-css-transitions.umd",name:"maquette-css-transitions"},{location:"../maquette-jsx",main:"dist/maquette-jsx.umd",name:"maquette-jsx"},{location:"../tslib",main:"tslib",name:"tslib"}]});
require({cache:{"dojo/domReady":function(){define(["./global","./has"],function(b,e){function n(c){f.push(c);a&&h()}function h(){if(!d){for(d=!0;f.length;)try{f.shift()(l)}catch(x){console.error(x,"in domReady callback",x.stack)}d=!1;n._onQEmpty()}}var l=document,m={loaded:1,complete:1},k="string"!=typeof l.readyState,a=!!m[l.readyState],f=[],d;n.load=function(a,c,d){n(d)};n._Q=f;n._onQEmpty=function(){};k&&(l.readyState="loading");if(!a){var c=[],q=function(c){c=c||b.event;a||"readystatechange"==
c.type&&!m[l.readyState]||(k&&(l.readyState="complete"),a=1,h())};e=function(a,c){a.addEventListener(c,q,!1);f.push(function(){a.removeEventListener(c,q,!1)})};e(l,"DOMContentLoaded");e(b,"load");"onreadystatechange"in l?e(l,"readystatechange"):k||c.push(function(){return m[l.readyState]});if(c.length){var r=function(){if(!a){for(var d=c.length;d--;)if(c[d]()){q("poller");return}setTimeout(r,30)}};r()}}return n})},"dojo/global":function(){define(function(){return"undefined"!==typeof global&&"function"!==
typeof global?global:"undefined"!==typeof window?window:"undefined"!==typeof self?self:this})},"dojo/has":function(){define(["./global","require","module"],function(b,e,n){var h=e.has||function(){};if(!h("dojo-has-api")){var l=(e="undefined"!=typeof window&&"undefined"!=typeof location&&"undefined"!=typeof document&&window.location==location&&window.document==document)&&document,m=l&&l.createElement("DiV"),k=n.config&&n.config()||{},h=function(a){return"function"==typeof k[a]?k[a]=k[a](b,l,m):k[a]};
h.cache=k;h.add=function(a,f,d,c){("undefined"==typeof k[a]||c)&&(k[a]=f);return d&&h(a)};h.add("host-browser",e);h.add("dom",e)}h("host-browser")&&(h.add("touch","ontouchstart"in document||"onpointerdown"in document&&0<navigator.maxTouchPoints||window.navigator.msMaxTouchPoints),h.add("touch-events","ontouchstart"in document),h.add("pointer-events","pointerEnabled"in window.navigator?window.navigator.pointerEnabled:"PointerEvent"in window),h.add("device-width",screen.availWidth||innerWidth),n=document.createElement("form"),
h.add("dom-attributes-specified-flag",0<n.attributes.length&&40>n.attributes.length));h.clearElement=function(a){a.innerHTML="";return a};h.normalize=function(a,f){var d=a.match(/[\?:]|[^:\?]*/g),c=0,q=function(a){var f=d[c++];if(":"==f)return 0;if("?"==d[c++]){if(!a&&h(f))return q();q(!0);return q(a)}return f||0};return(a=q())&&f(a)};h.load=function(a,f,d){a?f([a],d):d()};return h})},"dojo/_base/browser":function(){require.has&&require.has.add("config-selectorEngine","acme");define("../ready ./kernel ./connect ./unload ./window ./event ./html ./NodeList ../query ./xhr ./fx".split(" "),
function(b){return b})},"dojo/ready":function(){define(["./_base/kernel","./has","require","./has!host-browser?./domReady","./_base/lang"],function(b,e,n,h,l){var m=0,k=[],a=0;e=function(){m=1;b._postLoad=b.config.afterOnLoad=!0;f()};var f=function(){if(!a){for(a=1;m&&(!h||0==h._Q.length)&&(n.idle?n.idle():1)&&k.length;){var c=k.shift();try{c()}catch(r){if(r.info=r.message,n.signal)n.signal("error",r);else throw r;}}a=0}};n.on&&n.on("idle",f);h&&(h._onQEmpty=f);var d=b.ready=b.addOnLoad=function(a,
c,d){var q=l._toArray(arguments);"number"!=typeof a?(d=c,c=a,a=1E3):q.shift();d=d?l.hitch.apply(b,q):function(){c()};d.priority=a;for(q=0;q<k.length&&a>=k[q].priority;q++);k.splice(q,0,d);f()},c=b.config.addOnLoad;if(c)d[l.isArray(c)?"apply":"call"](b,c);h?h(e):e();return d})},"dojo/_base/kernel":function(){define(["../global","../has","./config","require","module"],function(b,e,n,h,l){var m,k={},a={},f={config:n,global:b,dijit:k,dojox:a},k={dojo:["dojo",f],dijit:["dijit",k],dojox:["dojox",a]};l=
h.map&&h.map[l.id.match(/[^\/]+/)[0]];for(m in l)k[m]?k[m][0]=l[m]:k[m]=[l[m],{}];for(m in k)l=k[m],l[1]._scopeName=l[0],n.noGlobals||(b[l[0]]=l[1]);f.scopeMap=k;f.baseUrl=f.config.baseUrl=h.baseUrl;f.isAsync=h.async;f.locale=n.locale;b="$Rev: b27d4da $".match(/[0-9a-f]{7,}/);f.version={major:1,minor:14,patch:0,flag:"",revision:b?b[0]:NaN,toString:function(){var a=f.version;return a.major+"."+a.minor+"."+a.patch+a.flag+" ("+a.revision+")"}};e("csp-restrictions")||Function("d","d.eval \x3d function(){return d.global.eval ? d.global.eval(arguments[0]) : eval(arguments[0]);}")(f);
f.exit=function(){};e("host-webworker");"undefined"!=typeof console||(console={});b="assert count debug dir dirxml error group groupEnd info profile profileEnd time timeEnd trace warn log".split(" ");var d;for(e=0;d=b[e++];)console[d]?console[d]=Function.prototype.bind.call(console[d],console):function(){var a=d+"";console[a]="log"in console?function(){var c=Array.prototype.slice.call(arguments);c.unshift(a+":");console.log(c.join(" "))}:function(){};console[a]._fake=!0}();f.deprecated=f.experimental=
function(){};f._hasResource={};return f})},"dojo/_base/config":function(){define(["../global","../has","require"],function(b,e,n){b={};n=n.rawConfig;for(var h in n)b[h]=n[h];!b.locale&&"undefined"!=typeof navigator&&(h=navigator.languages&&navigator.languages.length?navigator.languages[0]:navigator.language||navigator.userLanguage)&&(b.locale=h.toLowerCase());return b})},"dojo/_base/lang":function(){define(["./kernel","../has","../sniff"],function(b,e){var n=function(a,f,d){d||(d=a[0]&&b.scopeMap[a[0]]?
b.scopeMap[a.shift()][1]:b.global);try{for(var c=0;c<a.length;c++){var q=a[c];if(!(q in d))if(f)d[q]={};else return;d=d[q]}return d}catch(r){}},h=Object.prototype.toString,l=function(a,f,d){return(d||[]).concat(Array.prototype.slice.call(a,f||0))},m=/\{([^\}]+)\}/g,k={_extraNames:[],_mixin:function(a,f,d){var c,q,b={};for(c in f)q=f[c],c in a&&(a[c]===q||c in b&&b[c]===q)||(a[c]=d?d(q):q);return a},mixin:function(a,f){a||(a={});for(var d=1,c=arguments.length;d<c;d++)k._mixin(a,arguments[d]);return a},
setObject:function(a,f,d){var c=a.split(".");a=c.pop();return(d=n(c,!0,d))&&a?d[a]=f:void 0},getObject:function(a,f,d){return a?n(a.split("."),f,d):d},exists:function(a,f){return void 0!==k.getObject(a,!1,f)},isString:function(a){return"string"==typeof a||a instanceof String},isArray:Array.isArray||function(a){return"[object Array]"==h.call(a)},isFunction:function(a){return"[object Function]"===h.call(a)},isObject:function(a){return void 0!==a&&(null===a||"object"==typeof a||k.isArray(a)||k.isFunction(a))},
isArrayLike:function(a){return!!a&&!k.isString(a)&&!k.isFunction(a)&&!(a.tagName&&"form"==a.tagName.toLowerCase())&&(k.isArray(a)||isFinite(a.length))},isAlien:function(a){return a&&!k.isFunction(a)&&/\{\s*\[native code\]\s*\}/.test(String(a))},extend:function(a,f){for(var d=1,c=arguments.length;d<c;d++)k._mixin(a.prototype,arguments[d]);return a},_hitchArgs:function(a,f){var d=k._toArray(arguments,2),c=k.isString(f);return function(){var q=k._toArray(arguments),r=c?(a||b.global)[f]:f;return r&&r.apply(a||
this,d.concat(q))}},hitch:function(a,f){if(2<arguments.length)return k._hitchArgs.apply(b,arguments);f||(f=a,a=null);if(k.isString(f)){a=a||b.global;if(!a[f])throw['lang.hitch: scope["',f,'"] is null (scope\x3d"',a,'")'].join("");return function(){return a[f].apply(a,arguments||[])}}return a?function(){return f.apply(a,arguments||[])}:f},delegate:function(){function a(){}return function(f,d){a.prototype=f;f=new a;a.prototype=null;d&&k._mixin(f,d);return f}}(),_toArray:e("ie")?function(){function a(a,
d,c){c=c||[];for(d=d||0;d<a.length;d++)c.push(a[d]);return c}return function(f){return(f.item?a:l).apply(this,arguments)}}():l,partial:function(a){return k.hitch.apply(b,[null].concat(k._toArray(arguments)))},clone:function(a){if(!a||"object"!=typeof a||k.isFunction(a))return a;if(a.nodeType&&"cloneNode"in a)return a.cloneNode(!0);if(a instanceof Date)return new Date(a.getTime());if(a instanceof RegExp)return new RegExp(a);var f,d,c;if(k.isArray(a))for(f=[],d=0,c=a.length;d<c;++d)d in a&&(f[d]=k.clone(a[d]));
else f=a.constructor?new a.constructor:{};return k._mixin(f,a,k.clone)},trim:String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},replace:function(a,f,d){return a.replace(d||m,k.isFunction(f)?f:function(a,d){return k.getObject(d,!1,f)})}};k.mixin(b,k);return k})},"dojo/sniff":function(){define(["./has"],function(b){if(b("host-browser")){var e=navigator,n=e.userAgent,e=e.appVersion,h=parseFloat(e);b.add("edge",parseFloat(n.split("Edge/")[1])||
void 0);b.add("webkit",!b("edge")&&parseFloat(n.split("WebKit/")[1])||void 0);b.add("chrome",!b("edge")&&!0&&parseFloat(n.split("Chrome/")[1])||void 0);b.add("safari",0<=e.indexOf("Safari")&&!b("chrome")&&!b("edge")?parseFloat(e.split("Version/")[1]):void 0);b.add("mac",0<=e.indexOf("Macintosh"));if(n.match(/(iPhone|iPod|iPad)/)){var l=RegExp.$1.replace(/P/,"p"),m=n.match(/OS ([\d_]+)/)?RegExp.$1:"1",m=parseFloat(m.replace(/_/,".").replace(/_/g,""));b.add(l,m);b.add("ios",m)}b.add("trident",parseFloat(e.split("Trident/")[1])||
void 0);b("webkit")||(0<=n.indexOf("Opera")&&b.add("opera",9.8<=h?parseFloat(n.split("Version/")[1])||h:h),0<=n.indexOf("Gecko")&&!b("trident")&&!b("edge")&&b.add("mozilla",h),b("mozilla")&&b.add("ff",parseFloat(n.split("Firefox/")[1]||n.split("Minefield/")[1])||void 0),document.all&&!b("opera")&&(n=parseFloat(e.split("MSIE ")[1])||void 0,(e=document.documentMode)&&5!=e&&Math.floor(n)!=e&&(n=e),b.add("ie",n)))}return b})},"dojo/_base/connect":function(){define("./kernel ../on ../topic ../aspect ./event ../mouse ./sniff ./lang ../keys".split(" "),
function(b,e,n,h,l,m,k,a){function f(c,d,p,f,g){f=a.hitch(p,f);if(!c||!c.addEventListener&&!c.attachEvent)return h.after(c||b.global,d,f,!0);"string"==typeof d&&"on"==d.substring(0,2)&&(d=d.substring(2));c||(c=b.global);if(!g)switch(d){case "keypress":d=x;break;case "mouseenter":d=m.enter;break;case "mouseleave":d=m.leave}return e(c,d,f,g)}function d(a){a.keyChar=a.charCode?String.fromCharCode(a.charCode):"";a.charOrCode=a.keyChar||a.keyCode}k.add("events-keypress-typed",function(){var a={charCode:0};
try{a=document.createEvent("KeyboardEvent"),(a.initKeyboardEvent||a.initKeyEvent).call(a,"keypress",!0,!0,null,!1,!1,!1,!1,9,3)}catch(w){}return 0==a.charCode&&!k("opera")});var c={106:42,111:47,186:59,187:43,188:44,189:45,190:46,191:47,192:96,219:91,220:92,221:93,222:39,229:113},q=k("mac")?"metaKey":"ctrlKey",r=function(c,f){f=a.mixin({},c,f);d(f);f.preventDefault=function(){c.preventDefault()};f.stopPropagation=function(){c.stopPropagation()};return f},x;x=k("events-keypress-typed")?function(a,
d){var p=e(a,"keydown",function(g){var a=g.keyCode,p=13!=a&&32!=a&&(27!=a||!k("ie"))&&(48>a||90<a)&&(96>a||111<a)&&(186>a||192<a)&&(219>a||222<a)&&229!=a;if(p||g.ctrlKey){p=p?0:a;if(g.ctrlKey){if(3==a||13==a)return d.call(g.currentTarget,g);p=95<p&&106>p?p-48:!g.shiftKey&&65<=p&&90>=p?p+32:c[p]||p}a=r(g,{type:"keypress",faux:!0,charCode:p});d.call(g.currentTarget,a);if(k("ie"))try{g.keyCode=a.keyCode}catch(A){}}}),f=e(a,"keypress",function(g){var a=g.charCode;g=r(g,{charCode:32<=a?a:0,faux:!0});return d.call(this,
g)});return{remove:function(){p.remove();f.remove()}}}:k("opera")?function(a,c){return e(a,"keypress",function(a){var d=a.which;3==d&&(d=99);d=32>d&&!a.shiftKey?0:d;a.ctrlKey&&!a.shiftKey&&65<=d&&90>=d&&(d+=32);return c.call(this,r(a,{charCode:d}))})}:function(a,c){return e(a,"keypress",function(a){d(a);return c.call(this,a)})};var z={_keypress:x,connect:function(a,c,d,q,g){var p=arguments,t=[],b=0;t.push("string"==typeof p[0]?null:p[b++],p[b++]);var y=p[b+1];t.push("string"==typeof y||"function"==
typeof y?p[b++]:null,p[b++]);for(y=p.length;b<y;b++)t.push(p[b]);return f.apply(this,t)},disconnect:function(a){a&&a.remove()},subscribe:function(c,d,p){return n.subscribe(c,a.hitch(d,p))},publish:function(a,c){return n.publish.apply(n,[a].concat(c))},connectPublisher:function(a,c,d){var p=function(){z.publish(a,arguments)};return d?z.connect(c,d,p):z.connect(c,p)},isCopyKey:function(a){return a[q]}};z.unsubscribe=z.disconnect;a.mixin(b,z);return z})},"dojo/on":function(){define(["require","./_base/kernel",
"./sniff"],function(b,e,n){function h(d,f,q,b,p){if(b=f.match(/(.*):(.*)/))return f=b[2],b=b[1],k.selector(b,f).call(p,d,q);n("touch")&&a.test(f)&&(q=r(q));if(d.addEventListener){var y=f in c,g=y?c[f]:f;d.addEventListener(g,q,y);return{remove:function(){d.removeEventListener(g,q,y)}}}throw Error("Target must be an event emitter");}function l(){this.cancelable=!1;this.defaultPrevented=!0}function m(){this.bubbles=!1}n("dom")&&n("touch");var k=function(a,c,d,f){return"function"!=typeof a.on||"function"==
typeof c||a.nodeType?k.parse(a,c,d,h,f,this):a.on(c,d)};k.pausable=function(a,c,d,f){var p;a=k(a,c,function(){if(!p)return d.apply(this,arguments)},f);a.pause=function(){p=!0};a.resume=function(){p=!1};return a};k.once=function(a,c,d,f){var p=k(a,c,function(){p.remove();return d.apply(this,arguments)});return p};k.parse=function(a,c,d,f,p,q){var g;if(c.call)return c.call(q,a,d);c instanceof Array?g=c:-1<c.indexOf(",")&&(g=c.split(/\s*,\s*/));if(g){var u=[];c=0;for(var t;t=g[c++];)u.push(k.parse(a,
t,d,f,p,q));u.remove=function(){for(var g=0;g<u.length;g++)u[g].remove()};return u}return f(a,c,d,p,q)};var a=/^touch/;k.matches=function(a,c,d,f,p){p=p&&"function"==typeof p.matches?p:e.query;f=!1!==f;1!=a.nodeType&&(a=a.parentNode);for(;!p.matches(a,c,d);)if(a==d||!1===f||!(a=a.parentNode)||1!=a.nodeType)return!1;return a};k.selector=function(a,c,d){return function(f,p){function q(c){return k.matches(c,a,f,d,g)}var g="function"==typeof a?{matches:a}:this,u=c.bubble;return u?k(f,u(q),p):k(f,c,function(g){var a=
q(g.target);if(a)return g.selectorTarget=a,p.call(a,g)})}};var f=[].slice,d=k.emit=function(a,c,d){var q=f.call(arguments,2),p="on"+c;if("parentNode"in a){var b=q[0]={},g;for(g in d)b[g]=d[g];b.preventDefault=l;b.stopPropagation=m;b.target=a;b.type=c;d=b}do a[p]&&a[p].apply(a,q);while(d&&d.bubbles&&(a=a.parentNode));return d&&d.cancelable&&d},c={};k.emit=function(a,c,f){if(a.dispatchEvent&&document.createEvent){var q=(a.ownerDocument||document).createEvent("HTMLEvents");q.initEvent(c,!!f.bubbles,
!!f.cancelable);for(var p in f)p in q||(q[p]=f[p]);return a.dispatchEvent(q)&&q}return d.apply(k,arguments)};if(n("touch"))var q=window.orientation,r=function(a){return function(c){var d=c.corrected;if(!d){var f=c.type;try{delete c.type}catch(g){}if(c.type){var d={},p;for(p in c)d[p]=c[p];d.preventDefault=function(){c.preventDefault()};d.stopPropagation=function(){c.stopPropagation()}}else d=c,d.type=f;c.corrected=d;if("resize"==f){if(q==window.orientation)return null;q=window.orientation;d.type=
"orientationchange";return a.call(this,d)}"rotation"in d||(d.rotation=0,d.scale=1);if(window.TouchEvent&&c instanceof TouchEvent){var f=d.changedTouches[0],b;for(b in f)delete d[b],d[b]=f[b]}}return a.call(this,d)}};return k})},"dojo/topic":function(){define(["./Evented"],function(b){var e=new b;return{publish:function(b,h){return e.emit.apply(e,arguments)},subscribe:function(b,h){return e.on.apply(e,arguments)}}})},"dojo/Evented":function(){define(["./aspect","./on"],function(b,e){function n(){}
var h=b.after;n.prototype={on:function(b,m){return e.parse(this,b,m,function(b,a){return h(b,"on"+a,m,!0)})},emit:function(b,h){var k=[this];k.push.apply(k,arguments);return e.emit.apply(e,k)}};return n})},"dojo/aspect":function(){define([],function(){function b(b,a,f,d){var c=b[a],q="around"==a,r;if(q){var h=f(function(){return c.advice(this,arguments)});r={remove:function(){h&&(h=b=f=null)},advice:function(a,d){return h?h.apply(a,d):c.advice(a,d)}}}else r={remove:function(){if(r.advice){var c=r.previous,
d=r.next;d||c?(c?c.next=d:b[a]=d,d&&(d.previous=c)):delete b[a];b=f=r.advice=null}},id:b.nextId++,advice:f,receiveArguments:d};if(c&&!q)if("after"==a){for(;c.next&&(c=c.next););c.next=r;r.previous=c}else"before"==a&&(b[a]=r,r.next=c,c.previous=r);else b[a]=r;return r}function e(h){return function(a,f,d,c){var q=a[f],r;q&&q.target==a||(a[f]=r=function(){for(var a=r.nextId,c=arguments,d=r.before;d;)d.advice&&(c=d.advice.apply(this,c)||c),d=d.next;if(r.around)var f=r.around.advice(this,c);for(d=r.after;d&&
d.id<a;){if(d.advice)if(d.receiveArguments)var p=d.advice.apply(this,c),f=p===n?f:p;else f=d.advice.call(this,f,c);d=d.next}return f},q&&(r.around={advice:function(a,c){return q.apply(a,c)}}),r.target=a,r.nextId=r.nextId||0);a=b(r||q,h,d,c);d=null;return a}}var n,h=e("after"),l=e("before"),m=e("around");return{before:l,around:m,after:h}})},"dojo/_base/event":function(){define(["./kernel","../on","../has","../dom-geometry"],function(b,e,n,h){if(e._fixEvent){var l=e._fixEvent;e._fixEvent=function(b,
k){(b=l(b,k))&&h.normalizeEvent(b);return b}}n={fix:function(b,h){return e._fixEvent?e._fixEvent(b,h):b},stop:function(b){b.preventDefault();b.stopPropagation()}};b.fixEvent=n.fix;b.stopEvent=n.stop;return n})},"dojo/dom-geometry":function(){define(["./sniff","./_base/window","./dom","./dom-style"],function(b,e,n,h){function l(a,c,f,b,h,k){k=k||"px";a=a.style;isNaN(c)||(a.left=c+k);isNaN(f)||(a.top=f+k);0<=b&&(a.width=b+k);0<=h&&(a.height=h+k)}function m(a){return"button"==a.tagName.toLowerCase()||
"input"==a.tagName.toLowerCase()&&"button"==(a.getAttribute("type")||"").toLowerCase()}function k(d){return"border-box"==a.boxModel||"table"==d.tagName.toLowerCase()||m(d)}var a={boxModel:"content-box"};b("ie")&&(a.boxModel="BackCompat"==document.compatMode?"border-box":"content-box");a.getPadExtents=function(a,c){a=n.byId(a);var d=c||h.getComputedStyle(a),f=h.toPixelValue;c=f(a,d.paddingLeft);var b=f(a,d.paddingTop),k=f(a,d.paddingRight);a=f(a,d.paddingBottom);return{l:c,t:b,r:k,b:a,w:c+k,h:b+a}};
a.getBorderExtents=function(a,c){a=n.byId(a);var d=h.toPixelValue,f=c||h.getComputedStyle(a);c="none"!=f.borderLeftStyle?d(a,f.borderLeftWidth):0;var b="none"!=f.borderTopStyle?d(a,f.borderTopWidth):0,k="none"!=f.borderRightStyle?d(a,f.borderRightWidth):0;a="none"!=f.borderBottomStyle?d(a,f.borderBottomWidth):0;return{l:c,t:b,r:k,b:a,w:c+k,h:b+a}};a.getPadBorderExtents=function(d,c){d=n.byId(d);var f=c||h.getComputedStyle(d);c=a.getPadExtents(d,f);d=a.getBorderExtents(d,f);return{l:c.l+d.l,t:c.t+
d.t,r:c.r+d.r,b:c.b+d.b,w:c.w+d.w,h:c.h+d.h}};a.getMarginExtents=function(a,c){a=n.byId(a);var d=c||h.getComputedStyle(a),f=h.toPixelValue;c=f(a,d.marginLeft);var b=f(a,d.marginTop),k=f(a,d.marginRight);a=f(a,d.marginBottom);return{l:c,t:b,r:k,b:a,w:c+k,h:b+a}};a.getMarginBox=function(d,c){d=n.byId(d);c=c||h.getComputedStyle(d);c=a.getMarginExtents(d,c);var f=d.offsetLeft-c.l,r=d.offsetTop-c.t,k=d.parentNode,e=h.toPixelValue;8==b("ie")&&k&&(k=h.getComputedStyle(k),f-="none"!=k.borderLeftStyle?e(d,
k.borderLeftWidth):0,r-="none"!=k.borderTopStyle?e(d,k.borderTopWidth):0);return{l:f,t:r,w:d.offsetWidth+c.w,h:d.offsetHeight+c.h}};a.getContentBox=function(d,c){d=n.byId(d);var f=c||h.getComputedStyle(d);c=d.clientWidth;var r,k=a.getPadExtents(d,f);r=a.getBorderExtents(d,f);var f=d.offsetLeft+k.l+r.l,e=d.offsetTop+k.t+r.t;c?r=d.clientHeight:(c=d.offsetWidth-r.w,r=d.offsetHeight-r.h);if(8==b("ie")){var l=d.parentNode,m=h.toPixelValue;l&&(l=h.getComputedStyle(l),f-="none"!=l.borderLeftStyle?m(d,l.borderLeftWidth):
0,e-="none"!=l.borderTopStyle?m(d,l.borderTopWidth):0)}return{l:f,t:e,w:c-k.w,h:r-k.h}};a.setContentSize=function(d,c,f){d=n.byId(d);var b=c.w;c=c.h;k(d)&&(f=a.getPadBorderExtents(d,f),0<=b&&(b+=f.w),0<=c&&(c+=f.h));l(d,NaN,NaN,b,c)};var f={l:0,t:0,w:0,h:0};a.setMarginBox=function(d,c,q){d=n.byId(d);var r=q||h.getComputedStyle(d);q=c.w;var e=c.h,z=k(d)?f:a.getPadBorderExtents(d,r),r=a.getMarginExtents(d,r);if(b("webkit")&&m(d)){var v=d.style;0<=q&&!v.width&&(v.width="4px");0<=e&&!v.height&&(v.height=
"4px")}0<=q&&(q=Math.max(q-z.w-r.w,0));0<=e&&(e=Math.max(e-z.h-r.h,0));l(d,c.l,c.t,q,e)};a.isBodyLtr=function(a){a=a||e.doc;return"ltr"==(e.body(a).dir||a.documentElement.dir||"ltr").toLowerCase()};a.docScroll=function(d){d=d||e.doc;var c=e.doc.parentWindow||e.doc.defaultView;return"pageXOffset"in c?{x:c.pageXOffset,y:c.pageYOffset}:(c=d.documentElement)&&{x:a.fixIeBiDiScrollLeft(c.scrollLeft||0,d),y:c.scrollTop||0}};a.getIeDocumentElementOffset=function(a){return{x:0,y:0}};a.fixIeBiDiScrollLeft=
function(d,c){c=c||e.doc;var f=b("ie");if(f&&!a.isBodyLtr(c)){c=c.documentElement;var h=e.global;6==f&&h.frameElement&&c.scrollHeight>c.clientHeight&&(d+=c.clientLeft);return 8>f?d+c.clientWidth-c.scrollWidth:-d}return d};a.position=function(d,c){d=n.byId(d);e.body(d.ownerDocument);var f=d.getBoundingClientRect(),f={x:f.left,y:f.top,w:f.right-f.left,h:f.bottom-f.top};9>b("ie")&&(f.x-=0,f.y-=0);c&&(d=a.docScroll(d.ownerDocument),f.x+=d.x,f.y+=d.y);return f};a.getMarginSize=function(d,c){d=n.byId(d);
c=a.getMarginExtents(d,c||h.getComputedStyle(d));d=d.getBoundingClientRect();return{w:d.right-d.left+c.w,h:d.bottom-d.top+c.h}};a.normalizeEvent=function(d){"layerX"in d||(d.layerX=d.offsetX,d.layerY=d.offsetY);if(!("pageX"in d)){var c=d.target,c=c&&c.ownerDocument||document,f=c.documentElement;d.pageX=d.clientX+a.fixIeBiDiScrollLeft(f.scrollLeft||0,c);d.pageY=d.clientY+(f.scrollTop||0)}};return a})},"dojo/_base/window":function(){define(["./kernel","./lang","../sniff"],function(b,e,n){var h={global:b.global,
doc:b.global.document||null,body:function(h){h=h||b.doc;return h.body||h.getElementsByTagName("body")[0]},setContext:function(e,m){b.global=h.global=e;b.doc=h.doc=m},withGlobal:function(e,m,k,a){var f=b.global;try{return b.global=h.global=e,h.withDoc.call(null,e.document,m,k,a)}finally{b.global=h.global=f}},withDoc:function(e,m,k,a){var f=h.doc,d=n("ie"),c,q,r;try{return b.doc=h.doc=e,b.isQuirks=0,n("ie")&&(r=e.parentWindow)&&r.navigator&&(c=parseFloat(r.navigator.appVersion.split("MSIE ")[1])||void 0,
(q=e.documentMode)&&5!=q&&Math.floor(c)!=q&&(c=q),b.isIE=n.add("ie",c,!0,!0)),k&&"string"==typeof m&&(m=k[m]),m.apply(k,a||[])}finally{b.doc=h.doc=f,b.isQuirks=0,b.isIE=n.add("ie",d,!0,!0)}}};e.mixin(b,h);return h})},"dojo/dom":function(){define(["./sniff","./_base/window","./_base/kernel"],function(b,e,n){if(7>=b("ie"))try{document.execCommand("BackgroundImageCache",!1,!0)}catch(m){}var h={};b("ie")?h.byId=function(b,h){if("string"!=typeof b)return b;var a=h||e.doc;h=b&&a.getElementById(b);if(!h||
h.attributes.id.value!=b&&h.id!=b){a=a.all[b];if(!a||a.nodeName)a=[a];for(var f=0;h=a[f++];)if(h.attributes&&h.attributes.id&&h.attributes.id.value==b||h.id==b)return h}else return h}:h.byId=function(b,h){return("string"==typeof b?(h||e.doc).getElementById(b):b)||null};n=n.global.document||null;b.add("dom-contains",!(!n||!n.contains));h.isDescendant=b("dom-contains")?function(b,k){return!(!(k=h.byId(k))||!k.contains(h.byId(b)))}:function(b,k){try{for(b=h.byId(b),k=h.byId(k);b;){if(b==k)return!0;b=
b.parentNode}}catch(a){}return!1};b.add("css-user-select",function(b,h,a){if(!a)return!1;b=a.style;h=["Khtml","O","Moz","Webkit"];a=h.length;var f="userSelect";do if("undefined"!==typeof b[f])return f;while(a--&&(f=h[a]+"UserSelect"));return!1});var l=b("css-user-select");h.setSelectable=l?function(b,k){h.byId(b).style[l]=k?"":"none"}:function(b,k){b=h.byId(b);var a=b.getElementsByTagName("*"),f=a.length;if(k)for(b.removeAttribute("unselectable");f--;)a[f].removeAttribute("unselectable");else for(b.setAttribute("unselectable",
"on");f--;)a[f].setAttribute("unselectable","on")};return h})},"dojo/dom-style":function(){define(["./sniff","./dom","./_base/window"],function(b,e,n){function h(a,d,f){d=d.toLowerCase();if("auto"==f){if("height"==d)return a.offsetHeight;if("width"==d)return a.offsetWidth}if("fontweight"==d)switch(f){case 700:return"bold";default:return"normal"}d in c||(c[d]=q.test(d));return c[d]?k(a,f):f}var l,m={};l=b("webkit")?function(a){var c;if(1==a.nodeType){var d=a.ownerDocument.defaultView;c=d.getComputedStyle(a,
null);!c&&a.style&&(a.style.display="",c=d.getComputedStyle(a,null))}return c||{}}:b("ie")&&9>b("ie")?function(a){return 1==a.nodeType&&a.currentStyle?a.currentStyle:{}}:function(a){if(1===a.nodeType){var c=a.ownerDocument.defaultView;return(c.opener?c:n.global.window).getComputedStyle(a,null)}return{}};m.getComputedStyle=l;var k;k=b("ie")?function(a,c){if(!c)return 0;if("medium"==c)return 4;if(c.slice&&"px"==c.slice(-2))return parseFloat(c);var d=a.style,f=a.runtimeStyle,p=d.left,b=f.left;f.left=
a.currentStyle.left;try{d.left=c,c=d.pixelLeft}catch(g){c=0}d.left=p;f.left=b;return c}:function(a,c){return parseFloat(c)||0};m.toPixelValue=k;var a=function(a,c){try{return a.filters.item("DXImageTransform.Microsoft.Alpha")}catch(v){return c?{}:null}},f=9>b("ie")||(b("ie"),0)?function(c){try{return a(c).Opacity/100}catch(z){return 1}}:function(a){return l(a).opacity},d=9>b("ie")||(b("ie"),0)?function(c,f){""===f&&(f=1);var b=100*f;1===f?(c.style.zoom="",a(c)&&(c.style.filter=c.style.filter.replace(/\s*progid:DXImageTransform.Microsoft.Alpha\([^\)]+?\)/i,
""))):(c.style.zoom=1,a(c)?a(c,1).Opacity=b:c.style.filter+=" progid:DXImageTransform.Microsoft.Alpha(Opacity\x3d"+b+")",a(c,1).Enabled=!0);if("tr"==c.tagName.toLowerCase())for(c=c.firstChild;c;c=c.nextSibling)"td"==c.tagName.toLowerCase()&&d(c,f);return f}:function(a,c){return a.style.opacity=c},c={left:!0,top:!0},q=/margin|padding|width|height|max|min|offset/,r={cssFloat:1,styleFloat:1,"float":1};m.get=function(a,c){var d=e.byId(a),b=arguments.length;if(2==b&&"opacity"==c)return f(d);c=r[c]?"cssFloat"in
d.style?"cssFloat":"styleFloat":c;var p=m.getComputedStyle(d);return 1==b?p:h(d,c,p[c]||d.style[c])};m.set=function(a,c,f){var b=e.byId(a),p=arguments.length,q="opacity"==c;c=r[c]?"cssFloat"in b.style?"cssFloat":"styleFloat":c;if(3==p)return q?d(b,f):b.style[c]=f;for(var g in c)m.set(a,g,c[g]);return m.getComputedStyle(b)};return m})},"dojo/mouse":function(){define(["./_base/kernel","./on","./has","./dom","./_base/window"],function(b,e,n,h,l){function m(b,a){var f=function(d,c){return e(d,b,function(f){if(a)return a(f,
c);if(!h.isDescendant(f.relatedTarget,d))return c.call(this,f)})};f.bubble=function(a){return m(b,function(c,d){var f=a(c.target),b=c.relatedTarget;if(f&&f!=(b&&1==b.nodeType&&a(b)))return d.call(f,c)})};return f}n={LEFT:0,MIDDLE:1,RIGHT:2,isButton:function(b,a){return b.button==a},isLeft:function(b){return 0==b.button},isMiddle:function(b){return 1==b.button},isRight:function(b){return 2==b.button}};b.mouseButtons=n;return{_eventHandler:m,enter:m("mouseover"),leave:m("mouseout"),wheel:"mousewheel",
isLeft:n.isLeft,isMiddle:n.isMiddle,isRight:n.isRight}})},"dojo/_base/sniff":function(){define(["./kernel","./lang","../sniff"],function(b,e,n){if(!n("host-browser"))return n;b._name="browser";e.mixin(b,{isBrowser:!0,isFF:n("ff"),isIE:n("ie"),isKhtml:0,isWebKit:n("webkit"),isMozilla:n("mozilla"),isMoz:n("mozilla"),isOpera:n("opera"),isSafari:n("safari"),isChrome:n("chrome"),isMac:n("mac"),isIos:n("ios"),isAndroid:0,isWii:0,isQuirks:0,isAir:0});return n})},"dojo/keys":function(){define(["./_base/kernel",
"./sniff"],function(b,e){return b.keys={BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,META:e("webkit")?91:224,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,HELP:47,LEFT_WINDOW:91,RIGHT_WINDOW:92,SELECT:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_PLUS:107,NUMPAD_ENTER:108,
NUMPAD_MINUS:109,NUMPAD_PERIOD:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,NUM_LOCK:144,SCROLL_LOCK:145,UP_DPAD:175,DOWN_DPAD:176,LEFT_DPAD:177,RIGHT_DPAD:178,copyKey:e("mac")?e("safari")?91:224:17}})},"dojo/_base/unload":function(){define(["./kernel","./lang","../on"],function(b,e,n){var h=window,l={addOnWindowUnload:function(l,k){b.windowUnloaded||n(h,"unload",b.windowUnloaded=function(){});n(h,"unload",e.hitch(l,
k))},addOnUnload:function(b,k){n(h,"beforeunload",e.hitch(b,k))}};b.addOnWindowUnload=l.addOnWindowUnload;b.addOnUnload=l.addOnUnload;return l})},"dojo/_base/html":function(){define("./kernel ../dom ../dom-style ../dom-attr ../dom-prop ../dom-class ../dom-construct ../dom-geometry".split(" "),function(b,e,n,h,l,m,k,a){b.byId=e.byId;b.isDescendant=e.isDescendant;b.setSelectable=e.setSelectable;b.getAttr=h.get;b.setAttr=h.set;b.hasAttr=h.has;b.removeAttr=h.remove;b.getNodeProp=h.getNodeProp;b.attr=
function(a,d,c){return 2==arguments.length?h["string"==typeof d?"get":"set"](a,d):h.set(a,d,c)};b.hasClass=m.contains;b.addClass=m.add;b.removeClass=m.remove;b.toggleClass=m.toggle;b.replaceClass=m.replace;b._toDom=b.toDom=k.toDom;b.place=k.place;b.create=k.create;b.empty=function(a){k.empty(a)};b._destroyElement=b.destroy=function(a){k.destroy(a)};b._getPadExtents=b.getPadExtents=a.getPadExtents;b._getBorderExtents=b.getBorderExtents=a.getBorderExtents;b._getPadBorderExtents=b.getPadBorderExtents=
a.getPadBorderExtents;b._getMarginExtents=b.getMarginExtents=a.getMarginExtents;b._getMarginSize=b.getMarginSize=a.getMarginSize;b._getMarginBox=b.getMarginBox=a.getMarginBox;b.setMarginBox=a.setMarginBox;b._getContentBox=b.getContentBox=a.getContentBox;b.setContentSize=a.setContentSize;b._isBodyLtr=b.isBodyLtr=a.isBodyLtr;b._docScroll=b.docScroll=a.docScroll;b._getIeDocumentElementOffset=b.getIeDocumentElementOffset=a.getIeDocumentElementOffset;b._fixIeBiDiScrollLeft=b.fixIeBiDiScrollLeft=a.fixIeBiDiScrollLeft;
b.position=a.position;b.marginBox=function(f,d){return d?a.setMarginBox(f,d):a.getMarginBox(f)};b.contentBox=function(f,d){return d?a.setContentSize(f,d):a.getContentBox(f)};b.coords=function(f,d){b.deprecated("dojo.coords()","Use dojo.position() or dojo.marginBox().");f=e.byId(f);var c=n.getComputedStyle(f),c=a.getMarginBox(f,c);f=a.position(f,d);c.x=f.x;c.y=f.y;return c};b.getProp=l.get;b.setProp=l.set;b.prop=function(a,d,c){return 2==arguments.length?l["string"==typeof d?"get":"set"](a,d):l.set(a,
d,c)};b.getStyle=n.get;b.setStyle=n.set;b.getComputedStyle=n.getComputedStyle;b.__toPixelValue=b.toPixelValue=n.toPixelValue;b.style=function(a,d,c){switch(arguments.length){case 1:return n.get(a);case 2:return n["string"==typeof d?"get":"set"](a,d)}return n.set(a,d,c)};return b})},"dojo/dom-attr":function(){define("exports ./sniff ./_base/lang ./dom ./dom-style ./dom-prop".split(" "),function(b,e,n,h,l,m){function k(a,c){a=a.getAttributeNode&&a.getAttributeNode(c);return!!a&&a.specified}var a={innerHTML:1,
textContent:1,className:1,htmlFor:e("ie"),value:1},f={classname:"class",htmlfor:"for",tabindex:"tabIndex",readonly:"readOnly"};b.has=function(d,c){var b=c.toLowerCase();return a[m.names[b]||c]||k(h.byId(d),f[b]||c)};b.get=function(d,c){d=h.byId(d);var b=c.toLowerCase(),r=m.names[b]||c,e=d[r];if(a[r]&&"undefined"!=typeof e)return e;if("textContent"==r)return m.get(d,r);if("href"!=r&&("boolean"==typeof e||n.isFunction(e)))return e;c=f[b]||c;return k(d,c)?d.getAttribute(c):null};b.set=function(d,c,q){d=
h.byId(d);if(2==arguments.length){for(var r in c)b.set(d,r,c[r]);return d}r=c.toLowerCase();var k=m.names[r]||c,e=a[k];if("style"==k&&"string"!=typeof q)return l.set(d,q),d;if(e||"boolean"==typeof q||n.isFunction(q))return m.set(d,c,q);d.setAttribute(f[r]||c,q);return d};b.remove=function(a,c){h.byId(a).removeAttribute(f[c.toLowerCase()]||c)};b.getNodeProp=function(a,c){a=h.byId(a);var d=c.toLowerCase(),b=m.names[d]||c;if(b in a&&"href"!=b)return a[b];c=f[d]||c;return k(a,c)?a.getAttribute(c):null}})},
"dojo/dom-prop":function(){define("exports ./_base/kernel ./sniff ./_base/lang ./dom ./dom-style ./dom-construct ./_base/connect".split(" "),function(b,e,n,h,l,m,k,a){var f={},d=1,c=e._scopeName+"attrid";b.names={"class":"className","for":"htmlFor",tabindex:"tabIndex",readonly:"readOnly",colspan:"colSpan",frameborder:"frameBorder",rowspan:"rowSpan",textcontent:"textContent",valuetype:"valueType"};b.get=function(a,c){a=l.byId(a);var d=c.toLowerCase();return a[b.names[d]||c]};b.set=function(q,r,e){q=
l.byId(q);if(2==arguments.length&&"string"!=typeof r){for(var x in r)b.set(q,x,r[x]);return q}x=r.toLowerCase();x=b.names[x]||r;if("style"==x&&"string"!=typeof e)return m.set(q,e),q;if("innerHTML"==x)return n("ie")&&q.tagName.toLowerCase()in{col:1,colgroup:1,table:1,tbody:1,tfoot:1,thead:1,tr:1,title:1}?(k.empty(q),q.appendChild(k.toDom(e,q.ownerDocument))):q[x]=e,q;if(h.isFunction(e)){var v=q[c];v||(v=d++,q[c]=v);f[v]||(f[v]={});var w=f[v][x];if(w)a.disconnect(w);else try{delete q[x]}catch(p){}e?
f[v][x]=a.connect(q,x,e):q[x]=null;return q}q[x]=e;return q}})},"dojo/dom-construct":function(){define("exports ./_base/kernel ./sniff ./_base/window ./dom ./dom-attr".split(" "),function(b,e,n,h,l,m){function k(a,c){var g=c.parentNode;g&&g.insertBefore(a,c)}function a(a){if("innerHTML"in a)try{a.innerHTML="";return}catch(g){}for(var c;c=a.lastChild;)a.removeChild(c)}var f={option:["select"],tbody:["table"],thead:["table"],tfoot:["table"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table",
"thead","tr"],legend:["fieldset"],caption:["table"],colgroup:["table"],col:["table","colgroup"],li:["ul"]},d=/<\s*([\w\:]+)/,c={},q=0,r="__"+e._scopeName+"ToDomId",x;for(x in f)f.hasOwnProperty(x)&&(e=f[x],e.pre="option"==x?'\x3cselect multiple\x3d"multiple"\x3e':"\x3c"+e.join("\x3e\x3c")+"\x3e",e.post="\x3c/"+e.reverse().join("\x3e\x3c/")+"\x3e");var z;8>=n("ie")&&(z=function(a){a.__dojo_html5_tested="yes";var c=v("div",{innerHTML:"\x3cnav\x3ea\x3c/nav\x3e",style:{visibility:"hidden"}},a.body);1!==
c.childNodes.length&&"abbr article aside audio canvas details figcaption figure footer header hgroup mark meter nav output progress section summary time video".replace(/\b\w+\b/g,function(g){a.createElement(g)});w(c)});b.toDom=function(a,b){b=b||h.doc;var g=b[r];g||(b[r]=g=++q+"",c[g]=b.createElement("div"));8>=n("ie")&&!b.__dojo_html5_tested&&b.body&&z(b);a+="";var p=a.match(d),t=p?p[1].toLowerCase():"",g=c[g];if(p&&f[t])for(p=f[t],g.innerHTML=p.pre+a+p.post,a=p.length;a;--a)g=g.firstChild;else g.innerHTML=
a;if(1==g.childNodes.length)return g.removeChild(g.firstChild);for(a=b.createDocumentFragment();b=g.firstChild;)a.appendChild(b);return a};b.place=function(a,c,g){c=l.byId(c);"string"==typeof a&&(a=/^\s*</.test(a)?b.toDom(a,c.ownerDocument):l.byId(a));if("number"==typeof g){var d=c.childNodes;!d.length||d.length<=g?c.appendChild(a):k(a,d[0>g?0:g])}else switch(g){case "before":k(a,c);break;case "after":g=a;(d=c.parentNode)&&(d.lastChild==c?d.appendChild(g):d.insertBefore(g,c.nextSibling));break;case "replace":c.parentNode.replaceChild(a,
c);break;case "only":b.empty(c);c.appendChild(a);break;case "first":if(c.firstChild){k(a,c.firstChild);break}default:c.appendChild(a)}return a};var v=b.create=function(a,c,g,d){var p=h.doc;g&&(g=l.byId(g),p=g.ownerDocument);"string"==typeof a&&(a=p.createElement(a));c&&m.set(a,c);g&&b.place(a,g,d);return a};b.empty=function(c){a(l.byId(c))};var w=b.destroy=function(c){if(c=l.byId(c)){var d=c;c=c.parentNode;d.firstChild&&a(d);c&&(n("ie")&&c.canHaveChildren&&"removeNode"in d?d.removeNode(!1):c.removeChild(d))}}})},
"dojo/dom-class":function(){define(["./_base/lang","./_base/array","./dom"],function(b,e,n){function h(a){if("string"==typeof a||a instanceof String){if(a&&!m.test(a))return k[0]=a,k;a=a.split(m);a.length&&!a[0]&&a.shift();a.length&&!a[a.length-1]&&a.pop();return a}return a?e.filter(a,function(a){return a}):[]}var l,m=/\s+/,k=[""],a={};return l={contains:function(a,d){return 0<=(" "+n.byId(a).className+" ").indexOf(" "+d+" ")},add:function(a,d){a=n.byId(a);d=h(d);var c=a.className,f,c=c?" "+c+" ":
" ";f=c.length;for(var b=0,k=d.length,e;b<k;++b)(e=d[b])&&0>c.indexOf(" "+e+" ")&&(c+=e+" ");f<c.length&&(a.className=c.substr(1,c.length-2))},remove:function(a,d){a=n.byId(a);var c;if(void 0!==d){d=h(d);c=" "+a.className+" ";for(var f=0,r=d.length;f<r;++f)c=c.replace(" "+d[f]+" "," ");c=b.trim(c)}else c="";a.className!=c&&(a.className=c)},replace:function(f,d,c){f=n.byId(f);a.className=f.className;l.remove(a,c);l.add(a,d);f.className!==a.className&&(f.className=a.className)},toggle:function(a,d,
c){a=n.byId(a);if(void 0===c){d=h(d);for(var f=0,b=d.length,k;f<b;++f)k=d[f],l[l.contains(a,k)?"remove":"add"](a,k)}else l[c?"add":"remove"](a,d);return c}}})},"dojo/_base/array":function(){define(["./kernel","../has","./lang"],function(b,e,n){function h(a){return k[a]=new Function("item","index","array",a)}function l(a){var c=!a;return function(d,f,b){var q=0,r=d&&d.length||0,e;r&&"string"==typeof d&&(d=d.split(""));"string"==typeof f&&(f=k[f]||h(f));if(b)for(;q<r;++q){if(e=!f.call(b,d[q],q,d),a^
e)return!e}else for(;q<r;++q)if(e=!f(d[q],q,d),a^e)return!e;return c}}function m(d){var c=1,b=0,h=0;d||(c=b=h=-1);return function(q,k,r,e){if(e&&0<c)return f.lastIndexOf(q,k,r);e=q&&q.length||0;var p=d?e+h:b;r===a?r=d?b:e+h:0>r?(r=e+r,0>r&&(r=b)):r=r>=e?e+h:r;for(e&&"string"==typeof q&&(q=q.split(""));r!=p;r+=c)if(q[r]==k)return r;return-1}}var k={},a,f={every:l(!1),some:l(!0),indexOf:m(!0),lastIndexOf:m(!1),forEach:function(a,c,f){var d=0,b=a&&a.length||0;b&&"string"==typeof a&&(a=a.split(""));"string"==
typeof c&&(c=k[c]||h(c));if(f)for(;d<b;++d)c.call(f,a[d],d,a);else for(;d<b;++d)c(a[d],d,a)},map:function(a,c,f,b){var d=0,q=a&&a.length||0;b=new (b||Array)(q);q&&"string"==typeof a&&(a=a.split(""));"string"==typeof c&&(c=k[c]||h(c));if(f)for(;d<q;++d)b[d]=c.call(f,a[d],d,a);else for(;d<q;++d)b[d]=c(a[d],d,a);return b},filter:function(a,c,f){var d=0,b=a&&a.length||0,q=[],e;b&&"string"==typeof a&&(a=a.split(""));"string"==typeof c&&(c=k[c]||h(c));if(f)for(;d<b;++d)e=a[d],c.call(f,e,d,a)&&q.push(e);
else for(;d<b;++d)e=a[d],c(e,d,a)&&q.push(e);return q},clearCache:function(){k={}}};n.mixin(b,f);return f})},"dojo/_base/NodeList":function(){define(["./kernel","../query","./array","./html","../NodeList-dom"],function(b,e,n){e=e.NodeList;var h=e.prototype;h.connect=e._adaptAsForEach(function(){return b.connect.apply(this,arguments)});h.coords=e._adaptAsMap(b.coords);e.events="blur focus change click error keydown keypress keyup load mousedown mouseenter mouseleave mousemove mouseout mouseover mouseup submit".split(" ");
n.forEach(e.events,function(b){var e="on"+b;h[e]=function(b,a){return this.connect(e,b,a)}});return b.NodeList=e})},"dojo/query":function(){define("./_base/kernel ./has ./dom ./on ./_base/array ./_base/lang ./selector/_loader ./selector/_loader!default".split(" "),function(b,e,n,h,l,m,k,a){function f(a,g){var c=function(c,d){if("string"==typeof d&&(d=n.byId(d),!d))return new g([]);c="string"==typeof c?a(c,d):c?c.end&&c.on?c:[c]:[];return c.end&&c.on?c:new g(c)};c.matches=a.match||function(g,a,d){return 0<
c.filter([g],a,d).length};c.filter=a.filter||function(g,a,d){return c(a,d).filter(function(a){return-1<l.indexOf(g,a)})};if("function"!=typeof a){var d=a.search;a=function(g,a){return d(a||document,g)}}return c}var d=Array.prototype,c=d.slice,q=d.concat,r=l.forEach,x=function(a,g,d){g=[0].concat(c.call(g,0));d=d||b.global;return function(c){g[0]=c;return a.apply(d,g)}},z=function(a){var g=this instanceof v&&1;"number"==typeof a&&(a=Array(a));var c=a&&"length"in a?a:arguments;if(g||!c.sort){for(var d=
g?this:[],p=d.length=c.length,f=0;f<p;f++)d[f]=c[f];if(g)return d;c=d}m._mixin(c,w);c._NodeListCtor=function(g){return v(g)};return c},v=z,w=v.prototype=[];v._wrap=w._wrap=function(a,g,c){a=new (c||this._NodeListCtor||v)(a);return g?a._stash(g):a};v._adaptAsMap=function(a,g){return function(){return this.map(x(a,arguments,g))}};v._adaptAsForEach=function(a,g){return function(){this.forEach(x(a,arguments,g));return this}};v._adaptAsFilter=function(a,g){return function(){return this.filter(x(a,arguments,
g))}};v._adaptWithCondition=function(a,g,c){return function(){var d=arguments,p=x(a,d,c);if(g.call(c||b.global,d))return this.map(p);this.forEach(p);return this}};r(["slice","splice"],function(a){var g=d[a];w[a]=function(){return this._wrap(g.apply(this,arguments),"slice"==a?this:null)}});r(["indexOf","lastIndexOf","every","some"],function(a){var g=l[a];w[a]=function(){return g.apply(b,[this].concat(c.call(arguments,0)))}});m.extend(z,{constructor:v,_NodeListCtor:v,toString:function(){return this.join(",")},
_stash:function(a){this._parent=a;return this},on:function(a,g){var c=this.map(function(c){return h(c,a,g)});c.remove=function(){for(var g=0;g<c.length;g++)c[g].remove()};return c},end:function(){return this._parent?this._parent:new this._NodeListCtor(0)},concat:function(a){var g=c.call(this,0),d=l.map(arguments,function(g){return c.call(g,0)});return this._wrap(q.apply(g,d),this)},map:function(a,g){return this._wrap(l.map(this,a,g),this)},forEach:function(a,g){r(this,a,g);return this},filter:function(a){var g=
arguments,c=this,d=0;if("string"==typeof a){c=p._filterResult(this,g[0]);if(1==g.length)return c._stash(this);d=1}return this._wrap(l.filter(c,g[d],g[d+1]),this)},instantiate:function(a,g){var c=m.isFunction(a)?a:m.getObject(a);g=g||{};return this.forEach(function(a){new c(g,a)})},at:function(){var a=new this._NodeListCtor(0);r(arguments,function(g){0>g&&(g=this.length+g);this[g]&&a.push(this[g])},this);return a._stash(this)}});var p=f(a,z);b.query=f(a,function(a){return z(a)});p.load=function(a,
g,c){k.load(a,g,function(g){c(f(g,z))})};b._filterQueryResult=p._filterResult=function(a,g,c){return new z(p.filter(a,g,c))};b.NodeList=p.NodeList=z;return p})},"dojo/selector/_loader":function(){define(["../has","require"],function(b,e){"undefined"!==typeof document&&document.createElement("div");var n;return{load:function(h,l,m,k){if(k&&k.isBuild)m();else{k=e;h="default"==h?b("config-selectorEngine")||"css3":h;h="css2"==h||"lite"==h?"./lite":"css2.1"==h?"./lite":"css3"==h?"./lite":"acme"==h?"./acme":
(k=l)&&h;if("?"==h.charAt(h.length-1)){h=h.substring(0,h.length-1);var a=!0}if(a&&(b("dom-compliant-qsa")||n))return m(n);k([h],function(a){"./lite"!=h&&(n=a);m(a)})}}}})},"dojo/selector/lite":function(){define(["../has","../_base/kernel"],function(b,e){var n=document.createElement("div"),h=n.matches||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector,l=n.querySelectorAll,m=/([^\s,](?:"(?:\\.|[^"])+"|'(?:\\.|[^'])+'|[^,])*)/g,k=function(f,d){var c=d?d.ownerDocument||
d:e.doc||document,q=(l?/^([\w]*)#([\w\-]+$)|^(\.)([\w\-\*]+$)|^(\w+$)/:/^([\w]*)#([\w\-]+)(?:\s+(.*))?$|(?:^|(>|.+\s+))([\w\-\*]+)(\S*$)/).exec(f);d=d||c;if(q){var h=(b("ie"),null!==d.parentNode&&9!==d.nodeType&&d.parentNode===c);if(q[2]&&h){var x=e.byId?e.byId(q[2],c):c.getElementById(q[2]);if(!x||q[1]&&q[1]!=x.tagName.toLowerCase())return[];if(d!=c)for(f=x;f!=d;)if(f=f.parentNode,!f)return[];return q[3]?k(q[3],x):[x]}if(q[3]&&d.getElementsByClassName)return d.getElementsByClassName(q[4]);if(q[5])if(x=
d.getElementsByTagName(q[5]),q[4]||q[6])f=(q[4]||"")+q[6];else return x}if(l)return 1===d.nodeType&&"object"!==d.nodeName.toLowerCase()?a(d,f,d.querySelectorAll):d.querySelectorAll(f);x||(x=d.getElementsByTagName("*"));q=[];c=0;for(h=x.length;c<h;c++){var m=x[c];1==m.nodeType&&(void 0)(m,f,d)&&q.push(m)}return q},a=function(a,d,c){var f=a,b=a.getAttribute("id"),h=b||"__dojo__",k=a.parentNode,e=/^\s*[+~]/.test(d);if(e&&!k)return[];b?h=h.replace(/'/g,"\\$\x26"):a.setAttribute("id",h);e&&k&&(a=a.parentNode);
d=d.match(m);for(k=0;k<d.length;k++)d[k]="[id\x3d'"+h+"'] "+d[k];d=d.join(",");try{return c.call(a,d)}finally{b||f.removeAttribute("id")}};k.match=h?function(f,d,c){return c&&9!=c.nodeType?a(c,d,function(a){return h.call(f,a)}):h.call(f,d)}:void 0;return k})},"dojo/NodeList-dom":function(){define("./_base/kernel ./query ./_base/array ./_base/lang ./dom-class ./dom-construct ./dom-geometry ./dom-attr ./dom-style".split(" "),function(b,e,n,h,l,m,k,a,f){function d(a){return function(c,d,g){return 2==
arguments.length?a["string"==typeof d?"get":"set"](c,d):a.set(c,d,g)}}var c=function(a){return 1==a.length&&"string"==typeof a[0]},q=function(a){var c=a.parentNode;c&&c.removeChild(a)},r=e.NodeList,x=r._adaptWithCondition,z=r._adaptAsForEach,v=r._adaptAsMap;h.extend(r,{_normalize:function(a,c){var d=!0===a.parse;if("string"==typeof a.template){var g=a.templateFunc||b.string&&b.string.substitute;a=g?g(a.template,a):a}g=typeof a;"string"==g||"number"==g?(a=m.toDom(a,c&&c.ownerDocument),a=11==a.nodeType?
h._toArray(a.childNodes):[a]):h.isArrayLike(a)?h.isArray(a)||(a=h._toArray(a)):a=[a];d&&(a._runParse=!0);return a},_cloneNode:function(a){return a.cloneNode(!0)},_place:function(a,c,d,g){if(1==c.nodeType||"only"!=d)for(var p,f=a.length,q=f-1;0<=q;q--){var h=g?this._cloneNode(a[q]):a[q];if(a._runParse&&b.parser&&b.parser.parse)for(p||(p=c.ownerDocument.createElement("div")),p.appendChild(h),b.parser.parse(p),h=p.firstChild;p.firstChild;)p.removeChild(p.firstChild);q==f-1?m.place(h,c,d):c.parentNode.insertBefore(h,
c);c=h}},position:v(k.position),attr:x(d(a),c),style:x(d(f),c),addClass:z(l.add),removeClass:z(l.remove),toggleClass:z(l.toggle),replaceClass:z(l.replace),empty:z(m.empty),removeAttr:z(a.remove),marginBox:v(k.getMarginBox),place:function(a,c){var d=e(a)[0];return this.forEach(function(g){m.place(g,d,c)})},orphan:function(a){return(a?e._filterResult(this,a):this).forEach(q)},adopt:function(a,c){return e(a).place(this[0],c)._stash(this)},query:function(a){if(!a)return this;var c=new r;this.map(function(d){e(a,
d).forEach(function(g){void 0!==g&&c.push(g)})});return c._stash(this)},filter:function(a){var c=arguments,d=this,g=0;if("string"==typeof a){d=e._filterResult(this,c[0]);if(1==c.length)return d._stash(this);g=1}return this._wrap(n.filter(d,c[g],c[g+1]),this)},addContent:function(a,c){a=this._normalize(a,this[0]);for(var d=0,g;g=this[d];d++)a.length?this._place(a,g,c,0<d):m.empty(g);return this}});return r})},"dojo/_base/xhr":function(){define("./kernel ./sniff require ../io-query ../dom ../dom-form ./Deferred ./config ./json ./lang ./array ../on ../aspect ../request/watch ../request/xhr ../request/util".split(" "),
function(b,e,n,h,l,m,k,a,f,d,c,q,r,x,z,v){b._xhrObj=z._create;var w=b.config;b.objectToQuery=h.objectToQuery;b.queryToObject=h.queryToObject;b.fieldToObject=m.fieldToObject;b.formToObject=m.toObject;b.formToQuery=m.toQuery;b.formToJson=m.toJson;b._blockAsync=!1;var p=b._contentHandlers=b.contentHandlers={text:function(g){return g.responseText},json:function(g){return f.fromJson(g.responseText||null)},"json-comment-filtered":function(g){a.useCommentedJson||console.warn("Consider using the standard mimetype:application/json. json-commenting can introduce security issues. To decrease the chances of hijacking, use the standard the 'json' handler and prefix your json with: {}\x26\x26\nUse djConfig.useCommentedJson\x3dtrue to turn off this message.");
g=g.responseText;var c=g.indexOf("/*"),d=g.lastIndexOf("*/");if(-1==c||-1==d)throw Error("JSON was not comment filtered");return f.fromJson(g.substring(c+2,d))},javascript:function(g){return b.eval(g.responseText)},xml:function(g){var a=g.responseXML;a&&!a.querySelectorAll&&(a=(new DOMParser).parseFromString(g.responseText,"application/xml"));if(e("ie")&&(!a||!a.documentElement)){var d=function(g){return"MSXML"+g+".DOMDocument"},d=["Microsoft.XMLDOM",d(6),d(4),d(3),d(2)];c.some(d,function(c){try{var d=
new ActiveXObject(c);d.async=!1;d.loadXML(g.responseText);a=d}catch(H){return!1}return!0})}return a},"json-comment-optional":function(g){return g.responseText&&/^[^{\[]*\/\*/.test(g.responseText)?p["json-comment-filtered"](g):p.json(g)}};p.arraybuffer=p.blob=p.document=function(g,a){return g.response};b._ioSetArgs=function(g,a,c,p){var f={args:g,url:g.url},u=null;if(g.form){var u=l.byId(g.form),t=u.getAttributeNode("action");f.url=f.url||(t?t.value:b.doc?b.doc.URL:null);u=m.toObject(u)}t={};u&&d.mixin(t,
u);g.content&&d.mixin(t,g.content);g.preventCache&&(t["dojo.preventCache"]=(new Date).valueOf());f.query=h.objectToQuery(t);f.handleAs=g.handleAs||"text";var q=new k(function(g){g.canceled=!0;a&&a(g);var c=g.ioArgs.error;c||(c=Error("request cancelled"),c.dojoType="cancel",g.ioArgs.error=c);return c});q.addCallback(c);var r=g.load;r&&d.isFunction(r)&&q.addCallback(function(a){return r.call(g,a,f)});var e=g.error;e&&d.isFunction(e)&&q.addErrback(function(a){return e.call(g,a,f)});var y=g.handle;y&&
d.isFunction(y)&&q.addBoth(function(a){return y.call(g,a,f)});q.addErrback(function(g){return p(g,q)});w.ioPublish&&b.publish&&!1!==f.args.ioPublish&&(q.addCallbacks(function(g){b.publish("/dojo/io/load",[q,g]);return g},function(g){b.publish("/dojo/io/error",[q,g]);return g}),q.addBoth(function(g){b.publish("/dojo/io/done",[q,g]);return g}));q.ioArgs=f;return q};var y=function(g){g=p[g.ioArgs.handleAs](g.ioArgs.xhr,g.ioArgs);return void 0===g?null:g},g=function(g,a){a.ioArgs.args.failOk||console.error(g);
return g},u=function(g){0>=t&&(t=0,w.ioPublish&&b.publish&&(!g||g&&!1!==g.ioArgs.args.ioPublish)&&b.publish("/dojo/io/stop"))},t=0;r.after(x,"_onAction",function(){--t});r.after(x,"_onInFlight",u);b._ioCancelAll=x.cancelAll;b._ioNotifyStart=function(g){w.ioPublish&&b.publish&&!1!==g.ioArgs.args.ioPublish&&(t||b.publish("/dojo/io/start"),t+=1,b.publish("/dojo/io/send",[g]))};b._ioWatch=function(g,a,c,p){g.ioArgs.options=g.ioArgs.args;d.mixin(g,{response:g.ioArgs,isValid:function(c){return a(g)},isReady:function(a){return c(g)},
handleResponse:function(a){return p(g)}});x(g);u(g)};b._ioAddQueryToUrl=function(g){g.query.length&&(g.url+=(-1==g.url.indexOf("?")?"?":"\x26")+g.query,g.query=null)};b.xhr=function(a,c,d){var p,f=b._ioSetArgs(c,function(g){p&&p.cancel()},y,g),u=f.ioArgs;"postData"in c?u.query=c.postData:"putData"in c?u.query=c.putData:"rawBody"in c?u.query=c.rawBody:(2<arguments.length&&!d||-1==="POST|PUT".indexOf(a.toUpperCase()))&&b._ioAddQueryToUrl(u);var t={method:a,handleAs:{arraybuffer:1,blob:1,document:1}[c.handleAs]?
c.handleAs:"text",responseType:c.responseType,timeout:c.timeout,withCredentials:c.withCredentials,ioArgs:u};"undefined"!==typeof c.headers&&(t.headers=c.headers);"undefined"!==typeof c.contentType&&(t.headers||(t.headers={}),t.headers["Content-Type"]=c.contentType);"undefined"!==typeof u.query&&(t.data=u.query);"undefined"!==typeof c.sync&&(t.sync=c.sync);b._ioNotifyStart(f);try{p=z(u.url,t,!0)}catch(ga){return f.cancel(),f}f.ioArgs.xhr=p.response.xhr;p.then(function(){f.resolve(f)}).otherwise(function(g){u.error=
g;g.response&&(g.status=g.response.status,g.responseText=g.response.text,g.xhr=g.response.xhr);f.reject(g)});return f};b.xhrGet=function(g){return b.xhr("GET",g)};b.rawXhrPost=b.xhrPost=function(g){return b.xhr("POST",g,!0)};b.rawXhrPut=b.xhrPut=function(g){return b.xhr("PUT",g,!0)};b.xhrDelete=function(g){return b.xhr("DELETE",g)};b._isDocumentOk=function(g){return v.checkStatus(g.status)};b._getText=function(g){var a;b.xhrGet({url:g,sync:!0,load:function(g){a=g}});return a};d.mixin(b.xhr,{_xhrObj:b._xhrObj,
fieldToObject:m.fieldToObject,formToObject:m.toObject,objectToQuery:h.objectToQuery,formToQuery:m.toQuery,formToJson:m.toJson,queryToObject:h.queryToObject,contentHandlers:p,_ioSetArgs:b._ioSetArgs,_ioCancelAll:b._ioCancelAll,_ioNotifyStart:b._ioNotifyStart,_ioWatch:b._ioWatch,_ioAddQueryToUrl:b._ioAddQueryToUrl,_isDocumentOk:b._isDocumentOk,_getText:b._getText,get:b.xhrGet,post:b.xhrPost,put:b.xhrPut,del:b.xhrDelete});return b.xhr})},"dojo/io-query":function(){define(["./_base/lang"],function(b){var e=
{};return{objectToQuery:function(n){var h=encodeURIComponent,l=[],m;for(m in n){var k=n[m];if(k!=e[m]){var a=h(m)+"\x3d";if(b.isArray(k))for(var f=0,d=k.length;f<d;++f)l.push(a+h(k[f]));else l.push(a+h(k))}}return l.join("\x26")},queryToObject:function(e){var h=decodeURIComponent;e=e.split("\x26");for(var l={},m,k,a=0,f=e.length;a<f;++a)if(k=e[a],k.length){var d=k.indexOf("\x3d");0>d?(m=h(k),k=""):(m=h(k.slice(0,d)),k=h(k.slice(d+1)));"string"==typeof l[m]&&(l[m]=[l[m]]);b.isArray(l[m])?l[m].push(k):
l[m]=k}return l}}})},"dojo/dom-form":function(){define(["./_base/lang","./dom","./io-query","./json"],function(b,e,n,h){var l={fieldToObject:function(b){var h=null;if(b=e.byId(b)){var a=b.name,f=(b.type||"").toLowerCase();if(a&&f&&!b.disabled)if("radio"==f||"checkbox"==f)b.checked&&(h=b.value);else if(b.multiple)for(h=[],b=[b.firstChild];b.length;)for(a=b.pop();a;a=a.nextSibling)if(1==a.nodeType&&"option"==a.tagName.toLowerCase())a.selected&&h.push(a.value);else{a.nextSibling&&b.push(a.nextSibling);
a.firstChild&&b.push(a.firstChild);break}else h=b.value}return h},toObject:function(h){var k={};h=e.byId(h).elements;for(var a=0,f=h.length;a<f;++a){var d=h[a],c=d.name,q=(d.type||"").toLowerCase();if(c&&q&&0>"file|submit|image|reset|button".indexOf(q)&&!d.disabled){var r=k,x=c,d=l.fieldToObject(d);if(null!==d){var m=r[x];"string"==typeof m?r[x]=[m,d]:b.isArray(m)?m.push(d):r[x]=d}"image"==q&&(k[c+".x"]=k[c+".y"]=k[c].x=k[c].y=0)}}return k},toQuery:function(b){return n.objectToQuery(l.toObject(b))},
toJson:function(b,k){return h.stringify(l.toObject(b),null,k?4:0)}};return l})},"dojo/json":function(){define(["./has"],function(b){return JSON})},"dojo/_base/Deferred":function(){define("./kernel ../Deferred ../promise/Promise ../errors/CancelError ../has ./lang ../when".split(" "),function(b,e,n,h,l,m,k){var a=function(){},f=Object.freeze||function(){},d=b.Deferred=function(c){function b(g){if(z)throw Error("This deferred has already been resolved");x=g;z=!0;k()}function k(){for(var c;!c&&g;){var d=
g;g=g.next;if(c=d.progress==a)z=!1;var f=p?d.error:d.resolved;l("config-useDeferredInstrumentation")&&p&&e.instrumentRejected&&e.instrumentRejected(x,!!f);if(f)try{var u=f(x);u&&"function"===typeof u.then?u.then(m.hitch(d.deferred,"resolve"),m.hitch(d.deferred,"reject"),m.hitch(d.deferred,"progress")):(f=c&&void 0===u,c&&!f&&(p=u instanceof Error),d.deferred[f&&p?"reject":"resolve"](f?x:u))}catch(D){d.deferred.reject(D)}else p?d.deferred.reject(x):d.deferred.resolve(x)}}var x,z,v,w,p,y,g,u=this.promise=
new n;this.isResolved=u.isResolved=function(){return 0==w};this.isRejected=u.isRejected=function(){return 1==w};this.isFulfilled=u.isFulfilled=function(){return 0<=w};this.isCanceled=u.isCanceled=function(){return v};this.resolve=this.callback=function(g){this.fired=w=0;this.results=[g,null];b(g)};this.reject=this.errback=function(a){p=!0;this.fired=w=1;l("config-useDeferredInstrumentation")&&e.instrumentRejected&&e.instrumentRejected(a,!!g);b(a);this.results=[null,a]};this.progress=function(a){for(var c=
g;c;){var d=c.progress;d&&d(a);c=c.next}};this.addCallbacks=function(g,c){this.then(g,c,a);return this};u.then=this.then=function(c,p,f){var t=f==a?this:new d(u.cancel);c={resolved:c,error:p,progress:f,deferred:t};g?y=y.next=c:g=y=c;z&&k();return t.promise};var t=this;u.cancel=this.cancel=function(){if(!z){var g=c&&c(t);z||(g instanceof Error||(g=new h(g)),g.log=!1,t.reject(g))}v=!0};f(u)};m.extend(d,{addCallback:function(a){return this.addCallbacks(m.hitch.apply(b,arguments))},addErrback:function(a){return this.addCallbacks(null,
m.hitch.apply(b,arguments))},addBoth:function(a){var c=m.hitch.apply(b,arguments);return this.addCallbacks(c,c)},fired:-1});d.when=b.when=k;return d})},"dojo/Deferred":function(){define(["./has","./_base/lang","./errors/CancelError","./promise/Promise","./has!config-deferredInstrumentation?./promise/instrumentation"],function(b,e,n,h,l){var m=Object.freeze||function(){},k=function(d,f,h,k,e){b("config-deferredInstrumentation")&&2===f&&c.instrumentRejected&&0===d.length&&c.instrumentRejected(h,!1,
k,e);for(e=0;e<d.length;e++)a(d[e],f,h,k)},a=function(a,h,k,e){var q=a[h],r=a.deferred;if(q)try{var p=q(k);if(0===h)"undefined"!==typeof p&&d(r,h,p);else{if(p&&"function"===typeof p.then){a.cancel=p.cancel;p.then(f(r,1),f(r,2),f(r,0));return}d(r,1,p)}}catch(y){d(r,2,y)}else d(r,h,k);b("config-deferredInstrumentation")&&2===h&&c.instrumentRejected&&c.instrumentRejected(k,!!q,e,r.promise)},f=function(a,c){return function(f){d(a,c,f)}},d=function(a,c,d){if(!a.isCanceled())switch(c){case 0:a.progress(d);
break;case 1:a.resolve(d);break;case 2:a.reject(d)}},c=function(d){var f=this.promise=new h,q=this,e,l,w,p=!1,y=[];b("config-deferredInstrumentation")&&Error.captureStackTrace&&(Error.captureStackTrace(q,c),Error.captureStackTrace(f,c));this.isResolved=f.isResolved=function(){return 1===e};this.isRejected=f.isRejected=function(){return 2===e};this.isFulfilled=f.isFulfilled=function(){return!!e};this.isCanceled=f.isCanceled=function(){return p};this.progress=function(g,a){if(e){if(!0===a)throw Error("This deferred has already been fulfilled.");
return f}k(y,0,g,null,q);return f};this.resolve=function(g,a){if(e){if(!0===a)throw Error("This deferred has already been fulfilled.");return f}k(y,e=1,l=g,null,q);y=null;return f};var g=this.reject=function(a,c){if(e){if(!0===c)throw Error("This deferred has already been fulfilled.");return f}b("config-deferredInstrumentation")&&Error.captureStackTrace&&Error.captureStackTrace(w={},g);k(y,e=2,l=a,w,q);y=null;return f};this.then=f.then=function(g,d,p){var u=[p,g,d];u.cancel=f.cancel;u.deferred=new c(function(g){return u.cancel&&
u.cancel(g)});e&&!y?a(u,e,l,w):y.push(u);return u.deferred.promise};this.cancel=f.cancel=function(a,c){if(!e){d&&(c=d(a),a="undefined"===typeof c?a:c);p=!0;if(!e)return"undefined"===typeof a&&(a=new n),g(a),a;if(2===e&&l===a)return a}else if(!0===c)throw Error("This deferred has already been fulfilled.");};m(f)};c.prototype.toString=function(){return"[object Deferred]"};l&&l(c);return c})},"dojo/errors/CancelError":function(){define(["./create"],function(b){return b("CancelError",null,null,{dojoType:"cancel",
log:!1})})},"dojo/errors/create":function(){define(["../_base/lang"],function(b){return function(e,n,h,l){h=h||Error;var m=function(b){if(h===Error){Error.captureStackTrace&&Error.captureStackTrace(this,m);var a=Error.call(this,b),f;for(f in a)a.hasOwnProperty(f)&&(this[f]=a[f]);this.message=b;this.stack=a.stack}else h.apply(this,arguments);n&&n.apply(this,arguments)};m.prototype=b.delegate(h.prototype,l);m.prototype.name=e;return m.prototype.constructor=m}})},"dojo/promise/Promise":function(){define(["../_base/lang"],
function(b){function e(){throw new TypeError("abstract");}return b.extend(function(){},{then:function(b,h,l){e()},cancel:function(b,h){e()},isResolved:function(){e()},isRejected:function(){e()},isFulfilled:function(){e()},isCanceled:function(){e()},always:function(b){return this.then(b,b)},"catch":function(b){return this.then(null,b)},otherwise:function(b){return this.then(null,b)},trace:function(){return this},traceRejected:function(){return this},toString:function(){return"[object Promise]"}})})},
"dojo/when":function(){define(["./Deferred","./promise/Promise"],function(b,e){return function(n,h,l,m){var k=n&&"function"===typeof n.then,a=k&&n instanceof e;if(!k)return 1<arguments.length?h?h(n):n:(new b).resolve(n);a||(k=new b(n.cancel),n.then(k.resolve,k.reject,k.progress),n=k.promise);return h||l||m?n.then(h,l,m):n}})},"dojo/_base/json":function(){define(["./kernel","../json"],function(b,e){b.fromJson=function(b){return eval("("+b+")")};b._escapeString=e.stringify;b.toJsonIndentStr="\t";b.toJson=
function(n,h){return e.stringify(n,function(b,h){return h&&(b=h.__json__||h.json,"function"==typeof b)?b.call(h):h},h&&b.toJsonIndentStr)};return b})},"dojo/request/watch":function(){define("./util ../errors/RequestTimeoutError ../errors/CancelError ../_base/array ../has!host-browser?../_base/window: ../has!host-browser?dom-addeventlistener?:../on:".split(" "),function(b,e,n,h,l,m){function k(){for(var c=+new Date,b=0,h;b<d.length&&(h=d[b]);b++){var k=h.response,l=k.options;h.isCanceled&&h.isCanceled()||
h.isValid&&!h.isValid(k)?(d.splice(b--,1),a._onAction&&a._onAction()):h.isReady&&h.isReady(k)?(d.splice(b--,1),h.handleResponse(k),a._onAction&&a._onAction()):h.startTime&&h.startTime+(l.timeout||0)<c&&(d.splice(b--,1),h.cancel(new e("Timeout exceeded",k)),a._onAction&&a._onAction())}a._onInFlight&&a._onInFlight(h);d.length||(clearInterval(f),f=null)}function a(a){a.response.options.timeout&&(a.startTime=+new Date);a.isFulfilled()||(d.push(a),f||(f=setInterval(k,50)),a.response.options.sync&&k())}
var f=null,d=[];a.cancelAll=function(){try{h.forEach(d,function(a){try{a.cancel(new n("All requests canceled."))}catch(q){}})}catch(c){}};l&&m&&l.doc.attachEvent&&m(l.global,"unload",function(){a.cancelAll()});return a})},"dojo/request/util":function(){define("exports ../errors/RequestError ../errors/CancelError ../Deferred ../io-query ../_base/array ../_base/lang ../promise/Promise ../has".split(" "),function(b,e,n,h,l,m,k,a,f){function d(a){return q(a)}function c(a){return void 0!==a.data?a.data:
a.text}b.deepCopy=function(a,c){for(var d in c){var f=a[d],q=c[d];f!==q&&(f&&"object"===typeof f&&q&&"object"===typeof q?q instanceof Date?a[d]=new Date(q):b.deepCopy(f,q):a[d]=q)}return a};b.deepCreate=function(a,c){c=c||{};var d=k.delegate(a),f,q;for(f in a)(q=a[f])&&"object"===typeof q&&(d[f]=b.deepCreate(q,c[f]));return b.deepCopy(d,c)};var q=Object.freeze||function(a){return a};b.deferred=function(f,l,m,v,w,p){var r=new h(function(g){l&&l(r,f);return g&&(g instanceof e||g instanceof n)?g:new n("Request canceled",
f)});r.response=f;r.isValid=m;r.isReady=v;r.handleResponse=w;m=r.then(d).otherwise(function(g){g.response=f;throw g;});b.notify&&m.then(k.hitch(b.notify,"emit","load"),k.hitch(b.notify,"emit","error"));v=m.then(c);w=new a;for(var g in v)v.hasOwnProperty(g)&&(w[g]=v[g]);w.response=m;q(w);p&&r.then(function(g){p.call(r,g)},function(g){p.call(r,f,g)});r.promise=w;r.then=w.then;return r};b.addCommonMethods=function(a,c){m.forEach(c||["GET","POST","PUT","DELETE"],function(c){a[("DELETE"===c?"DEL":c).toLowerCase()]=
function(d,f){f=k.delegate(f||{});f.method=c;return a(d,f)}})};b.parseArgs=function(a,c,d){var f=c.data,b=c.query;!f||d||"object"!==typeof f||f instanceof ArrayBuffer||f instanceof Blob||(c.data=l.objectToQuery(f));b?("object"===typeof b&&(b=l.objectToQuery(b)),c.preventCache&&(b+=(b?"\x26":"")+"request.preventCache\x3d"+ +new Date)):c.preventCache&&(b="request.preventCache\x3d"+ +new Date);a&&b&&(a+=(~a.indexOf("?")?"\x26":"?")+b);return{url:a,options:c,getHeader:function(a){return null}}};b.checkStatus=
function(a){a=a||0;return 200<=a&&300>a||304===a||1223===a||!a}})},"dojo/errors/RequestError":function(){define(["./create"],function(b){return b("RequestError",function(b,n){this.response=n})})},"dojo/errors/RequestTimeoutError":function(){define(["./create","./RequestError"],function(b,e){return b("RequestTimeoutError",null,e,{dojoType:"timeout"})})},"dojo/request/xhr":function(){define(["../errors/RequestError","./watch","./handlers","./util","../has"],function(b,e,n,h,l){function m(a,c){var d=
a.xhr;a.status=a.xhr.status;try{a.text=d.responseText}catch(g){}"xml"===a.options.handleAs&&(a.data=d.responseXML);var f;if(c)this.reject(c);else{try{n(a)}catch(g){f=g}h.checkStatus(d.status)?f?this.reject(f):this.resolve(a):(c=f?new b("Unable to load "+a.url+" status: "+d.status+" and an error in handleAs: transformation of response",a):new b("Unable to load "+a.url+" status: "+d.status,a),this.reject(c))}}function k(a){return this.xhr.getResponseHeader(a)}function a(v,w,p){var y=w&&w.data&&w.data instanceof
FormData,g=h.parseArgs(v,h.deepCreate(z,w),y);v=g.url;w=g.options;var u=!w.data&&"POST"!==w.method&&"PUT"!==w.method;10>=l("ie")&&(v=v.split("#")[0]);var t,A=h.deferred(g,r,d,c,m,function(){t&&t()}),C=g.xhr=a._create();if(!C)return A.cancel(new b("XHR was not created")),p?A:A.promise;g.getHeader=k;q&&(t=q(C,A,g,w.uploadProgress));var B="undefined"===typeof w.data?null:w.data,n=!w.sync,D=w.method;try{C.open(D,v,n,w.user||x,w.password||x);w.withCredentials&&(C.withCredentials=w.withCredentials);w.handleAs in
f&&(C.responseType=f[w.handleAs]);var H=w.headers;v=y||u?!1:"application/x-www-form-urlencoded";if(H)for(var aa in H)"content-type"===aa.toLowerCase()?v=H[aa]:H[aa]&&C.setRequestHeader(aa,H[aa]);v&&!1!==v&&C.setRequestHeader("Content-Type",v);H&&"X-Requested-With"in H||C.setRequestHeader("X-Requested-With","XMLHttpRequest");h.notify&&h.notify.emit("send",g,A.promise.cancel);C.send(B)}catch(ga){A.reject(ga)}e(A);C=null;return p?A:A.promise}l.add("dojo-force-activex-xhr",function(){return 0});var f=
{blob:"blob",document:"document",arraybuffer:"arraybuffer"},d,c,q,r;d=function(a){return!this.isFulfilled()};r=function(a,c){c.xhr.abort()};q=function(a,c,d,f){function g(g){c.handleResponse(d)}function p(g){g=new b("Unable to load "+d.url+" status: "+g.target.status,d);c.handleResponse(d,g)}function t(g,a){d.transferType=g;a.lengthComputable?(d.loaded=a.loaded,d.total=a.total,c.progress(d)):3===d.xhr.readyState&&(d.loaded="loaded"in a?a.loaded:a.position,c.progress(d))}function q(g){return t("download",
g)}function h(g){return t("upload",g)}a.addEventListener("load",g,!1);a.addEventListener("error",p,!1);a.addEventListener("progress",q,!1);f&&a.upload&&a.upload.addEventListener("progress",h,!1);return function(){a.removeEventListener("load",g,!1);a.removeEventListener("error",p,!1);a.removeEventListener("progress",q,!1);a.upload.removeEventListener("progress",h,!1);a=null}};var x,z={data:null,query:null,sync:!1,method:"GET"};a._create=function(){throw Error("XMLHTTP not available");};l("dojo-force-activex-xhr")||
(a._create=function(){return new XMLHttpRequest});h.addCommonMethods(a);return a})},"dojo/request/handlers":function(){define(["../json","../_base/kernel","../_base/array","../has","../has!dom?../selector/_loader"],function(b,e,n,h){function l(b){var a=m[b.options.handleAs];b.data=a?a(b):b.data||b.text;return b}n=function(b){return b.xhr.response};var m={javascript:function(b){return e.eval(b.text||"")},json:function(h){return b.parse(h.text||null)},xml:void 0,blob:n,arraybuffer:n,document:n};l.register=
function(b,a){m[b]=a};return l})},"dojo/_base/fx":function(){define("./kernel ./config ./lang ../Evented ./Color ../aspect ../sniff ../dom ../dom-style".split(" "),function(b,e,n,h,l,m,k,a,f){var d=n.mixin,c={},q=c._Line=function(a,g){this.start=a;this.end=g};q.prototype.getValue=function(a){return(this.end-this.start)*a+this.start};var r=c.Animation=function(a){d(this,a);n.isArray(this.curve)&&(this.curve=new q(this.curve[0],this.curve[1]))};r.prototype=new h;n.extend(r,{duration:350,repeat:0,rate:20,
_percent:0,_startRepeatCount:0,_getStep:function(){var a=this._percent,g=this.easing;return g?g(a):a},_fire:function(a,g){g=g||[];if(this[a])if(e.debugAtAllCosts)this[a].apply(this,g);else try{this[a].apply(this,g)}catch(u){console.error("exception in animation handler for:",a),console.error(u)}return this},play:function(a,g){this._delayTimer&&this._clearTimer();if(g)this._stopTimer(),this._active=this._paused=!1,this._percent=0;else if(this._active&&!this._paused)return this;this._fire("beforeBegin",
[this.node]);a=a||this.delay;g=n.hitch(this,"_play",g);if(0<a)return this._delayTimer=setTimeout(g,a),this;g();return this},_play:function(a){this._delayTimer&&this._clearTimer();this._startTime=(new Date).valueOf();this._paused&&(this._startTime-=this.duration*this._percent);this._active=!0;this._paused=!1;a=this.curve.getValue(this._getStep());this._percent||(this._startRepeatCount||(this._startRepeatCount=this.repeat),this._fire("onBegin",[a]));this._fire("onPlay",[a]);this._cycle();return this},
pause:function(){this._delayTimer&&this._clearTimer();this._stopTimer();if(!this._active)return this;this._paused=!0;this._fire("onPause",[this.curve.getValue(this._getStep())]);return this},gotoPercent:function(a,g){this._stopTimer();this._active=this._paused=!0;this._percent=a;g&&this.play();return this},stop:function(a){this._delayTimer&&this._clearTimer();if(!this._timer)return this;this._stopTimer();a&&(this._percent=1);this._fire("onStop",[this.curve.getValue(this._getStep())]);this._active=
this._paused=!1;return this},destroy:function(){this.stop()},status:function(){return this._active?this._paused?"paused":"playing":"stopped"},_cycle:function(){if(this._active){var a=(new Date).valueOf(),a=0===this.duration?1:(a-this._startTime)/this.duration;1<=a&&(a=1);this._percent=a;this.easing&&(a=this.easing(a));this._fire("onAnimate",[this.curve.getValue(a)]);1>this._percent?this._startTimer():(this._active=!1,0<this.repeat?(this.repeat--,this.play(null,!0)):-1==this.repeat?this.play(null,
!0):this._startRepeatCount&&(this.repeat=this._startRepeatCount,this._startRepeatCount=0),this._percent=0,this._fire("onEnd",[this.node]),!this.repeat&&this._stopTimer())}return this},_clearTimer:function(){clearTimeout(this._delayTimer);delete this._delayTimer}});var x=0,z=null,v={run:function(){}};n.extend(r,{_startTimer:function(){this._timer||(this._timer=m.after(v,"run",n.hitch(this,"_cycle"),!0),x++);z||(z=setInterval(n.hitch(v,"run"),this.rate))},_stopTimer:function(){this._timer&&(this._timer.remove(),
this._timer=null,x--);0>=x&&(clearInterval(z),z=null,x=0)}});var w=k("ie")?function(a){var g=a.style;g.width.length||"auto"!=f.get(a,"width")||(g.width="auto")}:function(){};c._fade=function(p){p.node=a.byId(p.node);var g=d({properties:{}},p);p=g.properties.opacity={};p.start="start"in g?g.start:function(){return+f.get(g.node,"opacity")||0};p.end=g.end;p=c.animateProperty(g);m.after(p,"beforeBegin",n.partial(w,g.node),!0);return p};c.fadeIn=function(a){return c._fade(d({end:1},a))};c.fadeOut=function(a){return c._fade(d({end:0},
a))};c._defaultEasing=function(a){return.5+Math.sin((a+1.5)*Math.PI)/2};var p=function(a){this._properties=a;for(var g in a){var c=a[g];c.start instanceof l&&(c.tempColor=new l)}};p.prototype.getValue=function(a){var g={},c;for(c in this._properties){var d=this._properties[c],f=d.start;f instanceof l?g[c]=l.blendColors(f,d.end,a,d.tempColor).toCss():n.isArray(f)||(g[c]=(d.end-f)*a+f+("opacity"!=c?d.units||"px":0))}return g};c.animateProperty=function(c){var g=c.node=a.byId(c.node);c.easing||(c.easing=
b._defaultEasing);c=new r(c);m.after(c,"beforeBegin",n.hitch(c,function(){var a={},c;for(c in this.properties){var b=function(g,a){var c={height:g.offsetHeight,width:g.offsetWidth}[a];if(void 0!==c)return c;c=f.get(g,a);return"opacity"==a?+c:h?c:parseFloat(c)};if("width"==c||"height"==c)this.node.display="block";var q=this.properties[c];n.isFunction(q)&&(q=q(g));q=a[c]=d({},n.isObject(q)?q:{end:q});n.isFunction(q.start)&&(q.start=q.start(g));n.isFunction(q.end)&&(q.end=q.end(g));var h=0<=c.toLowerCase().indexOf("color");
"end"in q?"start"in q||(q.start=b(g,c)):q.end=b(g,c);h?(q.start=new l(q.start),q.end=new l(q.end)):q.start="opacity"==c?+q.start:parseFloat(q.start)}this.curve=new p(a)}),!0);m.after(c,"onAnimate",n.hitch(f,"set",c.node),!0);return c};c.anim=function(a,g,d,f,p,b){return c.animateProperty({node:a,duration:d||r.prototype.duration,properties:g,easing:f,onEnd:p}).play(b||0)};d(b,c);b._Animation=r;return c})},"dojo/_base/Color":function(){define(["./kernel","./lang","./array","./config"],function(b,e,
n,h){var l=b.Color=function(b){b&&this.setColor(b)};l.named={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255],transparent:h.transparentColor||[0,0,0,0]};e.extend(l,{r:255,g:255,b:255,a:1,_set:function(b,h,a,f){this.r=b;this.g=h;this.b=a;this.a=f},setColor:function(b){e.isString(b)?
l.fromString(b,this):e.isArray(b)?l.fromArray(b,this):(this._set(b.r,b.g,b.b,b.a),b instanceof l||this.sanitize());return this},sanitize:function(){return this},toRgb:function(){return[this.r,this.g,this.b]},toRgba:function(){return[this.r,this.g,this.b,this.a]},toHex:function(){return"#"+n.map(["r","g","b"],function(b){b=this[b].toString(16);return 2>b.length?"0"+b:b},this).join("")},toCss:function(b){var h=this.r+", "+this.g+", "+this.b;return(b?"rgba("+h+", "+this.a:"rgb("+h)+")"},toString:function(){return this.toCss(!0)}});
l.blendColors=b.blendColors=function(b,h,a,f){f=f||new l;f.r=Math.round(b.r+(h.r-b.r)*a);f.g=Math.round(b.g+(h.g-b.g)*a);f.b=Math.round(b.b+(h.b-b.b)*a);f.a=b.a+(h.a-b.a)*a;return f.sanitize()};l.fromRgb=b.colorFromRgb=function(b,h){return(b=b.toLowerCase().match(/^rgba?\(([\s\.,0-9]+)\)/))&&l.fromArray(b[1].split(/\s*,\s*/),h)};l.fromHex=b.colorFromHex=function(b,h){var a=h||new l,f=4==b.length?4:8,d=(1<<f)-1;b=Number("0x"+b.substr(1));if(isNaN(b))return null;n.forEach(["b","g","r"],function(c){var q=
b&d;b>>=f;a[c]=4==f?17*q:q});a.a=1;return a};l.fromArray=b.colorFromArray=function(b,h){h=h||new l;h._set(Number(b[0]),Number(b[1]),Number(b[2]),Number(b[3]));isNaN(h.a)&&(h.a=1);return h.sanitize()};l.fromString=b.colorFromString=function(b,h){var a=l.named[b];return a&&l.fromArray(a,h)||l.fromRgb(b,h)||l.fromHex(b,h)};return l})},"dojo/request":function(){define(["./request/default!"],function(b){return b})},"dojo/request/default":function(){define(["exports","require","../has"],function(b,e,n){var h=
n("config-requestProvider"),l;if(n("host-browser")||n("host-webworker"))l="./xhr";h||(h=l);b.getPlatformDefaultId=function(){return l};b.load=function(b,k,a,f){e(["platform"==b?l:h],function(d){a(d)})}})},"esri/Map":function(){define("require exports ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./Basemap ./Ground ./core/Accessor ./core/CollectionFlattener ./core/Evented ./core/Logger ./core/accessorSupport/decorators ./support/basemapUtils ./support/groundUtils ./support/LayersMixin".split(" "),
function(b,e,n,h,l,m,k,a,f,d,c,q,r,x){var z=d.getLogger("esri.Map");return function(d){function f(a){a=d.call(this)||this;a.basemap=null;a.ground=new m;a._basemapCache=q.createCache();return a}n(f,d);Object.defineProperty(f.prototype,"allLayers",{get:function(){return new a({root:this,rootCollectionNames:["basemap.baseLayers","ground.layers","layers","basemap.referenceLayers"],getChildrenFunction:function(a){return a.layers}})},enumerable:!0,configurable:!0});f.prototype.castBasemap=function(a){return q.ensureType(a,
this._basemapCache)};f.prototype.castGround=function(a){a=r.ensureType(a);return a?a:(z.error("Map.ground may not be set to null or undefined"),this._get("ground"))};h([c.property({readOnly:!0})],f.prototype,"allLayers",null);h([c.property({type:l})],f.prototype,"basemap",void 0);h([c.cast("basemap")],f.prototype,"castBasemap",null);h([c.property({type:m})],f.prototype,"ground",void 0);h([c.cast("ground")],f.prototype,"castGround",null);return f=h([c.subclass("esri.Map")],f)}(c.declared(k,f,x))})},
"esri/core/tsSupport/declareExtendsHelper":function(){define(["require","exports"],function(b,e){return function(b,h){b.__bases__=h.__bases__}})},"esri/core/tsSupport/decorateHelper":function(){define([],function(){return function(b,e,n,h){var l=arguments.length,m=3>l?e:null===h?h=Object.getOwnPropertyDescriptor(e,n):h,k;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)m=Reflect.decorate(b,e,n,h);else for(var a=b.length-1;0<=a;a--)if(k=b[a])m=(3>l?k(m):3<l?k(e,n,m):k(e,n))||m;return 3<
l&&m&&Object.defineProperty(e,n,m),m}})},"esri/Basemap":function(){define("require exports ./core/tsSupport/assignHelper ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./core/asyncUtils ./core/Collection ./core/collectionUtils ./core/Evented ./core/JSONSupport ./core/lang ./core/Loadable ./core/loadAll ./core/Logger ./core/promiseUtils ./core/urlUtils ./core/accessorSupport/decorators ./layers/Layer ./portal/Portal ./portal/PortalItem ./support/basemapDefinitions".split(" "),
function(b,e,n,h,l,m,k,a,f,d,c,q,r,x,z,v,w,p,y,g,u){var t=0,A=k.ofType(p),C=x.getLogger("esri.Basemap");return function(d){function f(g){var a=d.call(this)||this;a.id=null;a.portalItem=null;a.thumbnailUrl=null;a.title="Basemap";a.id=Date.now().toString(16)+"-basemap-"+t++;a.baseLayers=new A;a.referenceLayers=new A;var c=function(g){g.parent&&g.parent!==a&&"remove"in g.parent&&g.parent.remove(g);g.parent=a;"elevation"===g.type&&C.error("Layer '"+g.title+", id:"+g.id+"' of type '"+g.type+"' is not supported as a basemap layer and will therefore be ignored.")};
a.baseLayers.on("after-add",function(g){return c(g.item)});a.referenceLayers.on("after-add",function(g){return c(g.item)});a.baseLayers.on("after-remove",function(g){g.item.parent=null});a.referenceLayers.on("after-remove",function(g){g.item.parent=null});return a}h(f,d);p=f;f.prototype.initialize=function(){var g=this;this.when().catch(function(a){C.error("#load()","Failed to load basemap (title: '"+g.title+"', id: '"+g.id+"')",a)});this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)};
f.prototype.normalizeCtorArgs=function(g){g&&"resourceInfo"in g&&(this._set("resourceInfo",g.resourceInfo),g=n({},g),delete g.resourceInfo);return g};Object.defineProperty(f.prototype,"baseLayers",{set:function(g){this._set("baseLayers",a.referenceSetter(g,this._get("baseLayers"),A))},enumerable:!0,configurable:!0});f.prototype.writeBaseLayers=function(g,a,c,d){var f=[];g&&(d=n({},d,{layerContainerType:"basemap"}),this.baseLayers.forEach(function(g){if(g.write){var a={};g.write(a,d)&&f.push(a)}}),
this.referenceLayers.forEach(function(g){if(g.write){var a={isReference:!0};g.write(a,d)&&f.push(a)}}));a[c]=f};Object.defineProperty(f.prototype,"referenceLayers",{set:function(g){this._set("referenceLayers",a.referenceSetter(g,this._get("referenceLayers"),A))},enumerable:!0,configurable:!0});f.prototype.writeTitle=function(g,a){a.title=g||"Basemap"};f.prototype.load=function(){this.addResolvingPromise(this._loadFromSource());return this.when()};f.prototype.loadAll=function(){var g=this;return m.safeCast(r.loadAll(this,
function(a){a(g.baseLayers,g.referenceLayers)}))};f.prototype.clone=function(){var g={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.slice(),referenceLayers:this.referenceLayers.slice()};this.loaded&&(g.loadStatus="loaded");return(new p({resourceInfo:this.resourceInfo})).set(g)};f.prototype.read=function(g,a){this.resourceInfo||this._set("resourceInfo",{data:g,context:a});return this.inherited(arguments)};f.prototype.write=function(g,a){g=g||{};a&&a.origin||(a=n({origin:"web-map"},
a));this.inherited(arguments,[g,a]);!this.loaded&&this.resourceInfo&&this.resourceInfo.data.baseMapLayers&&(g.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(function(g){g=c.clone(g);g.url&&v.isProtocolRelative(g.url)&&(g.url="https:"+g.url);g.templateUrl&&v.isProtocolRelative(g.templateUrl)&&(g.templateUrl="https:"+g.templateUrl);return g}));return g};f.prototype._loadFromSource=function(){var g=this.resourceInfo,a=this.portalItem;return g?this._loadLayersFromJSON(g.data,g.context?g.context.url:
null):a?this._loadFromItem(a):z.resolve(null)};f.prototype._loadLayersFromJSON=function(g,a){var c=this,d=this.resourceInfo&&this.resourceInfo.context,f=this.portalItem&&this.portalItem.portal||d&&d.portal||null,p=d&&"web-scene"===d.origin?"web-scene":"web-map";return z.create(function(g){return b(["./portal/support/layersCreator"],g)}).then(function(d){var b=[];if(g.baseMapLayers&&Array.isArray(g.baseMapLayers)){var u={context:{origin:p,url:a,portal:f,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},
t=d.populateOperationalLayers(c.baseLayers,g.baseMapLayers.filter(function(g){return!g.isReference}),u);b.push.apply(b,t);d=d.populateOperationalLayers(c.referenceLayers,g.baseMapLayers.filter(function(g){return g.isReference}),u);b.push.apply(b,d)}return z.eachAlways(b)}).then(function(){})};f.prototype._loadFromItem=function(g){var a=this;return g.load().then(function(g){return g.fetchData()}).then(function(c){var d=v.urlToObject(g.itemUrl);a._set("resourceInfo",{data:c.baseMap,context:{origin:"web-map",
portal:g.portal||y.getDefault(),url:d}});a.read(a.resourceInfo.data,a.resourceInfo.context);a.read({title:g.title,thumbnailUrl:g.thumbnailUrl},{origin:"portal-item",portal:g.portal||y.getDefault(),url:d});return a._loadLayersFromJSON(a.resourceInfo.data,d)})};f.fromId=function(g){return(g=u[g])?p.fromJSON(g):null};var p;l([w.property({type:A,json:{write:{ignoreOrigin:!0,target:"baseMapLayers"}}}),w.cast(a.castForReferenceSetter)],f.prototype,"baseLayers",null);l([w.writer("baseLayers")],f.prototype,
"writeBaseLayers",null);l([w.property({type:String,json:{origins:{"web-scene":{write:!0}}}})],f.prototype,"id",void 0);l([w.property({type:g})],f.prototype,"portalItem",void 0);l([w.property({type:A}),w.cast(a.castForReferenceSetter)],f.prototype,"referenceLayers",null);l([w.property({readOnly:!0})],f.prototype,"resourceInfo",void 0);l([w.property()],f.prototype,"thumbnailUrl",void 0);l([w.property({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],f.prototype,"title",void 0);l([w.writer("title")],
f.prototype,"writeTitle",null);return f=p=l([w.subclass("esri.Basemap")],f)}(w.declared(d,f,q))})},"esri/core/tsSupport/assignHelper":function(){define([],function(){return Object.assign||function(b){for(var e,n=1,h=arguments.length;n<h;n++){e=arguments[n];for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&(b[l]=e[l])}return b}})},"esri/core/asyncUtils":function(){define(["require","exports","./tsSupport/generatorHelper","./tsSupport/awaiterHelper","./promiseUtils"],function(b,e,n,h,l){Object.defineProperty(e,
"__esModule",{value:!0});e.forEach=function(b,h,a){return l.eachAlways(b.map(function(f,d){return h.apply(a,[f,d])}))};e.map=function(b,h,a){return l.eachAlways(b.map(function(f,d){return h.apply(a,[f,d])})).then(function(a){return a.map(function(a){return a.value})})};e.maybe=function(b){return b.then(function(b){return{ok:!0,value:b}}).catch(function(b){return{ok:!1,error:b}})};e.assertMaybe=function(b){if(!0===b.ok)return b.value;throw b.error;};e.safeCast=function(b){return b}})},"esri/core/tsSupport/generatorHelper":function(){define([],
function(){return function(b,e){function n(a){return function(c){return h([a,c])}}function h(d){if(m)throw new TypeError("Generator is already executing.");for(;l;)try{if(m=1,k&&(a=d[0]&2?k["return"]:d[0]?k["throw"]||((a=k["return"])&&a.call(k),0):k.next)&&!(a=a.call(k,d[1])).done)return a;if(k=0,a)d=[d[0]&2,a.value];switch(d[0]){case 0:case 1:a=d;break;case 4:return l.label++,{value:d[1],done:!1};case 5:l.label++;k=d[1];d=[0];continue;case 7:d=l.ops.pop();l.trys.pop();continue;default:if(!(a=l.trys,
a=0<a.length&&a[a.length-1])&&(6===d[0]||2===d[0])){l=0;continue}if(3===d[0]&&(!a||d[1]>a[0]&&d[1]<a[3]))l.label=d[1];else if(6===d[0]&&l.label<a[1])l.label=a[1],a=d;else if(a&&l.label<a[2])l.label=a[2],l.ops.push(d);else{a[2]&&l.ops.pop();l.trys.pop();continue}}d=e.call(b,l)}catch(c){d=[6,c],k=0}finally{m=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}var l={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},m,k,a,f;return f={next:n(0),"throw":n(1),"return":n(2)},
"function"===typeof Symbol&&(f[Symbol.iterator]=function(){return this}),f}})},"esri/core/tsSupport/awaiterHelper":function(){define(["../promiseUtils"],function(b){function e(e){return e&&"function"===typeof e.then?e:b.resolve(e)}return function(n,h,l,m){var k=null;return b.create(function(a,f){function d(a){try{b(m.next(a))}catch(x){f(x)}}function c(a){try{b(m["throw"](a))}catch(x){f(x)}}function b(b){b.done?(k=e(b.value),k.then(a,f)):(k=e(b.value),k.then(d,c))}b((m=m.apply(n,h||[])).next())},function(a){k&&
k.cancel(a)})}})},"esri/core/promiseUtils":function(){define("require exports dojo/Deferred dojo/when dojo/promise/all ./Error".split(" "),function(b,e,n,h,l,m){function k(a){if(a){if("function"!==typeof a.forEach){var d=Object.keys(a),c=d.map(function(c){return a[c]});return k(c).then(function(a){var c={};d.forEach(function(d,f){return c[d]=a[f]});return c})}var f=new n(function(c){a.forEach(function(a){return a.cancel(c)})}),b=[],h=a.length;0===h&&f.resolve(b);a.forEach(function(a){var c={promise:a};
b.push(c);a.then(function(a){c.value=a}).catch(function(a){c.error=a}).then(function(){--h;0===h&&f.resolve(b)})});return f.promise}}function a(a,d){var c=new n(d);a(function(a){return h(a).then(c.resolve)},c.reject);return c.promise}Object.defineProperty(e,"__esModule",{value:!0});e.all=function(a){return l(a)};e.filter=function(a,d){var c=a.slice();return l(a.map(function(a,c){return d(a,c)})).then(function(a){return c.filter(function(c,d){return a[d]})})};e.eachAlways=k;e.create=a;e.reject=function(a){var d=
new n;d.reject(a);return d.promise};e.resolve=function(a){void 0===a&&(a=null);var d=new n;d.resolve(a);return d.promise};e.after=function(a,d){void 0===d&&(d=null);var c=0,f=new n(function(){c&&(clearTimeout(c),c=0)}),c=setTimeout(function(){f.resolve(d)},a);return f.promise};e.timeout=function(a,d,c){var f=0,b=new n(a.cancel);a.then(function(a){b.isFulfilled()||(b.resolve(a),f&&(clearTimeout(f),f=0))});a.catch(function(a){b.isFulfilled()||(b.reject(a),f&&(clearTimeout(f),f=0))});f=setTimeout(function(){var a=
c||new m("promiseUtils:timeout","The wrapped promise did not resolve within "+d+" ms");b.reject(a)},d);return b.promise};e.wrapCallback=function(a){var d=!1,c=new n(function(){return d=!0});a(function(a){d||c.resolve(a)});return c.promise};e.isThenable=function(a){return a&&"function"===typeof a.then};e.when=function(a){return h(a)};e.createResolver=function(f){var d,c;f=a(function(a,f){d=a;c=f},f);var b=function(a){d(a)};b.resolve=function(a){return d(a)};b.reject=function(a){return c(a)};b.promise=
f;return b}})},"dojo/promise/all":function(){define(["../_base/array","../_base/lang","../Deferred","../when"],function(b,e,n,h){var l=b.some;return function(b){var k,a;e.isArray(b)?a=b:b&&"object"===typeof b&&(k=b);var f,d=[];if(k){a=[];for(var c in k)Object.hasOwnProperty.call(k,c)&&(d.push(c),a.push(k[c]));f={}}else a&&(f=[]);if(!a||!a.length)return(new n).resolve(f);var q=new n;q.promise.always(function(){f=d=null});var r=a.length;l(a,function(a,c){k||d.push(c);h(a,function(a){q.isFulfilled()||
(f[d[c]]=a,0===--r&&q.resolve(f))},q.reject);return q.isFulfilled()});return q.promise}})},"esri/core/Error":function(){define(["require","exports","./tsSupport/extendsHelper","./lang","./Message"],function(b,e,n,h,l){b=function(b){function e(a,f,d){var c=b.call(this,a,f,d)||this;return c instanceof e?c:new e(a,f,d)}n(e,b);e.prototype.toJSON=function(){return{name:this.name,message:this.message,details:h.clone(this.details),dojoType:this.dojoType}};e.fromJSON=function(a){var f=new e(a.name,a.message,
a.details);null!=a.dojoType&&(f.dojoType=a.dojoType);return f};return e}(l);b.prototype.type="error";return b})},"esri/core/tsSupport/extendsHelper":function(){define([],function(){return function(){var b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,n){b.__proto__=n}||function(b,n){for(var h in n)n.hasOwnProperty(h)&&(b[h]=n[h])};return function(e,n){function h(){this.constructor=e}b(e,n);e.prototype=null===n?Object.create(n):(h.prototype=n.prototype,new h)}}()})},"esri/core/lang":function(){define(["./global",
"dojo/date","dojo/number","dojo/date/locale","dojo/i18n!../nls/common"],function(b,e,n,h,l){function m(a,c,d){var f,b,p={};for(f in c){b=c[f];var h=!(f in p)||p[f]!==b;if(!(f in a)||a[f]!==b&&h)a[f]=d?d(b):b}return a}function k(a,c,f){var k=f.match(/([^\(]+)(\([^\)]+\))?/i),r=k[1].trim();f=c[a];var k=JSON.parse((k[2]?k[2].trim():"{}").replace(/^\(/,"{").replace(/\)$/,"}").replace(/([{,])\s*([0-9a-zA-Z\_]+)\s*:/gi,'$1"$2":').replace(/\"\s*:\s*\'/gi,'":"').replace(/\'\s*(,|\})/gi,'"$1')),p=k.utcOffset;
if(-1===d.indexOf(r)){var l;a:{r=r.split(".");p=void 0;p=b;try{for(var g=0;g<r.length;g++){var u=r[g];if(!(u in p)){l=void 0;break a}p=p[u]}l=p;break a}catch(t){}l=void 0}"function"===typeof l&&(f=l(f,a,c,k))}else if("number"===typeof f||"string"===typeof f&&f&&!isNaN(Number(f)))switch(f=Number(f),r){case "NumberFormat":a=q.mixin({},k);c=parseFloat(a.places);if(isNaN(c)||0>c)a.places=Infinity;return n.format(f,a);case "DateString":f=new Date(f);if(k.local||k.systemLocale)return k.systemLocale?f.toLocaleDateString()+
(k.hideTime?"":" "+f.toLocaleTimeString()):f.toDateString()+(k.hideTime?"":" "+f.toTimeString());f=f.toUTCString();k.hideTime&&(f=f.replace(/\s+\d\d\:\d\d\:\d\d\s+(utc|gmt)/i,""));return f;case "DateFormat":return f=new Date(f),null!=p&&(f=e.add(f,"minute",f.getTimezoneOffset()-p)),h.format(f,k)}return null!=f?f:""}function a(c,d){var f;if(d)for(f in c)c.hasOwnProperty(f)&&(void 0===c[f]?delete c[f]:c[f]instanceof Object&&a(c[f],!0));else for(f in c)c.hasOwnProperty(f)&&void 0===c[f]&&delete c[f];
return c}function f(a){return a&&"object"==typeof a&&"function"!==typeof a?a instanceof Int8Array||a instanceof Uint8Array||a instanceof Uint8ClampedArray||a instanceof Int16Array||a instanceof Int32Array||a instanceof Uint16Array||a instanceof Uint32Array||a instanceof Float32Array||a instanceof Float64Array||a instanceof Date?new a.constructor(a):a instanceof ArrayBuffer?a.slice(0,a.byteLength):"function"===typeof a.clone?a.clone():"function"===typeof a.map&&"function"===typeof a.forEach?a.map(f):
"function"===typeof a.notifyChange&&"function"===typeof a.watch?a.clone():m({},a,f):a}var d=["NumberFormat","DateString","DateFormat"],c=/<\/?[^>]+>/g,q={equals:function(a,c){return a===c||"number"===typeof a&&isNaN(a)&&"number"===typeof c&&isNaN(c)||"function"===typeof(a||{}).getTime&&"function"===typeof(c||{}).getTime&&a.getTime()==c.getTime()||"function"===typeof(a||{}).equals&&a.equals(c)||"function"===typeof(c||{}).equals&&c.equals(a)||!1},mixin:function(a){a||(a={});for(var c=1,d=arguments.length;c<
d;c++)m(a,arguments[c]);return a},valueOf:function(a,c){for(var d in a)if(a[d]==c)return d;return null},stripTags:function(a){if(a){var d=typeof a;if("string"===d)a=a.replace(c,"");else if("object"===d)for(var f in a)(d=a[f])&&"string"===typeof d&&(d=d.replace(c,"")),a[f]=d}return a},substitute:function(a,c,d){var f,b,p;null!=d&&("object"===typeof d?(f=d.first,b=d.dateFormat,p=d.numberFormat):f=d);if(c&&"{*}"!==c)return c.replace(/\{([^\}]+)\}/g,function(g,a){g=a.split(":");if(1<g.length)return a=
g[0],g.shift(),k(a,this.obj,g.join(":"));if(b&&-1!==(b.properties||[]).indexOf(a))return k(a,this.obj,b.formatter||"DateString");if(p&&-1!==(p.properties||[]).indexOf(a))return k(a,this.obj,p.formatter||"NumberFormat");a=this.obj[a];return null!=a?a:""}.bind({obj:a}));c=[];var h;c.push('\x3ctable class\x3d"esri-widget__table" summary\x3d"'+l.fieldsSummary+'"\x3e\x3ctbody\x3e');for(h in a)if(d=a[h],b&&-1!==(b.properties||[]).indexOf(h)?d=k(h,a,b.formatter||"DateString"):p&&-1!==(p.properties||[]).indexOf(h)&&
(d=k(h,a,p.formatter||"NumberFormat")),c.push("\x3ctr\x3e\x3cth\x3e"+h+"\x3c/th\x3e\x3ctd\x3e"+(null!=d?d:"")+"\x3c/td\x3e\x3c/tr\x3e"),f)break;c.push("\x3c/tbody\x3e\x3c/table\x3e");return c.join("")},filter:function(a,c,d){c=["string"===typeof a?a.split(""):a,d||b,"string"===typeof c?new Function("item","index","array",c):c];d={};var f;a=c[0];for(f in a)c[2].call(c[f],a[f],f,a)&&(d[f]=a[f]);return d},startsWith:function(a,c,d){d=d||0;return a.indexOf(c,d)===d},endsWith:function(a,c,d){if("number"!==
typeof d||!isFinite(d)||Math.floor(d)!==d||d>a.length)d=a.length;d-=c.length;a=a.indexOf(c,d);return-1!==a&&a===d},fixJson:a,clone:f};return q})},"esri/core/global":function(){define(["require","exports"],function(b,e){return function(){if("undefined"!==typeof global)return global;if("undefined"!==typeof window)return window;if("undefined"!==typeof self)return self}()})},"dojo/date":function(){define(["./has","./_base/lang"],function(b,e){var n={getDaysInMonth:function(b){var h=b.getMonth();return 1==
h&&n.isLeapYear(b)?29:[31,28,31,30,31,30,31,31,30,31,30,31][h]},isLeapYear:function(b){b=b.getFullYear();return!(b%400)||!(b%4)&&!!(b%100)},getTimezoneName:function(b){var h=b.toString(),e="",k=h.indexOf("(");if(-1<k)e=h.substring(++k,h.indexOf(")"));else if(k=/([A-Z\/]+) \d{4}$/,h=h.match(k))e=h[1];else if(h=b.toLocaleString(),k=/ ([A-Z\/]+)$/,h=h.match(k))e=h[1];return"AM"==e||"PM"==e?"":e},compare:function(b,e,m){b=new Date(+b);e=new Date(+(e||new Date));"date"==m?(b.setHours(0,0,0,0),e.setHours(0,
0,0,0)):"time"==m&&(b.setFullYear(0,0,0),e.setFullYear(0,0,0));return b>e?1:b<e?-1:0},add:function(b,e,m){var h=new Date(+b),a=!1,f="Date";switch(e){case "day":break;case "weekday":var d;(e=m%5)?d=parseInt(m/5):(e=0<m?5:-5,d=0<m?(m-5)/5:(m+5)/5);var c=b.getDay(),q=0;6==c&&0<m?q=1:0==c&&0>m&&(q=-1);c+=e;if(0==c||6==c)q=0<m?2:-2;m=7*d+e+q;break;case "year":f="FullYear";a=!0;break;case "week":m*=7;break;case "quarter":m*=3;case "month":a=!0;f="Month";break;default:f="UTC"+e.charAt(0).toUpperCase()+e.substring(1)+
"s"}if(f)h["set"+f](h["get"+f]()+m);a&&h.getDate()<b.getDate()&&h.setDate(0);return h},difference:function(b,e,m){e=e||new Date;m=m||"day";var h=e.getFullYear()-b.getFullYear(),a=1;switch(m){case "quarter":b=b.getMonth();e=e.getMonth();a=Math.floor(e/3)+1+4*h-(Math.floor(b/3)+1);break;case "weekday":h=Math.round(n.difference(b,e,"day"));m=parseInt(n.difference(b,e,"week"));if(0==h%7)h=5*m;else{var a=0,f=b.getDay(),d=e.getDay();m=parseInt(h/7);e=h%7;b=new Date(b);b.setDate(b.getDate()+7*m);b=b.getDay();
if(0<h)switch(!0){case 6==f:a=-1;break;case 0==f:a=0;break;case 6==d:a=-1;break;case 0==d:a=-2;break;case 5<b+e:a=-2}else if(0>h)switch(!0){case 6==f:a=0;break;case 0==f:a=1;break;case 6==d:a=2;break;case 0==d:a=1;break;case 0>b+e:a=2}h=h+a-2*m}a=h;break;case "year":a=h;break;case "month":a=e.getMonth()-b.getMonth()+12*h;break;case "week":a=parseInt(n.difference(b,e,"day")/7);break;case "day":a/=24;case "hour":a/=60;case "minute":a/=60;case "second":a/=1E3;case "millisecond":a*=e.getTime()-b.getTime()}return Math.round(a)}};
e.mixin(e.getObject("dojo.date",!0),n);return n})},"dojo/number":function(){define(["./_base/lang","./i18n","./i18n!./cldr/nls/number","./string","./regexp"],function(b,e,n,h,l){var m={};b.setObject("dojo.number",m);m.format=function(a,f){f=b.mixin({},f||{});var d=e.normalizeLocale(f.locale),d=e.getLocalization("dojo.cldr","number",d);f.customs=d;d=f.pattern||d[(f.type||"decimal")+"Format"];return isNaN(a)||Infinity==Math.abs(a)?null:m._applyPattern(a,d,f)};m._numberPatternRE=/[#0,]*[#0](?:\.0*#*)?/;
m._applyPattern=function(a,f,d){d=d||{};var c=d.customs.group,b=d.customs.decimal;f=f.split(";");var h=f[0];f=f[0>a?1:0]||"-"+h;if(-1!=f.indexOf("%"))a*=100;else if(-1!=f.indexOf("\u2030"))a*=1E3;else if(-1!=f.indexOf("\u00a4"))c=d.customs.currencyGroup||c,b=d.customs.currencyDecimal||b,f=f.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/,function(a,c,f,b){return(a=d[["symbol","currency","displayName"][f.length-1]]||d.currency||"")?c+a+b:""});else if(-1!=f.indexOf("E"))throw Error("exponential notation not supported");
var e=m._numberPatternRE,h=h.match(e);if(!h)throw Error("unable to find a number expression in pattern: "+f);!1===d.fractional&&(d.places=0);return f.replace(e,m._formatAbsolute(a,h[0],{decimal:b,group:c,places:d.places,round:d.round}))};m.round=function(a,f,d){d=10/(d||10);return(d*+a).toFixed(f)/d};if(0==(.9).toFixed()){var k=m.round;m.round=function(a,f,d){var c=Math.pow(10,-f||0),b=Math.abs(a);if(!a||b>=c)c=0;else if(b/=c,.5>b||.95<=b)c=0;return k(a,f,d)+(0<a?c:-c)}}m._formatAbsolute=function(a,
f,d){d=d||{};!0===d.places&&(d.places=0);Infinity===d.places&&(d.places=6);f=f.split(".");var c="string"==typeof d.places&&d.places.indexOf(","),b=d.places;c?b=d.places.substring(c+1):0<=b||(b=(f[1]||[]).length);0>d.round||(a=m.round(a,b,d.round));a=String(Math.abs(a)).split(".");var e=a[1]||"";f[1]||d.places?(c&&(d.places=d.places.substring(0,c)),c=void 0!==d.places?d.places:f[1]&&f[1].lastIndexOf("0")+1,c>e.length&&(a[1]=h.pad(e,c,"0",!0)),b<e.length&&(a[1]=e.substr(0,b))):a[1]&&a.pop();b=f[0].replace(",",
"");c=b.indexOf("0");-1!=c&&(c=b.length-c,c>a[0].length&&(a[0]=h.pad(a[0],c)),-1==b.indexOf("#")&&(a[0]=a[0].substr(a[0].length-c)));var b=f[0].lastIndexOf(","),k,l;-1!=b&&(k=f[0].length-b-1,f=f[0].substr(0,b),b=f.lastIndexOf(","),-1!=b&&(l=f.length-b-1));f=[];for(b=a[0];b;)c=b.length-k,f.push(0<c?b.substr(c):b),b=0<c?b.slice(0,c):"",l&&(k=l,l=void 0);a[0]=f.reverse().join(d.group||",");return a.join(d.decimal||".")};m.regexp=function(a){return m._parseInfo(a).regexp};m._parseInfo=function(a){a=a||
{};var f=e.normalizeLocale(a.locale),f=e.getLocalization("dojo.cldr","number",f),d=a.pattern||f[(a.type||"decimal")+"Format"],c=f.group,b=f.decimal,h=1;if(-1!=d.indexOf("%"))h/=100;else if(-1!=d.indexOf("\u2030"))h/=1E3;else{var k=-1!=d.indexOf("\u00a4");k&&(c=f.currencyGroup||c,b=f.currencyDecimal||b)}f=d.split(";");1==f.length&&f.push("-"+f[0]);f=l.buildGroupRE(f,function(d){d="(?:"+l.escapeString(d,".")+")";return d.replace(m._numberPatternRE,function(d){var f={signed:!1,separator:a.strict?c:[c,
""],fractional:a.fractional,decimal:b,exponent:!1};d=d.split(".");var p=a.places;1==d.length&&1!=h&&(d[1]="###");1==d.length||0===p?f.fractional=!1:(void 0===p&&(p=a.pattern?d[1].lastIndexOf("0")+1:Infinity),p&&void 0==a.fractional&&(f.fractional=!0),!a.places&&p<d[1].length&&(p+=","+d[1].length),f.places=p);d=d[0].split(",");1<d.length&&(f.groupSize=d.pop().length,1<d.length&&(f.groupSize2=d.pop().length));return"("+m._realNumberRegexp(f)+")"})},!0);k&&(f=f.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/g,
function(c,d,f,b){c=l.escapeString(a[["symbol","currency","displayName"][f.length-1]]||a.currency||"");if(!c)return"";d=d?"[\\s\\xa0]":"";b=b?"[\\s\\xa0]":"";return a.strict?d+c+b:(d&&(d+="*"),b&&(b+="*"),"(?:"+d+c+b+")?")}));return{regexp:f.replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:c,decimal:b,factor:h}};m.parse=function(a,f){f=m._parseInfo(f);a=(new RegExp("^"+f.regexp+"$")).exec(a);if(!a)return NaN;var d=a[1];if(!a[1]){if(!a[2])return NaN;d=a[2];f.factor*=-1}d=d.replace(new RegExp("["+f.group+"\\s\\xa0]",
"g"),"").replace(f.decimal,".");return d*f.factor};m._realNumberRegexp=function(a){a=a||{};"places"in a||(a.places=Infinity);"string"!=typeof a.decimal&&(a.decimal=".");"fractional"in a&&!/^0/.test(a.places)||(a.fractional=[!0,!1]);"exponent"in a||(a.exponent=[!0,!1]);"eSigned"in a||(a.eSigned=[!0,!1]);var f=m._integerRegexp(a),d=l.buildGroupRE(a.fractional,function(c){var d="";c&&0!==a.places&&(d="\\"+a.decimal,d=Infinity==a.places?"(?:"+d+"\\d+)?":d+("\\d{"+a.places+"}"));return d},!0),c=l.buildGroupRE(a.exponent,
function(c){return c?"([eE]"+m._integerRegexp({signed:a.eSigned})+")":""}),f=f+d;d&&(f="(?:(?:"+f+")|(?:"+d+"))");return f+c};m._integerRegexp=function(a){a=a||{};"signed"in a||(a.signed=[!0,!1]);"separator"in a?"groupSize"in a||(a.groupSize=3):a.separator="";var f=l.buildGroupRE(a.signed,function(a){return a?"[-+]":""},!0),d=l.buildGroupRE(a.separator,function(c){if(!c)return"(?:\\d+)";c=l.escapeString(c);" "==c?c="\\s":"\u00a0"==c&&(c="\\s\\xa0");var d=a.groupSize,f=a.groupSize2;return f?(c="(?:0|[1-9]\\d{0,"+
(f-1)+"}(?:["+c+"]\\d{"+f+"})*["+c+"]\\d{"+d+"})",0<d-f?"(?:"+c+"|(?:0|[1-9]\\d{0,"+(d-1)+"}))":c):"(?:0|[1-9]\\d{0,"+(d-1)+"}(?:["+c+"]\\d{"+d+"})*)"},!0);return f+d};return m})},"dojo/i18n":function(){define("./_base/kernel require ./has ./_base/array ./_base/config ./_base/lang ./has!host-browser?./_base/xhr ./json module".split(" "),function(b,e,n,h,l,m,k,a,f){n.add("dojo-preload-i18n-Api",1);k=b.i18n={};var d=/(^.*(^|\/)nls)(\/|$)([^\/]*)\/?([^\/]*)/,c=function(g,a,c,d){var f=[c+d];a=a.split("-");
for(var b="",p=0;p<a.length;p++)if(b+=(b?"-":"")+a[p],!g||g[b])f.push(c+b+"/"+d),f.specificity=b;return f},q={},r=function(g,a,c){c=c?c.toLowerCase():b.locale;g=g.replace(/\./g,"/");a=a.replace(/\./g,"/");return/root/i.test(c)?g+"/nls/"+a:g+"/nls/"+c+"/"+a},x=b.getL10nName=function(g,a,c){return g=f.id+"!"+r(g,a,c)},z=function(g,a,d,f,b,p){g([a],function(t){var u=m.clone(t.root||t.ROOT),h=c(!t._v1x&&t,b,d,f);g(h,function(){for(var g=1;g<h.length;g++)u=m.mixin(m.clone(u),arguments[g]);q[a+"/"+b]=u;
u.$locale=h.specificity;p()})})},v=function(g){var a=l.extraLocale||[],a=m.isArray(a)?a:[a];a.push(g);return a},w=function(c,f,p){var e=d.exec(c),k=e[1]+"/",l=e[5]||e[4],r=k+l,x=(e=e[5]&&e[4])||b.locale||"",A=r+"/"+x,e=e?[x]:v(x),w=e.length,B=function(){--w||p(m.delegate(q[A]))},x=c.split("*"),C="preload"==x[1];if(n("dojo-preload-i18n-Api")){if(C&&(q[c]||(q[c]=1,u(x[2],a.parse(x[3]),1,f)),p(1)),(x=C)||(y&&g.push([c,f,p]),x=y&&!q[A]),x)return}else if(C){p(1);return}h.forEach(e,function(g){var a=r+
"/"+g;n("dojo-preload-i18n-Api")&&t(a);q[a]?B():z(f,r,k,l,g,B)})};n("dojo-preload-i18n-Api");var p=k.normalizeLocale=function(g){g=g?g.toLowerCase():b.locale;return"root"==g?"ROOT":g},y=0,g=[],u=k._preloadLocalizations=function(a,c,d,f){function t(g,a){f([g],a)}function u(g,a){for(g=g.split("-");g.length;){if(a(g.join("-")))return;g.pop()}a("ROOT")}function k(){for(--y;!y&&g.length;)w.apply(null,g.shift())}function l(g){g=p(g);u(g,function(d){if(0<=h.indexOf(c,d)){var b=a.replace(/\./g,"/")+"_"+d;
y++;t(b,function(a){for(var c in a){var b=a[c],p=c.match(/(.+)\/([^\/]+)$/),t;if(p&&(t=p[2],p=p[1]+"/",b._localized)){var h;if("ROOT"===d){var l=h=b._localized;delete b._localized;l.root=b;q[e.toAbsMid(c)]=l}else h=b._localized,q[e.toAbsMid(p+t+"/"+d)]=b;d!==g&&function(a,c,d,b){var p=[],t=[];u(g,function(g){b[g]&&(p.push(e.toAbsMid(a+g+"/"+c)),t.push(e.toAbsMid(a+c+"/"+g)))});p.length?(y++,f(p,function(){for(var f=p.length-1;0<=f;f--)d=m.mixin(m.clone(d),arguments[f]),q[t[f]]=d;q[e.toAbsMid(a+c+
"/"+g)]=m.clone(d);k()})):q[e.toAbsMid(a+c+"/"+g)]=d}(p,t,b,h)}}k()});return!0}return!1})}f=f||e;l();h.forEach(b.config.extraLocale,l)},t=function(){},t=function(g){for(var a,c=g.split("/"),d=b.global[c[0]],f=1;d&&f<c.length-1;d=d[c[f++]]);d&&((a=d[c[f]])||(a=d[c[f].replace(/-/g,"_")]),a&&(q[g]=a));return a};k.getLocalization=function(g,a,c){var d;g=r(g,a,c);w(g,e,function(g){d=g});return d};return m.mixin(k,{dynamic:!0,normalize:function(g,a){return/^\./.test(g)?a(g):g},load:w,cache:q,getL10nName:x})})},
"dojo/string":function(){define(["./_base/kernel","./_base/lang"],function(b,e){var n=/[&<>'"\/]/g,h={"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;","/":"\x26#x2F;"},l={};e.setObject("dojo.string",l);l.escape=function(b){return b?b.replace(n,function(b){return h[b]}):""};l.rep=function(b,h){if(0>=h||!b)return"";for(var a=[];;){h&1&&a.push(b);if(!(h>>=1))break;b+=b}return a.join("")};l.pad=function(b,h,a,f){a||(a="0");b=String(b);h=l.rep(a,Math.ceil((h-b.length)/
a.length));return f?b+h:h+b};l.substitute=function(h,k,a,f){f=f||b.global;a=a?e.hitch(f,a):function(a){return a};return h.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,function(d,c,b){if(""==c)return"$";d=e.getObject(c,!1,k);b&&(d=e.getObject(b,!1,f).call(f,d,c));b=a(d,c);if("undefined"===typeof b)throw Error('string.substitute could not find key "'+c+'" in template');return b.toString()})};l.trim=String.prototype.trim?e.trim:function(b){b=b.replace(/^\s+/,"");for(var h=b.length-1;0<=h;h--)if(/\S/.test(b.charAt(h))){b=
b.substring(0,h+1);break}return b};return l})},"dojo/regexp":function(){define(["./_base/kernel","./_base/lang"],function(b,e){var n={};e.setObject("dojo.regexp",n);n.escapeString=function(b,e){return b.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,function(b){return e&&-1!=e.indexOf(b)?b:"\\"+b})};n.buildGroupRE=function(b,e,m){if(!(b instanceof Array))return e(b);for(var h=[],a=0;a<b.length;a++)h.push(e(b[a]));return n.group(h.join("|"),m)};n.group=function(b,e){return"("+(e?"?:":"")+b+")"};return n})},
"dojo/date/locale":function(){define("../_base/lang ../_base/array ../date ../cldr/supplemental ../i18n ../regexp ../string ../i18n!../cldr/nls/gregorian module".split(" "),function(b,e,n,h,l,m,k,a,f){function d(a,c,d,g){return g.replace(/([a-z])\1*/ig,function(b){var f,p,u=b.charAt(0);b=b.length;var q=["abbr","wide","narrow"];switch(u){case "G":f=c[4>b?"eraAbbr":"eraNames"][0>a.getFullYear()?0:1];break;case "y":f=a.getFullYear();switch(b){case 1:break;case 2:if(!d.fullYear){f=String(f);f=f.substr(f.length-
2);break}default:p=!0}break;case "Q":case "q":f=Math.ceil((a.getMonth()+1)/3);p=!0;break;case "M":case "L":f=a.getMonth();3>b?(f+=1,p=!0):(u=["months","L"==u?"standAlone":"format",q[b-3]].join("-"),f=c[u][f]);break;case "w":f=r._getWeekOfYear(a,0);p=!0;break;case "d":f=a.getDate();p=!0;break;case "D":f=r._getDayOfYear(a);p=!0;break;case "e":case "c":if(f=a.getDay(),2>b){f=(f-h.getFirstDayOfWeek(d.locale)+8)%7;break}case "E":f=a.getDay();3>b?(f+=1,p=!0):(u=["days","c"==u?"standAlone":"format",q[b-
3]].join("-"),f=c[u][f]);break;case "a":u=12>a.getHours()?"am":"pm";f=d[u]||c["dayPeriods-format-wide-"+u];break;case "h":case "H":case "K":case "k":p=a.getHours();switch(u){case "h":f=p%12||12;break;case "H":f=p;break;case "K":f=p%12;break;case "k":f=p||24}p=!0;break;case "m":f=a.getMinutes();p=!0;break;case "s":f=a.getSeconds();p=!0;break;case "S":f=Math.round(a.getMilliseconds()*Math.pow(10,b-3));p=!0;break;case "v":case "z":if(f=r._getZone(a,!0,d))break;b=4;case "Z":u=r._getZone(a,!1,d);u=[0>=
u?"+":"-",k.pad(Math.floor(Math.abs(u)/60),2),k.pad(Math.abs(u)%60,2)];4==b&&(u.splice(0,0,"GMT"),u.splice(3,0,":"));f=u.join("");break;default:throw Error("dojo.date.locale.format: invalid pattern char: "+g);}p&&(f=k.pad(f,b));return f})}function c(a,c,d,g){var f=function(g){return g};c=c||f;d=d||f;g=g||f;var b=a.match(/(''|[^'])+/g),p="'"==a.charAt(0);e.forEach(b,function(g,a){g?(b[a]=(p?d:c)(g.replace(/''/g,"'")),p=!p):b[a]=""});return g(b.join(""))}function q(a,c,d,g){g=m.escapeString(g);d.strict||
(g=g.replace(" a"," ?a"));return g.replace(/([a-z])\1*/ig,function(g){var f;f=g.charAt(0);var b=g.length,p="",u="";d.strict?(1<b&&(p="0{"+(b-1)+"}"),2<b&&(u="0{"+(b-2)+"}")):(p="0?",u="0{0,2}");switch(f){case "y":f="\\d{2,4}";break;case "M":case "L":2<b?(f=c["months-"+("L"==f?"standAlone":"format")+"-"+x[b-3]].slice(0).join("|"),d.strict||(f=f.replace(/\./g,""),f="(?:"+f+")\\.?")):f="1[0-2]|"+p+"[1-9]";break;case "D":f="[12][0-9][0-9]|3[0-5][0-9]|36[0-6]|"+p+"[1-9][0-9]|"+u+"[1-9]";break;case "d":f=
"3[01]|[12]\\d|"+p+"[1-9]";break;case "w":f="[1-4][0-9]|5[0-3]|"+p+"[1-9]";break;case "E":case "e":case "c":f=".+?";break;case "h":f="1[0-2]|"+p+"[1-9]";break;case "k":f="1[01]|"+p+"\\d";break;case "H":f="1\\d|2[0-3]|"+p+"\\d";break;case "K":f="1\\d|2[0-4]|"+p+"[1-9]";break;case "m":case "s":f="[0-5]\\d";break;case "S":f="\\d{"+b+"}";break;case "a":b=d.am||c["dayPeriods-format-wide-am"];p=d.pm||c["dayPeriods-format-wide-pm"];f=b+"|"+p;d.strict||(b!=b.toLowerCase()&&(f+="|"+b.toLowerCase()),p!=p.toLowerCase()&&
(f+="|"+p.toLowerCase()),-1!=f.indexOf(".")&&(f+="|"+f.replace(/\./g,"")));f=f.replace(/\./g,"\\.");break;default:f=".*"}a&&a.push(g);return"("+f+")"}).replace(/[\xa0 ]/g,"[\\s\\xa0]")}var r={};b.setObject(f.id.replace(/\//g,"."),r);r._getZone=function(a,c,d){return c?n.getTimezoneName(a):a.getTimezoneOffset()};r.format=function(a,f){f=f||{};var p=l.normalizeLocale(f.locale),g=f.formatLength||"short",p=r._getGregorianBundle(p),u=[];a=b.hitch(this,d,a,p,f);if("year"==f.selector)return c(p["dateFormatItem-yyyy"]||
"yyyy",a);var t;"date"!=f.selector&&(t=f.timePattern||p["timeFormat-"+g])&&u.push(c(t,a));"time"!=f.selector&&(t=f.datePattern||p["dateFormat-"+g])&&u.push(c(t,a));return 1==u.length?u[0]:p["dateTimeFormat-"+g].replace(/\'/g,"").replace(/\{(\d+)\}/g,function(g,a){return u[a]})};r.regexp=function(a){return r._parseInfo(a).regexp};r._parseInfo=function(a){a=a||{};var d=l.normalizeLocale(a.locale),d=r._getGregorianBundle(d),f=a.formatLength||"short",g=a.datePattern||d["dateFormat-"+f],u=a.timePattern||
d["timeFormat-"+f],f="date"==a.selector?g:"time"==a.selector?u:d["dateTimeFormat-"+f].replace(/\{(\d+)\}/g,function(a,c){return[u,g][c]}),t=[];return{regexp:c(f,b.hitch(this,q,t,d,a)),tokens:t,bundle:d}};r.parse=function(a,c){var d=/[\u200E\u200F\u202A\u202E]/g,g=r._parseInfo(c),f=g.tokens,b=g.bundle;a=(new RegExp("^"+g.regexp.replace(d,"")+"$",g.strict?"":"i")).exec(a&&a.replace(d,""));if(!a)return null;var p=["abbr","wide","narrow"],h=[1970,0,1,0,0,0,0],q="";a=e.every(a,function(g,a){if(!a)return!0;
var d=f[a-1];a=d.length;d=d.charAt(0);switch(d){case "y":if(2!=a&&c.strict)h[0]=g;else if(100>g)g=Number(g),d=""+(new Date).getFullYear(),a=100*d.substring(0,2),d=Math.min(Number(d.substring(2,4))+20,99),h[0]=g<d?a+g:a-100+g;else{if(c.strict)return!1;h[0]=g}break;case "M":case "L":if(2<a){if(a=b["months-"+("L"==d?"standAlone":"format")+"-"+p[a-3]].concat(),c.strict||(g=g.replace(".","").toLowerCase(),a=e.map(a,function(g){return g.replace(".","").toLowerCase()})),g=e.indexOf(a,g),-1==g)return!1}else g--;
h[1]=g;break;case "E":case "e":case "c":a=b["days-"+("c"==d?"standAlone":"format")+"-"+p[a-3]].concat();c.strict||(g=g.toLowerCase(),a=e.map(a,function(g){return g.toLowerCase()}));g=e.indexOf(a,g);if(-1==g)return!1;break;case "D":h[1]=0;case "d":h[2]=g;break;case "a":a=c.am||b["dayPeriods-format-wide-am"];d=c.pm||b["dayPeriods-format-wide-pm"];if(!c.strict){var u=/\./g;g=g.replace(u,"").toLowerCase();a=a.replace(u,"").toLowerCase();d=d.replace(u,"").toLowerCase()}if(c.strict&&g!=a&&g!=d)return!1;
q=g==d?"p":g==a?"a":"";break;case "K":24==g&&(g=0);case "h":case "H":case "k":if(23<g)return!1;h[3]=g;break;case "m":h[4]=g;break;case "s":h[5]=g;break;case "S":h[6]=g}return!0});d=+h[3];"p"===q&&12>d?h[3]=d+12:"a"===q&&12==d&&(h[3]=0);d=new Date(h[0],h[1],h[2],h[3],h[4],h[5],h[6]);c.strict&&d.setFullYear(h[0]);var k=f.join(""),g=-1!=k.indexOf("d"),k=-1!=k.indexOf("M");if(!a||k&&d.getMonth()>h[1]||g&&d.getDate()>h[2])return null;if(k&&d.getMonth()<h[1]||g&&d.getDate()<h[2])d=n.add(d,"hour",1);return d};
var x=["abbr","wide","narrow"],z=[],v={};r.addCustomFormats=function(a,c){z.push({pkg:a,name:c});v={}};r._getGregorianBundle=function(a){if(v[a])return v[a];var c={};e.forEach(z,function(d){d=l.getLocalization(d.pkg,d.name,a);c=b.mixin(c,d)},this);return v[a]=c};r.addCustomFormats(f.id.replace(/\/date\/locale$/,".cldr"),"gregorian");r.getNames=function(a,c,d,g){var f;g=r._getGregorianBundle(g);a=[a,d,c];"standAlone"==d&&(d=a.join("-"),f=g[d],1==f[0]&&(f=void 0));a[1]="format";return(f||g[a.join("-")]).concat()};
r.isWeekend=function(a,c){c=h.getWeekend(c);a=(a||new Date).getDay();c.end<c.start&&(c.end+=7,a<c.start&&(a+=7));return a>=c.start&&a<=c.end};r._getDayOfYear=function(a){return n.difference(new Date(a.getFullYear(),0,1,a.getHours()),a)+1};r._getWeekOfYear=function(a,c){1==arguments.length&&(c=0);var d=(new Date(a.getFullYear(),0,1)).getDay(),g=(d-c+7)%7,g=Math.floor((r._getDayOfYear(a)+g-1)/7);d==c&&g++;return g};return r})},"dojo/cldr/supplemental":function(){define(["../_base/lang","../i18n"],function(b,
e){var n={};b.setObject("dojo.cldr.supplemental",n);n.getFirstDayOfWeek=function(b){b={bd:5,mv:5,ae:6,af:6,bh:6,dj:6,dz:6,eg:6,iq:6,ir:6,jo:6,kw:6,ly:6,ma:6,om:6,qa:6,sa:6,sd:6,sy:6,ye:6,ag:0,ar:0,as:0,au:0,br:0,bs:0,bt:0,bw:0,by:0,bz:0,ca:0,cn:0,co:0,dm:0,"do":0,et:0,gt:0,gu:0,hk:0,hn:0,id:0,ie:0,il:0,"in":0,jm:0,jp:0,ke:0,kh:0,kr:0,la:0,mh:0,mm:0,mo:0,mt:0,mx:0,mz:0,ni:0,np:0,nz:0,pa:0,pe:0,ph:0,pk:0,pr:0,py:0,sg:0,sv:0,th:0,tn:0,tt:0,tw:0,um:0,us:0,ve:0,vi:0,ws:0,za:0,zw:0}[n._region(b)];return void 0===
b?1:b};n._region=function(b){b=e.normalizeLocale(b);b=b.split("-");var h=b[1];h?4==h.length&&(h=b[2]):h={aa:"et",ab:"ge",af:"za",ak:"gh",am:"et",ar:"eg",as:"in",av:"ru",ay:"bo",az:"az",ba:"ru",be:"by",bg:"bg",bi:"vu",bm:"ml",bn:"bd",bo:"cn",br:"fr",bs:"ba",ca:"es",ce:"ru",ch:"gu",co:"fr",cr:"ca",cs:"cz",cv:"ru",cy:"gb",da:"dk",de:"de",dv:"mv",dz:"bt",ee:"gh",el:"gr",en:"us",es:"es",et:"ee",eu:"es",fa:"ir",ff:"sn",fi:"fi",fj:"fj",fo:"fo",fr:"fr",fy:"nl",ga:"ie",gd:"gb",gl:"es",gn:"py",gu:"in",gv:"gb",
ha:"ng",he:"il",hi:"in",ho:"pg",hr:"hr",ht:"ht",hu:"hu",hy:"am",ia:"fr",id:"id",ig:"ng",ii:"cn",ik:"us","in":"id",is:"is",it:"it",iu:"ca",iw:"il",ja:"jp",ji:"ua",jv:"id",jw:"id",ka:"ge",kg:"cd",ki:"ke",kj:"na",kk:"kz",kl:"gl",km:"kh",kn:"in",ko:"kr",ks:"in",ku:"tr",kv:"ru",kw:"gb",ky:"kg",la:"va",lb:"lu",lg:"ug",li:"nl",ln:"cd",lo:"la",lt:"lt",lu:"cd",lv:"lv",mg:"mg",mh:"mh",mi:"nz",mk:"mk",ml:"in",mn:"mn",mo:"ro",mr:"in",ms:"my",mt:"mt",my:"mm",na:"nr",nb:"no",nd:"zw",ne:"np",ng:"na",nl:"nl",nn:"no",
no:"no",nr:"za",nv:"us",ny:"mw",oc:"fr",om:"et",or:"in",os:"ge",pa:"in",pl:"pl",ps:"af",pt:"br",qu:"pe",rm:"ch",rn:"bi",ro:"ro",ru:"ru",rw:"rw",sa:"in",sd:"in",se:"no",sg:"cf",si:"lk",sk:"sk",sl:"si",sm:"ws",sn:"zw",so:"so",sq:"al",sr:"rs",ss:"za",st:"za",su:"id",sv:"se",sw:"tz",ta:"in",te:"in",tg:"tj",th:"th",ti:"et",tk:"tm",tl:"ph",tn:"za",to:"to",tr:"tr",ts:"za",tt:"ru",ty:"pf",ug:"cn",uk:"ua",ur:"pk",uz:"uz",ve:"za",vi:"vn",wa:"be",wo:"sn",xh:"za",yi:"il",yo:"ng",za:"cn",zh:"cn",zu:"za",ace:"id",
ady:"ru",agq:"cm",alt:"ru",amo:"ng",asa:"tz",ast:"es",awa:"in",bal:"pk",ban:"id",bas:"cm",bax:"cm",bbc:"id",bem:"zm",bez:"tz",bfq:"in",bft:"pk",bfy:"in",bhb:"in",bho:"in",bik:"ph",bin:"ng",bjj:"in",bku:"ph",bqv:"ci",bra:"in",brx:"in",bss:"cm",btv:"pk",bua:"ru",buc:"yt",bug:"id",bya:"id",byn:"er",cch:"ng",ccp:"in",ceb:"ph",cgg:"ug",chk:"fm",chm:"ru",chp:"ca",chr:"us",cja:"kh",cjm:"vn",ckb:"iq",crk:"ca",csb:"pl",dar:"ru",dav:"ke",den:"ca",dgr:"ca",dje:"ne",doi:"in",dsb:"de",dua:"cm",dyo:"sn",dyu:"bf",
ebu:"ke",efi:"ng",ewo:"cm",fan:"gq",fil:"ph",fon:"bj",fur:"it",gaa:"gh",gag:"md",gbm:"in",gcr:"gf",gez:"et",gil:"ki",gon:"in",gor:"id",grt:"in",gsw:"ch",guz:"ke",gwi:"ca",haw:"us",hil:"ph",hne:"in",hnn:"ph",hoc:"in",hoj:"in",ibb:"ng",ilo:"ph",inh:"ru",jgo:"cm",jmc:"tz",kaa:"uz",kab:"dz",kaj:"ng",kam:"ke",kbd:"ru",kcg:"ng",kde:"tz",kdt:"th",kea:"cv",ken:"cm",kfo:"ci",kfr:"in",kha:"in",khb:"cn",khq:"ml",kht:"in",kkj:"cm",kln:"ke",kmb:"ao",koi:"ru",kok:"in",kos:"fm",kpe:"lr",krc:"ru",kri:"sl",krl:"ru",
kru:"in",ksb:"tz",ksf:"cm",ksh:"de",kum:"ru",lag:"tz",lah:"pk",lbe:"ru",lcp:"cn",lep:"in",lez:"ru",lif:"np",lis:"cn",lki:"ir",lmn:"in",lol:"cd",lua:"cd",luo:"ke",luy:"ke",lwl:"th",mad:"id",mag:"in",mai:"in",mak:"id",man:"gn",mas:"ke",mdf:"ru",mdh:"ph",mdr:"id",men:"sl",mer:"ke",mfe:"mu",mgh:"mz",mgo:"cm",min:"id",mni:"in",mnk:"gm",mnw:"mm",mos:"bf",mua:"cm",mwr:"in",myv:"ru",nap:"it",naq:"na",nds:"de","new":"np",niu:"nu",nmg:"cm",nnh:"cm",nod:"th",nso:"za",nus:"sd",nym:"tz",nyn:"ug",pag:"ph",pam:"ph",
pap:"bq",pau:"pw",pon:"fm",prd:"ir",raj:"in",rcf:"re",rej:"id",rjs:"np",rkt:"in",rof:"tz",rwk:"tz",saf:"gh",sah:"ru",saq:"ke",sas:"id",sat:"in",saz:"in",sbp:"tz",scn:"it",sco:"gb",sdh:"ir",seh:"mz",ses:"ml",shi:"ma",shn:"mm",sid:"et",sma:"se",smj:"se",smn:"fi",sms:"fi",snk:"ml",srn:"sr",srr:"sn",ssy:"er",suk:"tz",sus:"gn",swb:"yt",swc:"cd",syl:"bd",syr:"sy",tbw:"ph",tcy:"in",tdd:"cn",tem:"sl",teo:"ug",tet:"tl",tig:"er",tiv:"ng",tkl:"tk",tmh:"ne",tpi:"pg",trv:"tw",tsg:"ph",tts:"th",tum:"mw",tvl:"tv",
twq:"ne",tyv:"ru",tzm:"ma",udm:"ru",uli:"fm",umb:"ao",unr:"in",unx:"in",vai:"lr",vun:"tz",wae:"ch",wal:"et",war:"ph",xog:"ug",xsr:"np",yao:"mz",yap:"fm",yav:"cm",zza:"tr"}[b[0]];return h};n.getWeekend=function(b){var h=n._region(b);b={"in":0,af:4,dz:4,ir:4,om:4,sa:4,ye:4,ae:5,bh:5,eg:5,il:5,iq:5,jo:5,kw:5,ly:5,ma:5,qa:5,sd:5,sy:5,tn:5}[h];h={af:5,dz:5,ir:5,om:5,sa:5,ye:5,ae:6,bh:5,eg:6,il:6,iq:6,jo:6,kw:6,ly:6,ma:6,qa:6,sd:6,sy:6,tn:6}[h];void 0===b&&(b=6);void 0===h&&(h=0);return{start:b,end:h}};
return n})},"esri/core/Message":function(){define(["require","exports","dojo/string"],function(b,e,n){return function(){function b(h,e,k){this instanceof b&&(this.name=h,this.message=e&&n.substitute(e,k,function(a){return null==a?"":a})||"",this.details=k)}b.prototype.toString=function(){return"["+this.name+"]: "+this.message};return b}()})},"esri/core/Collection":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper dojo/aspect ./Accessor ./ArrayPool ./Evented ./lang ./ObjectPool ./scheduling ./accessorSupport/decorators ./accessorSupport/ensureType".split(" "),
function(b,e,n,h,l,m,k,a,f,d,c,q,r){function x(g){return g?g.isInstanceOf&&g.isInstanceOf(B):!1}function z(g){return g?x(g)?g.toArray():g.length?Array.prototype.slice.apply(g):[]:[]}function v(g){if(g&&g.length)return g[0]}function w(g,a,c,d){a&&a.forEach(function(a,f,b){g.push(a);w(g,c.call(d,a,f,b),c,d)})}b=function(){function g(){this.target=null;this.defaultPrevented=this.cancellable=!1}g.prototype.preventDefault=function(){this.cancellable&&(this.defaultPrevented=!0)};g.prototype.reset=function(g){this.defaultPrevented=
!1;this.item=g};return g}();var p=function(){},y=new d(b,!0,function(g){g.item=null;g.target=null}),g=new Set,u=new Set,t=new Set,A=new Map,C=0,B=function(a){function d(g){g=a.call(this,g)||this;g._boundDispatch=g._dispatchColChange.bind(g);g._chgListeners=[];g._notifications=null;g._timer=null;g.length=0;g._items=[];Object.defineProperty(g,"uid",{value:C++});return g}n(d,a);b=d;d.ofType=function(g){if(!g)return b;if(A.has(g))return A.get(g);var a;if("function"===typeof g)a=g.prototype.declaredClass;
else if(g.base)a=g.base.prototype.declaredClass;else for(var c in g.typeMap){var d=g.typeMap[c].prototype.declaredClass;a=a?a+(" | "+d):d}a=b.createSubclass({declaredClass:"esri.core.Collection\x3c"+a+"\x3e"});a.isCollection=x;c={Type:g,ensureType:"function"===typeof g?r.ensureType(g):r.ensureOneOfType(g)};Object.defineProperty(a.prototype,"itemType",{value:c});A.set(g,a);return a};d.prototype.normalizeCtorArgs=function(g){return g?Array.isArray(g)||x(g)?{items:g}:g:{}};Object.defineProperty(d.prototype,
"items",{get:function(){return this._items},set:function(g){this._emitBeforeChanges()||(this._splice.apply(this,[0,this.length].concat(z(g))),this._emitAfterChanges())},enumerable:!0,configurable:!0});d.prototype.on=function(g,a){var c;Array.isArray(g)?c=g:-1<g.indexOf(",")&&(c=g.split(/\s*,\s*/));if(c){var d=[];for(g=0;g<c.length;g++)d.push(this.on(c[g],a));d.remove=function(){for(var g=0;g<d.length;g++)d[g].remove()};return d}if("change"===g){var f=this._chgListeners,b={removed:!1,callback:a};f.push(b);
this._notifications&&this._notifications.push({listeners:f.slice(),items:this._items.slice(),changes:[]});return{remove:function(){this.remove=p;b.removed=!0;f.splice(f.indexOf(b),1)}}}return l.after(this,"on"+g,a,!0)};d.prototype.hasEventListener=function(g){return"change"===g?0<this._chgListeners.length:this.inherited(arguments)};d.prototype.add=function(g,a){if(this._emitBeforeChanges())return this;a=this.getNextIndex(a);this._splice(a,0,g);this._emitAfterChanges();return this};d.prototype.addMany=
function(g,a){void 0===a&&(a=this._items.length);if(!g||!g.length||this._emitBeforeChanges())return this;a=this.getNextIndex(a);this._splice.apply(this,[a,0].concat(z(g)));this._emitAfterChanges();return this};d.prototype.removeAll=function(){if(!this.length||this._emitBeforeChanges())return[];var g=this._splice(0,this.length)||[];this._emitAfterChanges();return g};d.prototype.clone=function(){return this._createNewInstance({items:this._items.map(f.clone)})};d.prototype.concat=function(){for(var g=
[],a=0;a<arguments.length;a++)g[a]=arguments[a];var c,g=g.map(z);return this._createNewInstance({items:(c=this._items).concat.apply(c,g)})};d.prototype.drain=function(g,a){if(this.length&&!this._emitBeforeChanges()){for(var c=this._splice(0,this.length),d=c.length,f=0;f<d;f++)g.call(a,c[f],f,c);this._emitAfterChanges()}};d.prototype.every=function(g,a){return this._items.every(g,a)};d.prototype.filter=function(g,a){var c;c=2===arguments.length?this._items.filter(g,a):this._items.filter(g);return this._createNewInstance({items:c})};
d.prototype.find=function(g,a){if("function"!==typeof g)throw new TypeError(g+" is not a function");for(var c=this._items,d=c.length,f=0;f<d;f++){var b=c[f];if(g.call(a,b,f,c))return b}};d.prototype.findIndex=function(g,a){if("function"!==typeof g)throw new TypeError(g+" is not a function");for(var c=this._items,d=c.length,f=0;f<d;f++)if(g.call(a,c[f],f,c))return f;return-1};d.prototype.flatten=function(g,a){var c=[];w(c,this,g,a);return new b(c)};d.prototype.forEach=function(g,a){for(var c=this._items,
d=c.length,f=0;f<d;f++)g.call(a,c[f],f,c)};d.prototype.getItemAt=function(g){return this._items[g]};d.prototype.getNextIndex=function(g){var a=this.length;g=null==g?a:g;0>g?g=0:g>a&&(g=a);return g};d.prototype.includes=function(g,a){void 0===a&&(a=0);return arguments.length?-1!==this._items.indexOf(g,a):!1};d.prototype.indexOf=function(g,a){void 0===a&&(a=0);return this._items.indexOf(g,a)};d.prototype.join=function(g){void 0===g&&(g=",");return this._items.join(g)};d.prototype.lastIndexOf=function(g,
a){void 0===a&&(a=this.length-1);return this._items.lastIndexOf(g,a)};d.prototype.map=function(g,a){g=this._items.map(g,a);return new b({items:g})};d.prototype.reorder=function(g,a){void 0===a&&(a=this.length-1);var c=this.indexOf(g);if(-1!==c){0>a?a=0:a>=this.length&&(a=this.length-1);if(c!==a){if(this._emitBeforeChanges())return g;this._splice(c,1);this._splice(a,0,g);this._emitAfterChanges()}return g}};d.prototype.pop=function(){if(this.length&&!this._emitBeforeChanges()){var g=v(this._splice(this.length-
1,1));this._emitAfterChanges();return g}};d.prototype.push=function(){for(var g=[],a=0;a<arguments.length;a++)g[a]=arguments[a];if(this._emitBeforeChanges())return this.length;this._splice.apply(this,[this.length,0].concat(g));this._emitAfterChanges();return this.length};d.prototype.reduce=function(g,a){var c=this._items;return 2===arguments.length?c.reduce(g,a):c.reduce(g)};d.prototype.reduceRight=function(g,a){var c=this._items;return 2===arguments.length?c.reduceRight(g,a):c.reduceRight(g)};d.prototype.remove=
function(g){return this.removeAt(this.indexOf(g))};d.prototype.removeAt=function(g){if(!(0>g||g>=this.length||this._emitBeforeChanges()))return g=v(this._splice(g,1)),this._emitAfterChanges(),g};d.prototype.removeMany=function(g){if(!g||!g.length||this._emitBeforeChanges())return[];g=x(g)?g.toArray():g;for(var a=this._items,c=[],d=g.length,f=0;f<d;f++){var b=a.indexOf(g[f]);if(-1<b){for(var p=f+1,u=b+1,t=Math.min(g.length-p,a.length-u),h=0;h<t&&g[p+h]===a[u+h];)h++;p=1+h;(b=this._splice(b,p))&&0<
b.length&&c.push.apply(c,b);f+=p-1}}this._emitAfterChanges();return c};d.prototype.reverse=function(){if(this._emitBeforeChanges())return this;var g=this._splice(0,this.length);g&&(g.reverse(),this._splice.apply(this,[0,0].concat(g)));this._emitAfterChanges();return this};d.prototype.shift=function(){if(this.length&&!this._emitBeforeChanges()){var g=v(this._splice(0,1));this._emitAfterChanges();return g}};d.prototype.slice=function(g,a){void 0===g&&(g=0);void 0===a&&(a=this.length);return this._createNewInstance({items:this._items.slice(g,
a)})};d.prototype.some=function(g,a){return this._items.some(g,a)};d.prototype.sort=function(g){if(!this.length||this._emitBeforeChanges())return this;var a=this._splice(0,this.length);arguments.length?a.sort(g):a.sort();this._splice.apply(this,[0,0].concat(a));return this};d.prototype.splice=function(g,a){for(var c=[],d=2;d<arguments.length;d++)c[d-2]=arguments[d];if(this._emitBeforeChanges())return[];c=this._splice.apply(this,[g,a].concat(c))||[];this._emitAfterChanges();return c};d.prototype.toArray=
function(){return this._items.slice()};d.prototype.toJSON=function(){return this.toArray()};d.prototype.toLocaleString=function(){return this._items.toLocaleString()};d.prototype.toString=function(){return this._items.toString()};d.prototype.unshift=function(){for(var g=[],a=0;a<arguments.length;a++)g[a]=arguments[a];if(this._emitBeforeChanges())return this.length;this._splice.apply(this,[0,0].concat(g));this._emitAfterChanges();return this.length};d.prototype._createNewInstance=function(g){return new this.constructor(g)};
d.prototype._splice=function(g,a){for(var d=[],f=2;f<arguments.length;f++)d[f-2]=arguments[f];var f=this._items,b=this.constructor.prototype.itemType,p,u;!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=c.schedule(this._boundDispatch));if(a){u=f.splice(g,a);if(this.hasEventListener("before-remove")){var t=y.acquire();t.target=this;t.cancellable=!0;
for(var h=0,q=u.length;h<q;h++)p=u[h],t.reset(p),this.emit("before-remove",t),t.defaultPrevented&&(u.splice(h,1),f.splice(g,0,p),g+=1,--h,--q);y.release(t)}this.length=this._items.length;if(this.hasEventListener("after-remove")){p=y.acquire();p.target=this;p.cancellable=!1;q=u.length;for(h=0;h<q;h++)p.reset(u[h]),this.emit("after-remove",p);y.release(p)}}if(d&&d.length){if(b){h=[];for(q=0;q<d.length;q++)p=d[q],t=b.ensureType(p),null==t&&null!=p||h.push(t);d=h}b=this.hasEventListener("before-add");
h=this.hasEventListener("after-add");q=g===this.length;if(b||h){p=y.acquire();p.target=this;p.cancellable=!0;t=y.acquire();t.target=this;t.cancellable=!1;for(var e=0,k=d;e<k.length;e++){var l=k[e];b?(p.reset(l),this.emit("before-add",p),p.defaultPrevented||(q?f.push(l):f.splice(g++,0,l),this._set("length",f.length),h&&(t.reset(l),this.emit("after-add",t)))):(q?f.push(l):f.splice(g++,0,l),this._set("length",f.length),t.reset(l),this.emit("after-add",t))}y.release(p)}else q?f.push.apply(f,d):f.splice.apply(f,
[g,0].concat(d)),this._set("length",f.length)}(d&&d.length||u&&u.length)&&this._notifyChangeEvent(d,u);return u};d.prototype._emitBeforeChanges=function(){var g=!1;if(this.hasEventListener("before-changes")){var a=y.acquire();a.target=this;a.cancellable=!0;this.emit("before-changes",a);g=a.defaultPrevented;y.release(a)}return g};d.prototype._emitAfterChanges=function(){if(this.hasEventListener("after-changes")){var g=y.acquire();g.target=this;g.cancellable=!1;this.emit("after-changes",g);y.release(g)}};
d.prototype._notifyChangeEvent=function(g,a){this.hasEventListener("change")&&this._notifications[this._notifications.length-1].changes.push({added:g,removed:a})};d.prototype._dispatchColChange=function(){this._timer&&(this._timer.remove(),this._timer=null);if(this._notifications){var a=this._notifications;this._notifications=null;for(var c=function(a){var c=a.changes;g.clear();u.clear();t.clear();for(var f=0;f<c.length;f++){var b=c[f],p=b.added,b=b.removed;if(p)if(0===t.size&&0===u.size)for(var h=
0,q=p;h<q.length;h++)p=q[h],g.add(p);else for(h=0,q=p;h<q.length;h++)p=q[h],u.has(p)?(t.add(p),u.delete(p)):t.has(p)||g.add(p);if(b)if(0===t.size&&0===g.size)for(h=0;h<b.length;h++)p=b[h],u.add(p);else for(h=0;h<b.length;h++)p=b[h],g.has(p)?g.delete(p):(t.delete(p),u.add(p))}var e=k.acquire();g.forEach(function(g){e.push(g)});var l=k.acquire();u.forEach(function(g){l.push(g)});var r=d._items,y=a.items,x=k.acquire();t.forEach(function(g){y.indexOf(g)!==r.indexOf(g)&&x.push(g)});if(a.listeners&&(e.length||
l.length||x.length))for(c={target:d,added:e,removed:l,moved:x},f=a.listeners.length,p=0;p<f;p++)b=a.listeners[p],b.removed||b.callback.call(d,c);k.release(e);k.release(l);k.release(x)},d=this,f=0;f<a.length;f++)c(a[f]);g.clear();u.clear();t.clear()}};var b;d.isCollection=x;h([q.property()],d.prototype,"length",void 0);h([q.property()],d.prototype,"items",null);return d=b=h([q.subclass("esri.core.Collection")],d)}(q.declared(m,a));return B})},"esri/core/Accessor":function(){define("./declare ./accessorSupport/Properties ./accessorSupport/get ./accessorSupport/introspection ./accessorSupport/set ./accessorSupport/watch".split(" "),
function(b,e,n,h,l,m){e=e.default;b.before(function(a,f){b.hasMixin(a,k)&&h.processPrototype(f)});b.after(function(a){b.hasMixin(a,k)&&(h.processClass(a),Object.defineProperties(a.prototype,{initialized:{get:function(){return this.__accessor__&&this.__accessor__.initialized||!1}},constructed:{get:function(){return this.__accessor__&&2===this.__accessor__.lifecycle||!1}},destroyed:{get:function(){return this.__accessor__&&this.__accessor__.destroyed||!1}}}))});var k=b(null,{declaredClass:"esri.core.Accessor",
"-chains-":{initialize:"after",destroy:"before"},constructor:function(){if(this.constructor===k)throw Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");Object.defineProperty(this,"__accessor__",{value:new e(this)});if(0<arguments.length&&this.normalizeCtorArgs){for(var a=[],f=0;f<arguments.length;f++)a.push(arguments[f]);this.__accessor__.ctorArgs=this.normalizeCtorArgs.apply(this,a)}},__accessor__:null,postscript:function(a){var f=this.__accessor__;
a=f.ctorArgs||a;var d;null!=this.getDefaults&&(d=this.getDefaults(a||{}),this.set(d));f.initialize();a&&(this.set(a),f.ctorArgs=null);f.constructed();this.initialize()},initialize:function(){},destroy:function(){if(this.destroyed)try{throw Error("instance is already destroyed");}catch(a){console.warn(a.stack)}else m.removeTarget(this),this.__accessor__.destroy()},get:function(a){return n.get(this,a)},hasOwnProperty:function(a){return this.__accessor__?this.__accessor__.has(a):Object.prototype.hasOwnProperty.call(this,
a)},keys:function(){return this.__accessor__?this.__accessor__.keys():[]},set:function(a,f){l.set(this,a,f);return this},watch:function(a,f,d){return m.watch(this,a,f,d)},_clearOverride:function(a){return this.__accessor__.clearOverride(a)},_override:function(a,f){return this.__accessor__.override(a,f)},_isOverridden:function(a){return this.__accessor__.isOverridden(a)},notifyChange:function(a){this.__accessor__.propertyInvalidated(a)},_get:function(a){return this.__accessor__.internalGet(a)},_set:function(a,
f){return this.__accessor__.internalSet(a,f)}});return k})},"esri/core/declare":function(){define(["require","exports","dojo/_base/declare"],function(b,e,n){function h(a,f){a&&!Array.isArray(a)&&"function"!==typeof a&&(f=a,a=null);a=a||[];f=f||{};return l([this].concat(a),f)}function l(a,f){a&&!Array.isArray(a)&&"function"!==typeof a&&(f=a,a=null);"function"===typeof a?a=[a]:a||(a=[]);f=f||{};var d,c;d=0;for(c=m.length;d<c;d++)m[d](a,f);a=n(a,f);a.createSubclass=h;d=0;for(c=k.length;d<c;d++)k[d](a);
return a}var m=[],k=[];(function(a){a.hasMixin=function(a,d){a=Array.isArray(a)?a.reduce(function(a,c){return c._meta?a.concat(c._meta.bases):a},[]):a._meta?a._meta.bases:a;if(!a)return!1;if("string"===typeof d)for(var c=a.length-1;0<=c;c--)if(a[c].prototype.declaredClass===d)return!0;return-1!==a.indexOf(d)};a.safeMixin=function(a,d){return n.safeMixin(a,d)};a.before=function(a){m.push(a)};a.after=function(a){k.push(a)}})(l||(l={}));return l})},"dojo/_base/declare":function(){define(["./kernel",
"../has","./lang"],function(b,e,n){function h(g,a){throw Error("declare"+(a?" "+a:"")+": "+g);}function l(g,a){for(var c=[],d=[{cls:0,refs:[]}],f={},b=1,p=g.length,u=0,q,e,k,l,r;u<p;++u){(q=g[u])?"[object Function]"!=t.call(q)&&h("mixin #"+u+" is not a callable constructor.",a):h("mixin #"+u+" is unknown. Did you use dojo.require to pull it in?",a);e=q._meta?q._meta.bases:[q];k=0;for(q=e.length-1;0<=q;--q)l=e[q].prototype,l.hasOwnProperty("declaredClass")||(l.declaredClass="uniqName_"+C++),l=l.declaredClass,
f.hasOwnProperty(l)||(f[l]={count:0,refs:[],cls:e[q]},++b),l=f[l],k&&k!==l&&(l.refs.push(k),++k.count),k=l;++k.count;d[0].refs.push(k)}for(;d.length;){k=d.pop();c.push(k.cls);for(--b;r=k.refs,1==r.length;){k=r[0];if(!k||--k.count){k=0;break}c.push(k.cls);--b}if(k)for(u=0,p=r.length;u<p;++u)k=r[u],--k.count||d.push(k)}b&&h("can't build consistent linearization",a);q=g[0];c[0]=q?q._meta&&q===c[c.length-q._meta.bases.length]?q._meta.bases.length:1:0;return c}function m(g,a,c,d){var f,b,p,t,q,e,k=this._inherited=
this._inherited||{};"string"===typeof g&&(f=g,g=a,a=c,c=d);if("function"===typeof g)p=g,g=a,a=c;else try{p=g.callee}catch(L){if(L instanceof TypeError)h("strict mode inherited() requires the caller function to be passed before arguments",this.declaredClass);else throw L;}(f=f||p.nom)||h("can't deduce a name to call inherited()",this.declaredClass);c=d=0;t=this.constructor._meta;d=t.bases;e=k.p;if("constructor"!=f){if(k.c!==p&&(e=0,q=d[0],t=q._meta,t.hidden[f]!==p)){(b=t.chains)&&"string"==typeof b[f]&&
h("calling chained method with inherited: "+f,this.declaredClass);do if(t=q._meta,b=q.prototype,t&&(b[f]===p&&b.hasOwnProperty(f)||t.hidden[f]===p))break;while(q=d[++e]);e=q?e:-1}if(q=d[++e])if(b=q.prototype,q._meta&&b.hasOwnProperty(f))c=b[f];else{p=u[f];do if(b=q.prototype,(c=b[f])&&(q._meta?b.hasOwnProperty(f):c!==p))break;while(q=d[++e])}c=q&&c||u[f]}else{if(k.c!==p&&(e=0,(t=d[0]._meta)&&t.ctor!==p)){for((b=t.chains)&&"manual"===b.constructor||h("calling chained constructor with inherited",this.declaredClass);(q=
d[++e])&&(!(t=q._meta)||t.ctor!==p););e=q?e:-1}for(;(q=d[++e])&&!(c=(t=q._meta)?t.ctor:q););c=q&&c}k.c=c;k.p=e;if(c)return!0===a?c:c.apply(this,a||g)}function k(g,a,c){return"string"===typeof g?"function"===typeof a?this.__inherited(g,a,c,!0):this.__inherited(g,a,!0):"function"===typeof g?this.__inherited(g,a,!0):this.__inherited(g,!0)}function a(g,a,c,d){var f=this.getInherited(g,a,c);if(f)return f.apply(this,d||c||a||g)}function f(g){for(var a=this.constructor._meta.bases,c=0,d=a.length;c<d;++c)if(a[c]===
g)return!0;return this instanceof g}function d(g,a){for(var c in a)"constructor"!=c&&a.hasOwnProperty(c)&&(g[c]=a[c])}function c(g){y.safeMixin(this.prototype,g);return this}function q(g,a){g instanceof Array||"function"===typeof g||(a=g,g=void 0);a=a||{};g=g||[];return y([this].concat(g),a)}function r(g,a){return function(){var c=arguments,d=c,f=c[0],b,u;u=g.length;var t;if(!(this instanceof c.callee))return p(c);if(a&&(f&&f.preamble||this.preamble))for(t=Array(g.length),t[0]=c,b=0;;){(f=c[0])&&
(f=f.preamble)&&(c=f.apply(this,c)||c);f=g[b].prototype;(f=f.hasOwnProperty("preamble")&&f.preamble)&&(c=f.apply(this,c)||c);if(++b==u)break;t[b]=c}for(b=u-1;0<=b;--b)f=g[b],(f=(u=f._meta)?u.ctor:f)&&f.apply(this,t?t[b]:c);(f=this.postscript)&&f.apply(this,d)}}function x(g,a){return function(){var c=arguments,d=c,f=c[0];if(!(this instanceof c.callee))return p(c);a&&(f&&(f=f.preamble)&&(d=f.apply(this,d)||d),(f=this.preamble)&&f.apply(this,d));g&&g.apply(this,c);(f=this.postscript)&&f.apply(this,c)}}
function z(g){return function(){var a=arguments,c=0,d,f;if(!(this instanceof a.callee))return p(a);for(;d=g[c];++c)if(d=(f=d._meta)?f.ctor:d){d.apply(this,a);break}(d=this.postscript)&&d.apply(this,a)}}function v(g,a,c){return function(){var d,f,b=0,p=1;c&&(b=a.length-1,p=-1);for(;d=a[b];b+=p)f=d._meta,(d=(f?f.hidden:d.prototype)[g])&&d.apply(this,arguments)}}function w(g){A.prototype=g.prototype;g=new A;A.prototype=null;return g}function p(g){var a=g.callee,c=w(a);a.apply(c,g);return c}function y(a,
b,p){"string"!=typeof a&&(p=b,b=a,a="");p=p||{};var A,C,F,D,H,M,X,O=1,L=b;"[object Array]"==t.call(b)?(M=l(b,a),F=M[0],O=M.length-F,b=M[O]):(M=[0],b?"[object Function]"==t.call(b)?(F=b._meta,M=M.concat(F?F.bases:b)):h("base class is not a callable constructor.",a):null!==b&&h("unknown base class. Did you use dojo.require to pull it in?",a));if(b)for(C=O-1;;--C){A=w(b);if(!C)break;F=M[C];(F._meta?d:g)(A,F.prototype);D=e("csp-restrictions")?function(){}:new Function;D.superclass=b;D.prototype=A;b=A.constructor=
D}else A={};y.safeMixin(A,p);F=p.constructor;F!==u.constructor&&(F.nom="constructor",A.constructor=F);for(C=O-1;C;--C)(F=M[C]._meta)&&F.chains&&(X=g(X||{},F.chains));A["-chains-"]&&(X=g(X||{},A["-chains-"]));b&&b.prototype&&b.prototype["-chains-"]&&(X=g(X||{},b.prototype["-chains-"]));F=!X||!X.hasOwnProperty("constructor");M[0]=D=X&&"manual"===X.constructor?z(M):1==M.length?x(p.constructor,F):r(M,F);D._meta={bases:M,hidden:p,chains:X,parents:L,ctor:p.constructor};D.superclass=b&&b.prototype;D.extend=
c;D.createSubclass=q;D.prototype=A;A.constructor=D;A.getInherited=k;A.isInstanceOf=f;A.inherited=B;A.__inherited=m;a&&(A.declaredClass=a,n.setObject(a,D));if(X)for(H in X)A[H]&&"string"==typeof X[H]&&"constructor"!=H&&(F=A[H]=v(H,M,"after"===X[H]),F.nom=H);return D}var g=n.mixin,u=Object.prototype,t=u.toString,A,C=0;A=e("csp-restrictions")?function(){}:new Function;var B=b.config.isDebug?a:m;b.safeMixin=y.safeMixin=function(g,a){var c,d;for(c in a)d=a[c],d===u[c]&&c in u||"constructor"==c||("[object Function]"==
t.call(d)&&(d.nom=c),g[c]=d);return g};return b.declare=y})},"esri/core/accessorSupport/Properties":function(){define("require exports ../has ../Logger ../ObjectPool ./extensions ./PropertyOrigin ./Store".split(" "),function(b,e,n,h,l,m,k,a){Object.defineProperty(e,"__esModule",{value:!0});h.getLogger("esri.core.accessorSupport.Properties");b=function(){function d(c){this.host=c;this._origin=k.OriginId.USER;this.ctorArgs=this.cursors=null;this.destroyed=!1;this.dirties={};this.lifecycle=0;this.overridden=
null;this.store=new a.default;c=this.host.constructor.__accessorMetadata__;this.metadatas=c.properties;this.autoDestroy=c.autoDestroy}d.prototype.initialize=function(){this.lifecycle=1;m.instanceCreated(this.host,this.metadatas)};d.prototype.constructed=function(){this.lifecycle=2};d.prototype.destroy=function(){this.destroyed=!0;var a=this.cursors;if(this.cursors)for(var d=0,f=Object.getOwnPropertyNames(a);d<f.length;d++){var b=f[d],h=a[b];if(h){for(;0<h.length;)h.pop().propertyDestroyed(this,b);
a[b]=null}}if(this.autoDestroy)for(b in this.metadatas)(a=this.internalGet(b))&&a&&"function"===typeof a.destroy&&(a.destroy(),this.metadatas[b].nonNullable||this.internalSet(b,null))};Object.defineProperty(d.prototype,"initialized",{get:function(){return 0!==this.lifecycle},enumerable:!0,configurable:!0});d.prototype.clearOverride=function(a){this.isOverridden(a)&&(this.overridden[a]=!1,this.propertyInvalidated(a))};d.prototype.get=function(a){var c=this.metadatas[a];if(this.store.has(a)&&!this.dirties[a])return this.store.get(a);
var d=c.get;return d?(c=d.call(this.host),this.store.set(a,c,k.OriginId.COMPUTED),this.propertyCommitted(a),c):c.value};d.prototype.originOf=function(a){var c=this.store.originOf(a);return void 0===c&&(a=this.metadatas[a])&&a.hasOwnProperty("value")?"defaults":k.idToName(c)};d.prototype.has=function(a){return this.metadatas[a]?this.store.has(a):!1};d.prototype.internalGet=function(a){if(this.metadatas[a]){var c=this.store;return c.has(a)?c.get(a):this.metadatas[a].value}};d.prototype.internalSet=
function(a,d){if(this.metadatas[a]){var c=this.initialized?this._origin:k.OriginId.DEFAULTS,f=this.store.get(a,c);if(d!==f||!this.store.has(a,c)||this.isOverridden(a))this.propertyInvalidated(a),this.store.set(a,d,c),this.propertyCommitted(a)}};d.prototype.isOverridden=function(a){return null!=this.overridden&&!0===this.overridden[a]};d.prototype.keys=function(){return this.store.keys()};d.prototype.override=function(a,d){if(this.metadatas[a]){this.overridden||(this.overridden={});var c=this.metadatas[a];
if(!c.nonNullable||null!=d){if(c=c.cast){d=this.cast(c,d);var c=d.valid,b=d.value;f.release(d);if(!c)return;d=b}this.overridden[a]=!0;this.internalSet(a,d)}}};d.prototype.set=function(a,d){if(this.metadatas[a]){var c=this.metadatas[a];if(!c.nonNullable||null!=d){var b=c.set;if(c=c.cast){d=this.cast(c,d);var c=d.valid,h=d.value;f.release(d);if(!c)return;d=h}b?b.call(this.host,d):this.internalSet(a,d)}}};d.prototype.setDefaultOrigin=function(a){this._origin=k.nameToId(a)};d.prototype.propertyInvalidated=
function(a){var c=this.dirties,d=this.isOverridden(a),f=this.cursors&&this.cursors[a],b=this.metadatas[a].computes;if(f)for(var h=0;h<f.length;h++)f[h].propertyInvalidated(this,a);d||(c[a]=!0);if(b)for(a=0;a<b.length;a++)this.propertyInvalidated(b[a])};d.prototype.propertyCommitted=function(a){var c=this.cursors&&this.cursors[a];this.dirties[a]=!1;if(c)for(var d=0;d<c.length;d++)c[d].propertyCommitted(this,a)};d.prototype.addCursor=function(a,d){this.cursors||(this.cursors={});var c=this.cursors[a];
c||(this.cursors[a]=c=[]);c.push(d)};d.prototype.removeCursor=function(a,d){var c=this.cursors[a];this.cursors[a]&&(c.splice(c.indexOf(d),1),0===c.length&&(this.cursors[a]=null))};d.prototype.cast=function(a,d){var c=f.acquire();c.valid=!0;c.value=d;a&&(c.value=a.call(this.host,d,c));return c};return d}();n=function(){function a(){this.value=null;this.valid=!0}a.prototype.acquire=function(){this.valid=!0};a.prototype.release=function(){this.value=null};return a}();var f=new l(n);e.default=b})},"esri/core/has":function(){define(["require",
"exports","dojo/sniff","./global","../views/webgl/context-util"],function(b,e,n,h,l){function m(){var a={available:!1,version:0,majorPerformanceCaveat:!1,supportsHighPrecisionFragment:!1,supportsVertexShaderSamplers:!1,supportsElementIndexUint:!1,supportsStandardDerivatives:!1,supportsInstancedArrays:!1},c=document.createElement("canvas");if(!c)return a;var f=l.createContext(c,{failIfMajorPerformanceCaveat:!0},"webgl");!f&&(f=l.createContext(c,{},"webgl"))&&(a.majorPerformanceCaveat=!0);if(!f)return a;
c=f.getParameter(f.VERSION);if(!c)return a;if(c=c.match(/^WebGL\s+([\d.]*)/))a.version=parseFloat(c[1]),a.available=.94<=a.version,c=f.getShaderPrecisionFormat(f.FRAGMENT_SHADER,f.HIGH_FLOAT),a.supportsHighPrecisionFragment=c&&0<c.precision,a.supportsVertexShaderSamplers=0<f.getParameter(f.MAX_VERTEX_TEXTURE_IMAGE_UNITS),a.supportsElementIndexUint=null!==f.getExtension("OES_element_index_uint"),a.supportsStandardDerivatives=null!==f.getExtension("OES_standard_derivatives"),a.supportsInstancedArrays=
null!==f.getExtension("ANGLE_instanced_arrays");return a}function k(){var a={available:!1,version:0},c=document.createElement("canvas");if(!c)return a;c=l.createContext(c,{},"webgl2");if(!c)return a;a.available=!0;c=c.getParameter(c.VERSION);if(!c)return a;if(c=c.match(/^WebGL\s+([\d.]*)/))a.version=parseFloat(c[1]);return a}var a=null,f=null;(function(){var d=navigator.userAgent,c=d.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i),d=d.match(/iPhone/i);c&&n.add("esri-mobile",
c);d&&n.add("esri-iPhone",d);n.add("esri-geolocation",function(){return!!navigator.geolocation});n.add("esri-canvas-svg-support",function(){return!(n("trident")||n("ie"))});n.add("esri-secure-context",function(){if("isSecureContext"in h)return h.isSecureContext;if(h.location&&h.location.origin)return 0===h.location.origin.indexOf("https:")});n.add("esri-wasm","WebAssembly"in h);n("host-webworker")||(n.add("esri-workers","Worker"in h),n.add("esri-url-encodes-apostrophe",function(){var a=h.document.createElement("a");
a.href="?'";return-1<a.href.indexOf("?%27")}),a||(a=m()),n.add("esri-webgl",a.available),n.add("esri-webgl-high-precision-fragment",a.supportsHighPrecisionFragment),n.add("esri-webgl-vertex-shader-samplers",a.supportsVertexShaderSamplers),n.add("esri-webgl-element-index-uint",a.supportsElementIndexUint),n.add("esri-webgl-standard-derivatives",a.supportsStandardDerivatives),n.add("esri-webgl-instanced-arrays",a.supportsInstancedArrays),n.add("esri-webgl-major-performance-caveat",a.majorPerformanceCaveat),
n.add("esri-featurelayer-webgl",!0),n.add("esri-featurelayer-webgl-labeling",!0),f||(f=k()),n.add("esri-webgl2",f.available))})();return n})},"esri/views/webgl/context-util":function(){define(["require","exports"],function(b,e){function n(b,a,f){void 0===a&&(a={});var d;switch(f){case "webgl":d=["webgl","experimental-webgl","webkit-3d","moz-webgl"];break;case "webgl2":d=["webgl2"];break;default:d=["webgl","experimental-webgl","webkit-3d","moz-webgl"]}f=null;for(var c=0;c<d.length;c++){var h=d[c];
try{f=b.getContext(h,a)}catch(r){}if(f)break}return f}function h(b,a){(b=b.parentNode)&&(b.innerHTML='\x3ctable style\x3d"background-color: #8CE; width: 100%; height: 100%;"\x3e\x3ctr\x3e\x3ctd align\x3d"center"\x3e\x3cdiv style\x3d"display: table-cell; vertical-align: middle;"\x3e\x3cdiv style\x3d""\x3e'+a+"\x3c/div\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e")}Object.defineProperty(e,"__esModule",{value:!0});e.createContextOrErrorHTML=function(b,a,f){void 0===a&&(a={});if(!window.WebGLRenderingContext)return h(b,
l),null;a=n(b,a,f);return a?a:(h(b,m),null)};e.createContext=n;var l='This page requires a browser that supports WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org"\x3eClick here to upgrade your browser.\x3c/a\x3e',m='It doesn\'t appear your computer can support WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org/troubleshooting/"\x3eClick here for more information.\x3c/a\x3e'})},"esri/core/Logger":function(){define(["require","exports","./has"],function(b,e,n){var h={info:0,warn:1,error:2};b=
function(){function b(h){void 0===h&&(h={});this.module=h.module||"";this.writer=h.writer||null;this.level=h.level||null;null!=h.enabled&&(this.enabled=!!h.enabled);b._loggers[this.module]=this;h=this.module.lastIndexOf(".");-1!==h&&(this.parent=b.getLogger(this.module.slice(0,h)))}b.prototype.log=function(b){for(var h=[],a=1;a<arguments.length;a++)h[a-1]=arguments[a];this._isEnabled()&&this._matchLevel(b)&&(a=this._inheritedWriter())&&a.apply(void 0,[b,this.module].concat(h))};b.prototype.error=
function(){for(var b=[],h=0;h<arguments.length;h++)b[h]=arguments[h];this.log.apply(this,["error"].concat(b))};b.prototype.warn=function(){for(var b=[],h=0;h<arguments.length;h++)b[h]=arguments[h];this.log.apply(this,["warn"].concat(b))};b.prototype.info=function(){for(var b=[],h=0;h<arguments.length;h++)b[h]=arguments[h];this.log.apply(this,["info"].concat(b))};b.prototype.getLogger=function(h){return b.getLogger(this.module+"."+h)};b.getLogger=function(h){var e=b._loggers[h];e||(e=new b({module:h}));
return e};b.prototype._parentWithMember=function(b,h){for(var a=this;a&&null==a[b];)a=a.parent;return a?a[b]:h};b.prototype._inheritedWriter=function(){return this._parentWithMember("writer",this._consoleWriter)};b.prototype._consoleWriter=function(b,h){for(var a=[],f=2;f<arguments.length;f++)a[f-2]=arguments[f];console[b].apply(console,["["+h+"]"].concat(a))};b.prototype._matchLevel=function(b){return h[this._parentWithMember("level","error")]<=h[b]};b.prototype._isEnabled=function(){return this._parentWithMember("enabled",
!0)};b._loggers={};return b}();b.getLogger("esri").level="warn";return b})},"esri/core/ObjectPool":function(){define(["require","exports"],function(b,e){var n=function(){return function(){}}();return function(){function b(b,h,e,a,f){void 0===a&&(a=1);void 0===f&&(f=0);this.classConstructor=b;this.acquireFunctionOrWithConstructor=h;this.releaseFunction=e;this.growthSize=a;!0===h?this.acquireFunction=this._constructorAcquireFunction:"function"===typeof h&&(this.acquireFunction=h);this._pool=Array(f);
this._set=new Set;this._initialSize=f;for(b=0;b<f;b++)this._pool[b]=new this.classConstructor;this.growthSize=Math.max(a,1)}b.prototype.acquire=function(){for(var b=[],h=0;h<arguments.length;h++)b[h]=arguments[h];h=this.classConstructor||n;if(0===this._pool.length)for(var e=this.growthSize,a=0;a<e;a++)this._pool[a]=new h;h=this._pool.pop();this.acquireFunction?this.acquireFunction.apply(this,[h].concat(b)):h&&h.acquire&&"function"===typeof h.acquire&&h.acquire.apply(h,b);this._set.delete(h);return h};
b.prototype.release=function(b){b&&!this._set.has(b)&&(this.releaseFunction?this.releaseFunction(b):b&&b.release&&"function"===typeof b.release&&b.release(),this._pool.push(b),this._set.add(b))};b.prototype.prune=function(b){void 0===b&&(b=this._initialSize);if(!(this._pool.length<=b))for(var h;b>this._pool.length;)h=this._pool.shift(),this._set.delete(h),h.dispose&&"function"===typeof h.dispose&&h.dispose()};b.prototype._constructorAcquireFunction=function(b){for(var h=[],e=1;e<arguments.length;e++)h[e-
1]=arguments[e];var a;(a=this.classConstructor).call.apply(a,[b].concat(h))};return b}()})},"esri/core/accessorSupport/extensions":function(){define(["require","exports","./extensions/aliasedProperty","./extensions/computedProperty","./extensions/serializableProperty"],function(b,e,n,h,l){Object.defineProperty(e,"__esModule",{value:!0});var m=[n.default,h.default,l.default];e.processPrototypeMetadatas=function(b,a){for(var f=Object.getOwnPropertyNames(b),d=0;d<m.length;d++){var c=m[d];if(c.processPrototypePropertyMetadata)for(var h=
0,e=f;h<e.length;h++){var k=e[h];c.processPrototypePropertyMetadata(k,b[k],b,a)}}};e.processClassMetadatas=function(b,a){for(var f=Object.getOwnPropertyNames(b),d=0;d<m.length;d++){var c=m[d];if(c.processClassPropertyMetadata)for(var h=0,e=f;h<e.length;h++){var k=e[h];c.processClassPropertyMetadata(k,b[k],b,a)}}};e.instanceCreated=function(b,a){for(var f=Object.getOwnPropertyNames(a),d=0;d<m.length;d++){var c=m[d];c.instanceCreated&&c.instanceCreated(b,a,f)}}})},"esri/core/accessorSupport/extensions/aliasedProperty":function(){define("require exports ../../has ../get ../set ../utils ../wire".split(" "),
function(b,e,n,h,l,m,k){function a(a,d,c){var b=m.getProperties(a);return k.wire(a,c.aliasOf,function(){b.propertyInvalidated(d)})}Object.defineProperty(e,"__esModule",{value:!0});e.AliasedPropertyExtension={processClassPropertyMetadata:function(a,d,c,b){var f=d.aliasOf;if(f&&(a=f.split(".")[0],null!=c[a]&&!d.set&&!d.get)){var e;d.get=function(){var a=h.default(this,f);if("function"===typeof a){e||(e=f.split(".").slice(0,-1).join("."));var c=h.default(this,e);c&&(a=a.bind(c))}return a};d.readOnly||
(d.set=function(a){return l.default(this,f,a)})}},instanceCreated:function(b,d,c){for(var f=0;f<c.length;f++){var h=c[f],e=d[h];e.aliasOf&&a(b,h,e)}}};e.default=e.AliasedPropertyExtension})},"esri/core/accessorSupport/get":function(){define(["require","exports","./utils"],function(b,e,n){function h(a,b,d){if(null!=d.getItemAt||Array.isArray(d)){var c=parseInt(a,10);if(!isNaN(c))return Array.isArray(d)?d[c]:d.getItemAt(c)}c=n.getProperties(d);return b?n.isPropertyDeclared(c,a)?c.get(a):d[a]:n.isPropertyDeclared(c,
a)?c.internalGet(a):d[a]}function l(a,b,d,c){if(null==a)return a;if((a=h(b[c],d,a))||!(c<b.length-1))return c===b.length-1?a:l(a,b,d,c+1)}function m(a,b,d,c){void 0===d&&(d=!1);void 0===c&&(c=0);return"string"===typeof b&&-1===b.indexOf(".")?h(b,d,a):l(a,n.pathToArray(b),d,c)}function k(a,b){return m(a,b,!0)}Object.defineProperty(e,"__esModule",{value:!0});e.valueOf=m;e.get=k;e.exists=function(a,b){return void 0!==m(b,a,!0)};e.default=k})},"esri/core/accessorSupport/utils":function(){define(["require",
"exports","../lang"],function(b,e,n){function h(a,b,d){return b?Object.keys(b).reduce(function(a,f){var c=null,e="merge";d&&(c=d.path?d.path+"."+f:f,e=d.policy(c));if("replace"===e)return a[f]=b[f],a;if(void 0===a[f])return a[f]=n.clone(b[f]),a;var q=a[f],e=b[f];if(q===e)return a;if(Array.isArray(e)||Array.isArray(a))q=q?Array.isArray(q)?a[f]=q.concat():a[f]=[q]:a[f]=[],e&&(Array.isArray(e)||(e=[e]),e.forEach(function(a){-1===q.indexOf(a)&&q.push(a)}));else if(e&&"object"===typeof e)if(d){var k=d.path;
d.path=c;a[f]=h(q,e,d);d.path=k}else a[f]=h(q,e,null);else if(!a.hasOwnProperty(f)||b.hasOwnProperty(f))a[f]=e;return a},a||{}):a}function l(a){return Array.isArray(a)?a:a.split(".")}function m(a){if(Array.isArray(a)||-1<a.indexOf(",")){a=Array.isArray(a)?a:a.split(",");for(var b=0;b<a.length;b++)a[b]=a[b].trim();return 1===a.length?a[0]:a}return a.trim()}function k(a){var b=!1;return function(){b||(b=!0,a())}}Object.defineProperty(e,"__esModule",{value:!0});e.getProperties=function(a){return a?a.__accessor__?
a.__accessor__:a.propertyInvalidated?a:null:null};e.isPropertyDeclared=function(a,b){return a&&a.metadatas&&null!=a.metadatas[b]};e.merge=function(a,b,d){return d?h(a,b,{policy:d,path:""}):h(a,b,null)};e.pathToStringOrArray=function(a){return a?"string"===typeof a&&-1===a.indexOf(".")?a:l(a):a};e.pathToArray=l;e.splitPath=m;e.parseConditionalPath=function(a){if(-1===a.indexOf("?"))return null;a=l(a);for(var b=Array(a.length),d=0;d<a.length;d++){var c=a[d];b[d]="?"===c[c.length-1];b[d]&&(a[d]=c.slice(0,
-1))}return{fullPath:a.join("."),conditional:b}};e.parse=function(a,b,d,c){b=m(b);if(Array.isArray(b)){var f=b.map(function(b){return c(a,b.trim(),d)});return{remove:k(function(){return f.forEach(function(a){return a.remove()})})}}return c(a,b.trim(),d)};e.once=k})},"esri/core/accessorSupport/set":function(){define(["require","exports","../has","../Logger","./get"],function(b,e,n,h,l){function m(b,a,f){if(b&&a)if("object"===typeof a){f=0;for(var d=Object.getOwnPropertyNames(a);f<d.length;f++){var c=
d[f];m(b,c,a[c])}}else"_"!==a[0]&&(-1!==a.indexOf(".")?(a=a.split("."),c=a.splice(a.length-1,1)[0],m(l.default(b,a),c,f)):b[a]=f)}Object.defineProperty(e,"__esModule",{value:!0});h.getLogger("esri.core.accessorSupport.set");e.set=m;e.default=m})},"esri/core/accessorSupport/wire":function(){define(["require","exports","./utils"],function(b,e,n){function h(d,c,b){c=n.splitPath(c);if(Array.isArray(c)){for(var h=[],e=0;e<c.length;e++)h.push((new l(c[e],b)).install(d));return new a(h)}d=(new l(c,b)).install(d);
return new f(d)}Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function a(a,d){this.path=a;this.callback=d;this.conditional=this.chain=null;if(-1<a.indexOf(".")){if(a=n.parseConditionalPath(a))this.path=a.fullPath,this.conditional=a.conditional;this.chain=n.pathToArray(this.path)}this.callback=d;return this}a.prototype.install=function(a){a=this.chain?new k(this,a):new m(this,a);return a};a.prototype.notify=function(a){this.callback(a,this.path)};return a}(),m=function(){function a(a,
d){this.binding=a;this.target=d;n.getProperties(d).addCursor(this.binding.path,this)}a.prototype.destroy=function(){this.target&&(n.getProperties(this.target).removeCursor(this.binding.path,this),this.target=this.binding=null)};a.prototype.propertyDestroyed=function(a,d){n.getProperties(this.target).removeCursor(d,this)};a.prototype.propertyInvalidated=function(a,d){this.binding&&this.binding.notify(this.target)};a.prototype.propertyCommitted=function(a,d){this.binding&&this.binding.notify(this.target)};
return a}(),k=function(){function a(a,d){this.binding=a;this.target=d;this.stack=[];this.properties=n.getProperties(d);this.stack.push({properties:this.properties,propertyName:a.chain[0]});this.properties.addCursor(a.chain[0],this);this.moveForward();return this}a.prototype.destroy=function(){for(;;){var a=this.stack.pop();if(null==a)break;a.properties.removeCursor(a.propertyName,this)}this.target=this.binding=null};a.prototype.propertyDestroyed=function(a,d){this.moveBackward(a,d)};a.prototype.propertyInvalidated=
function(a,d){this.binding&&this.binding.notify(this.target)};a.prototype.propertyCommitted=function(a,d){this.binding&&(this.moveBackward(a,d),this.moveForward(),this.binding.notify(this.target))};a.prototype.moveBackward=function(a,d){for(var c=this.stack,b=c[c.length-1];b.properties!==a&&b.propertyName!==d;)b.properties.removeCursor(b.propertyName,this),c.pop(),b=c[c.length-1]};a.prototype.moveForward=function(){var a=this.stack,d=a[a.length-1],d=d.properties.internalGet(d.propertyName);if((d=
n.getProperties(d))&&a.length<this.binding.chain.length){var b=this.binding.chain[a.length];this.binding.conditional&&this.binding.conditional[a.length]&&!d.metadatas[b]||(this.stack.push({properties:d,propertyName:b}),d.addCursor(b,this),this.moveForward())}};return a}(),a=function(){function a(a){this.cursors=a}a.prototype.remove=function(){for(var a=this.cursors;0<a.length;)a.pop().destroy();this.cursors=null};return a}(),f=function(){function a(a){this.cursor=a}a.prototype.remove=function(){this.cursor.destroy();
this.cursor=null};return a}();e.create=function(d,c){d=n.splitPath(d);if(Array.isArray(d)){for(var b=[],h=0;h<d.length;h++)b.push(new l(d[h],c));return function(c){for(var d=[],f=0;f<b.length;f++)d[f]=b[f].install(c);return new a(d)}}var e=new l(d,c);return function(a){return new f(e.install(a))}};e.wire=h;e.default=h})},"esri/core/accessorSupport/extensions/computedProperty":function(){define("require exports ../../has ../../Logger ../utils ../wire".split(" "),function(b,e,n,h,l,m){Object.defineProperty(e,
"__esModule",{value:!0});h.getLogger("esri.core.accessorSupport.extensions.computedProperty");e.ComputedPropertyExtension={processClassPropertyMetadata:function(b,a,f,d){a.dependsOn&&(f=void 0,f=a.dependsOn.slice())&&(a.wire=m.create(f,function(a){return l.getProperties(a).propertyInvalidated(b)}))},instanceCreated:function(b,a,f){for(var d=0;d<f.length;d++){var c=a[f[d]];c.wire&&c.wire(b)}}};e.default=e.ComputedPropertyExtension})},"esri/core/accessorSupport/extensions/serializableProperty":function(){define("require exports ../ensureType ./serializableProperty/originAliases ./serializableProperty/reader ./serializableProperty/shorthands ./serializableProperty/writer".split(" "),
function(b,e,n,h,l,m,k){function a(a,d,c){var b=a&&a.json;a&&a.json&&a.json.origins&&c&&(a=a.json.origins[c.origin])&&d in a&&(b=a);return b}Object.defineProperty(e,"__esModule",{value:!0});e.originSpecificReadPropertyDefinition=function(b,d){return a(b,"read",d)};e.originSpecificWritePropertyDefinition=function(b,d){return a(b,"write",d)};e.SerializablePropertyExtension={processPrototypePropertyMetadata:function(a,d,c,b){if(m.process(d)){h.process(d);c=d.type;b=0;if(!n.isOneOf(c))for(;Array.isArray(c);)c=
c[0],b++;if(d.json.origins)for(var f in d.json.origins){var e=d.json.origins[f];l.create(c,b,a,e);k.create(c,b,a,e)}l.create(c,b,a,d.json);k.create(c,b,a,d.json)}}};e.default=e.SerializablePropertyExtension})},"esri/core/accessorSupport/ensureType":function(){define(["require","exports","../Logger"],function(b,e,n){function h(a,g){return g.isInstanceOf?g.isInstanceOf(a):g instanceof a}function l(a){return null==a?a:new Date(a)}function m(a){return null==a?a:!!a}function k(a){return null==a?a:a.toString()}
function a(a){return null==a?a:parseFloat(a)}function f(a){return null==a?a:Math.round(parseFloat(a))}function d(a){return a&&a.constructor&&void 0!==a.constructor._meta}function c(a,g){return null!=g&&a&&!h(a,g)}function q(a){return a&&("isCollection"in a||a._meta&&a._meta.bases&&a._meta.bases.some(function(a){return"isCollection"in a}))}function r(a){return a&&a.Type?"function"===typeof a.Type?a.Type:a.Type.base:null}function x(a,g){if(!g||!g.constructor||!q(g.constructor))return z(a,g)?g:new a(g);
var c=r(a.prototype.itemType),d=r(g.constructor.prototype.itemType);if(!c)return g;if(!d)return new a(g);if(c===d)return g;if((d=d._meta&&d._meta.bases)&&-1!==d.indexOf(c))return new a(g);z(a,g);return g}function z(a,g){return d(g)?(C.error("Accessor#set","Assigning an instance of '"+(g.declaredClass||"unknown")+"' which is not a subclass of '"+(a&&a.prototype&&a.prototype.declaredClass||"unknown")+"'"),!0):!1}function v(a,g){return null==g?g:q(a)?x(a,g):c(a,g)?z(a,g)?g:new a(g):g}function w(g){switch(g){case Number:return a;
case B:return f;case Boolean:return m;case String:return k;case Date:return l;default:return v.bind(null,g)}}function p(a,g){var c=w(a);return 1===arguments.length?c:c(g)}function y(a,g){return 1===arguments.length?y.bind(null,a):g?Array.isArray(g)?g.map(a):[a(g)]:g}function g(a,c,d){return 0!==c&&Array.isArray(d)?d.map(function(d){return g(a,c-1,d)}):a(d)}function u(a,c,d){if(2===arguments.length)return u.bind(null,a,c);if(!d)return d;d=g(a,c,d);for(var b=c,f=d;0<b&&Array.isArray(f);)b--,f=f[0];
if(void 0!==f)for(f=0;f<b;f++)d=[d];return d}function t(a,g){if(2===arguments.length)return t(a).call(null,g);for(var c=new Set,d=0;d<a.length;d++)c.add(a[d]);var b=null;return function(g,d){if(null==g)return g;c.has(g)||(b||(b=a.map(function(a){return"string"===typeof a?"'"+a+"'":""+a}).join(", ")),C.error("Accessor#set","'"+g+"' is not a valid value for this property, only the following values are valid: "+b),d&&(d.valid=!1));return g}}function A(a,g){if(2===arguments.length)return A(a).call(null,
g);var b={},f=[],u=[],t;for(t in a.typeMap){var h=a.typeMap[t];b[t]=p(h);f.push(h&&h.prototype&&h.prototype.declaredClass||"unknown");u.push(t)}var e="string"===typeof a.key?function(g){return g[a.key]}:a.key;return function(g){if(a.base&&!c(a.base,g))return g;var p=e(g)||a.defaultKeyValue,t=b[p];if(!t)return C.error("Accessor#set","Invalid property value, value needs to be one of "+("'"+f.join("', '")+"'")+", or a plain object that can autocast (having .type \x3d "+("'"+u.join("', '")+"'")+")"),
null;if(!c(a.typeMap[p],g))return g;if("string"!==typeof a.key||d(g))return t(g);var p={},h;for(h in g)h!==a.key&&(p[h]=g[h]);return t(p)}}Object.defineProperty(e,"__esModule",{value:!0});var C=n.getLogger("esri.core.Accessor");e.isInstanceOf=h;e.ensureDate=l;e.ensureBoolean=m;e.ensureString=k;e.ensureNumber=a;e.ensureInteger=f;e.isClassedType=d;e.requiresType=c;e.ensureClass=v;e.ensureType=p;e.ensureArrayTyped=y;e.ensureArray=function(a,g){return 1===arguments.length?y(p.bind(null,a)):y(p.bind(null,
a),g)};e.ensureNArrayTyped=u;e.ensureNArray=function(a,g,c){return 2===arguments.length?u(p.bind(null,a),g):u(p.bind(null,a),g,c)};e.isOneOf=function(a){if(!Array.isArray(a))return!1;a=typeof a[0];return"string"===a||"number"===a};e.ensureOneOf=t;e.ensureOneOfType=A;var B=function(){return function(){}}();e.Integer=B;e.default=p})},"esri/core/accessorSupport/extensions/serializableProperty/originAliases":function(){define(["require","exports"],function(b,e){Object.defineProperty(e,"__esModule",{value:!0});
e.process=function(b){if(b.json&&b.json.origins){var h=b.json.origins,e={"web-document":["web-scene","web-map"]};b=function(b){if(h[b]){var a=h[b];e[b].forEach(function(b){h[b]=a});delete h[b]}};for(var m in e)b(m)}}})},"esri/core/accessorSupport/extensions/serializableProperty/reader":function(){define(["require","exports","../../../object","./type"],function(b,e,n,h){function l(c,b,h,e){if(1<b)return a(c,b);if(1===b)return f(c);if(d(c)){var q=f(c.prototype.itemType.Type);return function(a,d,b){return(a=
q(a,d,b))?new c(a):a}}return m(c)}function m(a){return a.prototype.read?function(c,d,b){return null==c?c:(new a).read(c,b)}:a.fromJSON}function k(a,c,d,b){return 0!==b&&Array.isArray(c)?c.map(function(c){return k(a,c,d,b-1)}):a(c,null,d)}function a(a,c){a=m(a);var d=k.bind(null,a);return function(a,b,f){if(null==a)return a;a=d(a,f,c);b=c;for(f=a;0<b&&Array.isArray(f);)b--,f=f[0];if(void 0!==f)for(f=0;f<b;f++)a=[a];return a}}function f(a){var c=m(a);return function(a,d,b){return null==a?a:Array.isArray(a)?
a.map(function(a){return c(a,null,b)}):[c(a,null,b)]}}function d(a){return h.isCollection(a)?(a=a.prototype.itemType)&&a.Type&&"function"===typeof a.Type?c(a.Type):!1:!1}function c(a){return Array.isArray(a)?!1:!!a&&a.prototype&&("read"in a.prototype||"fromJSON"in a||d(a))}Object.defineProperty(e,"__esModule",{value:!0});e.create=function(a,d,b,f){(!f.read||!f.read.reader&&!1!==f.read.enabled)&&c(a)&&n.setDeepValue("read.reader",l(a,d,b,f),f)}})},"esri/core/object":function(){define(["require","exports"],
function(b,e){function n(b,e,m){for(var h=0;h<b.length;h++){var a=b[h];if(!(a in m))if(e)m[a]={};else return;m=m[a]}return m}Object.defineProperty(e,"__esModule",{value:!0});e.getDeepValue=function(b,e){return n(b.split("."),!1,e)};e.setDeepValue=function(b,e,m){var h=b.split(".");b=h.pop();(m=n(h,!0,m))&&b&&(m[b]=e)}})},"esri/core/accessorSupport/extensions/serializableProperty/type":function(){define(["require","exports"],function(b,e){Object.defineProperty(e,"__esModule",{value:!0});e.isCollection=
function(b){return!!b&&b.prototype&&b.prototype.declaredClass&&0===b.prototype.declaredClass.indexOf("esri.core.Collection")}})},"esri/core/accessorSupport/extensions/serializableProperty/shorthands":function(){define(["require","exports"],function(b,e){function n(b){"boolean"===typeof b.read?b.read={enabled:b.read}:"function"===typeof b.read?b.read={enabled:!0,reader:b.read}:b.read&&"object"===typeof b.read&&void 0===b.read.enabled&&(b.read.enabled=!0)}function h(b){"boolean"===typeof b.write?b.write=
{enabled:b.write}:"function"===typeof b.write?b.write={enabled:!0,writer:b.write}:b.write&&"object"===typeof b.write&&void 0===b.write.enabled&&(b.write.enabled=!0)}Object.defineProperty(e,"__esModule",{value:!0});e.process=function(b){b.json||(b.json={});n(b.json);h(b.json);if(b.json.origins)for(var e in b.json.origins)n(b.json.origins[e]),h(b.json.origins[e]);return!0}})},"esri/core/accessorSupport/extensions/serializableProperty/writer":function(){define(["require","exports","../../../object",
"./type"],function(b,e,n,h){function l(a,c,b,f){n.setDeepValue(b,m(a,f),c)}function m(a,c){return a&&"function"===typeof a.write?a.write({},c):a&&"function"===typeof a.toJSON?a.toJSON():"number"===typeof a?-Infinity===a?-Number.MAX_VALUE:Infinity===a?Number.MAX_VALUE:isNaN(a)?null:a:a}function k(a,c,b,f){null===a?a=null:a&&"function"===typeof a.map?(a=a.map(function(a){return m(a,f)}),"function"===typeof a.toArray&&(a=a.toArray())):a=[m(a,f)];n.setDeepValue(b,a,c)}function a(d,c,b){return 0!==b&&
Array.isArray(d)?d.map(function(d){return a(d,c,b-1)}):m(d,c)}function f(d){return function(c,b,f,h){if(null===c)c=null;else{c=a(c,h,d);h=d;for(var e=c;0<h&&Array.isArray(e);)h--,e=e[0];if(void 0!==e)for(e=0;e<h;e++)c=[c]}n.setDeepValue(f,c,b)}}Object.defineProperty(e,"__esModule",{value:!0});e.create=function(a,c,b,e){e.write&&!e.write.writer&&!1!==e.write.enabled&&(1===c||h.isCollection(a)?e.write.writer=k:e.write.writer=1<c?f(c):l)}})},"esri/core/accessorSupport/PropertyOrigin":function(){define(["require",
"exports"],function(b,e){function n(b){switch(b){case "defaults":return l.DEFAULTS;case "service":return l.SERVICE;case "portal-item":return l.PORTAL_ITEM;case "web-scene":return l.WEB_SCENE;case "web-map":return l.WEB_MAP;case "user":return l.USER}}function h(b){switch(b){case l.DEFAULTS:return"defaults";case l.SERVICE:return"service";case l.PORTAL_ITEM:return"portal-item";case l.WEB_SCENE:return"web-scene";case l.WEB_MAP:return"web-map";case l.USER:return"user"}}Object.defineProperty(e,"__esModule",
{value:!0});var l;(function(b){b[b.DEFAULTS=0]="DEFAULTS";b[b.COMPUTED=1]="COMPUTED";b[b.SERVICE=2]="SERVICE";b[b.PORTAL_ITEM=3]="PORTAL_ITEM";b[b.WEB_SCENE=4]="WEB_SCENE";b[b.WEB_MAP=5]="WEB_MAP";b[b.USER=6]="USER";b[b.NUM=7]="NUM"})(l=e.OriginId||(e.OriginId={}));e.nameToId=n;e.idToName=h;e.readableNameToId=function(b){return n(b)};e.idToReadableName=function(b){return h(b)};e.writableNameToId=function(b){return n(b)};e.idToWritableName=function(b){return h(b)}})},"esri/core/accessorSupport/Store":function(){define(["require",
"exports","./PropertyOrigin"],function(b,e,n){Object.defineProperty(e,"__esModule",{value:!0});b=function(){function b(){this._values={}}b.prototype.get=function(b){return this._values[b]};b.prototype.originOf=function(b){return n.OriginId.USER};b.prototype.keys=function(){return Object.keys(this._values)};b.prototype.set=function(b,h){this._values[b]=h};b.prototype.clear=function(b){delete this._values[b]};b.prototype.has=function(b){return b in this._values};return b}();e.default=b})},"esri/core/accessorSupport/introspection":function(){define("require exports ../object ./ensureType ./extensions ./metadata ./utils ./decorators/cast".split(" "),
function(b,e,n,h,l,m,k,a){function f(a){return x.test(a)?"replace":"merge"}Object.defineProperty(e,"__esModule",{value:!0});var d=Object.prototype.hasOwnProperty,c=/^_([a-zA-Z0-9]+)(Getter|Setter|Reader|Writer|Caster)$/,q={Getter:"get",Setter:"set",Reader:"json.read.reader",Writer:"json.write.writer",Caster:"cast"},r=/^_(set|get)([a-zA-Z0-9]+)Attr$/;e.processPrototype=function(a){for(var b=a.declaredClass,f=a.properties||{},p=0,e=Object.getOwnPropertyNames(f);p<e.length;p++){var g=e[p],u=f[g],t=typeof u;
null==u?m.setPropertyMetadata(a,g,{value:u}):Array.isArray(u)?m.setPropertyMetadata(a,g,{type:[u[0]],value:null}):"object"===t?k.getProperties(u)||u instanceof Date?m.setPropertyMetadata(a,g,{type:u.constructor,value:u}):m.setPropertyMetadata(a,g,u):"boolean"===t?m.setPropertyMetadata(a,g,{type:Boolean,value:u}):"string"===t?m.setPropertyMetadata(a,g,{type:String,value:u}):"number"===t?m.setPropertyMetadata(a,g,{type:Number,value:u}):"function"===t&&m.setPropertyMetadata(a,g,{type:u,value:null})}p=
0;for(e=Object.getOwnPropertyNames(a);p<e.length;p++){var t=e[p],u=a[t],f=g=void 0,x=c.exec(t);if(x)g=x[1],f=q[x[2]];else if(x=r.exec(t))g=x[2][0].toLowerCase()+x[2].substr(1),f=x[1].toLowerCase();g&&f&&(g=m.getPropertyMetadata(a,g),n.setDeepValue(f,u,g))}p=0;for(e=Object.getOwnPropertyNames(m.getPropertiesMetadata(a));p<e.length;p++)if(g=e[p],u=m.getPropertyMetadata(a,g),f=u.type,t=u.types,void 0===u.value&&d.call(a,g)&&(u.value=a[g]),!u.cast&&f){g=u;if(h.isOneOf(f))f=h.ensureOneOf(f);else{u=0;for(t=
f;Array.isArray(t);)t=t[0],u++;f=1===u?h.ensureArray(t):1<u?h.ensureNArray(t,u):h.ensureType(f)}g.cast=f}else!u.cast&&t&&(Array.isArray(t)?u.cast=h.ensureArrayTyped(h.ensureOneOfType(t[0])):u.cast=h.ensureOneOfType(t));l.processPrototypeMetadatas(m.getPropertiesMetadata(a),b);return m.getPropertiesMetadata(a)};var x=/^properties\.[^.]+\.(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;e.processClass=function(c){for(var d=c.prototype,b=d.declaredClass,p=c._meta.bases,h={},g=p.length-1;0<=
g;g--)k.merge(h,m.getMetadata(p[g].prototype),f);var u=h.properties;l.processClassMetadatas(u,b);Object.defineProperty(c,"__accessorMetadata__",{value:{properties:u,autoDestroy:!!h.autoDestroy}});for(var t={},b=function(a){var g=u[a];t[a]={enumerable:!0,configurable:!0,get:function(){return this.__accessor__?this.__accessor__.get(a):g.value},set:function(c){var d=this.__accessor__;if(!d)Object.defineProperty(this,a,{enumerable:!0,configurable:!0,writable:!0,value:c});else if(!Object.isFrozen(this)){if(d.initialized&&
g.readOnly)throw new TypeError("[accessor] cannot assign to read-only property '"+a+"' of "+this.declaredClass);if(2===d.lifecycle&&g.constructOnly)throw new TypeError("[accessor] cannot assign to construct-only property '"+a+"' of "+this.declaredClass);d.set(a,c)}}}},p=0,g=Object.getOwnPropertyNames(u);p<g.length;p++)b(g[p]);Object.defineProperties(c.prototype,t);if(h.parameters)for(c=0,b=Object.getOwnPropertyNames(h.parameters);c<b.length;c++)p=b[c],g=Object.getOwnPropertyDescriptor(d,p)||{value:d[p]},
(g=a.autocastMethod(d,p,g))&&Object.defineProperty(d,p,g);return h}})},"esri/core/accessorSupport/metadata":function(){define(["require","exports"],function(b,e){function n(a){return null!=a.__accessorMetadata__}function h(a){return n(a)&&null!=l(a).properties}function l(a){a.__accessorMetadata__||Object.defineProperty(a,"__accessorMetadata__",{value:{},enumerable:!0,configurable:!0,writable:!0});return a.__accessorMetadata__}function m(a){a=l(a);var b=a.properties;b||(b=a.properties={});return b}
function k(a,b){var d=l(a);a=d.parameters;a||(a=d.parameters={});d=a[b];d||(d=[],a[b]=d);return d}Object.defineProperty(e,"__esModule",{value:!0});e.hasMetadata=n;e.hasPropertiesMetadata=h;e.hasPropertyMetadata=function(a,b){return h(a)&&null!=m(a)[b]};e.hasParametersMetadata=function(a,b){return n(a)&&null!=l(a).parameters&&null!=l(a).parameters[b]};e.getMetadata=l;e.getPropertiesMetadata=m;e.getPropertyMetadata=function(a,b){a=m(a);var d=a[b];d||(d=a[b]={});return d};e.setPropertyMetadata=function(a,
b,d){m(a)[b]=d};e.getParametersMetadata=k;e.getParameterMetadata=function(a,b,d){var c=k(a,b)[d];c||(k(a,b)[d]=c={index:d});return c}})},"esri/core/accessorSupport/decorators/cast":function(){define(["require","exports","../ensureType","../metadata"],function(b,e,n,h){function l(a){var c="_meta"in a?n.ensureType(a):a;return function(){for(var a=[],d=0;d<arguments.length;d++)a[d]=arguments[d];a.push(c);return"number"===typeof a[2]?k.apply(this,a):m.apply(this,a)}}function m(a,c,b,f){h.getPropertyMetadata(a,
c).cast=f}function k(a,c,b,f){h.getParameterMetadata(a,c,b).cast=f}function a(a){return function(c,d,b){h.getPropertyMetadata(c,a).cast=c[d]}}Object.defineProperty(e,"__esModule",{value:!0});var f=Object.prototype.toString;e.autocastMethod=function(a,c,b){if(h.hasParametersMetadata(a,c)){var d=h.getParametersMetadata(a,c).filter(function(a){return null!=a.cast});if(d.length){var f=b.value;b.value=function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];for(c=0;c<d.length;c++){var b=d[c];
a[b.index]=b.cast(a[b.index])}return f.apply(this,a)};return b}console.warn("Method "+a.declaredClass+"::"+c+" is decorated with @cast but no parameters are decorated")}};e.cast=function(){for(var d=[],c=0;c<arguments.length;c++)d[c]=arguments[c];if(3!==d.length||"string"!==typeof d[1]){if(1===d.length&&"[object Function]"===f.call(d[0]))return l(d[0]);if(1===d.length&&"string"===typeof d[0])return a(d[0])}}})},"esri/core/accessorSupport/watch":function(){define("require exports ../ArrayPool ../lang ../ObjectPool ../scheduling ./get ./utils ./wire".split(" "),
function(b,e,n,h,l,m,k,a,f){function d(a){p.has(a)?y.splice(y.indexOf(a),1):p.add(a);y.push(a);g||(g=m.schedule(q))}function c(a){if(!a.removed){var g=a.callback,c=a.path,d=a.oldValue,b=a.target,f=k.valueOf(b,a.propertyPath,!0);h.equals(d,f)||(a.oldValue=f,g.call(b,f,d,c,b))}}function q(){if(g){g=null;var a=y;y=w.acquire();p.clear();for(var d=w.acquire(),b=0;b<a.length;b++){var f=a[b];c(f);f.removed&&d.push(f)}for(b=0;b<y.length;b++)f=y[b],f.removed&&(d.push(f),p.delete(f),y.splice(b,1),--b);for(b=
0;b<d.length;b++)v.pool.release(d[b]);w.release(a);w.release(d);u.forEach(function(a){return a()})}}function r(g,c,b){var p=a.parse(g,c,b,function(g,c,b){var u=k.valueOf(g,c,!0),t,h=f.wire(g,c,function(a,g){a.__accessor__.destroyed?p.remove():(t||(t=v.pool.acquire(a,g,u,b),u=null),d(t))});return{remove:a.once(function(){h.remove();t&&(t.removed=!0,d(t),t=null);p=h=u=null})}});return p}function x(g,c,d){var b=a.parse(g,c,d,function(a,g,c){var d=k.valueOf(a,g,!0),p=!1;return f.wire(a,g,function(a,g){if(a.__accessor__.destroyed)b.remove();
else if(!p){p=!0;var f=k.valueOf(a,g,!0);h.equals(d,f)||c.call(a,f,d,g,a);d=k.valueOf(a,g,!0);p=!1}})});return b}function z(a,g,c,d){void 0===d&&(d=!1);return!a.__accessor__||a.__accessor__.destroyed?{remove:function(){}}:d?x(a,g,c):r(a,g,c)}Object.defineProperty(e,"__esModule",{value:!0});var v=function(){function g(g,c,d,b){this.target=g;this.path=c;this.oldValue=d;this.callback=b;this.removed=!1;this.propertyPath=a.pathToStringOrArray(c)}g.prototype.release=function(){this.target=this.path=this.propertyPath=
this.callback=this.oldValue=null;this.removed=!0};g.pool=new l(g,!0);return g}(),w=new n,p=new Set,y=w.acquire(),g;e.dispatchTarget=function(a){for(var g=w.copy(y),d=0;d<g.length;d++){var b=g[d];b.target===a&&(c(b),p.delete(b),y.splice(y.indexOf(b),1))}};e.removeTarget=function(a){for(var g=0;g<y.length;g++){var c=y[g];c.target===a&&(c.removed=!0)}};e.dispatch=q;var u=new Set;e.afterDispatch=function(a){u.add(a);return{remove:function(){u.delete(a)}}};e.watch=z;e.isValueInUse=function(a){return y.some(function(g){return g.oldValue===
a})};e.default=z})},"esri/core/ArrayPool":function(){define(["require","exports","./ObjectPool"],function(b,e,n){function h(b){b.length=0}var l=Array.prototype.splice;b=function(){function b(a,b){void 0===a&&(a=50);void 0===b&&(b=50);this._pool=new n(Array,!1,h,b,a)}b.prototype.acquire=function(){return this._pool.acquire()};b.prototype.copy=function(a){var b=this.acquire();a.unshift(0,0);l.apply(b,a);a.splice(0,2);return b};b.prototype.release=function(a){this._pool.release(a)};b.acquire=function(){return m.acquire()};
b.copy=function(a){return m.copy(a)};b.release=function(a){return m.release(a)};return b}();var m=new b(100);return b})},"esri/core/scheduling":function(){define(["require","exports","./nextTick","./now","./requestAnimationFrame"],function(b,e,n,h,l){function m(a){void 0===a&&(a=e.now());e.debug.rafId=null;0<g.length&&(e.debug.rafId=k());if(0<r){var c=a-r;v=Math.min(c,v);if(c<x)return}e.debug.executeFrameTasks(a)}function k(){return e.debug.requestNextFrame?e.debug.requestNextFrame(d):d()}function a(){for(var a=
0;a<g.length;){var c=g[a];a++;if(c.removed){g.splice(a-1,1);for(var d=0;d<p.length;d++){var b=p[d];if(c.phases[b]){var b=u[b],f=b.indexOf(c);-1!==f&&b.splice(f,1)}}}}}function f(){for(;y.length;){var a=y.shift();a.isActive&&(a.isActive=!1,a.callback())}e.debug.willDispatch=!1}function d(){return l(m)}Object.defineProperty(e,"__esModule",{value:!0});e.now=h;var c=function(){return function(a){this.phases=a;this.paused=!1;this.pausedAt=0;this.epoch=-1;this.dt=0;this.ticks=-1;this.removed=!1}}(),q=function(){function a(a){this.callback=
a;this.isActive=!0}a.prototype.remove=function(){this.isActive=!1};return a}(),r=-1,x=0,z=0,v=Number.POSITIVE_INFINITY,w={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0,spendInTask:0},p=["prepare","preRender","render","postRender","update"],y=[],g=[],u={prepare:[],preRender:[],render:[],postRender:[],update:[]},t=function(){function a(a){this._task=a}a.prototype.remove=function(){this._task.removed=!0};a.prototype.pause=function(){this._task.paused||(this._task.paused=!0,this._task.pausedAt=
e.now())};a.prototype.resume=function(){this._task.paused&&(this._task.paused=!1,-1!==this._task.epoch&&(this._task.epoch+=e.now()-this._task.pausedAt))};return a}();e.FrameTaskHandle=t;e.debug={frameTasks:g,rafId:null,requestNextFrame:null,willDispatch:!1,clearFrameTasks:function(c){void 0===c&&(c=!1);for(var d=0;d<g.length;d++)g[d].removed=!0;c&&a()},dispatch:f,executeFrameTasks:function(c){void 0===c&&(c=e.now());0>r&&(r=c);var d=c-r,b=0<z?z:v,f=Math.max(0,d-b);r=c;for(var h=0;h<g.length;h++){var t=
g[h];-1!==t.epoch&&(t.dt=d)}for(h=0;h<p.length;h++)for(var d=p[h],q=u[d],k=0;k<q.length;k++)t=q[(k+A)%q.length],t.paused||t.removed||(0===h&&t.ticks++,-1===t.epoch&&(t.epoch=c),w.time=c,w.deltaTime=t.dt,w.elapsedFrameTime=e.now()-c,w.frameDuration=b-f,w.spendInTask=c-t.epoch,t.phases[d].call(t,w));a();++A}};e.schedule=function(a){a=new q(a);y.push(a);e.debug.willDispatch||(e.debug.willDispatch=!0,n(f));return a};e.addFrameTask=function(a){var d=new c(a);g.push(d);for(var b=0,f=p;b<f.length;b++){var h=
f[b];a[h]&&u[h].push(d)}e.debug.rafId||(r=-1,e.debug.rafId=k());return new t(d)};e.setFrameRate=function(a){if(0>=a)z=x=0;else{var g=1.05*v;a=Math.ceil(1E3/a/g);x=(a-1)*g;z=a*v}};var A=0;e.requestNextFrame=k})},"esri/core/nextTick":function(){define(["require","exports","./global"],function(b,e,n){function h(){if(n.postMessage&&!n.importScripts){var b=n.onmessage,h=!0;n.onmessage=function(){h=!1};n.postMessage("","*");n.onmessage=b;return h}return!1}var l=n.MutationObserver||n.WebKitMutationObserver;
return function(){var b;if(n.process&&n.process.nextTick)b=function(a){n.process.nextTick(a)};else if(n.Promise)b=function(a){n.Promise.resolve().then(a)};else if(l){var e=[],a=document.createElement("div");(new l(function(){for(;0<e.length;)e.shift()()})).observe(a,{attributes:!0});b=function(b){e.push(b);a.setAttribute("queueStatus","1")}}else if(h()){var f=[];n.addEventListener("message",function(a){if(a.source===n&&"esri-nexttick-message"===a.data)for(a.stopPropagation();f.length;)f.shift()()},
!0);b=function(a){f.push(a);n.postMessage("esri-nexttick-message","*")}}else b=n.setImmediate?function(a){return n.setImmediate(a)}:function(a){return n.setTimeout(a,0)};return b}()})},"esri/core/now":function(){define(["require","exports","./global"],function(b,e,n){return function(){var b=n.performance||{};if(b.now)return function(){return b.now()};if(b.webkitNow)return function(){return b.webkitNow()};if(b.mozNow)return function(){return b.mozNow()};if(b.msNow)return function(){return b.msNow()};
if(b.oNow)return function(){return b.oNow()};var e;e=b.timing&&b.timing.navigationStart?b.timing.navigationStart:Date.now();return function(){return Date.now()-e}}()})},"esri/core/requestAnimationFrame":function(){define(["require","exports","./global","./now"],function(b,e,n,h){var l=h();b=n.requestAnimationFrame;if(!b){e=["ms","moz","webkit","o"];for(var m=0;m<e.length&&!b;++m)b=n[e[m]+"RequestAnimationFrame"];b||(b=function(b){var a=h(),f=Math.max(0,16-(a-l)),d=n.setTimeout(function(){b(h())},
f);l=a+f;return d})}return b})},"esri/core/Evented":function(){define(["require","exports","dojo/aspect","dojo/on"],function(b,e,n,h){function l(b,h,a,f){var d;Array.isArray(h)?d=h:-1<h.indexOf(",")&&(d=h.split(/\s*,\s*/));if(d){var c=[];for(h=0;h<d.length;h++)c.push(l(b,d[h],a,f));c.remove=function(){for(var a=0;a<c.length;a++)c[a].remove()};return c}return f(b,h)}return function(){function b(){}b.prototype.emit=function(b,a){if(this.hasEventListener(b))return a=a||{},a.target||(a.target=this),h.emit(this,
b,a)};b.prototype.on=function(b,a){return l(this,b,a,function(b,d){return n.after(b,"on"+d,a,!0)})};b.prototype.hasEventListener=function(b){b="on"+b;return!(!this[b]||!this[b].after)};return b}()})},"esri/core/accessorSupport/decorators":function(){define("require exports ./decorators/aliasOf ./decorators/autoDestroy ./decorators/cast ./decorators/declared ./decorators/enumeration ./decorators/property ./decorators/reader ./decorators/shared ./decorators/subclass ./decorators/writer".split(" "),
function(b,e,n,h,l,m,k,a,f,d,c,q){function r(a){for(var c in a)e.hasOwnProperty(c)||(e[c]=a[c])}Object.defineProperty(e,"__esModule",{value:!0});r(n);r(h);r(l);r(m);r(k);r(a);r(f);r(d);r(c);r(q)})},"esri/core/accessorSupport/decorators/aliasOf":function(){define(["require","exports","../metadata"],function(b,e,n){Object.defineProperty(e,"__esModule",{value:!0});e.aliasOf=function(b){return function(h,e){n.getPropertyMetadata(h,e).aliasOf=b}}})},"esri/core/accessorSupport/decorators/autoDestroy":function(){define(["require",
"exports","../metadata"],function(b,e,n){Object.defineProperty(e,"__esModule",{value:!0});e.autoDestroy=function(){return function(b,e,m){n.getMetadata(b).autoDestroy=!0;return b[e]}}})},"esri/core/accessorSupport/decorators/declared":function(){define(["require","exports"],function(b,e){Object.defineProperty(e,"__esModule",{value:!0});e.declared=function(b){for(var h=[],e=1;e<arguments.length;e++)h[e-1]=arguments[e];e=function(){return this||{}};e.__bases__=[b].concat(h);return e}})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["require",
"exports","../../kebabDictionary","./property"],function(b,e,n,h){function l(b){return h.property({type:b})}Object.defineProperty(e,"__esModule",{value:!0});e.enumeration=l;(function(b){b.serializable=function(){return function(b){b=b instanceof n.KebabDictionary?b:new n.KebabDictionary(b,{ignoreUnknown:!0});return h.property({type:b.apiValues,json:{type:b.jsonValues,read:{reader:b.read},write:{writer:b.write}}})}}})(l=e.enumeration||(e.enumeration={}))})},"esri/core/kebabDictionary":function(){define(["require",
"exports"],function(b,e){function n(b,e){void 0===e&&(e={});return new h(b,e)}var h=function(){function b(b,h){var a=this;this.jsonToAPI=b;this.options=h;this.apiValues=[];this.jsonValues=[];this.apiToJSON=this.invertMap(b);this.apiValues=this.getKeysSorted(this.apiToJSON);this.jsonValues=this.getKeysSorted(this.jsonToAPI);this.read=function(b){return a.fromJSON(b)};this.write=function(b,d,c){b=a.toJSON(b);void 0!==b&&(d[c]=b)}}b.prototype.toJSON=function(b){return this.apiToJSON.hasOwnProperty(b)?
this.apiToJSON[b]:this.options.ignoreUnknown?void 0:b};b.prototype.fromJSON=function(b){return this.jsonToAPI.hasOwnProperty(b)?this.jsonToAPI[b]:this.options.ignoreUnknown?void 0:b};b.prototype.invertMap=function(b){var h={},a;for(a in b)h[b[a]]=a;return h};b.prototype.getKeysSorted=function(b){var h=[],a;for(a in b)h.push(a);h.sort();return h};return b}();(function(b){b.strict=function(){return function(h){return new b.KebabDictionary(h,{ignoreUnknown:!0})}};b.KebabDictionary=h})(n||(n={}));return n})},
"esri/core/accessorSupport/decorators/property":function(){define("require exports ../../has ../../lang ../../Logger ../metadata".split(" "),function(b,e,n,h,l,m){Object.defineProperty(e,"__esModule",{value:!0});l.getLogger("esri.core.accessorSupport.decorators.property");e.property=function(b){void 0===b&&(b={});return function(a,f){var d=a.constructor.prototype;if(d!==Function.prototype){(a=Object.getOwnPropertyDescriptor(a,f))&&(a.get||a.set)?(b=h.clone(b),a.set&&(b.set=a.set),a.get&&(b.get=a.get)):
a&&a.hasOwnProperty("value")&&(b=h.clone(b),b.value=a.value);f=m.getPropertyMetadata(d,f);for(var c in b)d=b[c],Array.isArray(d)&&"type"!==c?f[c]=(f[c]||[]).concat(d):f[c]=d}}};e.propertyJSONMeta=function(b,a,f){b=m.getPropertyMetadata(b.constructor.prototype,f);b.json||(b.json={});b=b.json;void 0!==a&&(b.origins||(b.origins={}),b.origins[a]||(b.origins[a]={}),b=b.origins[a]);return b}})},"esri/core/accessorSupport/decorators/reader":function(){define(["require","exports","../../object","./property"],
function(b,e,n,h){Object.defineProperty(e,"__esModule",{value:!0});e.reader=function(b,e,k){var a,f;void 0===e||Array.isArray(e)?(f=b,k=e,a=[void 0]):(f=e,a=Array.isArray(b)?b:[b]);return function(b,c,e){var d=b.constructor.prototype;a.forEach(function(a){a=h.propertyJSONMeta(b,a,f);a.read&&"object"!==typeof a.read&&(a.read={});n.setDeepValue("read.reader",d[c],a);k&&(a.read.source=(a.read.source||[]).concat(k))})}}})},"esri/core/accessorSupport/decorators/shared":function(){define(["require","exports"],
function(b,e){Object.defineProperty(e,"__esModule",{value:!0});e.shared=function(b){return function(h,e){h[e]=b}}})},"esri/core/accessorSupport/decorators/subclass":function(){define(["require","exports","../../declare","../metadata"],function(b,e,n,h){function l(a,b){a.read&&("function"===typeof a.read?b.push(a.read):"object"===typeof a.read&&a.read.reader&&b.push(a.read.reader))}function m(a,b){a.write&&("function"===typeof a.write?b.push(a.write):"object"===typeof a.write&&a.write.writer&&b.push(a.write.writer))}
function k(a){var b=[];a=h.getPropertiesMetadata(a.prototype);if(!a)return b;for(var c in a){var d=a[c];d.cast&&b.push(d.cast);d.copy&&b.push(d.copy);if(d=d.json)if(l(d,b),m(d,b),d=d.origins)for(var f in d){var e=d[f];l(e,b);m(e,b)}}return b}function a(a){var b={values:{},descriptors:{}},c=["__bases__"],f=h.getPropertiesMetadata(a.prototype),e=k(a);Object.getOwnPropertyNames(a.prototype).filter(function(b){return-1!==c.indexOf(b)||f&&f.hasOwnProperty(b)||!d(Object.getOwnPropertyDescriptor(a.prototype,
b))&&-1!==e.indexOf(a.prototype[b])?!1:!0}).forEach(function(c){var f=Object.getOwnPropertyDescriptor(a.prototype,c);d(f)?b.descriptors[c]=f:b.values[c]=a.prototype[c]});return b}function f(a){var b=Object.getOwnPropertyNames(a),c=Object.getPrototypeOf(a.prototype).constructor,f=Object.getOwnPropertyNames(Function);f.push("__bases__");var h=Object.getOwnPropertyNames(c),e={values:{},descriptors:{}};b.filter(function(b){return-1!==f.indexOf(b)?!1:-1===h.indexOf(b)||c[b]!==a[b]?!0:!1}).forEach(function(b){var c=
Object.getOwnPropertyDescriptor(a,b);d(c)?e.descriptors[b]=c:e.values[b]=a[b]});return e}function d(a){return a&&!(!a.get&&!a.set)}Object.defineProperty(e,"__esModule",{value:!0});e.subclass=function(b){return function(c){var d=a(c),h=f(c);null!=b&&(d.values.declaredClass=b);c=n(c.__bases__,d.values);Object.defineProperties(c.prototype,d.descriptors);for(var e in h.values)c[e]=h.values[e];Object.defineProperties(c,h.descriptors);return c}}})},"esri/core/accessorSupport/decorators/writer":function(){define(["require",
"exports","../../object","./property"],function(b,e,n,h){Object.defineProperty(e,"__esModule",{value:!0});e.writer=function(b,e,k){var a,f;void 0===e?(f=b,a=[void 0]):"string"!==typeof e?(f=b,a=[void 0],k=e):(f=e,a=Array.isArray(b)?b:[b]);return function(b,c,e){var d=b.constructor.prototype;a.forEach(function(a){a=h.propertyJSONMeta(b,a,f);a.write&&"object"!==typeof a.write&&(a.write={});k&&n.setDeepValue("write.target",k,a);n.setDeepValue("write.writer",d[c],a)})}}})},"esri/core/collectionUtils":function(){define(["require",
"exports","./Collection"],function(b,e,n){Object.defineProperty(e,"__esModule",{value:!0});e.referenceSetter=function(b,e,m){void 0===m&&(m=n);e||(e=new m);e.removeAll();b&&(Array.isArray(b)||b.isInstanceOf&&b.isInstanceOf(n))?e.addMany(b):e.add(b);return e};e.castForReferenceSetter=function(b){return b}})},"esri/core/JSONSupport":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper ./Accessor ./declare ./accessorSupport/decorators ./accessorSupport/read ./accessorSupport/write".split(" "),
function(b,e,n,h,l,m,k,a,f){function d(a,b){if(!a)return null;if(a.declaredClass)throw Error("JSON object is already hydrated");var c=new this;c.read(a,b);return c}var c=function(b){function c(){return null!==b&&b.apply(this,arguments)||this}n(c,b);c.prototype.read=function(b,c){a.default(this,b,c);return this};c.prototype.write=function(a,b){return f.default(this,a||{},b)};c.prototype.toJSON=function(a){return this.write(null,a)};c.fromJSON=function(a,b){return d.call(this,a,b)};return c=h([k.subclass("esri.core.JSONSupport")],
c)}(k.declared(l));c.prototype.toJSON.isDefaultToJSON=!0;m.after(function(a){m.hasMixin(a,c)&&(a.fromJSON=d.bind(a))});return c})},"esri/core/accessorSupport/read":function(){define("require exports ../tsSupport/assignHelper ./get ./utils ./extensions/serializableProperty".split(" "),function(b,e,n,h,l,m){function k(b,d,c){void 0===c&&(c=a);if(d&&"object"===typeof d){for(var f=l.getProperties(b),e=f.metadatas,k={},z=0,v=Object.getOwnPropertyNames(d);z<v.length;z++){var w=k,p=e,y=v[z],g=d,u=c,t=m.originSpecificReadPropertyDefinition(p[y],
u);t&&(!t.read||!1!==t.read.enabled&&!t.read.source)&&(w[y]=!0);for(var A=0,n=Object.getOwnPropertyNames(p);A<n.length;A++){var B=n[A],t=m.originSpecificReadPropertyDefinition(p[B],u),F;a:{F=y;var D=g;if(t&&t.read&&!1!==t.read.enabled&&t.read.source)if(t=t.read.source,"string"===typeof t){if(t===F||-1<t.indexOf(".")&&0===t.indexOf(F)&&h.exists(t,D)){F=!0;break a}}else for(var H=0;H<t.length;H++){var aa=t[H];if(aa===F||-1<aa.indexOf(".")&&0===aa.indexOf(F)&&h.exists(aa,D)){F=!0;break a}}F=!1}F&&(w[B]=
!0)}}f.setDefaultOrigin(c.origin);v=0;for(w=Object.getOwnPropertyNames(k);v<w.length;v++)z=w[v],y=(p=m.originSpecificReadPropertyDefinition(e[z],c).read)&&p.source,g=void 0,g=y&&"string"===typeof y?h.valueOf(d,y):d[z],p&&p.reader&&(g=p.reader.call(b,g,d,c)),void 0!==g&&f.set(z,g);d=0;for(e=Object.getOwnPropertyNames(e);d<e.length;d++)z=e[d],k[z]||(v=b,w=f,p=c,y=(y=m.originSpecificReadPropertyDefinition(w.metadatas[z],p))&&y.read&&y.read.default,void 0!==y&&(v="function"===typeof y?y.call(v,z,p):y,
void 0!==v&&w.set(z,v)));f.setDefaultOrigin("user")}}Object.defineProperty(e,"__esModule",{value:!0});var a={origin:"service"};e.read=k;e.readLoadable=function(b,d,c,h){void 0===h&&(h=a);d=n({},h,{messages:[]});c(d);d.messages.forEach(function(a){"warning"!==a.type||b.loaded?h&&h.messages.push(a):b.loadWarnings.push(a)})};e.default=k})},"esri/core/accessorSupport/write":function(){define("require exports ../Error ../Logger ./PropertyOrigin ./utils ./extensions/serializableProperty".split(" "),function(b,
e,n,h,l,m,k){function a(a,b,f,h,e,k){if(!h||!h.write)return!1;var c=a.get(f);if(void 0===c)return!1;if(!e&&h.write.overridePolicy){var p=h.write.overridePolicy.call(a,c,f,k);void 0!==p&&(e=p)}e||(e=h.write);if(!e||!1===e.enabled)return!1;if(null===c){if(e.allowNull)return!0;e.isRequired&&((a=new n("web-document-write:property-required","Missing value for required property '"+f+"' on '"+a.declaredClass+"'",{propertyName:f,target:a}),k)&&k.messages?k.messages.push(a):a&&!k&&d.error(a.name,a.message));
return!1}return!e.ignoreOrigin&&k&&k.origin&&b.store.originOf(f)<l.nameToId(k.origin)?!1:!0}function f(b,d,f){if(b&&"function"===typeof b.toJSON&&(!b.toJSON.isDefaultToJSON||!b.write))return m.merge(d,b.toJSON());var c=m.getProperties(b),h=c.metadatas,e;for(e in h){var q=k.originSpecificWritePropertyDefinition(h[e],f);if(a(b,c,e,q,null,f)){var p=b.get(e),y={};q.write.writer.call(b,p,y,"string"===typeof q.write.target?q.write.target:e,f);q=y;0<Object.keys(q).length&&(d=m.merge(d,q),f&&f.writtenProperties&&
f.writtenProperties.push({target:b,propName:e,oldOrigin:l.idToReadableName(c.store.originOf(e)),newOrigin:f.origin}))}}return d}Object.defineProperty(e,"__esModule",{value:!0});var d=h.getLogger("esri.core.accessorSupport.write");e.willPropertyWrite=function(b,d,f,h){var c=m.getProperties(b),e=k.originSpecificWritePropertyDefinition(c.metadatas[d],h);return e?a(b,c,d,e,f,h):!1};e.write=f;e.disableWriteDefaultPolicy=function(a){return function(b){return{enabled:b!==a}}};e.default=f})},"esri/core/Loadable":function(){define("./Promise ./Accessor ./Error ./Warning ./lang dojo/aspect dojo/Deferred".split(" "),
function(b,e,n,h,l,m,k){return b.createSubclass([e],{declaredClass:"esri.core.Loadable","-chains-":l.mixin({},e._meta.chains,{load:"after"}),constructor:function(){this._set("loadWarnings",[]);var a=new k;this.addResolvingPromise(a.promise);m.around(this,"load",function(b){return function(){"not-loaded"===this.loadStatus&&(this.loadStatus="loading",b.apply(this));a&&(a.resolve(),a=null);return this.when()}});this.when(function(a){this.loadStatus="loaded"}.bind(this),function(a){this.loadStatus="failed";
this.loadError=a}.bind(this))},properties:{loaded:{readOnly:!0,dependsOn:["loadStatus"],get:function(){return"loaded"===this.loadStatus}},loadError:null,loadStatus:"not-loaded",loadWarnings:{type:[h],readOnly:!0}},load:function(){},cancelLoad:function(){if(this.isFulfilled())return this;this.loadError=new n("load:cancelled","Cancelled");this._promiseProps.cancel(this.loadError);return this}})})},"esri/core/Promise":function(){define("dojo/promise/all dojo/Deferred dojo/aspect dojo/errors/create ./scheduling ./Logger ./declare ./has ./lang".split(" "),
function(b,e,n,h,l,m,k,a,f){function d(a,b){c.warn("DEPRECATED: "+a+"()"+(b?" -- use "+b+" instead":""))}a.add("esri-promise-compatibility",!0);a.add("esri-promise-compatibility-deprecation-warnings",!0);var c=m.getLogger("esri.core.Promise"),q=function(a){var c=a._promiseProps;if(!c.resolver.isFulfilled()){var d=c.resolvingPromises,f,g;c.allPromise&&c.allPromise.cancel();var u=new e;for(f=d.length-1;0<=f;f--)g=d[f],g.isCanceled&&g.isCanceled()?d.splice(f,1):g.then(null,null,c.resolver.progress);
g=null;(c.allPromise=b(d.concat([u.promise]))).then(function(){c.resolver.resolve(a);a=c=u=c.allPromise=c.resolvingPromises=null},function(g){c.allPromise=null;if(!g||"cancel"!==g.dojoType){var b=Array.prototype.slice.call(arguments,0);c.resolver.reject(b[0]);a=c=u=c.allPromise=c.resolvingPromises=null}});u&&l.schedule(function(){u&&u.resolve()})}},r=h("CancelError",null,function(a){this.target=a}),x=function(a){return a||new r(this.instance)},z=function(a){this.instance=a;this.canceler=x.bind(this);
this.resolver=new e;this.initialized=!1;this.resolvingPromises=[]};z.prototype={canceler:null,cancel:function(a){if(!this.resolver.isFulfilled()){this.allPromise.cancel();for(var b=this.resolvingPromises.concat(),c=b.length-1;0<=c;c--)b[c].cancel(a);this.resolver.cancel(a)}}};h={declaredClass:"esri.core.Promise",constructor:function(){Object.defineProperty(this,"_promiseProps",{value:new z(this),enumerable:!1,configurable:!1,writable:!0});var a=n.after(this,"postscript",function(b,c){a.remove();a=
null;q(this)},!0)},_promiseProps:null,always:function(b){a("esri-promise-compatibility-deprecation-warnings")&&d("always",".when(callbackOrErrback, callbackOrErrback)");return this.when(b,b)},isResolved:function(){return this._promiseProps.resolver.isResolved()},isRejected:function(){return this._promiseProps.resolver.isRejected()},isFulfilled:function(){return this._promiseProps.resolver.isFulfilled()},otherwise:function(b){a("esri-promise-compatibility-deprecation-warnings")&&d("otherwise",".when().catch(errback)");
return this.when(null,b)},catch:function(a){return this.when(null,a)},when:function(a,b,c){var d=new e(this._promiseProps.canceler);a=d.then(a,b,c);this._promiseProps.resolver.then(d.resolve,d.reject,d.progress);return a},addResolvingPromise:function(a){a&&!this._promiseProps.resolver.isFulfilled()&&(a._promiseProps&&(a=a.when()),this._promiseProps.resolvingPromises.push(a),q(this))}};a("esri-promise-compatibility")||(h=f.mixin(h,{then:function(b,c,f){a("esri-promise-compatibility-deprecation-warnings")&&
d("then",".when(callback, errback)");return this.when(b,c,f)},cancel:function(){a("esri-promise-compatibility-deprecation-warnings")&&d("cancel")},isCanceled:function(){a("esri-promise-compatibility-deprecation-warnings")&&d("isCanceled");return!1},trace:function(){a("esri-promise-compatibility-deprecation-warnings")&&d("trace");return this},traceRejected:function(){a("esri-promise-compatibility-deprecation-warnings")&&d("traceRejected");return this}}));return k(null,h)})},"esri/core/Warning":function(){define(["require",
"exports","./tsSupport/extendsHelper","./tsSupport/decorateHelper","./Message"],function(b,e,n,h,l){b=function(b){function h(a,f,d){var c=b.call(this,a,f,d)||this;return c instanceof h?c:new h(a,f,d)}n(h,b);return h}(l);b.prototype.type="warning";return b})},"esri/core/loadAll":function(){define("require exports ./tsSupport/generatorHelper ./tsSupport/awaiterHelper ./asyncUtils ./Collection ./Loadable".split(" "),function(b,e,n,h,l,m,k){function a(a,b){return h(this,void 0,void 0,function(){var c,
d,f=this;return n(this,function(e){switch(e.label){case 0:return[4,a.load()];case 1:return e.sent(),c=[],d=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];for(b=0;b<a.length;b++){var f=a[b];f&&(Array.isArray(f)?d.apply(void 0,f):m.isCollection(f)?f.forEach(function(a){return d(a)}):f.isInstanceOf&&f.isInstanceOf(k)&&c.push(f))}},b(d),[4,l.map(c,function(a){return h(f,void 0,void 0,function(){return n(this,function(b){switch(b.label){case 0:return"loadAll"in a&&"function"===typeof a.loadAll?
[4,a.loadAll()]:[3,2];case 1:return b.sent(),[3,4];case 2:return[4,a.load()];case 3:b.sent(),b.label=4;case 4:return[2]}})})})];case 2:return e.sent(),[2,a]}})})}Object.defineProperty(e,"__esModule",{value:!0});e.loadAll=a;e.default=a})},"esri/core/urlUtils":function(){define("require exports ./tsSupport/assignHelper dojo/io-query dojo/_base/url ../config ./Error ./global ./lang ./Logger".split(" "),function(b,e,n,h,l,m,k,a,f,d){function c(a){var g={path:null,query:null},b=new l(a),c=a.indexOf("?");
null===b.query?g.path=a:(g.path=a.substring(0,c),g.query=h.queryToObject(b.query));b.fragment&&(g.hash=b.fragment,null===b.query&&(g.path=g.path.substring(0,g.path.length-(b.fragment.length+1))));return g}function q(a){var g=a.indexOf("?");-1!==g?(N.path=a.slice(0,g),N.query=a.slice(g+1)):(N.path=a,N.query=null);return N}function r(a){a=q(a).path;a&&"/"===a[a.length-1]||(a+="/");a=P(a,!0);return a=a.toLowerCase()}function x(a){var g=O.proxyRules;a=r(a);for(var b=0;b<g.length;b++)if(0===a.indexOf(g[b].urlPrefix))return g[b]}
function z(a){a=y(a);var g=a.indexOf("/sharing");return 0<g?a.substring(0,g):a.replace(/\/+$/,"")}function v(a,g,b){void 0===b&&(b=!1);a=M(a);g=M(g);return b||a.scheme===g.scheme?a.host.toLowerCase()===g.host.toLowerCase()&&a.port===g.port:!1}function w(a,b,c){void 0===b&&(b=e.appBaseUrl);if(F(a))return c&&c.preserveProtocolRelative?a:"http"===e.appUrl.scheme&&e.appUrl.authority===u(a).slice(2)?"http:"+a:"https:"+a;if(D(a))return a;c=g;if("/"===a[0]){var d=b.indexOf("//"),d=b.indexOf("/",d+2);b=-1===
d?b:b.slice(0,d)}return c(b,a)}function p(a,g,b){void 0===g&&(g=e.appBaseUrl);if(!t(a))return a;var c=y(a),d=c.toLowerCase();g=y(g).toLowerCase().replace(/\/+$/,"");if((b=b?y(b).toLowerCase().replace(/\/+$/,""):null)&&0!==g.indexOf(b))return a;for(var f=function(a,g,b){b=a.indexOf(g,b);return-1===b?a.length:b},p=f(d,"/",d.indexOf("//")+2),u=-1;d.slice(0,p+1)===g.slice(0,p)+"/";){u=p+1;if(p===d.length)break;p=f(d,"/",p+1)}if(-1===u||b&&u<b.length)return a;a=c.slice(u);c=g.slice(u-1).replace(/[^/]+/g,
"").length;if(0<c)for(d=0;d<c;d++)a="../"+a;else a="./"+a;return a}function y(a){a=a.trim();a=w(a);if(/^https?:\/\//i.test(a)){var g=q(a);a=g.path.replace(/\/{2,}/g,"/");a=a.replace("/","//");g.query&&(a+="?"+g.query)}a=a.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2");return a=K(a)}function g(){for(var a=[],g=0;g<arguments.length;g++)a[g]=arguments[g];if(a&&a.length){g=[];if(t(a[0])){var b=a[0],c=b.indexOf("//");g.push(b.slice(0,c+1));V.test(a[0])&&(g[0]+="/");a[0]=b.slice(c+2)}else"/"===a[0][0]&&
g.push("");a=a.reduce(function(a,g){return g?a.concat(g.split("/")):a},[]);for(b=0;b<a.length;b++)c=a[b],".."===c&&0<g.length?g.pop():!c||"."===c&&0!==g.length||g.push(c);return g.join("/")}}function u(a){if(A(a)||C(a))return null;var g=a.indexOf("://");if(-1===g&&F(a))g=2;else if(-1!==g)g+=3;else return null;g=a.indexOf("/",g);return-1===g?a:a.slice(0,g)}function t(a){return F(a)||D(a)}function A(a){return"blob:"===a.slice(0,5)}function C(a){return"data:"===a.slice(0,5)}function B(a){return(a=a.match(T))?
{mediaType:a[1],isBase64:!!a[2],data:a[3]}:null}function F(a){return a&&"/"===a[0]&&"/"===a[1]}function D(a){return L.test(a)}function H(a){return Q.test(a)||"http"===e.appUrl.scheme&&F(a)}function aa(a){return F(a)?"https:"+a:a.replace(Q,"https:")}function ga(){return"https"===e.appUrl.scheme}function P(a,g){void 0===g&&(g=!1);if(F(a))return a.slice(2);a=a.replace(L,"");g&&1<a.length&&"/"===a[0]&&"/"===a[1]&&(a=a.slice(2));return a}function K(a){var g=O.httpsDomains;if(!H(a))return a;var b=a.indexOf("/",
7),c;c=-1===b?a:a.slice(0,b);c=c.toLowerCase().slice(7);if(U.test(c))if(f.endsWith(c,":80"))c=c.slice(0,-3),a=a.replace(":80","");else return a;if("http"===e.appUrl.scheme&&c===e.appUrl.authority&&!Y.test(a))return a;if(ga()&&c===e.appUrl.authority||g&&g.some(function(a){return c===a||f.endsWith(c,"."+a)})||ga()&&!x(a))a=aa(a);return a}function ja(a,g,b){if(!(g&&b&&a&&t(a)))return a;var c=a.indexOf("//"),d=a.indexOf("/",c+2),f=a.indexOf(":",c+2),d=Math.min(0>d?a.length:d,0>f?a.length:f);if(a.slice(c+
2,d).toLowerCase()!==g.toLowerCase())return a;g=a.slice(0,c+2);a=a.slice(d);return""+g+b+a}function M(a){if("string"===typeof a)return new l(w(a));a.scheme||(a.scheme=e.appUrl.scheme);return a}Object.defineProperty(e,"__esModule",{value:!0});var X=d.getLogger("esri.core.urlUtils"),O=m.request,L=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,Q=/^\s*http:/i,G=/^\s*https:/i,V=/^\s*file:/i,U=/:\d+$/,Y=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i;e.appUrl=new l(a.location);e.trustedServersUrlCache={};e.appBaseUrl=
function(){var a=e.appUrl.path,a=a.substring(0,a.lastIndexOf(a.split("/")[a.split("/").length-1]));return""+(e.appUrl.scheme+"://"+e.appUrl.host+(null!=e.appUrl.port?":"+e.appUrl.port:""))+a}();e.urlToObject=c;e.getProxyUrl=function(a){void 0===a&&(a=!1);var g,b=O.proxyUrl;if("string"===typeof a){if(g=a,g=G.test(g)||"https"===e.appUrl.scheme&&F(g),a=x(a))b=a.proxyUrl}else g=!!a;if(!b)throw X.warn("esri/config: esriConfig.request.proxyUrl is not set."),new k("urlutils:proxy-not-set","esri/config: esriConfig.request.proxyUrl is not set.");
g&&ga()&&(b=aa(b));return c(b)};e.addProxy=function(a){var g=x(a),b,d;g&&(d=q(g.proxyUrl),b=d.path,d=d.query?h.queryToObject(d.query):null);b&&(g=c(a),a=b+"?"+g.path,(b=h.objectToQuery(n({},d,g.query)))&&(a=a+"?"+b));return a};var N={path:"",query:""};e.addProxyRule=function(a){a={proxyUrl:a.proxyUrl,urlPrefix:r(a.urlPrefix)};for(var g=O.proxyRules,b=a.urlPrefix,c=g.length,d=0;d<g.length;d++){var f=g[d].urlPrefix;if(0===b.indexOf(f)){if(b.length===f.length)return-1;c=d;break}0===f.indexOf(b)&&(c=
d+1)}g.splice(c,0,a);return c};e.getProxyRule=x;e.hasSamePortal=function(a,g){a=z(a);g=z(g);return P(a)===P(g)};e.getInterceptor=function(a){var g=function(g){return null==g||g instanceof RegExp&&g.test(a)||"string"===typeof g&&f.startsWith(a,g)},b=O.interceptors;if(b)for(var c=0;c<b.length;c++){var d=b[c];if(Array.isArray(d.urls)){if(d.urls.some(g))return d}else if(g(d.urls))return d}return null};e.hasSameOrigin=v;e.isTrustedServer=function(a){if("string"===typeof a)if(t(a))a=M(a);else return!0;
for(var g=O.trustedServers||[],b=0;b<g.length;b++){var c;c=g[b];e.trustedServersUrlCache[c]||(D(c)||F(c)?e.trustedServersUrlCache[c]=[new l(w(c))]:e.trustedServersUrlCache[c]=[new l("http://"+c),new l("https://"+c)]);c=e.trustedServersUrlCache[c];for(var d=0;d<c.length;d++)if(v(a,c[d]))return!0}return!1};e.makeAbsolute=w;e.makeRelative=p;e.normalize=y;e.join=g;e.getOrigin=u;e.isAbsolute=t;e.isBlobProtocol=A;e.isDataProtocol=C;e.dataToArrayBuffer=function(a){a=B(a);if(!a||!a.isBase64)return null;a=
atob(a.data);for(var g=new Uint8Array(a.length),b=0;b<a.length;b++)g[b]=a.charCodeAt(b);return g.buffer};var T=/^data:(.*?)(;base64)?,(.*)$/;e.dataComponents=B;e.makeData=function(a){return a.isBase64?"data:"+a.mediaType+";base64,"+a.data:"data:"+a.mediaType+","+a.data};e.isProtocolRelative=F;e.hasProtocol=D;e.toHTTP=function(a){return F(a)?"http:"+a:a.replace(G,"http:")};e.toHTTPS=aa;e.removeFile=function(a){var g=0;if(t(a)){var b=a.indexOf("//");-1!==b&&(g=b+2)}b=a.lastIndexOf("/");return b<g?a:
a.slice(0,b+1)};e.removeTrailingSlash=function(a){return a.replace(/\/+$/,"")};e.changeDomain=ja;e.read=function(a,g){var b=g&&g.url&&g.url.path;a&&b&&(a=w(a,b,{preserveProtocolRelative:!0}));(g=g&&g.portal)&&!g.isPortal&&g.urlKey&&g.customBaseUrl?(b=g.urlKey+"."+g.customBaseUrl,g=v(e.appUrl,e.appUrl.scheme+"://"+b)?ja(a,g.portalHostname,b):ja(a,b,g.portalHostname)):g=a;return g};e.write=function(a,g){if(!a)return a;!t(a)&&g&&g.blockedRelativeUrls&&g.blockedRelativeUrls.push(a);var b=w(a);if(g){var c=
g.verifyItemRelativeUrls&&g.verifyItemRelativeUrls.rootPath||g.url&&g.url.path;c&&(b=p(b,c,c),b!==a&&g.verifyItemRelativeUrls&&g.verifyItemRelativeUrls.writtenUrls.push(b))}a=b;b=(g=g&&g.portal)&&!g.isPortal&&g.urlKey&&g.customBaseUrl?ja(a,g.urlKey+"."+g.customBaseUrl,g.portalHostname):a;return b};e.writeOperationalLayerUrl=function(a,g){a&&F(a)&&(a="https:"+a);g.url=a?y(a):a};e.isSVG=function(a){return ba.test(a)};e.removeQueryParameters=function(a,g){a=c(a);var b=Object.keys(a.query||{});0<b.length&&
g&&g.warn("removeQueryParameters()","Url query parameters are not supported, the following parameters have been removed: "+b.join(", ")+".");return a.path};e.addQueryParameter=function(a,g,b){a=c(a);var d=a.query||{};d[g]=b;return a.path+"?"+h.objectToQuery(d)};e.addQueryParameters=function(a,g){a=c(a);var b=a.query||{},d;for(d in g)b[d]=g[d];return(g=h.objectToQuery(b))?a.path+"?"+g:a.path};e.removeQueryParameter=function(a,g){var b=c(a),d=b.path,b=b.query;if(!b)return a;delete b[g];return(a=h.objectToQuery(b))?
d+"?"+a:d};var ba=/(^data:image\/svg|\.svg$)/i})},"dojo/_base/url":function(){define(["./kernel"],function(b){var e=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/,n=/^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,h=function(){for(var b=arguments,m=[b[0]],k=1;k<b.length;k++)if(b[k]){var a=new h(b[k]+""),m=new h(m[0]+"");if(""==a.path&&!a.scheme&&!a.authority&&!a.query)null!=a.fragment&&(m.fragment=a.fragment),a=m;else if(!a.scheme&&(a.scheme=m.scheme,!a.authority&&
(a.authority=m.authority,"/"!=a.path.charAt(0)))){for(var m=(m.path.substring(0,m.path.lastIndexOf("/")+1)+a.path).split("/"),f=0;f<m.length;f++)"."==m[f]?f==m.length-1?m[f]="":(m.splice(f,1),f--):0<f&&(1!=f||""!=m[0])&&".."==m[f]&&".."!=m[f-1]&&(f==m.length-1?(m.splice(f,1),m[f-1]=""):(m.splice(f-1,2),f-=2));a.path=m.join("/")}m=[];a.scheme&&m.push(a.scheme,":");a.authority&&m.push("//",a.authority);m.push(a.path);a.query&&m.push("?",a.query);a.fragment&&m.push("#",a.fragment)}this.uri=m.join("");
b=this.uri.match(e);this.scheme=b[2]||(b[1]?"":null);this.authority=b[4]||(b[3]?"":null);this.path=b[5];this.query=b[7]||(b[6]?"":null);this.fragment=b[9]||(b[8]?"":null);null!=this.authority&&(b=this.authority.match(n),this.user=b[3]||null,this.password=b[4]||null,this.host=b[6]||b[7],this.port=b[9]||null)};h.prototype.toString=function(){return this.uri};return b._Url=h})},"esri/config":function(){define(["require","exports"],function(b,e){b={screenDPI:96,fontsUrl:"https://static.arcgis.com/fonts",
geometryService:null,geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",portalUrl:"https://www.arcgis.com",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{httpsDomains:"arcgis.com arcgisonline.com esrikr.com premiumservices.blackbridge.com esripremium.accuweather.com gbm.digitalglobe.com firstlook.digitalglobe.com msi.digitalglobe.com".split(" "),
interceptors:[],maxUrlLength:2E3,proxyRules:[],proxyUrl:null,timeout:6E4,trustedServers:[],useIdentity:!0}};b.request.corsEnabledServers=[];b.request.corsEnabledServers.push=function(){console.warn("[esri.config]","request.corsEnabledServers is not supported and will be removed in a future release. See http://esriurl.com/cors8664");return 0};return b})},"esri/layers/Layer":function(){define("require ../core/Accessor ../core/Error ../core/Evented ../core/Identifiable ../core/Loadable ../core/urlUtils ../core/promiseUtils ../core/Logger ../config ../kernel ../request ../geometry/SpatialReference ../geometry/Extent".split(" "),
function(b,e,n,h,l,m,k,a,f,d,c,q,r,x){var z=0,v=f.getLogger("esri.layers.Layer");e=e.createSubclass([h,l,m],{declaredClass:"esri.layers.Layer",properties:{attributionDataUrl:null,credential:{value:null,readOnly:!0,dependsOn:["loaded","parsedUrl"],get:function(){return this.loaded&&this.parsedUrl&&c.id&&c.id.findCredential(this.parsedUrl.path)||null}},fullExtent:new x(-180,-90,180,90,r.WGS84),hasAttributionData:{readOnly:!0,dependsOn:["attributionDataUrl"],get:function(){return null!=this.attributionDataUrl}},
id:{get:function(){return Date.now().toString(16)+"-layer-"+z++}},legendEnabled:!0,listMode:"show",opacity:{value:1,type:Number,nonNullable:!0,cast:function(a){return 0>a?0:1<a?1:a}},parent:null,parsedUrl:{readOnly:!0,dependsOn:["url"],get:function(){var a=this._get("url");return a?k.urlToObject(a):null}},popupEnabled:!0,attributionVisible:!0,spatialReference:r.WGS84,title:null,token:{dependsOn:["credential.token"],get:function(){var a=this.get("parsedUrl.query.token"),b=this.get("credential.token");
return a||b||null},set:function(a){a?this._override("token",a):this._clearOverride("token")}},type:{type:String,readOnly:!0,value:null,json:{read:!1}},url:{value:null},visible:{value:!0,nonNullable:!0,type:Boolean}},initialize:function(){this.when().catch(function(a){f.getLogger(this.declaredClass).error("#load()","Failed to load layer (title: '"+this.title+"', id: '"+this.id+"')",a)}.bind(this))},createLayerView:function(b){return b?this.importLayerViewModule(b).then(function(a){a.default&&(a=a.default);
return new a({layer:this,view:b})}.bind(this)):a.reject(new n("layerview:module-unavailable","No LayerView module available for layer '${layer.declaredClass}' and view type: '${view.type}'",{view:b,layer:this}))},destroyLayerView:function(a){a.destroy()},fetchAttributionData:function(){var b=this.attributionDataUrl;return this.hasAttributionData&&b?q(b,{query:{f:"json"},responseType:"json"}).then(function(a){return a.data}):a.reject(new n("layer:no-attribution-data","Layer does not have attribution data"))},
refresh:function(){this.emit("refresh")},importLayerViewModule:function(b){return a.reject(new n("layerview:override-method","Must provide implementation in '${layer.declaredClass}'",{view:b,layer:this}))}});e.fromArcGISServerUrl=function(c){"string"===typeof c&&(c={url:c});var d=a.create(function(a){b(["./support/arcgisLayers"],a)}).then(function(a){return a.fromUrl(c)});d.catch(function(a){v.error("#fromArcGISServerUrl({ url: '"+c.url+"'})","Failed to create layer from arcgis server url",a)});return d};
e.fromPortalItem=function(c){!c||c.portalItem||"object"!==typeof c||c.declaredClass&&"esri.portal.PortalItem"!==c.declaredClass||(c={portalItem:c});var f=a.create(function(a){b(["../portal/support/portalLayers"],a)}).then(function(a){return a.fromItem(c)});f.catch(function(a){var g=c&&c.portalItem;v.error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+(g&&g.portal&&g.portal.url||d.portalUrl)+"', id: '"+(g&&g.id||"unset")+"')",a)});return f};return e})},"esri/core/Identifiable":function(){define(["./declare"],
function(b){var e=0;return b(null,{constructor:function(){Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+e++})}})})},"esri/kernel":function(){define(["require","./core/promiseUtils","./core/has","dojo/main"],function(b,e,n,h){(function(){var b=h.config,e=b.has&&void 0!==b.has["config-deferredInstrumentation"],k=b.has&&void 0!==b.has["config-useDeferredInstrumentation"];void 0!==b.useDeferredInstrumentation||e||k||(n.add("config-deferredInstrumentation",
!1,!0,!0),n.add("config-useDeferredInstrumentation",!1,!0,!0))})();return{version:"4.9",workerMessages:{request:function(h){return e.create(function(h){b(["./request"],h)}).then(function(b){var e=h.options||{};e.responseType="array-buffer";return b(h.url,e)}).then(function(b){return{result:{data:b.data,ssl:b.ssl},transferList:[b.data]}})}}}})},"dojo/main":function(){define("./_base/kernel ./has require ./sniff ./_base/lang ./_base/array ./_base/config ./ready ./_base/declare ./_base/connect ./_base/Deferred ./_base/json ./_base/Color require ./has!host-browser?./_base/browser require".split(" "),
function(b,e,n,h,l,m,k,a){k.isDebug&&n(["./_firebug/firebug"]);return b})},"esri/request":function(){define("require exports ./core/tsSupport/assignHelper dojo/Deferred dojo/has!host-webworker?./core/workers/request dojo/io-query dojo/_base/url dojo/errors/CancelError dojo/request/xhr ./config ./core/deferredUtils ./core/Error ./core/global ./core/has ./core/lang ./core/promiseUtils ./core/urlUtils".split(" "),function(b,e,n,h,l,m,k,a,f,d,c,q,r,x,z,v,w){function p(a,g){void 0===g&&(g=!1);w.isBlobProtocol(a.url)||
w.isDataProtocol(a.url)||!a.content||(a.preventCache&&(a.content["request.preventCache"]=Date.now()),a.url=w.addQueryParameters(a.url,a.content));var b=new Image;b.crossOrigin=a.withCredentials?"use-credentials":"anonymous";var c=!1,d=new h(function(){c=!0;b.onload=b.onerror=b.onabort=null;b.src=""}),f=function(){b.onload=b.onerror=b.onabort=null;g&&URL.revokeObjectURL(this.src);c||d.reject(Error("Unable to load the resource"))};b.onload=function(){b.onload=b.onerror=b.onabort=null;g&&URL.revokeObjectURL(this.src);
c||d.resolve(this)};b.onerror=f;b.onabort=f;b.alt="";b.src=a.url;return d.promise}function y(a){a=new k(a);return(a.host+(a.port?":"+a.port:"")).toLowerCase()}function g(){return K?K:K=v.create(function(a){b(["./identity/IdentityManager"],a)}).then(function(a){P=a})}function u(a,g){var b=!!a.useProxy,c=a.method||"auto";a=n({},a);a.content=a.content||{};a._ssl&&(a.url=a.url.replace(/^http:/i,"https:"));var d=a.url,u=w.isBlobProtocol(d)||w.isDataProtocol(d);a._token&&(a.content.token=a._token);var t=
0,e;u||(e=m.objectToQuery(a.content),t=e.length+d.length+1,x("esri-url-encodes-apostrophe")&&(t=e.replace(/'/g,"%27").length+d.length+1));a.timeout=null!=a.timeout?a.timeout:D.timeout;a.handleAs=a.handleAs||"json";try{var q=e=void 0,k=!u&&("post"===c||!!a.body||t>D.maxUrlLength),y=!u&&(b||!!w.getProxyRule(a.url)),l;if(l=!y&&"image"===a.handleAs&&D.proxyUrl&&!u){var r=w.getOrigin(a.url);l=!(!r||z.endsWith(r,".arcgis.com")||w.hasSameOrigin(r,w.appUrl)||-1!==F._corsServers.indexOf(r)||w.isTrustedServer(r))}l&&
(a.handleAs="blob");y&&(x("host-browser")||x("host-webworker"))&&(e=w.getProxyUrl(d),q=e.path,!k&&q.length+1+t>D.maxUrlLength&&(k=!0),e.query&&(a.content=n({},e.query,a.content)),k||(a.preventCache&&(a.content["request.preventCache"]=Date.now(),a.preventCache=!1),a.url=w.addQueryParameters(a.url,a.content),a.content=null),a.url=q+"?"+a.url);if(!u){var A=a.headers;!x("host-browser")&&!x("host-webworker")||A&&A.hasOwnProperty("X-Requested-With")||(A=a.headers=A||{},A["X-Requested-With"]=null);if(x("host-browser")&&
g){var v=a.content&&a.content.token;v&&(g.set?g.set("token",v):g.append("token",v));a.contentType=!1}if(!a.hasOwnProperty("withCredentials"))if(b=y?q:d,w.isTrustedServer(b))a.withCredentials=!0;else if(P){var B=P.findServerInfo(b);B&&B.webTierAuth&&(a.withCredentials=!0)}}if(k)return"image"===a.handleAs&&(a.handleAs="blob"),a.body?(a.data=g||a.body,a.query=a.content):a.data=a.content,delete a.body,delete a.content,!y&&x("safari")&&(a.url+=(-1===a.url.indexOf("?")?"?":"\x26")+"_ts\x3d"+(new Date).getTime()+
aa++),f.post(a.url,a);if("image"===a.handleAs)return p(a);a.query=a.content;delete a.content;return f.get(a.url,a)}catch(ha){return a=new h,a.reject(ha),a.promise}}function t(a,g,b,c){function d(a){a._pendingDfd=u(b,l);var g=!!a._pendingDfd.response;(a._pendingDfd.response||a._pendingDfd).then(function(a){if(!g||!a.data)return a;D.proxyUrl&&!z.startsWith(a.url,D.proxyUrl)&&B(a.url);var b=a.getHeader("Content-Type");if(b&&(b=b.toLowerCase(),-1===b.indexOf("text/plain")&&-1===b.indexOf("application/json")))return a;
b=a.data;if(b instanceof ArrayBuffer&&750>=b.byteLength)b=new Blob([b]);else if(!(b instanceof Blob&&750>=b.size))return a;var c=new h,d=new FileReader;d.readAsText(b);d.onloadend=function(){if(!d.error)try{var g=JSON.parse(d.result);g.error&&(Object.isExtensible(a)||(a=n({},a)),a._jsonData=g)}catch(Ca){}c.resolve(a)};return c.promise}).then(function(a){return g&&!a._jsonData&&"image"===c.requestOptions.responseType&&a.data instanceof Blob?(g=!1,b.url=URL.createObjectURL(a.data),p(b,!0)):a}).then(function(b){var d=
g?b.data:b,f=g?b.getHeader.bind(b):ga;if(d&&(b=g&&b._jsonData||d,b.error||"error"===b.status))throw d=z.mixin(Error(),b.error||b),d.getHeader=f,d;a.resolve({data:d,url:c.url,requestOptions:c.requestOptions,getHeader:f});a._pendingDfd=null}).catch(function(g){var d,p,u,h;g&&(d=Number(g.code),p=g.hasOwnProperty("subcode")?Number(g.subcode):null,u=(u=g.messageCode)&&u.toUpperCase(),h=g.response);if(h&&0===h.status&&D.proxyUrl&&!f&&"post"!==b.method&&h.url&&!z.startsWith(h.url,D.proxyUrl))w.addProxyRule({proxyUrl:D.proxyUrl,
urlPrefix:w.removeFile(w.urlToObject(b.url).path)}),t(a,!0,b,c);else{if(403===d&&(4===p||g.message&&-1<g.message.toLowerCase().indexOf("ssl")&&-1===g.message.toLowerCase().indexOf("permission"))){if(!b._ssl){b._ssl=b._sslFromServer=!0;t(a,!0,b,c);return}}else if(e&&"no-prompt"!==b.authMode&&P._errorCodes&&-1!==P._errorCodes.indexOf(d)&&!P._isPublic(b.url)&&(403!==d||H&&-1===H.indexOf(u)&&(null==p||2===p&&b._token))){A(a,b,c,C("request:server",g,c));return}h&&0<h.status&&h.url&&D.proxyUrl&&!z.startsWith(h.url,
D.proxyUrl)&&B(h.url);a.reject(C("request:server",g,c));a._pendingDfd=null}})}var f=b.body,e=b.useIdentity,k,l=null,r=f instanceof FormData;if(r||f&&f.elements)l=r?f:new FormData(f);var x=!!(-1!==b.url.toLowerCase().indexOf("token\x3d")||b.content&&b.content.token||l&&l.get&&l.get("token")||f&&f.elements&&f.elements.token);g||(!e||x||b._token||P._isPublic(b.url)||(g=function(a){a&&(b._token=a.token,b._ssl=a.ssl)},"immediate"===b.authMode?k=P.getCredential(b.url).then(g):"no-prompt"===b.authMode?k=
P.checkSignInStatus(b.url).then(g).catch(function(){}):g(P.findCredential(b.url))),a.then(function(a){(/\/sharing\/rest\/accounts\/self/i.test(b.url)||/\/sharing\/rest\/portals\/self/i.test(b.url))&&!x&&!b._token&&a.user&&a.user.username&&(w.isTrustedServer(b.url)||D.trustedServers.push(y(b.url)));var g=b._credential;if(g){var c=P.findServerInfo(g.server),c=c&&c.owningSystemUrl,d=void 0;c&&(c=c.replace(/\/?$/,"/sharing"),(d=P.findCredential(c,g.userId))&&-1===P._getIdenticalSvcIdx(c,d)&&d.resources.splice(0,
0,c))}return a}).always(function(a){delete b._credential;if(a){var g=!!b._ssl;a instanceof q?a.details.ssl=g:a.ssl=g}}));k?k.then(function(){a.isCanceled()||d(a)}).catch(function(g){a.reject(g)}):d(a);return a.promise}function A(a,g,b,c){a._pendingDfd=P.getCredential(g.url,{error:c,token:g._token});a._pendingDfd.then(function(c){g._token=c.token;g._credential=c;g._ssl=g._sslFromServer||c.ssl;t(a,!0,g,b)}).catch(function(g){a.reject(g);a._pendingDfd=null})}function C(a,g,b){var c="Error",d={url:b.url,
requestOptions:b.requestOptions,getHeader:ga};if(g instanceof q)return g.details?(g.details=z.clone(g.details),g.details.url=b.url,g.details.requestOptions=b.requestOptions):g.details=d,g;if(g){var f=g.response;b=f&&f.getHeader;var f=f&&f.status,p=g.message;b=g.getHeader||b;p&&(c=p);b&&(d.getHeader=b);d.httpStatus=(null!=g.httpCode?g.httpCode:g.code)||f;d.subCode=g.subcode;d.messageCode=g.messageCode;d.messages="string"===typeof g.details?[g.details]:g.details}a=new q(a,c,d);g&&"cancel"===g.dojoType&&
(a.name="AbortError",a.dojoType="cancel");return a}function B(a){w.isBlobProtocol(a)||w.isDataProtocol(a)||(a=w.getOrigin(a))&&-1===F._corsServers.indexOf(a)&&F._corsServers.push(a)}function F(b,d){if(l&&r.invokeStaticMessage)return l.execute(b,d);w.isBlobProtocol(b)||w.isDataProtocol(b)||(b=w.normalize(b));var f={url:b,requestOptions:n({},d)},p=w.getInterceptor(b);if(p){if(null!=p.responseData)return v.resolve({data:p.responseData,requestOptions:f.requestOptions,getHeader:ga,url:b});p.headers&&(f.requestOptions.headers=
n({},f.requestOptions.headers,p.headers));p.query&&(f.requestOptions.query=n({},f.requestOptions.query,p.query));if(p.before&&(d=p.before(f),null!=d))return d instanceof Error||d instanceof q?v.reject(C("request:interceptor",d,f)):v.resolve({data:d,requestOptions:f.requestOptions,getHeader:ga,url:f.url})}var u=n({url:f.url},f.requestOptions);u.content=u.query;delete u.query;u.preventCache=!!u.cacheBust;delete u.cacheBust;u.handleAs=u.responseType;delete u.responseType;"array-buffer"===u.handleAs&&
(u.handleAs="arraybuffer");if("image"===u.handleAs){if(x("host-webworker"))return v.reject(C("request:invalid-parameters",Error("responseType 'image' is not supported in Web Workers or Node environment"),f))}else if(w.isDataProtocol(b))return v.reject(C("request:invalid-parameters",Error("Data URLs are not supported for responseType \x3d "+u.handleAs),f));var h=D.useIdentity;"anonymous"===u.authMode&&(h=!1);u.useIdentity=h;u.urlObj=new k(u.url);var e=c.makeDeferredCancellingPending(),y;f.requestOptions.signal&&
(b=f.requestOptions.signal,y=function(){e.cancel(C("AbortError",new a("Request canceled"),f))},b.aborted?y():b.addEventListener("abort",y));v.resolve().then(function(){if(h&&!P)return g()}).always(function(){e.isCanceled()||t(e,!1,u,f)});return e.then(function(a){f.requestOptions.signal&&f.requestOptions.signal.removeEventListener("abort",y);p&&p.after&&p.after(a);return a}).catch(function(a){f.requestOptions.signal&&f.requestOptions.signal.removeEventListener("abort",y);throw a;})}var D=d.request,
H=["COM_0056","COM_0057"],aa=0,ga=function(){return null},P,K;(F||(F={}))._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"];return F})},"esri/core/deferredUtils":function(){define(["dojo/Deferred"],function(b){var e={makeDeferredCancellingPending:function(){var n={},h=e._dfdCanceller.bind(null,n),h=new b(h);return n.deferred=h},_dfdCanceller:function(b){b=b.deferred?b.deferred:b;b.canceled=!0;var h=b._pendingDfd;b.isResolved()||!h||h.isResolved()||h.cancel();b._pendingDfd=
null},_fixDfd:function(b){var h=b.then;b.then=function(b,e,k){if(b){var a=b;b=function(b){return b&&b._argsArray?a.apply(null,b):a(b)}}return h.call(this,b,e,k)};return b},_resDfd:function(b,h,e){var l=h.length;1===l?e?b.reject(h[0]):b.resolve(h[0]):1<l?(h._argsArray=!0,b.resolve(h)):b.resolve()}};return e})},"esri/geometry/SpatialReference":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators ./support/spatialReferenceUtils".split(" "),
function(b,e,n,h,l,m,k,a){b=function(b){function d(a){a=b.call(this)||this;a.latestWkid=null;a.wkid=null;a.wkt=null;return a}n(d,b);c=d;d.fromJSON=function(a){if(!a)return null;if(a.wkid){if(102100===a.wkid)return c.WebMercator;if(4326===a.wkid)return c.WGS84}var b=new c;b.read(a);return b};d.prototype.normalizeCtorArgs=function(a){var b;return a&&"object"===typeof a?a:(b={},b["string"===typeof a?"wkt":"wkid"]=a,b)};Object.defineProperty(d.prototype,"isWGS84",{get:function(){return a.isWGS84(this)},
enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"isWebMercator",{get:function(){return a.isWebMercator(this)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"isGeographic",{get:function(){return a.isGeographic(this)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"isWrappable",{get:function(){return a.isWrappable(this)},enumerable:!0,configurable:!0});d.prototype.writeWkt=function(a,b){this.wkid||(b.wkt=a)};d.prototype.clone=function(){if(this===
c.WGS84)return c.WGS84;if(this===c.WebMercator)return c.WebMercator;var a=new c;null!=this.wkid?(a.wkid=this.wkid,null!=this.latestWkid&&(a.latestWkid=this.latestWkid),null!=this.vcsWkid&&(a.vcsWkid=this.vcsWkid),null!=this.latestVcsWkid&&(a.latestVcsWkid=this.latestVcsWkid)):null!=this.wkt&&(a.wkt=this.wkt);return a};d.prototype.equals=function(b){return a.equals(this,b)};d.prototype.toJSON=function(a){return this.write(null,a)};var c;d.GCS_NAD_1927=null;d.WGS84=null;d.WebMercator=null;h([k.property({dependsOn:["wkid"],
readOnly:!0})],d.prototype,"isWGS84",null);h([k.property({dependsOn:["wkid"],readOnly:!0})],d.prototype,"isWebMercator",null);h([k.property({dependsOn:["wkid","wkt"],readOnly:!0})],d.prototype,"isGeographic",null);h([k.property({dependsOn:["wkid"],readOnly:!0})],d.prototype,"isWrappable",null);h([k.property({type:Number,json:{write:!0}})],d.prototype,"latestWkid",void 0);h([k.property({type:Number,json:{write:!0,origins:{"web-scene":{write:{overridePolicy:function(){return{isRequired:null===this.wkt?
!0:!1}}}}}}})],d.prototype,"wkid",void 0);h([k.property({type:String,json:{origins:{"web-scene":{write:{overridePolicy:function(){return{isRequired:null===this.wkid?!0:!1}}}}}}})],d.prototype,"wkt",void 0);h([k.writer("wkt"),k.writer("web-scene","wkt")],d.prototype,"writeWkt",null);h([k.property({type:Number,json:{write:!0}})],d.prototype,"vcsWkid",void 0);h([k.property({type:Number,json:{write:!0}})],d.prototype,"latestVcsWkid",void 0);return d=c=h([k.subclass("esri.geometry.SpatialReference")],
d)}(k.declared(l));b.prototype.toJSON.isDefaultToJSON=!0;b.GCS_NAD_1927=new b({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'});b.WGS84=new b(4326);b.WGS84.wkt=m.substitute({Central_Meridian:"0.0"},a.getInfo(b.WGS84).wkTemplate);b.WebMercator=new b({wkid:102100,latestWkid:3857});Object.freeze&&(Object.freeze(b.GCS_NAD_1927),Object.freeze(b.WGS84),Object.freeze(b.WebMercator));
return b})},"esri/geometry/support/spatialReferenceUtils":function(){define(["require","exports","./WKIDUnitConversion"],function(b,e,n){function h(a){return a.wkid&&!0===l[a.wkid]}Object.defineProperty(e,"__esModule",{value:!0});var l={102113:!0,102100:!0,3857:!0,3785:!0},m={102113:!0,102100:!0,3857:!0,3785:!0,4326:!0};b=[-2.0037508342788905E7,2.0037508342788905E7];var k=[-2.0037508342787E7,2.0037508342787E7],a={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',
valid:b,origin:k,dx:1E-5},102100:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:b,origin:k,
dx:1E-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:b,origin:k,dx:1E-5},3857:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',
valid:b,origin:k,dx:1E-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',
valid:[-180,180],origin:[-180,180],dx:1E-5}};e.equals=function(a,b){if(b){if(a===b)return!0;if(null!=a.wkid||null!=b.wkid)return a.wkid===b.wkid||h(a)&&h(b)||null!=b.latestWkid&&a.wkid===b.latestWkid||null!=a.latestWkid&&b.wkid===a.latestWkid;if(a.wkt&&b.wkt)return a.wkt.toUpperCase()===b.wkt.toUpperCase()}return!1};e.getInfo=function(b){return b.wkid?a[b.wkid]:null};e.isGeographic=function(a){return a.wkid?null==n[a.wkid]:a.wkt?!!/^\s*GEOGCS/i.test(a.wkt):!1};e.isWGS84=function(a){return 4326===
a.wkid};e.isWebMercator=h;e.isWrappable=function(a){return a.wkid&&!0===m[a.wkid]}})},"esri/geometry/support/WKIDUnitConversion":function(){define([],function(){var b,e={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.116756,5E4,15E4],units:"Meter Foot Foot_US Foot_Clarke Yard_Clarke Link_Clarke Yard_Sears Foot_Sears Chain_Sears Chain_Benoit_1895_B Yard_Indian Yard_Indian_1937 Foot_Gold_Coast Chain_Sears_1922_Truncated 50_Kilometers 150_Kilometers".split(" "),
2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:13,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,
3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,
3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,
3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,
5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,
6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,
6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,
6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,
6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,
7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,
7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8058:0,8059:0,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,
8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25E3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,
26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53034:0,53048:0,53049:0,
54034:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:14,102069:15,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102962:0,102963:0,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,
103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,
103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,
103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,
103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103695:2};for(b=2E3;2045>=b;b++)e[b]=0;for(b=2056;2065>=b;b++)e[b]=0;for(b=2067;2135>=b;b++)e[b]=0;for(b=2137;2154>=b;b++)e[b]=0;for(b=2161;2170>=b;b++)e[b]=0;for(b=2172;2193>=b;b++)e[b]=0;for(b=2195;2198>=b;b++)e[b]=0;for(b=2200;2203>=b;b++)e[b]=0;for(b=2205;2217>=b;b++)e[b]=0;for(b=2222;2224>=b;b++)e[b]=1;for(b=2225;2250>=b;b++)e[b]=2;
for(b=2251;2253>=b;b++)e[b]=1;for(b=2257;2264>=b;b++)e[b]=2;for(b=2274;2279>=b;b++)e[b]=2;for(b=2280;2282>=b;b++)e[b]=1;for(b=2283;2289>=b;b++)e[b]=2;for(b=2290;2292>=b;b++)e[b]=0;for(b=2308;2313>=b;b++)e[b]=0;for(b=2315;2491>=b;b++)e[b]=0;for(b=2494;2866>=b;b++)e[b]=0;for(b=2867;2869>=b;b++)e[b]=1;for(b=2870;2888>=b;b++)e[b]=2;for(b=2891;2895>=b;b++)e[b]=2;for(b=2896;2898>=b;b++)e[b]=1;for(b=2902;2908>=b;b++)e[b]=2;for(b=2915;2920>=b;b++)e[b]=2;for(b=2921;2923>=b;b++)e[b]=1;for(b=2924;2930>=b;b++)e[b]=
2;for(b=2931;2962>=b;b++)e[b]=0;for(b=2964;2968>=b;b++)e[b]=2;for(b=2969;2973>=b;b++)e[b]=0;for(b=2975;2991>=b;b++)e[b]=0;for(b=2995;3051>=b;b++)e[b]=0;for(b=3054;3079>=b;b++)e[b]=0;for(b=3081;3088>=b;b++)e[b]=0;for(b=3092;3101>=b;b++)e[b]=0;for(b=3106;3138>=b;b++)e[b]=0;for(b=3146;3151>=b;b++)e[b]=0;for(b=3153;3166>=b;b++)e[b]=0;for(b=3168;3172>=b;b++)e[b]=0;for(b=3174;3203>=b;b++)e[b]=0;for(b=3294;3358>=b;b++)e[b]=0;for(b=3367;3403>=b;b++)e[b]=0;for(b=3408;3416>=b;b++)e[b]=0;for(b=3417;3438>=b;b++)e[b]=
2;for(b=3441;3446>=b;b++)e[b]=2;for(b=3447;3450>=b;b++)e[b]=0;for(b=3451;3459>=b;b++)e[b]=2;for(b=3460;3478>=b;b++)e[b]=0;for(b=3554;3559>=b;b++)e[b]=0;for(b=3560;3570>=b;b++)e[b]=2;for(b=3571;3581>=b;b++)e[b]=0;for(b=3594;3597>=b;b++)e[b]=0;for(b=3601;3604>=b;b++)e[b]=0;for(b=3637;3639>=b;b++)e[b]=0;for(b=3665;3667>=b;b++)e[b]=0;for(b=3693;3695>=b;b++)e[b]=0;for(b=3701;3727>=b;b++)e[b]=0;for(b=3728;3739>=b;b++)e[b]=2;for(b=3740;3751>=b;b++)e[b]=0;for(b=3753;3760>=b;b++)e[b]=2;for(b=3761;3773>=b;b++)e[b]=
0;for(b=3775;3777>=b;b++)e[b]=0;for(b=3779;3781>=b;b++)e[b]=0;for(b=3783;3785>=b;b++)e[b]=0;for(b=3788;3791>=b;b++)e[b]=0;for(b=3797;3802>=b;b++)e[b]=0;for(b=3814;3816>=b;b++)e[b]=0;for(b=3825;3829>=b;b++)e[b]=0;for(b=3832;3841>=b;b++)e[b]=0;for(b=3844;3852>=b;b++)e[b]=0;for(b=3873;3885>=b;b++)e[b]=0;for(b=3890;3893>=b;b++)e[b]=0;for(b=3907;3912>=b;b++)e[b]=0;for(b=3942;3950>=b;b++)e[b]=0;for(b=3968;3970>=b;b++)e[b]=0;for(b=3973;3976>=b;b++)e[b]=0;for(b=3986;3989>=b;b++)e[b]=0;for(b=3994;3997>=b;b++)e[b]=
0;for(b=4048;4051>=b;b++)e[b]=0;for(b=4056;4063>=b;b++)e[b]=0;for(b=4093;4096>=b;b++)e[b]=0;for(b=4390;4398>=b;b++)e[b]=0;for(b=4399;4413>=b;b++)e[b]=2;for(b=4418;4433>=b;b++)e[b]=2;for(b=4455;4457>=b;b++)e[b]=2;for(b=4484;4489>=b;b++)e[b]=0;for(b=4491;4554>=b;b++)e[b]=0;for(b=4568;4589>=b;b++)e[b]=0;for(b=4652;4656>=b;b++)e[b]=0;for(b=4766;4800>=b;b++)e[b]=0;for(b=5014;5016>=b;b++)e[b]=0;for(b=5069;5072>=b;b++)e[b]=0;for(b=5105;5130>=b;b++)e[b]=0;for(b=5173;5188>=b;b++)e[b]=0;for(b=5253;5259>=b;b++)e[b]=
0;for(b=5269;5275>=b;b++)e[b]=0;for(b=5292;5311>=b;b++)e[b]=0;for(b=5329;5331>=b;b++)e[b]=0;for(b=5343;5349>=b;b++)e[b]=0;for(b=5355;5357>=b;b++)e[b]=0;for(b=5387;5389>=b;b++)e[b]=0;for(b=5459;5463>=b;b++)e[b]=0;for(b=5479;5482>=b;b++)e[b]=0;for(b=5518;5520>=b;b++)e[b]=0;for(b=5530;5539>=b;b++)e[b]=0;for(b=5550;5552>=b;b++)e[b]=0;for(b=5562;5583>=b;b++)e[b]=0;for(b=5623;5625>=b;b++)e[b]=2;for(b=5631;5639>=b;b++)e[b]=0;for(b=5649;5653>=b;b++)e[b]=0;for(b=5663;5680>=b;b++)e[b]=0;for(b=5682;5685>=b;b++)e[b]=
0;for(b=5875;5877>=b;b++)e[b]=0;for(b=5921;5940>=b;b++)e[b]=0;for(b=6050;6125>=b;b++)e[b]=0;for(b=6244;6275>=b;b++)e[b]=0;for(b=6328;6348>=b;b++)e[b]=0;for(b=6350;6356>=b;b++)e[b]=0;for(b=6366;6372>=b;b++)e[b]=0;for(b=6381;6387>=b;b++)e[b]=0;for(b=6393;6404>=b;b++)e[b]=0;for(b=6480;6483>=b;b++)e[b]=0;for(b=6511;6514>=b;b++)e[b]=0;for(b=6579;6581>=b;b++)e[b]=0;for(b=6619;6624>=b;b++)e[b]=0;for(b=6625;6627>=b;b++)e[b]=2;for(b=6628;6632>=b;b++)e[b]=0;for(b=6634;6637>=b;b++)e[b]=0;for(b=6669;6692>=b;b++)e[b]=
0;for(b=6707;6709>=b;b++)e[b]=0;for(b=6720;6723>=b;b++)e[b]=0;for(b=6732;6738>=b;b++)e[b]=0;for(b=6931;6933>=b;b++)e[b]=0;for(b=6956;6959>=b;b++)e[b]=0;for(b=7005;7007>=b;b++)e[b]=0;for(b=7057;7070>=b;b++)e[b]=2;for(b=7074;7082>=b;b++)e[b]=0;for(b=7109;7118>=b;b++)e[b]=0;for(b=7119;7127>=b;b++)e[b]=1;for(b=7374;7376>=b;b++)e[b]=0;for(b=7528;7586>=b;b++)e[b]=0;for(b=7587;7645>=b;b++)e[b]=2;for(b=7755;7787>=b;b++)e[b]=0;for(b=7791;7795>=b;b++)e[b]=0;for(b=7799;7801>=b;b++)e[b]=0;for(b=7803;7805>=b;b++)e[b]=
0;for(b=7825;7831>=b;b++)e[b]=0;for(b=7845;7859>=b;b++)e[b]=0;for(b=8013;8032>=b;b++)e[b]=0;for(b=20002;20032>=b;b++)e[b]=0;for(b=20062;20092>=b;b++)e[b]=0;for(b=20135;20138>=b;b++)e[b]=0;for(b=20248;20258>=b;b++)e[b]=0;for(b=20348;20358>=b;b++)e[b]=0;for(b=20436;20440>=b;b++)e[b]=0;for(b=20822;20824>=b;b++)e[b]=0;for(b=20934;20936>=b;b++)e[b]=0;for(b=21035;21037>=b;b++)e[b]=0;for(b=21095;21097>=b;b++)e[b]=0;for(b=21148;21150>=b;b++)e[b]=0;for(b=21413;21423>=b;b++)e[b]=0;for(b=21473;21483>=b;b++)e[b]=
0;for(b=21780;21782>=b;b++)e[b]=0;for(b=21891;21894>=b;b++)e[b]=0;for(b=21896;21899>=b;b++)e[b]=0;for(b=22171;22177>=b;b++)e[b]=0;for(b=22181;22187>=b;b++)e[b]=0;for(b=22191;22197>=b;b++)e[b]=0;for(b=22234;22236>=b;b++)e[b]=0;for(b=22521;22525>=b;b++)e[b]=0;for(b=22991;22994>=b;b++)e[b]=0;for(b=23028;23038>=b;b++)e[b]=0;for(b=23830;23853>=b;b++)e[b]=0;for(b=23866;23872>=b;b++)e[b]=0;for(b=23877;23884>=b;b++)e[b]=0;for(b=23886;23894>=b;b++)e[b]=0;for(b=23946;23948>=b;b++)e[b]=0;for(b=24311;24313>=
b;b++)e[b]=0;for(b=24342;24347>=b;b++)e[b]=0;for(b=24370;24374>=b;b++)e[b]=10;for(b=24375;24381>=b;b++)e[b]=0;for(b=24718;24721>=b;b++)e[b]=0;for(b=24817;24821>=b;b++)e[b]=0;for(b=24877;24882>=b;b++)e[b]=0;for(b=24891;24893>=b;b++)e[b]=0;for(b=25391;25395>=b;b++)e[b]=0;for(b=25828;25838>=b;b++)e[b]=0;for(b=26191;26195>=b;b++)e[b]=0;for(b=26391;26393>=b;b++)e[b]=0;for(b=26701;26722>=b;b++)e[b]=0;for(b=26729;26799>=b;b++)e[b]=2;for(b=26801;26803>=b;b++)e[b]=2;for(b=26811;26813>=b;b++)e[b]=2;for(b=26847;26870>=
b;b++)e[b]=2;for(b=26891;26899>=b;b++)e[b]=0;for(b=26901;26923>=b;b++)e[b]=0;for(b=26929;26946>=b;b++)e[b]=0;for(b=26948;26998>=b;b++)e[b]=0;for(b=27037;27040>=b;b++)e[b]=0;for(b=27205;27232>=b;b++)e[b]=0;for(b=27258;27260>=b;b++)e[b]=0;for(b=27391;27398>=b;b++)e[b]=0;for(b=27561;27564>=b;b++)e[b]=0;for(b=27571;27574>=b;b++)e[b]=0;for(b=27581;27584>=b;b++)e[b]=0;for(b=27591;27594>=b;b++)e[b]=0;for(b=28191;28193>=b;b++)e[b]=0;for(b=28348;28358>=b;b++)e[b]=0;for(b=28402;28432>=b;b++)e[b]=0;for(b=28462;28492>=
b;b++)e[b]=0;for(b=29118;29122>=b;b++)e[b]=0;for(b=29168;29172>=b;b++)e[b]=0;for(b=29177;29185>=b;b++)e[b]=0;for(b=29187;29195>=b;b++)e[b]=0;for(b=29900;29903>=b;b++)e[b]=0;for(b=30161;30179>=b;b++)e[b]=0;for(b=30491;30494>=b;b++)e[b]=0;for(b=30729;30732>=b;b++)e[b]=0;for(b=31251;31259>=b;b++)e[b]=0;for(b=31265;31268>=b;b++)e[b]=0;for(b=31275;31279>=b;b++)e[b]=0;for(b=31281;31297>=b;b++)e[b]=0;for(b=31461;31469>=b;b++)e[b]=0;for(b=31491;31495>=b;b++)e[b]=0;for(b=31917;31922>=b;b++)e[b]=0;for(b=31965;32E3>=
b;b++)e[b]=0;for(b=32001;32003>=b;b++)e[b]=2;for(b=32005;32031>=b;b++)e[b]=2;for(b=32033;32060>=b;b++)e[b]=2;for(b=32064;32067>=b;b++)e[b]=2;for(b=32074;32077>=b;b++)e[b]=2;for(b=32081;32086>=b;b++)e[b]=0;for(b=32107;32130>=b;b++)e[b]=0;for(b=32133;32158>=b;b++)e[b]=0;for(b=32164;32167>=b;b++)e[b]=2;for(b=32180;32199>=b;b++)e[b]=0;for(b=32201;32260>=b;b++)e[b]=0;for(b=32301;32360>=b;b++)e[b]=0;for(b=32601;32662>=b;b++)e[b]=0;for(b=32664;32667>=b;b++)e[b]=2;for(b=32701;32761>=b;b++)e[b]=0;for(b=53001;53004>=
b;b++)e[b]=0;for(b=53008;53019>=b;b++)e[b]=0;for(b=53021;53032>=b;b++)e[b]=0;for(b=53042;53046>=b;b++)e[b]=0;for(b=53074;53080>=b;b++)e[b]=0;for(b=54001;54004>=b;b++)e[b]=0;for(b=54008;54019>=b;b++)e[b]=0;for(b=54021;54032>=b;b++)e[b]=0;for(b=54042;54046>=b;b++)e[b]=0;for(b=54048;54053>=b;b++)e[b]=0;for(b=54074;54080>=b;b++)e[b]=0;for(b=102001;102040>=b;b++)e[b]=0;for(b=102042;102063>=b;b++)e[b]=0;for(b=102065;102067>=b;b++)e[b]=0;for(b=102070;102117>=b;b++)e[b]=0;for(b=102122;102216>=b;b++)e[b]=
0;for(b=102221;102377>=b;b++)e[b]=0;for(b=102382;102388>=b;b++)e[b]=0;for(b=102389;102398>=b;b++)e[b]=2;for(b=102399;102444>=b;b++)e[b]=0;for(b=102445;102447>=b;b++)e[b]=2;for(b=102448;102458>=b;b++)e[b]=0;for(b=102459;102468>=b;b++)e[b]=2;for(b=102469;102497>=b;b++)e[b]=0;for(b=102500;102519>=b;b++)e[b]=1;for(b=102520;102524>=b;b++)e[b]=0;for(b=102525;102529>=b;b++)e[b]=2;for(b=102530;102568>=b;b++)e[b]=0;for(b=102570;102588>=b;b++)e[b]=0;for(b=102590;102598>=b;b++)e[b]=0;for(b=102601;102603>=b;b++)e[b]=
0;for(b=102605;102628>=b;b++)e[b]=0;for(b=102629;102646>=b;b++)e[b]=2;for(b=102648;102700>=b;b++)e[b]=2;for(b=102701;102703>=b;b++)e[b]=0;for(b=102707;102730>=b;b++)e[b]=2;for(b=102733;102758>=b;b++)e[b]=2;for(b=102767;102900>=b;b++)e[b]=0;for(b=102965;102969>=b;b++)e[b]=0;for(b=102971;102973>=b;b++)e[b]=0;for(b=102975;102989>=b;b++)e[b]=0;for(b=102990;102992>=b;b++)e[b]=1;for(b=102997;103002>=b;b++)e[b]=0;for(b=103003;103008>=b;b++)e[b]=2;for(b=103009;103011>=b;b++)e[b]=0;for(b=103012;103014>=b;b++)e[b]=
2;for(b=103019;103021>=b;b++)e[b]=0;for(b=103022;103024>=b;b++)e[b]=2;for(b=103029;103031>=b;b++)e[b]=0;for(b=103032;103034>=b;b++)e[b]=2;for(b=103065;103068>=b;b++)e[b]=0;for(b=103074;103076>=b;b++)e[b]=0;for(b=103077;103079>=b;b++)e[b]=1;for(b=103080;103082>=b;b++)e[b]=0;for(b=103083;103085>=b;b++)e[b]=2;for(b=103090;103093>=b;b++)e[b]=0;for(b=103097;103099>=b;b++)e[b]=0;for(b=103100;103102>=b;b++)e[b]=2;for(b=103107;103109>=b;b++)e[b]=0;for(b=103110;103112>=b;b++)e[b]=2;for(b=103113;103116>=b;b++)e[b]=
0;for(b=103117;103120>=b;b++)e[b]=2;for(b=103153;103157>=b;b++)e[b]=0;for(b=103158;103162>=b;b++)e[b]=2;for(b=103163;103165>=b;b++)e[b]=0;for(b=103166;103168>=b;b++)e[b]=1;for(b=103169;103171>=b;b++)e[b]=2;for(b=103186;103188>=b;b++)e[b]=0;for(b=103189;103191>=b;b++)e[b]=2;for(b=103192;103195>=b;b++)e[b]=0;for(b=103196;103199>=b;b++)e[b]=2;for(b=103200;103224>=b;b++)e[b]=0;for(b=103225;103227>=b;b++)e[b]=1;for(b=103232;103237>=b;b++)e[b]=0;for(b=103238;103243>=b;b++)e[b]=2;for(b=103244;103246>=b;b++)e[b]=
0;for(b=103247;103249>=b;b++)e[b]=2;for(b=103254;103256>=b;b++)e[b]=0;for(b=103257;103259>=b;b++)e[b]=2;for(b=103264;103266>=b;b++)e[b]=0;for(b=103267;103269>=b;b++)e[b]=2;for(b=103300;103375>=b;b++)e[b]=0;for(b=103381;103383>=b;b++)e[b]=0;for(b=103384;103386>=b;b++)e[b]=1;for(b=103387;103389>=b;b++)e[b]=0;for(b=103390;103392>=b;b++)e[b]=2;for(b=103397;103399>=b;b++)e[b]=0;for(b=103400;103471>=b;b++)e[b]=2;for(b=103476;103478>=b;b++)e[b]=0;for(b=103479;103481>=b;b++)e[b]=2;for(b=103486;103488>=b;b++)e[b]=
0;for(b=103489;103491>=b;b++)e[b]=2;for(b=103492;103495>=b;b++)e[b]=0;for(b=103496;103499>=b;b++)e[b]=2;for(b=103528;103543>=b;b++)e[b]=0;for(b=103544;103548>=b;b++)e[b]=2;for(b=103549;103551>=b;b++)e[b]=0;for(b=103552;103554>=b;b++)e[b]=1;for(b=103555;103557>=b;b++)e[b]=2;for(b=103558;103560>=b;b++)e[b]=0;for(b=103571;103573>=b;b++)e[b]=0;for(b=103574;103576>=b;b++)e[b]=2;for(b=103577;103580>=b;b++)e[b]=0;for(b=103581;103583>=b;b++)e[b]=2;for(b=103600;103694>=b;b++)e[b]=0;for(b=103700;103793>=b;b++)e[b]=
2;for(b=103794;103871>=b;b++)e[b]=0;for(b=103900;103971>=b;b++)e[b]=2;return e})},"esri/geometry/Extent":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Geometry ./Point ./SpatialReference ./support/contains ./support/intersects ./support/spatialReferenceUtils ./support/webMercatorUtils".split(" "),function(b,e,n,h,l,m,k,a,f,d,c,q,r){function x(a,b,c){return null==b?c:null==c?b:a(b,c)}b=function(b){function e(){for(var a=
0;a<arguments.length;a++);a=b.call(this)||this;a.type="extent";a.xmin=0;a.ymin=0;a.mmin=void 0;a.zmin=void 0;a.xmax=0;a.ymax=0;a.mmax=void 0;a.zmax=void 0;return a}n(e,b);k=e;e.prototype.normalizeCtorArgs=function(a,b,g,c,d){return!a||"esri.geometry.SpatialReference"!==a.declaredClass&&null==a.wkid?"object"===typeof a?(a.spatialReference=null!=a.spatialReference?a.spatialReference:f.WGS84,a):{xmin:a,ymin:b,xmax:g,ymax:c,spatialReference:null!=d?d:f.WGS84}:{spatialReference:a,xmin:0,ymin:0,xmax:0,
ymax:0}};Object.defineProperty(e.prototype,"center",{get:function(){var b=new a({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});this.hasZ&&(b.z=.5*(this.zmin+this.zmax));this.hasM&&(b.m=.5*(this.mmin+this.mmax));return b},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"extent",{get:function(){return this.clone()},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"hasM",{get:function(){return null!=this.mmin&&null!=
this.mmax},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"hasZ",{get:function(){return null!=this.zmin&&null!=this.zmax},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"height",{get:function(){return Math.abs(this.ymax-this.ymin)},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"width",{get:function(){return Math.abs(this.xmax-this.xmin)},enumerable:!0,configurable:!0});e.prototype.centerAt=function(a){var b=this.center;return null!=a.z&&this.hasZ?
this.offset(a.x-b.x,a.y-b.y,a.z-b.z):this.offset(a.x-b.x,a.y-b.y)};e.prototype.clone=function(){var a=new k;a.xmin=this.xmin;a.ymin=this.ymin;a.xmax=this.xmax;a.ymax=this.ymax;a.spatialReference=this.spatialReference;null!=this.zmin&&(a.zmin=this.zmin,a.zmax=this.zmax);null!=this.mmin&&(a.mmin=this.mmin,a.mmax=this.mmax);return a};e.prototype.contains=function(a){if(!a)return!1;var b=this.spatialReference,g=a.spatialReference;b&&g&&!b.equals(g)&&r.canProject(b,g)&&(a=b.isWebMercator?r.geographicToWebMercator(a):
r.webMercatorToGeographic(a,!0));return"point"===a.type?d.extentContainsPoint(this,a):"extent"===a.type?d.extentContainsExtent(this,a):!1};e.prototype.equals=function(a){if(!a)return!1;var b=this.spatialReference,g=a.spatialReference;b&&g&&!b.equals(g)&&r.canProject(b,g)&&(a=b.isWebMercator?r.geographicToWebMercator(a):r.webMercatorToGeographic(a,!0));return this.xmin===a.xmin&&this.ymin===a.ymin&&this.zmin===a.zmin&&this.mmin===a.mmin&&this.xmax===a.xmax&&this.ymax===a.ymax&&this.zmax===a.zmax&&
this.mmax===a.mmax};e.prototype.expand=function(a){a=.5*(1-a);var b=this.width*a,g=this.height*a;this.xmin+=b;this.ymin+=g;this.xmax-=b;this.ymax-=g;this.hasZ&&(b=(this.zmax-this.zmin)*a,this.zmin+=b,this.zmax-=b);this.hasM&&(a*=this.mmax-this.mmin,this.mmin+=a,this.mmax-=a);return this};e.prototype.intersects=function(a){if(!a)return!1;var b=this.spatialReference,g=a.spatialReference;b&&g&&!b.equals(g)&&r.canProject(b,g)&&(a=b.isWebMercator?r.geographicToWebMercator(a):r.webMercatorToGeographic(a,
!0));b=c.getExtentIntersector(a.type);return"mesh"!==a.type?b(this,a):b(this,a.extent)};e.prototype.normalize=function(){var a=this._normalize(!1,!0);return Array.isArray(a)?a:[a]};e.prototype.offset=function(a,b,g){this.xmin+=a;this.ymin+=b;this.xmax+=a;this.ymax+=b;null!=g&&(this.zmin+=g,this.zmax+=g);return this};e.prototype.shiftCentralMeridian=function(){return this._normalize(!0)};e.prototype.union=function(a){this.xmin=Math.min(this.xmin,a.xmin);this.ymin=Math.min(this.ymin,a.ymin);this.xmax=
Math.max(this.xmax,a.xmax);this.ymax=Math.max(this.ymax,a.ymax);if(this.hasZ||a.hasZ)this.zmin=x(Math.min,this.zmin,a.zmin),this.zmax=x(Math.max,this.zmax,a.zmax);if(this.hasM||a.hasM)this.mmin=x(Math.min,this.mmin,a.mmin),this.mmax=x(Math.max,this.mmax,a.mmax);return this};e.prototype.intersection=function(a){if(!this.intersects(a))return null;this.xmin=Math.max(this.xmin,a.xmin);this.ymin=Math.max(this.ymin,a.ymin);this.xmax=Math.min(this.xmax,a.xmax);this.ymax=Math.min(this.ymax,a.ymax);if(this.hasZ||
a.hasZ)this.zmin=x(Math.max,this.zmin,a.zmin),this.zmax=x(Math.min,this.zmax,a.zmax);if(this.hasM||a.hasM)this.mmin=x(Math.max,this.mmin,a.mmin),this.mmax=x(Math.min,this.mmax,a.mmax);return this};e.prototype.toJSON=function(a){return this.write(null,a)};e.prototype._shiftCM=function(a){void 0===a&&(a=q.getInfo(this.spatialReference));if(!a||!this.spatialReference)return this;var b=this.spatialReference,g=this._getCM(a);if(g){var c=b.isWebMercator?r.webMercatorToGeographic(g):g;this.xmin-=g.x;this.xmax-=
g.x;b.isWebMercator||(c.x=this._normalizeX(c.x,a).x);this.spatialReference=new f(l.substitute({Central_Meridian:c.x},b.isWGS84?a.altTemplate:a.wkTemplate))}return this};e.prototype._getCM=function(a){var b=null,g=a.valid;a=g[0];var g=g[1],c=this.xmin,d=this.xmax;c>=a&&c<=g&&d>=a&&d<=g||(b=this.center);return b};e.prototype._normalize=function(a,b,g){var c=this.spatialReference;if(!c)return this;g=g||q.getInfo(c);if(!g)return this;var d=this._getParts(g).map(function(a){return a.extent});if(2>d.length)return d[0]||
this;if(2<d.length)return a?this._shiftCM(g):this.set({xmin:g.valid[0],xmax:g.valid[1]});if(a)return this._shiftCM(g);if(b)return d;var f=!0,p=!0;d.forEach(function(a){a.hasZ||(f=!1);a.hasM||(p=!1)});return{rings:d.map(function(a){var g=[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]];if(f)for(var b=(a.zmax-a.zmin)/2,c=0;c<g.length;c++)g[c].push(b);if(p)for(a=(a.mmax-a.mmin)/2,c=0;c<g.length;c++)g[c].push(a);return g}),hasZ:f,hasM:p,spatialReference:c}};e.prototype._getParts=
function(a){var b=this.cache._parts;if(!b){var b=[],g=this.ymin,c=this.ymax,d=this.spatialReference,f=this.width,p=this.xmin,h=this.xmax,e=void 0;a=a||q.getInfo(d);var l=a.valid,r=l[0],x=l[1],e=this._normalizeX(this.xmin,a),m=e.x,l=e.frameId,e=this._normalizeX(this.xmax,a),v=e.x;a=e.frameId;e=m===v&&0<f;if(f>2*x){f=new k(p<h?m:v,g,x,c,d);p=new k(r,g,p<h?v:m,c,d);h=new k(0,g,x,c,d);g=new k(r,g,0,c,d);c=[];d=[];f.contains(h)&&c.push(l);f.contains(g)&&d.push(l);p.contains(h)&&c.push(a);p.contains(g)&&
d.push(a);for(r=l+1;r<a;r++)c.push(r),d.push(r);b.push({extent:f,frameIds:[l]},{extent:p,frameIds:[a]},{extent:h,frameIds:c},{extent:g,frameIds:d})}else m>v||e?b.push({extent:new k(m,g,x,c,d),frameIds:[l]},{extent:new k(r,g,v,c,d),frameIds:[a]}):b.push({extent:new k(m,g,v,c,d),frameIds:[l]});this.cache._parts=b}a=this.hasZ;g=this.hasM;if(a||g)for(l={},a&&(l.zmin=this.zmin,l.zmax=this.zmax),g&&(l.mmin=this.mmin,l.mmax=this.mmax),a=0;a<b.length;a++)b[a].extent.set(l);return b};e.prototype._normalizeX=
function(a,b){var g=b.valid;b=g[0];var c=g[1],g=2*c,d=0;a>c?(b=Math.ceil(Math.abs(a-c)/g),a-=b*g,d=b):a<b&&(b=Math.ceil(Math.abs(a-b)/g),a+=b*g,d=-b);return{x:a,frameId:d}};var k;h([m.property({dependsOn:"xmin ymin zmin mmin xmax ymax zmax mmax spatialReference".split(" ")})],e.prototype,"cache",void 0);h([m.property({readOnly:!0,dependsOn:["cache"]})],e.prototype,"center",null);h([m.property({readOnly:!0,dependsOn:["cache"]})],e.prototype,"extent",null);h([m.property({readOnly:!0,dependsOn:["mmin",
"mmax"],json:{write:{enabled:!1,overridePolicy:null}}})],e.prototype,"hasM",null);h([m.property({readOnly:!0,dependsOn:["zmin","zmax"],json:{write:{enabled:!1,overridePolicy:null}}})],e.prototype,"hasZ",null);h([m.property({readOnly:!0,dependsOn:["ymin","ymax"]})],e.prototype,"height",null);h([m.property({readOnly:!0,dependsOn:["xmin","xmax"]})],e.prototype,"width",null);h([m.property({type:Number,json:{write:!0}})],e.prototype,"xmin",void 0);h([m.property({type:Number,json:{write:!0}})],e.prototype,
"ymin",void 0);h([m.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasM}}}}})],e.prototype,"mmin",void 0);h([m.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasZ}}}}})],e.prototype,"zmin",void 0);h([m.property({type:Number,json:{write:!0}})],e.prototype,"xmax",void 0);h([m.property({type:Number,json:{write:!0}})],e.prototype,"ymax",void 0);h([m.property({type:Number,
json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasM}}}}})],e.prototype,"mmax",void 0);h([m.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasZ}}}}})],e.prototype,"zmax",void 0);return e=k=h([m.subclass("esri.geometry.Extent")],e)}(m.declared(k));b.prototype.toJSON.isDefaultToJSON=!0;return b})},"esri/geometry/Geometry":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/accessorSupport/decorators ./SpatialReference".split(" "),
function(b,e,n,h,l,m,k){return function(a){function b(){var b=a.call(this)||this;b.type=null;b.extent=null;b.hasM=!1;b.hasZ=!1;b.spatialReference=k.WGS84;return b}n(b,a);Object.defineProperty(b.prototype,"cache",{get:function(){return{}},enumerable:!0,configurable:!0});b.prototype.readSpatialReference=function(a,b){if(a instanceof k)return a;if(null!=a){var c=new k;c.read(a,b);return c}return a};b.prototype.clone=function(){console.warn(".clone() is not implemented for "+this.declaredClass);return null};
b.prototype.clearCache=function(){this.notifyChange("cache")};b.prototype.getCacheValue=function(a){return this.cache[a]};b.prototype.setCacheValue=function(a,b){this.cache[a]=b};h([m.property()],b.prototype,"type",void 0);h([m.property({readOnly:!0,dependsOn:["spatialReference"]})],b.prototype,"cache",null);h([m.property({readOnly:!0,dependsOn:["spatialReference"]})],b.prototype,"extent",void 0);h([m.property({type:Boolean,json:{write:{overridePolicy:function(a){return{enabled:a}}}}})],b.prototype,
"hasM",void 0);h([m.property({type:Boolean,json:{write:{overridePolicy:function(a){return{enabled:a}}}}})],b.prototype,"hasZ",void 0);h([m.property({type:k,json:{write:!0}})],b.prototype,"spatialReference",void 0);h([m.reader("spatialReference")],b.prototype,"readSpatialReference",null);return b=h([m.subclass("esri.geometry.Geometry")],b)}(m.declared(l))})},"esri/geometry/Point":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Logger ../core/accessorSupport/decorators ./Geometry ./SpatialReference ./support/spatialReferenceUtils ./support/webMercatorUtils".split(" "),
function(b,e,n,h,l,m,k,a,f,d){function c(a){return a&&("esri.geometry.SpatialReference"===a.declaredClass||null!=a.wkid)}var q=[0,0],r=l.getLogger("esri.geometry.Point");b=function(b){function e(a,c,d,g,f){a=b.call(this)||this;a.x=0;a.y=0;a.z=void 0;a.m=void 0;a.type="point";return a}n(e,b);k=e;e.copy=function(a,b){b.x=a.x;b.y=a.y;b.z=a.z;b.m=a.m;b.spatialReference=Object.isFrozen(a.spatialReference)?a.spatialReference:a.spatialReference.clone()};e.distance=function(a,b){var c=a.x-b.x,g=a.y-b.y;a=
a.hasZ&&b.hasZ?a.z-b.z:0;return Math.sqrt(c*c+g*g+a*a)};e.prototype.normalizeCtorArgs=function(b,f,h,g,u){var p;if(Array.isArray(b))p=b,u=f,b=p[0],f=p[1],h=p[2],g=p[3];else if(b&&"object"===typeof b){if(p=b,b=null!=p.x?p.x:p.longitude,f=null!=p.y?p.y:p.latitude,h=null!=p.z?p.z:p.altitude,g=p.m,(u=p.spatialReference)&&"esri.geometry.SpatialReference"!==u.declaredClass&&(u=new a(u)),null!=p.longitude||null!=p.latitude)null==p.longitude?r.warn(".longitude\x3d","Latitude was defined without longitude"):
null==p.latitude?r.warn(".latitude\x3d","Longitude was defined without latitude"):!p.declaredClass&&u&&u.isWebMercator&&(f=d.lngLatToXY(p.longitude,p.latitude,q),b=f[0],f=f[1])}else c(h)?(u=h,h=null):c(g)&&(u=g,g=null);b={x:b,y:f};null==b.x&&null!=b.y?r.warn(".y\x3d","Y coordinate was defined without an X coordinate"):null==b.y&&null!=b.x&&r.warn(".x\x3d","X coordinate was defined without a Y coordinate");null!=u&&(b.spatialReference=u);null!=h&&(b.z=h);null!=g&&(b.m=g);return b};Object.defineProperty(e.prototype,
"hasM",{get:function(){return void 0!==this.m},set:function(a){var b=this._get("hasM");a!==b&&(this._set("m",a?0:void 0),this._set("hasM",a))},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"hasZ",{get:function(){return void 0!==this.z},set:function(a){var b=this._get("hasZ");a!==b&&(this._set("z",a?0:void 0),this._set("hasZ",a))},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"latitude",{get:function(){var a=this._get("spatialReference");if(a){if(a.isWebMercator)return d.xyToLngLat(this.x,
this.y,q)[1];if(a.isWGS84)return this._get("y")}return null},set:function(a){var b=this._get("spatialReference");b&&(b.isWebMercator?this._set("y",d.lngLatToXY(this.x,a,q)[1]):b.isWGS84&&this._set("y",a),this._set("latitude",a))},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"longitude",{get:function(){var a=this._get("spatialReference");if(a){if(a.isWebMercator)return d.xyToLngLat(this._get("x"),this._get("y"),q)[0];if(a.isWGS84)return this._get("x")}return null},set:function(a){var b=
this._get("spatialReference");b&&(b.isWebMercator?this._set("x",d.lngLatToXY(a,this._get("y"),q)[0]):b.isWGS84&&this._set("x",a),this._set("longitude",a))},enumerable:!0,configurable:!0});e.prototype.clone=function(){var a=new k;a.x=this.x;a.y=this.y;a.z=this.z;a.m=this.m;a.spatialReference=this.spatialReference;return a};e.prototype.copy=function(a){k.copy(a,this);return this};e.prototype.equals=function(a){var b;if(!a)return!1;var c=this.x,g=this.y,f=this.z,h=this.m,e=this.spatialReference,k=a.z,
q=a.m,l=a.x;b=a.y;a=a.spatialReference;if(!e.equals(a))if(e.isWebMercator&&a.isWGS84)b=d.lngLatToXY(l,b),l=b[0],b=b[1],a=e;else if(e.isWGS84&&a.isWebMercator)b=d.xyToLngLat(l,b),l=b[0],b=b[1],a=e;else return!1;return c===l&&g===b&&f===k&&h===q&&e.wkid===a.wkid};e.prototype.offset=function(a,b,c){this.x+=a;this.y+=b;null!=c&&this.hasZ&&(this.z+=c);return this};e.prototype.normalize=function(){if(!this.spatialReference)return this;var a=f.getInfo(this.spatialReference);if(!a)return this;var b=this.x,
c=a.valid,a=c[0],g=c[1],c=2*g;b>g?(a=Math.ceil(Math.abs(b-g)/c),b-=a*c):b<a&&(a=Math.ceil(Math.abs(b-a)/c),b+=a*c);this._set("x",b);return this};e.prototype.distance=function(a){return k.distance(this,a)};e.prototype.toArray=function(){var a=this.hasZ,b=this.hasM;return a&&b?[this.x,this.y,this.z,this.m]:a?[this.x,this.y,this.z]:b?[this.x,this.y,this.m]:[this.x,this.y]};e.prototype.toJSON=function(a){return this.write(null,a)};var k;h([m.property({dependsOn:["x","y","z","m","spatialReference"]})],
e.prototype,"cache",void 0);h([m.property({type:Boolean,dependsOn:["m"],json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],e.prototype,"hasM",null);h([m.property({type:Boolean,dependsOn:["z"],json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],e.prototype,"hasZ",null);h([m.property({type:Number,dependsOn:["y"]})],e.prototype,"latitude",null);h([m.property({type:Number,dependsOn:["x"]})],e.prototype,"longitude",null);h([m.property({type:Number,json:{write:{isRequired:!0}}})],e.prototype,
"x",void 0);h([m.property({type:Number,json:{write:!0}})],e.prototype,"y",void 0);h([m.property({type:Number,json:{write:{overridePolicy:function(){return{enabled:this.hasZ}}}}})],e.prototype,"z",void 0);h([m.property({type:Number,json:{write:{overridePolicy:function(){return{enabled:this.hasM}}}}})],e.prototype,"m",void 0);return e=k=h([m.subclass("esri.geometry.Point")],e)}(m.declared(k));b.prototype.toJSON.isDefaultToJSON=!0;return b})},"esri/geometry/support/webMercatorUtils":function(){define("require exports ../../core/lang ../../core/wgs84Constants ../SpatialReference ./spatialReferenceUtils".split(" "),
function(b,e,n,h,l,m){function k(a,b,c,d,f){var h;if("x"in a&&"x"in f)b=b(a.x,a.y,q,0,d),f.x=b[0],f.y=b[1];else if("xmin"in a&&"xmin"in f)h=b(a.xmin,a.ymin,q,0,d),f.xmin=h[0],f.ymin=h[1],b=b(a.xmax,a.ymax,q,0,d),f.xmax=b[0],f.ymax=b[1];else if("paths"in a&&"paths"in f||"rings"in a&&"rings"in f){h="paths"in a?a.paths:a.rings;var e=[],g=void 0;for(a=0;a<h.length;a++){var u=h[a],g=[];e.push(g);for(var t=0;t<u.length;t++)g.push(b(u[t][0],u[t][1],[0,0],0,d)),2<u[t].length&&g[t].push(u[t][2]),3<u[t].length&&
g[t].push(u[t][3])}"paths"in f?f.paths=e:f.rings=e}else if("points"in a&&"points"in f){h=a.points;e=[];for(a=0;a<h.length;a++)e[a]=b(h[a][0],h[a][1],[0,0],0,d),2<h[a].length&&e[a].push(h[a][2]),3<h[a].length&&e[a].push(h[a][3]);f.points=e}else if("type"in a&&"mesh"===a.type&&"type"in f&&"mesh"===f.type&&(h=a.vertexAttributes&&a.vertexAttributes.position,e=f.vertexAttributes&&f.vertexAttributes.position,h))for(g=[0,0],a=0;a<h.length;a+=3)b(h[a],h[a+1],g,0,d),e[a]=g[0],e[a+1]=g[1];f.spatialReference=
c;return f}function a(a,b){a=a&&(null!=a.wkid||null!=a.wkt?a:a.spatialReference);b=b&&(null!=b.wkid||null!=b.wkt?b:b.spatialReference);return a&&b?m.equals(b,a)?!0:m.isWebMercator(b)&&m.isWGS84(a)||m.isWebMercator(a)&&m.isWGS84(b):!1}function f(a,b,d,f){void 0===d&&(d=[0,0]);void 0===f&&(f=0);89.99999<b?b=89.99999:-89.99999>b&&(b=-89.99999);b*=.017453292519943;d[f]=.017453292519943*a*c;d[f+1]=.5*c*Math.log((1+Math.sin(b))/(1-Math.sin(b)));return d}function d(a,b,d,f,h){void 0===d&&(d=[0,0]);void 0===
f&&(f=0);void 0===h&&(h=!1);a=a/c*57.29577951308232;d[f]=h?a:a-360*Math.floor((a+180)/360);d[f+1]=57.29577951308232*(Math.PI/2-2*Math.atan(Math.exp(-1*b/c)));return d}Object.defineProperty(e,"__esModule",{value:!0});var c=h.wgs84Radius,q=[0,0];e.canProject=a;e.project=function(b,c){var h=b&&b.spatialReference;c=c&&(null!=c.wkid||null!=c.wkt?c:c.spatialReference);return a(h,c)?m.equals(h,c)?n.clone(b):m.isWebMercator(c)?k(b,f,l.WebMercator,!1,n.clone(b)):m.isWGS84(c)?k(b,d,l.WGS84,!1,n.clone(b)):null:
null};e.lngLatToXY=f;e.xyToLngLat=d;e.geographicToWebMercator=function(a,b,c){void 0===b&&(b=!1);void 0===c&&(c=n.clone(a));return k(a,f,l.WebMercator,b,c)};e.webMercatorToGeographic=function(a,b,c){void 0===b&&(b=!1);void 0===c&&(c=n.clone(a));return k(a,d,l.WGS84,b,c)}})},"esri/core/wgs84Constants":function(){define(["require","exports"],function(b,e){Object.defineProperty(e,"__esModule",{value:!0});e.wgs84Radius=6378137;e.wgs84InverseFlattening=298.257223563;e.wgs84Flattening=1/e.wgs84InverseFlattening;
e.wgs84PolarRadius=e.wgs84Radius*(1-e.wgs84Flattening);e.wgs84Eccentricity=.0818191908426215})},"esri/geometry/support/contains":function(){define(["require","exports"],function(b,e){function n(b,h,a,f){return h>=b.xmin&&h<=b.xmax&&a>=b.ymin&&a<=b.ymax?null!=f&&b.hasZ?f>=b.zmin&&f<=b.zmax:!0:!1}function h(b,h){if(b=b.rings)if(Array.isArray(b[0][0])){for(var a=!1,f=0,d=b.length;f<d;f++)a=l(a,b[f],h);h=a}else h=l(!1,b,h);else h=!1;return h}function l(b,h,a){var f=a[0];a=a[1];for(var d=0,c=0,e=h.length;c<
e;c++){d++;d===e&&(d=0);var k=h[c],l=k[0],k=k[1],m=h[d],v=m[0],m=m[1];(k<a&&m>=a||m<a&&k>=a)&&l+(a-k)/(m-k)*(v-l)<f&&(b=!b)}return b}Object.defineProperty(e,"__esModule",{value:!0});e.extentContainsPoint=function(b,h){return n(b,h.x,h.y,h.z)};e.extentContainsExtent=function(b,h){var a=h.xmin,f=h.ymin,d=h.zmin,c=h.xmax,e=h.ymax,k=h.zmax;return b.hasZ&&h.hasZ?n(b,a,f,d)&&n(b,a,e,d)&&n(b,c,e,d)&&n(b,c,f,d)&&n(b,a,f,k)&&n(b,a,e,k)&&n(b,c,e,k)&&n(b,c,f,k):n(b,a,f)&&n(b,a,e)&&n(b,c,e)&&n(b,c,f)};e.extentContainsCoords2D=
function(b,h){return n(b,h[0],h[1])};e.extentContainsCoords3D=function(b,h){return n(b,h[0],h[1],h[2])};e.polygonContainsPoint=function(b,e){return h(b,[e.x,e.y])};e.polygonContainsCoords=h})},"esri/geometry/support/intersects":function(){define(["require","exports","./contains"],function(b,e,n){function h(a,b){return n.extentContainsPoint(a,b)}function l(a,b){var g=a.hasZ&&b.hasZ,c;if(a.xmin<=b.xmin){if(c=b.xmin,a.xmax<c)return!1}else if(c=a.xmin,b.xmax<c)return!1;if(a.ymin<=b.ymin){if(c=b.ymin,
a.ymax<c)return!1}else if(c=a.ymin,b.ymax<c)return!1;if(g&&b.hasZ)if(a.zmin<=b.zmin){if(g=b.zmin,a.zmax<g)return!1}else if(g=a.zmin,b.zmax<g)return!1;return!0}function m(a,b){var g=b.hasZ?n.extentContainsCoords3D:n.extentContainsCoords2D,c=0;for(b=b.points;c<b.length;c++)if(g(a,b[c]))return!0;return!1}function k(a,b){c[0]=a.xmin;c[1]=a.ymax;q[0]=a.xmax;q[1]=a.ymax;r[0]=a.xmin;r[1]=a.ymin;x[0]=a.xmax;x[1]=a.ymin;for(var g=0,d=z;g<d.length;g++)if(n.polygonContainsCoords(b,d[g]))return!0;g=0;for(b=b.rings;g<
b.length;g++)if(d=b[g],d.length){var h=d[0];if(n.extentContainsCoords2D(a,h))return!0;for(var e=1;e<d.length;e++){var p=d[e];if(n.extentContainsCoords2D(a,p)||f(h,p,v))return!0;h=p}}return!1}function a(a,b){c[0]=a.xmin;c[1]=a.ymax;q[0]=a.xmax;q[1]=a.ymax;r[0]=a.xmin;r[1]=a.ymin;x[0]=a.xmax;x[1]=a.ymin;b=b.paths;for(var g=0;g<b.length;g++){var d=b[g];if(b.length){var h=d[0];if(n.extentContainsCoords2D(a,h))return!0;for(var e=1;e<d.length;e++){var p=d[e];if(n.extentContainsCoords2D(a,p)||f(h,p,v))return!0;
h=p}}}return!1}function f(a,b,g){for(var c=0;c<g.length;c++)if(d(a,b,g[c][0],g[c][1]))return!0;return!1}function d(a,b,g,c,d){var f=a[0];a=a[1];var h=b[0];b=b[1];var u=g[0],e=g[1];g=c[0]-u;var u=f-u,p=h-f;c=c[1]-e;var e=a-e,t=b-a,q=c*p-g*t;if(0===q)return!1;g=(g*e-c*u)/q;u=(p*e-t*u)/q;return 0<=g&&1>=g&&0<=u&&1>=u?(d&&(d[0]=f+g*(h-f),d[1]=a+g*(b-a)),!0):!1}Object.defineProperty(e,"__esModule",{value:!0});e.extentIntersectsPoint=h;e.extentIntersectsExtent=l;e.extentIntersectsMultipoint=m;var c=[0,
0],q=[0,0],r=[0,0],x=[0,0],z=[c,q,r,x],v=[[r,c],[c,q],[q,x],[x,r]];e.extentIntersectsPolygon=k;e.extentIntersectsPolyline=a;var w=[0,0];e.isSelfIntersecting=function(a){for(var b=0;b<a.length;b++){for(var g=a[b],c=0;c<g.length-1;c++)for(var f=g[c],h=g[c+1],e=b+1;e<a.length;e++)for(var p=0;p<a[e].length-1;p++){var q=a[e][p],k=a[e][p+1],l=d(f,h,q,k,w);if(l&&!(w[0]===f[0]&&w[1]===f[1]||w[0]===q[0]&&w[1]===q[1]||w[0]===h[0]&&w[1]===h[1]||w[0]===k[0]&&w[1]===k[1]))return!0}p=g.length;if(!(4>=p))for(c=
0;c<p-3;c++){var r=p-1;0===c&&(r=p-2);f=g[c];h=g[c+1];for(e=c+2;e<r;e++)if(q=g[e],k=g[e+1],(l=d(f,h,q,k,w))&&!(w[0]===f[0]&&w[1]===f[1]||w[0]===q[0]&&w[1]===q[1]||w[0]===h[0]&&w[1]===h[1]||w[0]===k[0]&&w[1]===k[1]))return!0}}return!1};e.segmentIntersects=d;e.getExtentIntersector=function(b){switch(b){case "esriGeometryEnvelope":case "extent":return l;case "esriGeometryMultipoint":case "multipoint":return m;case "esriGeometryPoint":case "point":return h;case "esriGeometryPolygon":case "polygon":return k;
case "esriGeometryPolyline":case "polyline":return a;case "mesh":return l}}})},"esri/portal/Portal":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper dojo/_base/kernel dojo/_base/url dojo/promise/all ../config ../kernel ../request ../core/Error ../core/has ../core/JSONSupport ../core/lang ../core/Loadable ../core/promiseUtils ../core/accessorSupport/decorators ../geometry/Extent ./PortalQueryParams ./PortalQueryResult ./PortalUser".split(" "),
function(b,e,n,h,l,m,k,a,f,d,c,q,r,x,z,v,w,p,y,g,u,t,A){var C,B={Bookmark:function(){return p.create(function(a){return b(["./Bookmark"],a)})},Portal:function(){return p.create(function(a){return b(["./Portal"],a)})},PortalFolder:function(){return p.create(function(a){return b(["./PortalFolder"],a)})},PortalGroup:function(){return p.create(function(a){return b(["./PortalGroup"],a)})},PortalItem:function(){return p.create(function(a){return b(["./PortalItem"],a)})},PortalQueryParams:function(){return p.create(function(a){return b(["./PortalQueryParams"],
a)})},PortalQueryResult:function(){return p.create(function(a){return b(["./PortalQueryResult"],a)})},PortalRating:function(){return p.create(function(a){return b(["./PortalRating"],a)})},PortalUser:function(){return p.create(function(a){return b(["./PortalUser"],a)})}};return function(e){function z(a){a=e.call(this)||this;a.access=null;a.allSSL=!1;a.authMode="auto";a.authorizedCrossOriginDomains=null;a.basemapGalleryGroupQuery=null;a.bingKey=null;a.canListApps=!1;a.canListData=!1;a.canListPreProvisionedItems=
!1;a.canProvisionDirectPurchase=!1;a.canSearchPublic=!0;a.canShareBingPublic=!1;a.canSharePublic=!1;a.canSignInArcGIS=!1;a.canSignInIDP=!1;a.colorSetsGroupQuery=null;a.commentsEnabled=!1;a.created=null;a.culture=null;a.customBaseUrl=null;a.defaultBasemap=null;a.defaultExtent=null;a.defaultVectorBasemap=null;a.description=null;a.eueiEnabled=!1;a.featuredGroups=null;a.featuredItemsGroupQuery=null;a.galleryTemplatesGroupQuery=null;a.livingAtlasGroupQuery=null;a.hasCategorySchema=!1;a.helperServices=
null;a.homePageFeaturedContent=null;a.homePageFeaturedContentCount=null;a.httpPort=null;a.httpsPort=null;a.id=null;a.ipCntryCode=null;a.isPortal=!1;a.layerTemplatesGroupQuery=null;a.maxTokenExpirationMinutes=null;a.modified=null;a.name=null;a.portalHostname=null;a.portalMode=null;a.portalProperties=null;a.region=null;a.rotatorPanels=null;a.showHomePageDescription=!1;a.supportsHostedServices=!1;a.symbolSetsGroupQuery=null;a.templatesGroupQuery=null;a.units=null;a.url=d.portalUrl;a.urlKey=null;a.user=
null;a.useStandardizedQuery=!1;a.useVectorBasemaps=!1;a.vectorBasemapGalleryGroupQuery=null;return a}h(z,e);w=z;z.prototype.normalizeCtorArgs=function(a){return"string"===typeof a?{url:a}:a};z.prototype.destroy=function(){this._esriId_credentialCreateHandle&&(this._esriId_credentialCreateHandle.remove(),this._esriId_credentialCreateHandle=null)};z.prototype.readAuthorizedCrossOriginDomains=function(a){if(a)for(var g=0;g<a.length;g++){var b=a[g];-1===d.request.trustedServers.indexOf(b)&&d.request.trustedServers.push(b)}return a};
z.prototype.readDefaultBasemap=function(a){return a?(a=C.fromJSON(a),a.portalItem={portal:this},a):null};z.prototype.readDefaultVectorBasemap=function(a){return a?(a=C.fromJSON(a),a.portalItem={portal:this},a):null};Object.defineProperty(z.prototype,"extraQuery",{get:function(){var a=!(this.user&&this.user.orgId)||this.canSearchPublic;return this.id&&!a?" AND orgid:"+this.id:null},enumerable:!0,configurable:!0});Object.defineProperty(z.prototype,"isOrganization",{get:function(){return!!this.access},
enumerable:!0,configurable:!0});Object.defineProperty(z.prototype,"restUrl",{get:function(){var a=this.url;if(a)var g=a.indexOf("/sharing"),a=0<g?a.substring(0,g):this.url.replace(/\/+$/,""),a=a+"/sharing/rest";return a},enumerable:!0,configurable:!0});Object.defineProperty(z.prototype,"thumbnailUrl",{get:function(){var a=this.restUrl,g=this.thumbnail;return a&&g?this._normalizeSSL(a+"/portals/self/resources/"+g):null},enumerable:!0,configurable:!0});z.prototype.readUrlKey=function(a){return a?a.toLowerCase():
a};z.prototype.readUser=function(a){var g=null;a&&(g=A.fromJSON(a),g.portal=this);return g};z.prototype.load=function(){var a=this,g=p.create(function(a){return b(["../Basemap"],a)}).then(function(a){C=a}).then(function(){return a._fetchSelf()}).then(function(g){if(c.id){var b=c.id;a.credential=b.findCredential(a.restUrl);a.credential||a.authMode!==w.AUTH_MODE_AUTO||(a._esriId_credentialCreateHandle=b.on("credential-create",function(){b.findCredential(a.restUrl)&&a._signIn()}))}a.read(g)});this.addResolvingPromise(g);
return this.when()};z.prototype.fetchBasemaps=function(a){var g=new u;g.query=a||(this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery);g.disableExtraQuery=!0;return this.queryGroups(g).then(function(a){g.num=100;g.query='type:"Web Map" -type:"Web Application"';return a.total?(a=a.results[0],g.sortField=a.sortField||"name",g.sortOrder=a.sortOrder||"desc",a.queryItems(g)):null}).then(function(a){return a&&a.total?a.results.filter(function(a){return"Web Map"===a.type}).map(function(a){return new C({portalItem:a})}):
[]})};z.prototype.fetchCategorySchema=function(){return this.hasCategorySchema?this._request(this.restUrl+"/portals/self/categorySchema").then(function(a){return a.categorySchema}):p.resolve([])};z.prototype.fetchFeaturedGroups=function(){var a=this.featuredGroups,g=new u;g.num=100;g.sortField="title";if(a&&a.length){for(var b=[],c=0;c<a.length;c++){var d=a[c];b.push('(title:"'+d.title+'" AND owner:'+d.owner+")")}g.query=b.join(" OR ");return this.queryGroups(g).then(function(a){return a.results})}return p.resolve([])};
z.prototype.fetchRegions=function(){return this._request(this.restUrl+"/portals/regions",{query:{culture:this.user&&this.user.culture||this.culture||k.locale}})};z.getDefault=function(){w._default||(w._default=new w);return w._default};z.prototype.queryGroups=function(a){return this._queryPortal("/community/groups",a,"PortalGroup")};z.prototype.queryItems=function(a){return this._queryPortal("/search",a,"PortalItem")};z.prototype.queryUsers=function(a){a.sortField||(a.sortField="username");return this._queryPortal("/community/users",
a,"PortalUser")};z.prototype.toJSON=function(){throw new r("internal:not-yet-implemented","Portal.toJSON is not yet implemented");};z.prototype._fetchSelf=function(a,g){void 0===a&&(a=this.authMode);void 0===g&&(g=!1);var b=this.restUrl+"/portals/self";a={authMode:a,query:{culture:k.locale}};"auto"===a.authMode&&(a.authMode="no-prompt");g&&(a.query.default=!0);return this._request(b,a)};z.prototype._queryPortal=function(a,g,b){var c=this,d=function(b){return c._request(c.restUrl+a,g.toRequestOptions(c)).then(function(a){var d=
g.clone();d.start=a.nextStart;return new t({nextQueryParams:d,queryParams:g,total:a.total,results:w._resultsToTypedArray(b,{portal:c},a)})}).then(function(a){return f(a.results.map(function(g){return"function"===typeof g.when?g.when():a})).always(function(){return a})})};return b&&B[b]?B[b]().then(function(a){return d(a)}):d()};z.prototype._signIn=function(){var a=this;if(this.authMode===w.AUTH_MODE_ANONYMOUS)return p.reject(new r("portal:invalid-auth-mode",'Current "authMode"\' is "'+this.authMode+
'"'));if("failed"===this.loadStatus)return p.reject(this.loadError);var g=function(g){return p.resolve().then(function(){if("not-loaded"===a.loadStatus)return g||(a.authMode="immediate"),a.load().then(function(){return null});if("loading"===a.loadStatus)return a.load().then(function(){if(a.credential)return null;a.credential=g;return a._fetchSelf("immediate")});if(a.user&&a.credential===g)return null;a.credential=g;return a._fetchSelf("immediate")}).then(function(g){g&&a.read(g)})};return c.id?c.id.getCredential(this.restUrl).then(function(a){return g(a)}):
g(this.credential)};z.prototype._normalizeSSL=function(g){var b=this.allSSL;!b&&x("esri-secure-context")&&(b=!0);if(this.isPortal){var c=new a(g);return-1<this.portalHostname.toLowerCase().indexOf(c.host.toLowerCase())&&c.port&&"80"!==c.port&&"443"!==c.port?b?"https://"+c.host+(this.httpsPort&&443!==this.httpsPort?":"+this.httpsPort:"")+c.path+"?"+c.query:"http://"+c.host+(this.httpPort&&80!==this.httpPort?":"+this.httpPort:"")+c.path+"?"+c.query:b?g.replace("http:","https:"):g}return b?g.replace("http:",
"https:"):g};z.prototype._normalizeUrl=function(a){var g=this.credential&&this.credential.token;return this._normalizeSSL(g?a+(-1<a.indexOf("?")?"\x26":"?")+"token\x3d"+g:a)};z.prototype._requestToTypedArray=function(a,g,c){var d=this,h=function(b){return d._request(a,g).then(function(a){var g=w._resultsToTypedArray(b,{portal:d},a);return f(g.map(function(g){return"function"===typeof g.when?g.when():a})).always(function(){return g})})};return c?p.create(function(a){return b(["./"+c],a)}).then(function(a){return h(a)}):
h()};z.prototype._request=function(a,g){var b=this.authMode===w.AUTH_MODE_ANONYMOUS?"anonymous":"auto",c=null,d="auto",f={f:"json"},h="json";g&&(g.authMode&&(b=g.authMode),g.body&&(c=g.body),g.method&&(d=g.method),g.query&&(f=n({},f,g.query)),g.responseType&&(h=g.responseType));g={authMode:b,body:c,method:d,query:f,responseType:h,timeout:0};return q(this._normalizeSSL(a),g).then(function(a){return a.data})};z._resultsToTypedArray=function(a,g,b){if(b){if(b=b.listings||b.notifications||b.userInvitations||
b.tags||b.items||b.groups||b.comments||b.provisions||b.results||b.relatedItems||b,a||g)b=b.map(function(b){b=v.mixin(a?a.fromJSON(b):b,g);"function"===typeof b.load&&b.load();return b})}else b=[];return b};var w;z.AUTH_MODE_ANONYMOUS="anonymous";z.AUTH_MODE_AUTO="auto";z.AUTH_MODE_IMMEDIATE="immediate";l([y.property()],z.prototype,"access",void 0);l([y.property()],z.prototype,"allSSL",void 0);l([y.property()],z.prototype,"authMode",void 0);l([y.property()],z.prototype,"authorizedCrossOriginDomains",
void 0);l([y.reader("authorizedCrossOriginDomains")],z.prototype,"readAuthorizedCrossOriginDomains",null);l([y.property()],z.prototype,"basemapGalleryGroupQuery",void 0);l([y.property()],z.prototype,"bingKey",void 0);l([y.property()],z.prototype,"canListApps",void 0);l([y.property()],z.prototype,"canListData",void 0);l([y.property()],z.prototype,"canListPreProvisionedItems",void 0);l([y.property()],z.prototype,"canProvisionDirectPurchase",void 0);l([y.property()],z.prototype,"canSearchPublic",void 0);
l([y.property()],z.prototype,"canShareBingPublic",void 0);l([y.property()],z.prototype,"canSharePublic",void 0);l([y.property()],z.prototype,"canSignInArcGIS",void 0);l([y.property()],z.prototype,"canSignInIDP",void 0);l([y.property()],z.prototype,"colorSetsGroupQuery",void 0);l([y.property()],z.prototype,"commentsEnabled",void 0);l([y.property({type:Date})],z.prototype,"created",void 0);l([y.property()],z.prototype,"credential",void 0);l([y.property()],z.prototype,"culture",void 0);l([y.property()],
z.prototype,"currentVersion",void 0);l([y.property()],z.prototype,"customBaseUrl",void 0);l([y.property()],z.prototype,"defaultBasemap",void 0);l([y.reader("defaultBasemap")],z.prototype,"readDefaultBasemap",null);l([y.property({type:g})],z.prototype,"defaultExtent",void 0);l([y.property()],z.prototype,"defaultVectorBasemap",void 0);l([y.reader("defaultVectorBasemap")],z.prototype,"readDefaultVectorBasemap",null);l([y.property()],z.prototype,"description",void 0);l([y.property()],z.prototype,"eueiEnabled",
void 0);l([y.property({dependsOn:["user","id","canSearchPublic"],readOnly:!0})],z.prototype,"extraQuery",null);l([y.property()],z.prototype,"featuredGroups",void 0);l([y.property()],z.prototype,"featuredItemsGroupQuery",void 0);l([y.property()],z.prototype,"galleryTemplatesGroupQuery",void 0);l([y.property()],z.prototype,"livingAtlasGroupQuery",void 0);l([y.property()],z.prototype,"hasCategorySchema",void 0);l([y.property()],z.prototype,"helpBase",void 0);l([y.property()],z.prototype,"helperServices",
void 0);l([y.property()],z.prototype,"helpMap",void 0);l([y.property()],z.prototype,"homePageFeaturedContent",void 0);l([y.property()],z.prototype,"homePageFeaturedContentCount",void 0);l([y.property()],z.prototype,"httpPort",void 0);l([y.property()],z.prototype,"httpsPort",void 0);l([y.property()],z.prototype,"id",void 0);l([y.property()],z.prototype,"ipCntryCode",void 0);l([y.property({dependsOn:["access"],readOnly:!0})],z.prototype,"isOrganization",null);l([y.property()],z.prototype,"isPortal",
void 0);l([y.property()],z.prototype,"layerTemplatesGroupQuery",void 0);l([y.property()],z.prototype,"maxTokenExpirationMinutes",void 0);l([y.property({type:Date})],z.prototype,"modified",void 0);l([y.property()],z.prototype,"name",void 0);l([y.property()],z.prototype,"portalHostname",void 0);l([y.property()],z.prototype,"portalMode",void 0);l([y.property()],z.prototype,"portalProperties",void 0);l([y.property()],z.prototype,"region",void 0);l([y.property({dependsOn:["url"],readOnly:!0})],z.prototype,
"restUrl",null);l([y.property()],z.prototype,"rotatorPanels",void 0);l([y.property()],z.prototype,"showHomePageDescription",void 0);l([y.property()],z.prototype,"staticImagesUrl",void 0);l([y.property()],z.prototype,"stylesGroupQuery",void 0);l([y.property()],z.prototype,"supportsHostedServices",void 0);l([y.property()],z.prototype,"symbolSetsGroupQuery",void 0);l([y.property()],z.prototype,"templatesGroupQuery",void 0);l([y.property()],z.prototype,"thumbnail",void 0);l([y.property({dependsOn:["restUrl",
"thumbnail"],readOnly:!0})],z.prototype,"thumbnailUrl",null);l([y.property()],z.prototype,"units",void 0);l([y.property()],z.prototype,"url",void 0);l([y.property()],z.prototype,"urlKey",void 0);l([y.reader("urlKey")],z.prototype,"readUrlKey",null);l([y.property()],z.prototype,"user",void 0);l([y.reader("user")],z.prototype,"readUser",null);l([y.property()],z.prototype,"useStandardizedQuery",void 0);l([y.property()],z.prototype,"useVectorBasemaps",void 0);l([y.property()],z.prototype,"vectorBasemapGalleryGroupQuery",
void 0);l([m(1,y.cast(u))],z.prototype,"_queryPortal",null);return z=w=l([y.subclass("esri.portal.Portal")],z)}(y.declared(z,w))})},"esri/core/tsSupport/paramHelper":function(){define([],function(){return function(b,e){return function(n,h){e(n,h,b)}}})},"esri/portal/PortalQueryParams":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/kebabDictionary ../core/lang ../core/accessorSupport/decorators ../geometry/Extent ../geometry/SpatialReference ../geometry/support/webMercatorUtils".split(" "),
function(b,e,n,h,l,m,k,a,f,d,c,q){var r=k({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});return function(b){function e(a){a=b.call(this)||this;a.categories=null;a.disableExtraQuery=!1;a.extent=null;a.num=10;a.query=null;a.sortField=null;a.start=1;return a}h(e,b);k=e;Object.defineProperty(e.prototype,"sortOrder",{get:function(){return this._get("sortOrder")||"asc"},set:function(a){"asc"!==a&&"desc"!==a||this._set("sortOrder",a)},enumerable:!0,configurable:!0});
e.prototype.clone=function(){return new k({categories:this.categories?a.clone(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})};e.prototype.toRequestOptions=function(a,b){var d;this.categories&&(d=this.categories.map(function(a){return Array.isArray(a)?JSON.stringify(a):a}));var g;if(this.extent){var f=q.project(this.extent,c.WGS84);f&&(g=f.xmin+
","+f.ymin+","+f.xmax+","+f.ymax)}f=this.query;!this.disableExtraQuery&&a.extraQuery&&(f="("+f+")"+a.extraQuery);a={categories:d,bbox:g,q:f,num:this.num,sortField:null,sortOrder:null,start:this.start};this.sortField&&(a.sortField=r.toJSON(this.sortField),a.sortOrder=this.sortOrder);return{query:n({},b,a)}};var k;l([f.property()],e.prototype,"categories",void 0);l([f.property()],e.prototype,"disableExtraQuery",void 0);l([f.property({type:d})],e.prototype,"extent",void 0);l([f.property()],e.prototype,
"num",void 0);l([f.property()],e.prototype,"query",void 0);l([f.property()],e.prototype,"sortField",void 0);l([f.property()],e.prototype,"sortOrder",null);l([f.property()],e.prototype,"start",void 0);return e=k=l([f.subclass("esri.portal.PortalQueryParams")],e)}(f.declared(m))})},"esri/portal/PortalQueryResult":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/accessorSupport/decorators".split(" "),function(b,e,n,h,
l,m){return function(b){function a(a){a=b.call(this)||this;a.nextQueryParams=null;a.queryParams=null;a.results=null;a.total=null;return a}n(a,b);h([m.property()],a.prototype,"nextQueryParams",void 0);h([m.property()],a.prototype,"queryParams",void 0);h([m.property()],a.prototype,"results",void 0);h([m.property()],a.prototype,"total",void 0);return a=h([m.subclass("esri.portal.PortalQueryResult")],a)}(m.declared(l))})},"esri/portal/PortalUser":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/promise/all ../core/Error ../core/JSONSupport ../core/promiseUtils ../core/accessorSupport/decorators ./PortalFolder ./PortalGroup".split(" "),
function(b,e,n,h,l,m,k,a,f,d,c){return function(e){function q(){var a=e.call(this)||this;a.access=null;a.created=null;a.culture=null;a.description=null;a.email=null;a.fullName=null;a.modified=null;a.orgId=null;a.portal=null;a.preferredView=null;a.privileges=null;a.region=null;a.role=null;a.roleId=null;a.units=null;a.username=null;a.userType=null;return a}n(q,e);Object.defineProperty(q.prototype,"thumbnailUrl",{get:function(){var a=this.url,b=this.thumbnail;return a&&b?this.portal._normalizeUrl(a+
"/info/"+b+"?f\x3djson"):null},enumerable:!0,configurable:!0});Object.defineProperty(q.prototype,"userContentUrl",{get:function(){var a=this.get("portal.restUrl");return a?a+"/content/users/"+this.username:null},enumerable:!0,configurable:!0});Object.defineProperty(q.prototype,"url",{get:function(){var a=this.get("portal.restUrl");return a?a+"/community/users/"+this.username:null},enumerable:!0,configurable:!0});q.prototype.addItem=function(a){var b=this,c=a&&a.item,d=a&&a.data;a=a&&a.folder;var f=
{method:"post"};c&&(f.query=c._getPostQuery(),null!=d&&("string"===typeof d?f.query.text=d:"object"===typeof d&&(f.query.text=JSON.stringify(d))));d=this.userContentUrl;a&&(d+="/"+a.id);return this.portal._request(d+"/addItem",f).then(function(a){c.id=a.id;c.portal=b.portal;return c.loaded?c._reload():c.load()})};q.prototype.deleteItem=function(a){var b=this.userContentUrl;a.ownerFolder&&(b+="/"+a.ownerFolder);return this.portal._request(b+("/items/"+a.id+"/delete"),{method:"post"}).then(function(){a.id=
null;a.portal=null})};q.prototype.deleteItems=function(b){var c=this.userContentUrl+"/deleteItems",d=b.map(function(a){return a.id});return d.length?(d={method:"post",query:{items:d.join(",")}},this.portal._request(c,d).then(function(){b.forEach(function(a){a.id=null;a.portal=null})})):a.resolve(void 0)};q.prototype.fetchFolders=function(){var a=this;return this.portal._request(this.userContentUrl,{query:{num:1}}).then(function(b){return b&&b.folders?b.folders.map(function(b){b=d.fromJSON(b);b.portal=
a.portal;return b}):[]})};q.prototype.fetchGroups=function(){var a=this;return this.portal._request(this.url).then(function(b){return b&&b.groups?b.groups.map(function(b){b=c.fromJSON(b);b.portal=a.portal;return b}):[]})};q.prototype.fetchItems=function(c){var d=this;c||(c={});var f=this.userContentUrl;c.folder&&(f+="/"+c.folder.id);var h;return a.create(function(a){return b(["./PortalItem"],a)}).then(function(a){h=a;return d.portal._request(f,{query:{folders:!1,num:c.num||10,start:c.start||1}})}).then(function(a){var b;
return a&&a.items?(b=a.items.map(function(a){a=h.fromJSON(a);a.portal=d.portal;return a}),l(b.map(function(a){return a.load()})).always(function(){return{items:b,nextStart:a.nextStart,total:a.total}})):{items:[],nextStart:-1,total:0}})};q.prototype.getThumbnailUrl=function(a){var b=this.thumbnailUrl;b&&a&&(b+="\x26w\x3d"+a);return b};q.prototype.queryFavorites=function(b){return this.favGroupId?(this._favGroup||(this._favGroup=new c({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(b)):
a.reject(new m("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))};q.prototype.toJSON=function(){throw new m("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented");};h([f.property()],q.prototype,"access",void 0);h([f.property({type:Date})],q.prototype,"created",void 0);h([f.property()],q.prototype,"culture",void 0);h([f.property()],q.prototype,"description",void 0);h([f.property()],q.prototype,"email",void 0);h([f.property()],q.prototype,"favGroupId",
void 0);h([f.property()],q.prototype,"fullName",void 0);h([f.property({type:Date})],q.prototype,"modified",void 0);h([f.property()],q.prototype,"orgId",void 0);h([f.property()],q.prototype,"portal",void 0);h([f.property()],q.prototype,"preferredView",void 0);h([f.property()],q.prototype,"privileges",void 0);h([f.property()],q.prototype,"region",void 0);h([f.property()],q.prototype,"role",void 0);h([f.property()],q.prototype,"roleId",void 0);h([f.property()],q.prototype,"thumbnail",void 0);h([f.property({dependsOn:["url",
"thumbnail","portal.credential.token"],readOnly:!0})],q.prototype,"thumbnailUrl",null);h([f.property()],q.prototype,"units",void 0);h([f.property({dependsOn:["portal.restUrl"],readOnly:!0})],q.prototype,"userContentUrl",null);h([f.property({dependsOn:["portal.restUrl"],readOnly:!0})],q.prototype,"url",null);h([f.property()],q.prototype,"username",void 0);h([f.property()],q.prototype,"userType",void 0);return q=h([f.subclass("esri.portal.PortalUser")],q)}(f.declared(k))})},"esri/portal/PortalFolder":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators".split(" "),
function(b,e,n,h,l,m,k){return function(a){function b(b){b=a.call(this)||this;b.created=null;b.id=null;b.portal=null;b.title=null;b.username=null;return b}n(b,a);Object.defineProperty(b.prototype,"url",{get:function(){var a=this.get("portal.restUrl");return a?a+"/content/users/"+this.username+"/"+this.id:null},enumerable:!0,configurable:!0});b.prototype.toJSON=function(){throw new l("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented");};h([k.property({type:Date})],b.prototype,
"created",void 0);h([k.property()],b.prototype,"id",void 0);h([k.property()],b.prototype,"portal",void 0);h([k.property()],b.prototype,"title",void 0);h([k.property({dependsOn:["portal.restUrl"],readOnly:!0})],b.prototype,"url",null);h([k.property()],b.prototype,"username",void 0);return b=h([k.subclass("esri.portal.PortalFolder")],b)}(k.declared(m))})},"esri/portal/PortalGroup":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators ./PortalQueryParams".split(" "),
function(b,e,n,h,l,m,k,a,f){return function(b){function c(a){a=b.call(this)||this;a.access=null;a.created=null;a.description=null;a.id=null;a.isInvitationOnly=!1;a.modified=null;a.owner=null;a.portal=null;a.snippet=null;a.sortField=null;a.sortOrder=null;a.tags=null;a.title=null;return a}n(c,b);Object.defineProperty(c.prototype,"thumbnailUrl",{get:function(){var a=this.url,b=this.thumbnail;return a&&b?this.portal._normalizeUrl(a+"/info/"+b+"?f\x3djson"):null},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,
"url",{get:function(){var a=this.get("portal.restUrl");return a?a+"/community/groups/"+this.id:null},enumerable:!0,configurable:!0});c.prototype.fetchCategorySchema=function(){var a=this;return this.portal._request(this.url+"/categorySchema").then(function(b){b=b.categorySchema||[];return b.some(function(a){return"contentCategorySetsGroupQuery.LivingAtlas"===a.source})?a._fetchCategorySchemaSet("LivingAtlas"):b})};c.prototype.fetchMembers=function(){return this.portal._request(this.url+"/users")};
c.prototype.getThumbnailUrl=function(a){var b=this.thumbnailUrl;b&&a&&(b+="\x26w\x3d"+a);return b};c.prototype.toJSON=function(){throw new m("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented");};c.prototype.queryItems=function(a){if(5<parseFloat(this.portal.currentVersion))return a=a||new f,this.portal._queryPortal("/content/groups/"+this.id+"/search",a,"PortalItem");a=a?a.clone():new f;a.query="group:"+this.id+(a.query?" "+a.query:"");return this.portal.queryItems(a)};c.prototype._fetchCategorySchemaSet=
function(a){var b=this;return this.portal._fetchSelf(this.portal.authMode,!0).then(function(a){if(a=a.contentCategorySetsGroupQuery){var c=new f;c.disableExtraQuery=!0;c.num=1;c.query=a;return b.portal.queryGroups(c)}throw new m("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found");}).then(function(b){if(b.total){b=b.results[0];var c=new f;c.num=1;c.query='typekeywords:"'+a+'"';return b.queryItems(c)}throw new m("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found");
}).then(function(a){return a.total?a.results[0].fetchData().then(function(a){return(a=a&&a.categorySchema)&&a.length?a:[]}):[]})};h([a.property()],c.prototype,"access",void 0);h([a.property({type:Date})],c.prototype,"created",void 0);h([a.property()],c.prototype,"description",void 0);h([a.property()],c.prototype,"id",void 0);h([a.property()],c.prototype,"isInvitationOnly",void 0);h([a.property({type:Date})],c.prototype,"modified",void 0);h([a.property()],c.prototype,"owner",void 0);h([a.property()],
c.prototype,"portal",void 0);h([a.property()],c.prototype,"snippet",void 0);h([a.property()],c.prototype,"sortField",void 0);h([a.property()],c.prototype,"sortOrder",void 0);h([a.property()],c.prototype,"tags",void 0);h([a.property()],c.prototype,"thumbnail",void 0);h([a.property({dependsOn:["url","thumbnail","portal.credential.token"],readOnly:!0})],c.prototype,"thumbnailUrl",null);h([a.property()],c.prototype,"title",void 0);h([a.property({dependsOn:["portal.restUrl"],readOnly:!0})],c.prototype,
"url",null);h([l(0,a.cast(f))],c.prototype,"queryItems",null);return c=h([a.subclass("esri.portal.PortalGroup")],c)}(a.declared(k))})},"esri/portal/PortalItem":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Error ../core/JSONSupport ../core/lang ../core/Loadable ../core/promiseUtils ../core/urlUtils ../core/accessorSupport/decorators ../geometry/Extent ./Portal ./PortalRating".split(" "),function(b,e,n,h,l,m,k,a,f,d,c,q,r,x){return function(a){function e(b){b=
a.call(this)||this;b.access=null;b.accessInformation=null;b.applicationProxies=null;b.avgRating=null;b.categories=null;b.created=null;b.culture=null;b.description=null;b.extent=null;b.groupCategories=null;b.id=null;b.itemControl=null;b.licenseInfo=null;b.modified=null;b.name=null;b.numComments=null;b.numRatings=null;b.numViews=null;b.owner=null;b.portal=null;b.screenshots=null;b.size=null;b.snippet=null;b.tags=null;b.title=null;b.type=null;b.typeKeywords=null;b.url=null;return b}n(e,a);m=e;Object.defineProperty(e.prototype,
"displayName",{get:function(){var a=this.type,b=this.typeKeywords||[],g=a;"Feature Service"===a||"Feature Collection"===a?g=-1<b.indexOf("Table")?"Table":-1<b.indexOf("Route Layer")?"Route Layer":-1<b.indexOf("Markup")?"Markup":"Feature Layer":"Image Service"===a?g=-1<b.indexOf("Elevation 3D Layer")?"Elevation Layer":"Imagery Layer":"Scene Service"===a?g="Scene Layer":"Scene Package"===a?g="Scene Layer Package":"Stream Service"===a?g="Feature Layer":"Geoprocessing Service"===a&&this.portal&&this.portal.isPortal?
g=-1<b.indexOf("Web Tool")?"Tool":"Geoprocessing Service":"Geocoding Service"===a?g="Locator":"Microsoft Powerpoint"===a?g="Microsoft PowerPoint":"GeoJson"===a?g="GeoJSON":"Globe Service"===a?g="Globe Layer":"Vector Tile Service"===a?g="Tile Layer":"netCDF"===a?g="NetCDF":"Map Service"===a?g=-1===b.indexOf("Spatiotemporal")&&(-1<b.indexOf("Hosted Service")||-1<b.indexOf("Tiled"))?"Tile Layer":"Map Image Layer":a&&-1<a.toLowerCase().indexOf("add in")?g=a.replace(/(add in)/gi,"Add-In"):"datastore catalog service"===
a&&(g="Big Data File Share");return g},enumerable:!0,configurable:!0});e.prototype.readExtent=function(a){return a&&a.length?new q(a[0][0],a[0][1],a[1][0],a[1][1]):null};Object.defineProperty(e.prototype,"iconUrl",{get:function(){var a=this.type&&this.type.toLowerCase()||"",c=this.typeKeywords||[],g=!1,d=!1,f=!1,h=!1,e=!1;0<a.indexOf("service")||"feature collection"===a||"kml"===a||"wms"===a||"wmts"===a||"wfs"===a?(g=-1<c.indexOf("Hosted Service"),"feature service"===a||"feature collection"===a||
"kml"===a||"wfs"===a?(d=-1<c.indexOf("Table"),f=-1<c.indexOf("Route Layer"),h=-1<c.indexOf("Markup"),a=(e=-1!==c.indexOf("Spatiotemporal"))&&d?"spatiotemporaltable":d?"table":f?"routelayer":h?"markup":e?"spatiotemporal":g?"featureshosted":"features"):a="map service"===a||"wms"===a||"wmts"===a?g||-1<c.indexOf("Tiled")||"wmts"===a?"maptiles":"mapimages":"scene service"===a?-1<c.indexOf("Line")?"sceneweblayerline":-1<c.indexOf("3DObject")?"sceneweblayermultipatch":-1<c.indexOf("Point")?"sceneweblayerpoint":
-1<c.indexOf("IntegratedMesh")?"sceneweblayermesh":-1<c.indexOf("PointCloud")?"sceneweblayerpointcloud":-1<c.indexOf("Polygon")?"sceneweblayerpolygon":"sceneweblayer":"image service"===a?-1<c.indexOf("Elevation 3D Layer")?"elevationlayer":"imagery":"stream service"===a?"streamlayer":"vector tile service"===a?"vectortile":"datastore catalog service"===a?"datastorecollection":"geocoding service"===a?"geocodeservice":"geoprocessing service"===a?-1<c.indexOf("Web Tool")&&this.portal&&this.portal.isPortal?
"tool":"layers":"layers"):a="web map"===a||"cityengine web scene"===a?"maps":"web scene"===a?-1<c.indexOf("ViewingMode-Local")?"webscenelocal":"websceneglobal":"web mapping application"===a||"mobile application"===a||"application"===a||"operation view"===a||"desktop application"===a?"apps":"map document"===a||"map package"===a||"published map"===a||"scene document"===a||"globe document"===a||"basemap package"===a||"mobile basemap package"===a||"mobile map package"===a||"project package"===a||"project template"===
a||"pro map"===a||"layout"===a||"layer"===a&&-1<c.indexOf("ArcGIS Pro")||"explorer map"===a&&c.indexOf("Explorer Document")?"mapsgray":"service definition"===a||"csv"===a||"shapefile"===a||"cad drawing"===a||"geojson"===a||"360 vr experience"===a||"netcdf"===a?"datafiles":"explorer add in"===a||"desktop add in"===a||"windows viewer add in"===a||"windows viewer configuration"===a?"appsgray":"arcgis pro add in"===a||"arcgis pro configuration"===a?"addindesktop":"rule package"===a||"file geodatabase"===
a||"sqlite geodatabase"===a||"csv collection"===a||"kml collection"===a||"windows mobile package"===a||"map template"===a||"desktop application template"===a||"arcpad package"===a||"code sample"===a||"form"===a||"document link"===a||"operations dashboard add in"===a||"rules package"===a||"image"===a||"workflow manager package"===a||"explorer map"===a&&-1<c.indexOf("Explorer Mapping Application")||-1<c.indexOf("Document")?"datafilesgray":"network analysis service"===a||"geoprocessing service"===a||
"geodata service"===a||"geometry service"===a||"geoprocessing package"===a||"locator package"===a||"geoprocessing sample"===a||"workflow manager service"===a?"toolsgray":"layer"===a||"layer package"===a||"explorer layer"===a?"layersgray":"scene package"===a?"scenepackage":"mobile scene package"===a?"mobilescenepackage":"tile package"===a?"tilepackage":"task file"===a?"taskfile":"report template"===a?"report-template":"statistical data collection"===a?"statisticaldatacollection":"insights workbook"===
a?"workbook":"insights model"===a?"insightsmodel":"insights page"===a?"insightspage":"insights theme"===a?"insightstheme":"hub initiative"===a?"hubinitiative":"hubpage"===a?"hubpage":"hub site application"===a?"hubsite":"relational database connection"===a?"relationaldatabaseconnection":"big data file share"===a?"datastorecollection":"image collection"===a?"imagecollection":"style"===a?"style":"desktop style"===a?"desktopstyle":"dashboard"===a?"dashboard":"raster function template"===a?"rasterprocessingtemplate":
"vector tile package"===a?"vectortilepackage":"ortho mapping project"===a?"orthomappingproject":"ortho mapping template"===a?"orthomappingtemplate":"solution"===a?"solutions":"maps";return a?b.toUrl("../images/portal/"+a+"16.png"):null},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"isLayer",{get:function(){return-1<"Map Service;Feature Service;Feature Collection;Scene Service;Image Service;Stream Service;Vector Tile Service;WMTS;WMS".split(";").indexOf(this.type)},enumerable:!0,
configurable:!0});Object.defineProperty(e.prototype,"itemUrl",{get:function(){var a=this.get("portal.restUrl");return a?a+"/content/items/"+this.id:null},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"thumbnailUrl",{get:function(){var a=this.itemUrl,b=this.thumbnail;return a&&b?this.portal._normalizeUrl(a+"/info/"+b+"?f\x3djson"):null},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"userItemUrl",{get:function(){var a=this.get("portal.restUrl");if(!a)return null;
var b=this.owner||this.get("portal.user.username");return b?a+"/content/users/"+(this.ownerFolder?b+"/"+this.ownerFolder:b)+"/items/"+this.id:null},enumerable:!0,configurable:!0});e.prototype.load=function(){var a=this;this.portal||(this.portal=r.getDefault());var b=this.portal.load().then(function(){return a.resourceInfo?a.resourceInfo:a.id&&a.itemUrl?a.portal._request(a.itemUrl):{}}).then(function(g){a.resourceInfo=g;a.read(g)});this.addResolvingPromise(b);return this.when()};e.prototype.addRating=
function(a){var b={method:"post",query:{}};a instanceof x&&(a=a.rating);isNaN(a)||"number"!==typeof a||(b.query.rating=a);return this.portal._request(this.itemUrl+"/addRating",b).then(function(){return new x({rating:a,created:new Date})})};e.prototype.deleteRating=function(){return this.portal._request(this.itemUrl+"/deleteRating",{method:"post"}).then(function(){})};e.prototype.fetchData=function(a){void 0===a&&(a="json");return this.portal._request(this.itemUrl+"/data",{responseType:a})};e.prototype.fetchRating=
function(){return this.portal._request(this.itemUrl+"/rating").then(function(a){return null!=a.rating?(a.created=new Date(a.created),new x(a)):null})};e.prototype.fetchRelatedItems=function(a){return this.portal._requestToTypedArray(this.itemUrl+"/relatedItems",{query:a},"PortalItem")};e.prototype.getThumbnailUrl=function(a){var b=this.thumbnailUrl;b&&a&&(b+="\x26w\x3d"+a);return b};e.prototype.update=function(a){var b=this;return this.id?this.load().then(function(){return b.portal._signIn()}).then(function(){var g=
a&&a.data,c={method:"post"};c.query=b._getPostQuery();for(var d in c.query)null===c.query[d]&&(c.query[d]="");c.query.clearEmptyFields=!0;null!=g&&("string"===typeof g?c.query.text=g:"object"===typeof g&&(c.query.text=JSON.stringify(g)));return b.portal._request(b.userItemUrl+"/update",c).then(function(){return b._reload()})}):f.reject(new l("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))};e.prototype.updateThumbnail=function(a){var b=this;return this.id?this.load().then(function(){return b.portal._signIn()}).then(function(){var g=
a.thumbnail,c={method:"post"};if("string"===typeof g)d.isDataProtocol(g)?c.query={data:g}:c.query={url:d.makeAbsolute(g)};else{var f=new FormData;f.append("file",g);c.body=f}return b.portal._request(b.userItemUrl+"/updateThumbnail",c).then(function(){return b._reload()})}):f.reject(new l("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))};e.prototype.toJSON=function(){var a=this.extent,a={created:this.created&&this.created.getTime(),description:this.description,extent:a&&
[[a.xmin,a.ymin],[a.xmax,a.ymax]],id:this.id,modified:this.modified&&this.modified.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,tags:this.tags,thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:this.typeKeywords,url:this.url};return k.fixJson(a)};e.fromJSON=function(a){if(!a)return null;if(a.declaredClass)throw Error("JSON object is already hydrated");return new m({resourceInfo:a})};e.prototype._reload=function(){var a=this;return this.portal._request(this.itemUrl,
{query:{_ts:(new Date).getTime()}}).then(function(b){a.resourceInfo=b;a.read(b);return a})};e.prototype._getPostQuery=function(){var a=this.toJSON(),b;for(b in a)"tags"===b&&null!==a[b]&&(a[b]=a[b].join(", ")),"typeKeywords"===b&&null!==a[b]&&(a[b]=a[b].join(", "));return a};var m;h([c.property()],e.prototype,"access",void 0);h([c.property()],e.prototype,"accessInformation",void 0);h([c.property({json:{read:{source:"appProxies"}}})],e.prototype,"applicationProxies",void 0);h([c.property()],e.prototype,
"avgRating",void 0);h([c.property()],e.prototype,"categories",void 0);h([c.property({type:Date})],e.prototype,"created",void 0);h([c.property()],e.prototype,"culture",void 0);h([c.property()],e.prototype,"description",void 0);h([c.property({dependsOn:["type","typeKeywords"],readOnly:!0})],e.prototype,"displayName",null);h([c.property({type:q})],e.prototype,"extent",void 0);h([c.reader("extent")],e.prototype,"readExtent",null);h([c.property()],e.prototype,"groupCategories",void 0);h([c.property({dependsOn:["type",
"typeKeywords"],readOnly:!0})],e.prototype,"iconUrl",null);h([c.property()],e.prototype,"id",void 0);h([c.property({dependsOn:["type"],readOnly:!0})],e.prototype,"isLayer",null);h([c.property()],e.prototype,"itemControl",void 0);h([c.property({dependsOn:["portal.restUrl","id"],readOnly:!0})],e.prototype,"itemUrl",null);h([c.property()],e.prototype,"licenseInfo",void 0);h([c.property({type:Date})],e.prototype,"modified",void 0);h([c.property()],e.prototype,"name",void 0);h([c.property()],e.prototype,
"numComments",void 0);h([c.property()],e.prototype,"numRatings",void 0);h([c.property()],e.prototype,"numViews",void 0);h([c.property()],e.prototype,"owner",void 0);h([c.property()],e.prototype,"ownerFolder",void 0);h([c.property({type:r})],e.prototype,"portal",void 0);h([c.property()],e.prototype,"resourceInfo",void 0);h([c.property()],e.prototype,"screenshots",void 0);h([c.property()],e.prototype,"size",void 0);h([c.property()],e.prototype,"snippet",void 0);h([c.property()],e.prototype,"tags",void 0);
h([c.property()],e.prototype,"thumbnail",void 0);h([c.property({dependsOn:["itemUrl","thumbnail","portal.credential.token"],readOnly:!0})],e.prototype,"thumbnailUrl",null);h([c.property()],e.prototype,"title",void 0);h([c.property()],e.prototype,"type",void 0);h([c.property()],e.prototype,"typeKeywords",void 0);h([c.property()],e.prototype,"url",void 0);h([c.property({dependsOn:["portal.restUrl","portal.user.username","owner","ownerFolder","id"],readOnly:!0})],e.prototype,"userItemUrl",null);return e=
m=h([c.subclass("esri.portal.PortalItem")],e)}(c.declared(m,a))})},"esri/portal/PortalRating":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/accessorSupport/decorators".split(" "),function(b,e,n,h,l,m){return function(b){function a(a){a=b.call(this)||this;a.created=null;a.rating=null;return a}n(a,b);h([m.property()],a.prototype,"created",void 0);h([m.property()],a.prototype,"rating",void 0);return a=h([m.subclass("esri.portal.PortalRating")],
a)}(m.declared(l))})},"esri/support/basemapDefinitions":function(){define(["require","exports","dojo/i18n!../nls/basemaps"],function(b,e,n){return{streets:{id:"streets",title:n.streets,thumbnailUrl:b.toUrl("../images/basemap/streets.jpg"),baseMapLayers:[{id:"streets-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Street Map",showLegend:!1,visibility:!0,opacity:1}]},satellite:{id:"satellite",title:n.satellite,
thumbnailUrl:b.toUrl("../images/basemap/satellite.jpg"),baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",title:n.hybrid,thumbnailUrl:b.toUrl("../images/basemap/hybrid.jpg"),baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",
title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Boundaries and Places",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",title:n.terrain,thumbnailUrl:b.toUrl("../images/basemap/terrain.jpg"),baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",
layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},topo:{id:"topo",title:n.topo,thumbnailUrl:b.toUrl("../images/basemap/topo.jpg"),baseMapLayers:[{id:"topo-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer",
layerType:"ArcGISTiledMapServiceLayer",title:"World Topo Map",showLegend:!1,visibility:!0,opacity:1}]},gray:{id:"gray",title:n.gray,thumbnailUrl:b.toUrl("../images/basemap/gray.jpg"),baseMapLayers:[{id:"gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",
layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"dark-gray":{id:"dark-gray",title:n["dark-gray"],thumbnailUrl:b.toUrl("../images/basemap/dark-gray.jpg"),baseMapLayers:[{id:"dark-gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"dark-gray-reference-layer",
url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",title:n.oceans,thumbnailUrl:b.toUrl("../images/basemap/oceans.jpg"),baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",
showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"national-geographic":{id:"national-geographic",title:n["national-geographic"],thumbnailUrl:b.toUrl("../images/basemap/national-geographic.jpg"),baseMapLayers:[{id:"national-geographic-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer",
title:"NatGeo World Map",showLegend:!1,layerType:"ArcGISTiledMapServiceLayer",visibility:!0,opacity:1}]},osm:{id:"osm",title:n.osm,thumbnailUrl:b.toUrl("../images/basemap/osm.jpg"),baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",title:n["dark-gray"],thumbnailUrl:b.toUrl("../images/basemap/dark-gray.jpg"),baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/c11ce4f7801740b2905eb03ddc963ac8/resources/styles/root.json",
layerType:"VectorTileLayer",title:"World Dark Gray",visibility:!0,opacity:1}]},"gray-vector":{id:"gray-vector",title:n.gray,thumbnailUrl:b.toUrl("../images/basemap/gray.jpg"),baseMapLayers:[{id:"gray-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/8a2cba3b0ebf4140b7c0dc5ee149549a/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Light Gray",visibility:!0,opacity:1}]},"streets-vector":{id:"streets-vector",title:n.streets,thumbnailUrl:b.toUrl("../images/basemap/streets.jpg"),
baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},"topo-vector":{id:"topo-vector",title:n.topo,thumbnailUrl:b.toUrl("../images/basemap/topo.jpg"),baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",
title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},"streets-night-vector":{id:"streets-night-vector",title:n["streets-night-vector"],thumbnailUrl:b.toUrl("../images/basemap/streets-night.jpg"),baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",
layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",title:n["streets-relief-vector"],thumbnailUrl:b.toUrl("../images/basemap/streets-relief.jpg"),baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",
styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",showLegend:!1,visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",title:n["streets-navigation-vector"],thumbnailUrl:b.toUrl("../images/basemap/streets-navigation.jpg"),baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",
layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]}}})},"esri/Ground":function(){define("require exports ./core/tsSupport/assignHelper ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./Color ./core/asyncUtils ./core/Collection ./core/collectionUtils ./core/Error ./core/JSONSupport ./core/lang ./core/Loadable ./core/loadAll ./core/Logger ./core/promiseUtils ./core/accessorSupport/decorators ./ground/navigationConstraints ./layers/Layer ./layers/support/types ./webdoc/support/opacityUtils".split(" "),
function(b,e,n,h,l,m,k,a,f,d,c,q,r,x,z,v,w,p,y,g,u){var t=a.ofType(y),A=z.getLogger("esri.Ground");return function(a){function c(b){var c=a.call(this)||this;c.opacity=1;c.surfaceColor=null;c.navigationConstraint=null;c.layers=new t;c.layers.on("after-add",function(a){a=a.item;a.parent&&a.parent!==c&&"remove"in a.parent&&a.parent.remove(a);a.parent=c;g.isOfType(a,["elevation","base-elevation"])||A.error("Layer '"+a.title+", id:"+a.id+"' of type '"+a.type+"' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.")});
c.layers.on("after-remove",function(a){a.item.parent=null});return c}h(c,a);e=c;c.prototype.initialize=function(){this.when().catch(function(a){A.error("#load()","Failed to load ground",a)});this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)};c.prototype.normalizeCtorArgs=function(a){a&&"resourceInfo"in a&&(this._set("resourceInfo",a.resourceInfo),a=n({},a),delete a.resourceInfo);return a};Object.defineProperty(c.prototype,"layers",{set:function(a){this._set("layers",f.referenceSetter(a,
this._get("layers"),t))},enumerable:!0,configurable:!0});c.prototype.writeLayers=function(a,g,b,c){var f=[];a&&(c=n({},c,{layerContainerType:"ground"}),a.forEach(function(a){if(a.write){var g={};a.write(g,c)&&f.push(g)}else c&&c.messages&&c.messages.push(new d("layer:unsupported","Layers ("+a.title+", "+a.id+") of type '"+a.declaredClass+"' cannot be persisted in the ground",{layer:a}))}));g.layers=f};c.prototype.load=function(){this.addResolvingPromise(this._loadFromSource());return this.when()};
c.prototype.loadAll=function(){var a=this;return k.safeCast(x.loadAll(this,function(g){g(a.layers)}))};c.prototype.queryElevation=function(a,g){var c=this;return v.create(function(a){return b(["./layers/support/ElevationQuery"],a)}).then(function(b){b=new b.ElevationQuery;var d=c.layers.filter(function(a){return"elevation"===a.type}).toArray();return b.queryAll(d,a,g)})};c.prototype.createElevationSampler=function(a,g){var c=this;return v.create(function(a){return b(["./layers/support/ElevationQuery"],
a)}).then(function(b){b=new b.ElevationQuery;var d=c.layers.filter(function(a){return"elevation"===a.type}).toArray();return b.createSamplerAll(d,a,g)})};c.prototype.clone=function(){var a={opacity:this.opacity,surfaceColor:q.clone(this.surfaceColor),navigationConstraint:q.clone(this.navigationConstraint),layers:this.layers.slice()};this.loaded&&(a.loadStatus="loaded");return(new e({resourceInfo:this.resourceInfo})).set(a)};c.prototype.read=function(a,g){this.resourceInfo||this._set("resourceInfo",
{data:a,context:g});return this.inherited(arguments)};c.prototype._loadFromSource=function(){var a=this.resourceInfo;return a?this._loadLayersFromJSON(a.data,a.context):v.resolve(null)};c.prototype._loadLayersFromJSON=function(a,g){var c=this,d=g&&g.origin||"web-scene",f=g&&g.portal||null,h=g&&g.url||null;return v.create(function(a){return b(["./portal/support/layersCreator"],a)}).then(function(g){var b=[];a.layers&&Array.isArray(a.layers)&&b.push.apply(b,g.populateOperationalLayers(c.layers,a.layers,
{context:{origin:d,url:h,portal:f,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"}));return v.eachAlways(b)}).then(function(){})};var e;l([w.property({type:t,json:{read:!1}}),w.cast(f.castForReferenceSetter)],c.prototype,"layers",null);l([w.writer("layers")],c.prototype,"writeLayers",null);l([w.property({readOnly:!0})],c.prototype,"resourceInfo",void 0);l([w.property({type:Number,json:{read:{reader:u.transparencyToOpacity,source:"transparency"},write:{writer:function(a,
g){g.transparency=u.opacityToTransparency(a)},target:"transparency"}}})],c.prototype,"opacity",void 0);l([w.property({type:m,json:{write:function(a,g){g.surfaceColor=a.toJSON().slice(0,3)}}})],c.prototype,"surfaceColor",void 0);l([w.property({types:p.navigationConstraintTypes,json:{read:p.readNavigationConstraint,write:!0}})],c.prototype,"navigationConstraint",void 0);return c=e=l([w.subclass("esri.Ground")],c)}(w.declared(c,r))})},"esri/Color":function(){define(["./core/declare","./core/accessorSupport/ensureType",
"dojo/colors"],function(b,e,n){function h(b){return Math.max(0,Math.min(e.ensureInteger(b),255))}var l=b([n],{declaredClass:"esri.Color",toJSON:function(){return[h(this.r),h(this.g),h(this.b),1<this.a?this.a:h(255*this.a)]},clone:function(){return new l(this.toRgba())}});l.toJSON=function(b){return b&&[h(b.r),h(b.g),h(b.b),1<b.a?b.a:h(255*b.a)]};l.fromJSON=function(b){return b&&new l([b[0],b[1],b[2],b[3]/255])};l.toUnitRGB=function(b){return[b.r/255,b.g/255,b.b/255]};l.toUnitRGBA=function(b){return[b.r/
255,b.g/255,b.b/255,null!=b.a?b.a:1]};var m="named blendColors fromRgb fromHex fromArray fromString".split(" ");for(b=0;b<m.length;b++)l[m[b]]=n[m[b]];l.named.rebeccapurple=[102,51,153];return l})},"dojo/colors":function(){define(["./_base/kernel","./_base/lang","./_base/Color","./_base/array"],function(b,e,n,h){var l={};e.setObject("dojo.colors",l);var m=function(a,b,d){0>d&&++d;1<d&&--d;var c=6*d;return 1>c?a+(b-a)*c:1>2*d?b:2>3*d?a+(b-a)*(2/3-d)*6:a};b.colorFromRgb=n.fromRgb=function(a,b){var d=
a.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(d){a=d[2].split(/\s*,\s*/);var c=a.length,d=d[1];if("rgb"==d&&3==c||"rgba"==d&&4==c)return d=a[0],"%"==d.charAt(d.length-1)?(d=h.map(a,function(a){return 2.56*parseFloat(a)}),4==c&&(d[3]=a[3]),n.fromArray(d,b)):n.fromArray(a,b);if("hsl"==d&&3==c||"hsla"==d&&4==c){var d=(parseFloat(a[0])%360+360)%360/360,f=parseFloat(a[1])/100,e=parseFloat(a[2])/100,f=.5>=e?e*(f+1):e+f-e*f,e=2*e-f,d=[256*m(e,f,d+1/3),256*m(e,f,d),256*m(e,f,d-1/3),1];4==
c&&(d[3]=a[3]);return n.fromArray(d,b)}}return null};var k=function(a,b,d){a=Number(a);return isNaN(a)?d:a<b?b:a>d?d:a};n.prototype.sanitize=function(){this.r=Math.round(k(this.r,0,255));this.g=Math.round(k(this.g,0,255));this.b=Math.round(k(this.b,0,255));this.a=k(this.a,0,1);return this};l.makeGrey=n.makeGrey=function(a,b){return n.fromArray([a,a,a,b])};e.mixin(n.named,{aliceblue:[240,248,255],antiquewhite:[250,235,215],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,
228,196],blanchedalmond:[255,235,205],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,
140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],
greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,
178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,
255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],oldlace:[253,245,230],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,
128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],whitesmoke:[245,245,245],yellowgreen:[154,205,50]});return n})},"esri/ground/navigationConstraints":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/Warning ../core/accessorSupport/decorators".split(" "),
function(b,e,n,h,l,m,k){Object.defineProperty(e,"__esModule",{value:!0});b=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}n(b,a);h([k.property()],b.prototype,"type",void 0);return b=h([k.subclass("esri.ground.NavigationConstraint")],b)}(k.declared(l));e.NavigationConstraint=b;l=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.type="none";return b}n(b,a);d=b;b.prototype.clone=function(){return new d};var d;h([k.property({type:["none"],readOnly:!0,json:{read:!1,
write:!0}})],b.prototype,"type",void 0);return b=d=h([k.subclass("esri.ground.NoneNavigationConstraint")],b)}(k.declared(b));e.NoneNavigationConstraint=l;var a=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.type="stay-above";return b}n(b,a);d=b;b.prototype.clone=function(){return new d};var d;h([k.property({type:["stay-above"],readOnly:!0,json:{read:!1,write:function(a,b){b.type="stayAbove"}}})],b.prototype,"type",void 0);return b=d=h([k.subclass("esri.ground.StayAboveNavigationConstraint")],
b)}(k.declared(b));e.StayAboveNavigationConstraint=a;e.readNavigationConstraint=function(a,b,h){if(b=a&&f[a.type])return b=new b,b.read(a,h),b;h&&h.messages&&a&&h.messages.push(new m("navigationconstraint:unsupported","Navigation constraint of type '"+(a.type||"unknown")+"' is not supported",{definition:a,context:h}))};var f={none:l,stayAbove:a};e.navigationConstraintTypes={key:"type",base:b,typeMap:{none:l,"stay-above":a}}})},"esri/layers/support/types":function(){define(["require","exports"],function(b,
e){Object.defineProperty(e,"__esModule",{value:!0});e.isOfType=function(b,h){b=b.constructor._meta;if(!b||!b.bases)return!1;b=b.bases;var e=Array.isArray(h);return b.some(function(b){b=b.__accessorMetadata__;if(!b)return!1;b=b.properties;if(!b||!b.type||!b.type.value)return!1;b=b.type.value;return e?-1!==h.indexOf(b):b===h})}})},"esri/webdoc/support/opacityUtils":function(){define(["require","exports","../../core/accessorSupport/ensureType"],function(b,e,n){Object.defineProperty(e,"__esModule",{value:!0});
e.opacityToTransparency=function(b){b=n.ensureInteger(100*(1-b));return Math.max(0,Math.min(b,100))};e.transparencyToOpacity=function(b){return Math.max(0,Math.min(1-b/100,1))}})},"esri/core/CollectionFlattener":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper ./Collection ./Handles ./accessorSupport/decorators".split(" "),function(b,e,n,h,l,m,k){return function(a){function b(b){b=a.call(this)||this;b._handles=new m;b.root=null;b.refresh=b.refresh.bind(b);
b.updateCollections=b.updateCollections.bind(b);return b}n(b,a);b.prototype.initialize=function(){var a=this;this._handles.add(this.rootCollectionNames.map(function(b){return a.watch("root."+b,a.updateCollections,!0)}));this.updateCollections()};b.prototype.destroy=function(){this.root=null;this.refresh();this._handles.destroy();this._handles=null};b.prototype.updateCollections=function(){var a=this;this._collections=this.rootCollectionNames.map(function(b){return a.get("root."+b)}).filter(function(a){return null!=
a});this.refresh()};b.prototype.refresh=function(){var a=this._handles;a.remove("collections");this.removeAll();for(var b=this._collections.slice(),f=0,h=this._collections;f<h.length;f++)this._processCollection(b,this,h[f]);for(f=0;f<b.length;f++)a.add(b[f].on("after-changes",this.refresh),"collections")};b.prototype._createNewInstance=function(a){return new l(a)};b.prototype._processCollection=function(a,b,f){var c=this;f&&(a.push(f),f.forEach(function(d){d&&(b.push(d),c._processCollection(a,b,c.getChildrenFunction(d)))}))};
h([k.property()],b.prototype,"rootCollectionNames",void 0);h([k.property()],b.prototype,"root",void 0);h([k.property()],b.prototype,"getChildrenFunction",void 0);return b=h([k.subclass("esri.core.CollectionFlattener")],b)}(k.declared(l))})},"esri/core/Handles":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ./Accessor ./Collection ./accessorSupport/decorators".split(" "),function(b,e,n,h,l,m,k){return function(a){function b(b){b=a.call(this)||
this;b._groups=new Map;return b}n(b,a);b.prototype.destroy=function(){this.removeAll()};Object.defineProperty(b.prototype,"size",{get:function(){var a=0;this._groups.forEach(function(b){a+=b.length});return a},enumerable:!0,configurable:!0});b.prototype.add=function(a,b){if(!this._isHandle(a)&&!Array.isArray(a)&&!m.isCollection(a))return this;var c=this._getOrCreateGroup(b);Array.isArray(a)||m.isCollection(a)?a.forEach(function(a){return c.push(a)}):c.push(a);this.notifyChange("size");return this};
b.prototype.has=function(a){return this._groups.has(this._ensureGroupKey(a))};b.prototype.remove=function(a){if(Array.isArray(a)||m.isCollection(a))return a.forEach(this.remove,this),this;if(!this.has(a))return this;for(var b=this._getGroup(a),d=0;d<b.length;d++)b[d].remove();this._deleteGroup(a);this.notifyChange("size");return this};b.prototype.removeAll=function(){this._groups.forEach(function(a){for(var b=0;b<a.length;b++)a[b].remove()});this._groups.clear();this.notifyChange("size");return this};
b.prototype._isHandle=function(a){return a&&!!a.remove};b.prototype._getOrCreateGroup=function(a){if(this.has(a))return this._getGroup(a);var b=[];this._groups.set(this._ensureGroupKey(a),b);return b};b.prototype._getGroup=function(a){return this._groups.get(this._ensureGroupKey(a))};b.prototype._deleteGroup=function(a){return this._groups.delete(this._ensureGroupKey(a))};b.prototype._ensureGroupKey=function(a){return a||"_default_"};h([k.property({readOnly:!0})],b.prototype,"size",null);return b=
h([k.subclass("esri.core.Handles")],b)}(k.declared(l))})},"esri/support/basemapUtils":function(){define("require exports ../Basemap ../core/Collection ../core/Logger ../core/urlUtils ../core/accessorSupport/ensureType ./basemapDefinitions".split(" "),function(b,e,n,h,l,m,k,a){function f(b,c){var d;if("string"===typeof b){if(!(b in a))return c=Object.keys(a).map(function(a){return'"'+a+'"'}).join(", "),g.warn("Unable to find basemap definition for: "+b+". Try one of these: "+c),null;c&&(d=c[b]);d||
(d=n.fromId(b),c&&(c[b]=d))}else d=k.default(n,b);return d}function d(a,g){return a.map(function(a){return g.find(function(g){return p(r(a),r(g))})||a})}function c(a){return a?!a.loaded&&a.resourceInfo?x(a.resourceInfo.data):{baseLayers:q(a.baseLayers),referenceLayers:q(a.referenceLayers)}:null}function q(a){return(h.isCollection(a)?a.toArray():a).map(r)}function r(a){return{type:a.type,url:y(a.urlTemplate||a.url||a.styleUrl),minScale:null!=a.minScale?a.minScale:0,maxScale:null!=a.maxScale?a.maxScale:
0,opacity:null!=a.opacity?a.opacity:1,visible:null!=a.visible?!!a.visible:!0}}function x(a){return a?{baseLayers:z(a.baseMapLayers.filter(function(a){return!a.isReference})),referenceLayers:z(a.baseMapLayers.filter(function(a){return a.isReference}))}:null}function z(a){return a.map(function(a){var g;switch(a.layerType){case "VectorTileLayer":g="vector-tile";break;case "ArcGISTiledMapServiceLayer":g="tile";break;default:g="unknown"}return{type:g,url:y(a.templateUrl||a.urlTemplate||a.styleUrl||a.url),
minScale:null!=a.minScale?a.minScale:0,maxScale:null!=a.maxScale?a.maxScale:0,opacity:null!=a.opacity?a.opacity:1,visible:null!=a.visibility?!!a.visibility:!0}})}function v(a,g,b){return null!=a!==(null!=g)?"not-equal":a?w(a.baseLayers,g.baseLayers)?w(a.referenceLayers,g.referenceLayers)?"equal":b.mustMatchReferences?"not-equal":"base-layers-equal":"not-equal":"equal"}function w(a,g){if(a.length!==g.length)return!1;for(var b=0;b<a.length;b++)if(!p(a[b],g[b]))return!1;return!0}function p(a,g){return a.type===
g.type&&a.url===g.url&&a.minScale===g.minScale&&a.maxScale===g.maxScale&&a.visible===g.visible&&a.opacity===g.opacity}function y(a){return a?m.normalize(a).replace(/^\s*https?:/i,"").toLowerCase():""}Object.defineProperty(e,"__esModule",{value:!0});var g=l.getLogger("esri.support.basemapUtils");e.createCache=function(){return{}};e.ensureType=f;e.clonePreservingTiledLayers=function(a,g){void 0===g&&(g=null);a=f(a);if(!a)return null;var b=new n({id:a.id,title:a.title,baseLayers:a.baseLayers.slice(),
referenceLayers:a.referenceLayers.slice()});g&&(b.baseLayers=d(b.baseLayers,g.baseLayers),b.referenceLayers=d(b.referenceLayers,g.referenceLayers));b.load();b.portalItem=a.portalItem;return b};e.getWellKnownBasemapId=function(g){var b=null;g=c(g);for(var d in a){var f=x(a[d]),f=v(g,f,{mustMatchReferences:!1});if("equal"===f){b=d;break}else"base-layers-equal"===f&&(b=d)}return b};e.contentEquals=function(a,g){if(a===g)return!0;a=c(a);g=c(g);return"equal"===v(a,g,{mustMatchReferences:!0})}})},"esri/support/groundUtils":function(){define("require exports ../Ground ../core/Logger ../core/accessorSupport/ensureType ../layers/ElevationLayer".split(" "),
function(b,e,n,h,l,m){Object.defineProperty(e,"__esModule",{value:!0});var k=h.getLogger("esri.support.groundUtils");e.groundElevationLayers={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer"}};e.ensureType=function(a){var b;"string"===typeof a?a in e.groundElevationLayers?(a=e.groundElevationLayers[a],
a=new m({id:a.id,url:a.url}),b=new n({layers:[a]})):k.warn("Unable to find ground definition for: "+a+'. Try "world-elevation"'):b=l.default(n,a);return b}})},"esri/layers/ElevationLayer":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/io-query dojo/_base/kernel ../request ../core/Error ../core/promiseUtils ../core/urlUtils ../core/accessorSupport/decorators ../geometry/HeightModelInfo ./Layer ./mixins/ArcGISCachedService ./mixins/OperationalLayer ./mixins/PortalLayer ./support/rasterFormats/LercCodec".split(" "),
function(b,e,n,h,l,m,k,a,f,d,c,q,r,x,z,v,w,p){return function(e){function g(a){a=e.call(this)||this;a.copyright=null;a.heightModelInfo=null;a.opacity=1;a.operationalLayerType="ArcGISTiledElevationServiceLayer";a.type="elevation";a.url=null;return a}h(g,e);g.prototype.normalizeCtorArgs=function(a,g){return"string"===typeof a?n({url:a},g):a};Object.defineProperty(g.prototype,"minScale",{get:function(){},set:function(a){this.constructed&&k.deprecated(this.declaredClass+".minScale support has been removed.",
"","4.5")},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"maxScale",{get:function(){},set:function(a){this.constructed&&k.deprecated(this.declaredClass+".maxScale support has been removed.","","4.5")},enumerable:!0,configurable:!0});g.prototype.load=function(){var a=this;this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service"],supportsData:!1,validateItem:function(a){for(var g=0;g<a.typeKeywords.length;g++)if("elevation 3d layer"===a.typeKeywords[g].toLowerCase())return!0;
throw new f("portal:invalid-layer-item-type","Invalid layer item type '${type}', expected '${expectedType}' ",{type:"Image Service",expectedType:"Image Service Elevation 3D Layer"});}}).always(function(){return a._fetchImageService()}));return this.when()};g.prototype.fetchTile=function(g,b,c,d){var f=this;void 0===d&&(d=0);return this.load().then(function(){return f._fetchTileAvailability(g,b,c)}).then(function(){return a(f.getTileUrl(g,b,c),{responseType:"array-buffer"})}).then(function(a){a=p.decode(a.data,
{noDataValue:d,returnFileInfo:!0});return{values:a.pixelData,width:a.width,height:a.height,maxZError:a.fileInfo.maxZError,noDataValue:a.noDataValue}})};g.prototype.getTileUrl=function(a,g,b){var c=m.objectToQuery(n({},this.parsedUrl.query,{blankTile:!this.tilemapCache&&this.supportsBlankTile?!1:null}));return this.parsedUrl.path+"/tile/"+a+"/"+g+"/"+b+(c?"?"+c:"")};g.prototype.queryElevation=function(a,g){var c=this;return d.create(function(a){return b(["./support/ElevationQuery"],a)}).then(function(b){return(new b.ElevationQuery).query(c,
a,g)})};g.prototype.createElevationSampler=function(a,g){var c=this;return d.create(function(a){return b(["./support/ElevationQuery"],a)}).then(function(b){return(new b.ElevationQuery).createSampler(c,a,g)})};g.prototype.importLayerViewModule=function(a){switch(a.type){case "2d":return d.reject(new f("elevation-layer:view-not-supported","ElevationLayer is only supported in 3D"));case "3d":return d.create(function(a){return b(["../views/3d/layers/ElevationLayerView3D"],a)})}};g.prototype._fetchTileAvailability=
function(a,g,b){return this.tilemapCache?this.tilemapCache.fetchAvailability(a,g,b):d.resolve("unknown")};g.prototype._fetchImageService=function(){var g=this;return d.resolve().then(function(){if(g.resourceInfo)return g.resourceInfo;var b={query:n({f:"json"},g.parsedUrl.query),responseType:"json"};return a(g.parsedUrl.path,b)}).then(function(a){a.ssl&&(g.url=g.url.replace(/^http:/i,"https:"));g.read(a.data,{origin:"service",url:g.parsedUrl})})};l([q.property({json:{read:{source:"copyrightText"}}})],
g.prototype,"copyright",void 0);l([q.property({readOnly:!0,type:r})],g.prototype,"heightModelInfo",void 0);l([q.property({json:{read:!1,write:!1}})],g.prototype,"minScale",null);l([q.property({json:{read:!1,write:!1}})],g.prototype,"maxScale",null);l([q.property({json:{read:!1,write:!1}})],g.prototype,"opacity",void 0);l([q.property()],g.prototype,"operationalLayerType",void 0);l([q.property()],g.prototype,"resourceInfo",void 0);l([q.property({json:{read:!1},value:"elevation",readOnly:!0})],g.prototype,
"type",void 0);l([q.property({json:{origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writer:c.writeOperationalLayerUrl}}}}})],g.prototype,"url",void 0);return g=l([q.subclass("esri.layers.ElevationLayer")],g)}(q.declared(x,z,v,w))})},"esri/geometry/HeightModelInfo":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/kebabDictionary ../core/Warning ../core/accessorSupport/decorators ./support/scaleUtils".split(" "),
function(b,e,n,h,l,m,k,a,f,d){function c(b,c){return new a("height-unit:unsupported","Height unit of value '"+b+"' is not supported",c)}function q(b,c){return new a("height-model:unsupported","Height model of value '"+b+"' is not supported",c)}var r=k.strict()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),x=k.strict()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links",
"sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});return function(a){function b(b){b=a.call(this)||this;b.heightModel="gravity-related-height";b.heightUnit="meters";b.vertCRS=null;return b}h(b,
a);e=b;b.prototype.writeHeightModel=function(a,b,g){return r.write(a,b,g)};b.prototype.readHeightModel=function(a,b,g){if(b=r.read(a))return b;g&&g.messages&&g.messages.push(q(a,{context:g}));return null};b.prototype.readHeightUnit=function(a,b,g){if(b=x.read(a))return b;g&&g.messages&&g.messages.push(c(a,{context:g}));return null};b.prototype.readHeightUnitService=function(a,b,g){if(b=d.unitFromRESTJSON(a)||x.read(a))return b;g&&g.messages&&g.messages.push(c(a,{context:g}));return null};b.prototype.readVertCRS=
function(a,b){return b.vertCRS||b.ellipsoid||b.geoid};b.prototype.clone=function(){return new e({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})};b.prototype.equals=function(a){return a?this===a?!0:this.heightModel===a.heightModel&&this.heightUnit===a.heightUnit&&this.vertCRS===a.vertCRS:!1};b.deriveUnitFromSR=function(a,b){b=d.getVerticalUnitStringForSR(b);return new e({heightModel:a.heightModel,heightUnit:b,vertCRS:a.vertCRS})};b.prototype.write=function(a,b){b=n({origin:"web-scene"},
b);return this.inherited(arguments,[a,b])};b.fromJSON=function(a){if(!a)return null;var b=new e;b.read(a,{origin:"web-scene"});return b};var e;l([f.property({type:r.apiValues,constructOnly:!0})],b.prototype,"heightModel",void 0);l([f.writer("web-scene","heightModel")],b.prototype,"writeHeightModel",null);l([f.reader(["web-scene","service"],"heightModel")],b.prototype,"readHeightModel",null);l([f.property({type:x.apiValues,constructOnly:!0,json:{origins:{"web-scene":{write:x.write}}}})],b.prototype,
"heightUnit",void 0);l([f.reader("web-scene","heightUnit")],b.prototype,"readHeightUnit",null);l([f.reader("service","heightUnit")],b.prototype,"readHeightUnitService",null);l([f.property({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],b.prototype,"vertCRS",void 0);l([f.reader("service","vertCRS",["vertCRS","ellipsoid","geoid"])],b.prototype,"readVertCRS",null);return b=e=l([f.subclass("esri.geometry.HeightModelInfo")],b)}(f.declared(m))})},"esri/geometry/support/scaleUtils":function(){define("require exports ../../config ../../core/kebabDictionary ../../core/wgs84Constants ./WKIDUnitConversion".split(" "),
function(b,e,n,h,l,m){function k(a){return x.fromJSON(a.toLowerCase())||null}function a(a){return f(a)||e.decDegToMeters}function f(a){var b,c,d;a&&("object"===typeof a?(b=a.wkid,c=a.wkt):"number"===typeof a?b=a:"string"===typeof a&&(c=a));b?d=r.values[r[b]]:c&&-1!==c.search(/^PROJCS/i)&&(a=q.exec(c))&&a[1]&&(d=parseFloat(a[1].split(",")[1]));return d}function d(a){var b,c,d;a&&("object"===typeof a?(b=a.wkid,c=a.wkt):"number"===typeof a?b=a:"string"===typeof a&&(c=a));b?d=r.units[r[b]]:c&&-1!==c.search(/^PROJCS/i)&&
(a=q.exec(c))&&a[1]&&(d=(a=/[\\"\\']{1}([^\\"\\']+)/.exec(a[1]))&&a[1]);return d?k(d):null}function c(b,c){c=a(c);return b/(c*e.inchesPerMeter*n.screenDPI)}Object.defineProperty(e,"__esModule",{value:!0});e.inchesPerMeter=39.37;e.decDegToMeters=l.wgs84Radius*Math.PI/180;var q=/UNIT\[([^\]]+)\]\]$/i,r=m,x=h.strict()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",
chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"});e.unitFromRESTJSON=k;e.unitToRESTJSON=function(a){return x.toJSON(a)||null};e.getMetersPerVerticalUnitForSR=function(b){b=a(b);return 1E5<b?1:b};e.getVerticalUnitStringForSR=function(b){return 1E5<a(b)?"meters":d(b)};e.getMetersPerUnitForSR=
a;e.getMetersPerUnit=f;e.getUnitString=d;e.getDefaultUnitSystem=function(a){if(!a)return null;switch(d(a)){case "feet":case "us-feet":case "clarke-feet":case "clarke-yards":case "clarke-links":case "sears-yards":case "sears-feet":case "sears-chains":case "benoit-1895-b-chains":case "indian-yards":case "indian-1937-yards":case "gold-coast-feet":case "sears-1922-truncated-chains":return"imperial";case "50-kilometers":case "150-kilometers":case "meters":return"metric"}return null};e.getScale=function(a,
b){b=b||a.extent;a=a.width;var c=f(b&&b.spatialReference);return b&&a?b.width/a*(c||e.decDegToMeters)*e.inchesPerMeter*n.screenDPI:0};e.getResolutionForScale=c;e.getExtentForScale=function(a,b){var d=a.extent;a=a.width;b=c(b,d.spatialReference);return d.clone().expand(b*a/d.width)}})},"esri/layers/mixins/ArcGISCachedService":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../geometry ../../core/accessorSupport/decorators ./ArcGISService ../support/TileInfo ../support/TilemapCache".split(" "),
function(b,e,n,h,l,m,k,a,f,d){return function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.copyright=null;b.minScale=0;b.maxScale=0;b.spatialReference=null;b.tileInfo=null;b.tilemapCache=null;return b}h(b,a);Object.defineProperty(b.prototype,"supportsBlankTile",{get:function(){return 10.2<=this.version},enumerable:!0,configurable:!0});b.prototype.readTileInfo=function(a,b){var c=b.minScale?Math.round(1E4*b.minScale)/1E4:Infinity,d=b.maxScale?Math.round(1E4*b.maxScale)/1E4:-Infinity;
return a?(a.lods=a.lods.filter(function(a){a=Math.round(1E4*a.scale)/1E4;return a<=c&&a>=d}),f.fromJSON(a)):null};b.prototype.readTilemapCache=function(a,b){return b.capabilities&&-1<b.capabilities.indexOf("Tilemap")?new d({layer:this}):null};l([k.property({json:{read:{source:"copyrightText"}}})],b.prototype,"copyright",void 0);l([k.property({json:{origins:{service:{read:!1}}}})],b.prototype,"minScale",void 0);l([k.property({json:{origins:{service:{read:!1}}}})],b.prototype,"maxScale",void 0);l([k.property({type:m.SpatialReference})],
b.prototype,"spatialReference",void 0);l([k.property({readOnly:!0,dependsOn:["version"]})],b.prototype,"supportsBlankTile",null);l([k.property({type:f})],b.prototype,"tileInfo",void 0);l([k.reader("service","tileInfo",["tileInfo","minScale","maxScale"])],b.prototype,"readTileInfo",null);l([k.property()],b.prototype,"tilemapCache",void 0);l([k.reader("service","tilemapCache",["capabilities"])],b.prototype,"readTilemapCache",null);l([k.property()],b.prototype,"version",void 0);return b=l([k.subclass("esri.layers.mixins.ArcGISCachedService")],
b)}(k.declared(a))})},"esri/geometry":function(){define("require exports ./geometry/Extent ./geometry/Geometry ./geometry/Mesh ./geometry/Multipoint ./geometry/Point ./geometry/Polygon ./geometry/Polyline ./geometry/ScreenPoint ./geometry/SpatialReference ./geometry/support/jsonUtils".split(" "),function(b,e,n,h,l,m,k,a,f,d,c,q){Object.defineProperty(e,"__esModule",{value:!0});e.Extent=n;e.BaseGeometry=h;e.Mesh=l;e.Multipoint=m;e.Point=k;e.Polygon=a;e.Polyline=f;e.ScreenPoint=d;e.SpatialReference=
c;e.isGeometry=function(a){return a instanceof e.BaseGeometry};e.fromJSON=q.fromJSON})},"esri/geometry/Mesh":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../core/lang ../core/Logger ../core/accessorSupport/decorators ./Extent ./Geometry ./support/MeshComponent ./support/MeshVertexAttributes ./support/triangulationUtils ./support/meshUtils/centerAt ./support/meshUtils/offset ./support/meshUtils/primitives ./support/meshUtils/rotate".split(" "),
function(b,e,n,h,l,m,k,a,f,d,c,q,r,x,z,v,w){var p=k.getLogger("esri.geometry.Mesh");b=function(b){function d(a){a=b.call(this)||this;a.components=null;a.hasZ=!0;a.hasM=!1;a.vertexAttributes=new q.MeshVertexAttributes;a.type="mesh";return a}n(d,b);e=d;Object.defineProperty(d.prototype,"extent",{get:function(){var a=this.spatialReference,b=this.vertexAttributes&&this.vertexAttributes.position;if(!b||0===b.length||this.components&&0===this.components.length)return new f({xmin:0,ymin:0,zmin:0,xmax:0,
ymax:0,zmax:0,spatialReference:a});a={xmin:Infinity,xmax:-Infinity,ymin:Infinity,ymax:-Infinity,zmin:Infinity,zmax:-Infinity,spatialReference:a};if(!this.components)return new f(this.extendExtent(a,b,null));for(var g=0,c=this.components;g<c.length;g++){var d=c[g];if(d.faces)this.extendExtent(a,b,d.faces);else{this.extendExtent(a,b,null);break}}return new f(a)},enumerable:!0,configurable:!0});d.prototype.addComponent=function(a){this.components||(this.components=[]);this.components.push(a);this.clearCache()};
d.prototype.removeComponent=function(a){if(this.components&&(a=this.components.indexOf(a),-1!==a)){this.components=this.components.splice(a,1);return}p.error("removeComponent()","Provided component is not part of the list of components")};d.prototype.rotate=function(a,b,g,c){w.axisAngleFrom(y.x,a/180*Math.PI,u);w.axisAngleFrom(y.y,b/180*Math.PI,t);w.axisAngleFrom(y.z,g/180*Math.PI,A);w.axisAngleMultiply(u,t,u);w.axisAngleMultiply(u,A,u);w.rotate(this,u,c);return this};d.prototype.offset=function(a,
b,c,d){g[0]=a;g[1]=b;g[2]=c;z.offset(this,g,d);return this};d.prototype.centerAt=function(a,b){x.centerAt(this,a,b);return this};d.prototype.clone=function(){return new e({components:m.clone(this.components),spatialReference:this.spatialReference,vertexAttributes:m.clone(this.vertexAttributes)})};d.prototype.vertexAttributesChanged=function(){this.clearCache()};d.prototype.toJSON=function(a){return this.write(null,a)};d.prototype.forEachVertex=function(a,b,g){if(b)for(d=0;d<b.length;d++){var c=3*
b[d];g(a[c+0],a[c+1],a[c+2])}else for(var d=0;d<a.length;d+=3)g(a[d+0],a[d+1],a[d+2])};d.prototype.extendExtent=function(a,b,g){this.forEachVertex(b,g,function(b,g,c){a.xmin=Math.min(a.xmin,b);a.xmax=Math.max(a.xmax,b);a.ymin=Math.min(a.ymin,g);a.ymax=Math.max(a.ymax,g);a.zmin=Math.min(a.zmin,c);a.zmax=Math.max(a.zmax,c)});return a};d.createBox=function(a,b){a=new e(v.convertUnitGeometry(v.createUnitSizeBox(),a,b));if(b&&b.imageFace&&"all"!==b.imageFace){var g=a.components[0],d=g.faces,f=v.boxFaceOrder[b.imageFace],
h=6*f;b=new Uint32Array(6);for(var u=new Uint32Array(d.length-6),t=0,p=0,k=0;k<d.length;k++)k>=h&&k<h+6?b[t++]=d[k]:u[p++]=d[k];d=new Float32Array(a.vertexAttributes.uv);f*=8;h=[0,1,1,1,1,0,0,0];for(k=0;k<h.length;k++)d[f+k]=h[k];a.vertexAttributes.uv=d;a.components=[new c({faces:b,material:g.material}),new c({faces:u})]}return a};d.createSphere=function(a,b){return new e(v.convertUnitGeometry(v.createUnitSizeSphere(b&&b.densificationFactor||0),a,b))};d.createCylinder=function(a,b){return new e(v.convertUnitGeometry(v.createUnitSizeCylinder(b&&
b.densificationFactor||0),a,b))};d.createPlane=function(a,b){return new e(v.convertUnitGeometry(v.createUnitSizePlane(b&&b.facing||"up"),a,b))};d.createFromPolygon=function(a,b){var g=r.triangulate(a);return new e({vertexAttributes:{position:g.position},components:[{faces:g.faces,shading:"flat",material:b&&b.material||null}],spatialReference:a.spatialReference})};var e;h([a.property({dependsOn:["vertexAttributes","vertexAttributes.position","components"],json:{read:!1}})],d.prototype,"cache",void 0);
h([a.property({type:[c]})],d.prototype,"components",void 0);h([a.property({dependsOn:["cache"],readOnly:!0,json:{read:!1}})],d.prototype,"extent",null);h([a.property({readOnly:!0,json:{read:!1,write:!1}})],d.prototype,"hasZ",void 0);h([a.property({readOnly:!0,json:{read:!1,write:!1}})],d.prototype,"hasM",void 0);h([a.property({type:q.MeshVertexAttributes,nonNullable:!0,json:{write:!0}})],d.prototype,"vertexAttributes",void 0);h([l(0,a.cast(c))],d.prototype,"addComponent",null);return d=e=h([a.subclass("esri.geometry.Mesh")],
d)}(a.declared(d));b.prototype.toJSON.isDefaultToJSON=!0;var y={x:[1,0,0],y:[0,1,0],z:[0,0,1]},g=[0,0,0],u=[0,0,0,0],t=[0,0,0,0],A=[0,0,0,0];return b})},"esri/geometry/support/MeshComponent":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/lang ../../core/Logger ../../core/accessorSupport/decorators ./MeshMaterial ./MeshVertexAttributes".split(" "),function(b,e,n,h,l,m,k,a,f,d){var c=k.getLogger("esri.geometry.support.MeshComponent");
return function(b){function e(a){a=b.call(this)||this;a.faces=null;a.material=null;a.shading="source";return a}n(e,b);k=e;e.prototype.castFaces=function(a){return d.castArray(a,Uint32Array,[Uint16Array],{loggerTag:".faces\x3d",stride:3},c)};e.prototype.clone=function(){return new k({faces:m.clone(this.faces),shading:this.shading,material:m.clone(this.material)})};var k;h([a.property({json:{write:!0}})],e.prototype,"faces",void 0);h([a.cast("faces")],e.prototype,"castFaces",null);h([a.property({type:f.MeshMaterial,
json:{write:!0}})],e.prototype,"material",void 0);h([a.property({type:String,json:{write:!0}})],e.prototype,"shading",void 0);return e=k=h([a.subclass("esri.geometry.support.MeshComponent")],e)}(a.declared(l))})},"esri/geometry/support/MeshMaterial":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ./ImageMeshColor ./MeshColor ./ValueMeshColor".split(" "),
function(b,e,n,h,l,m,k,a,f,d,c,q){Object.defineProperty(e,"__esModule",{value:!0});var r={base:c.default,key:"type",defaultKeyValue:"value",typeMap:{value:q,image:d}};b=function(b){function c(a){a=b.call(this)||this;a.color=null;return a}n(c,b);e=c;c.prototype.castColor=function(a){return a?"string"===typeof a?x.test(a)||l.named[a]?new q({value:a}):new d({url:a}):Array.isArray(a)?new q({value:a}):a instanceof HTMLImageElement||a instanceof HTMLCanvasElement||a instanceof ImageData?new d({data:a}):
f.ensureOneOfType(r,a):a};c.prototype.readColor=function(a,b,g){if(a)switch(a.type){case "image":return new d(a);case "value":return new q(a)}};c.prototype.clone=function(){return new e({color:k.clone(this.color)})};var e;h([a.property({types:r,json:{write:!0}})],c.prototype,"color",void 0);h([a.cast("color")],c.prototype,"castColor",null);h([a.reader("color")],c.prototype,"readColor",null);return c=e=h([a.subclass("esri.geometry.support.MeshResources")],c)}(a.declared(m));e.MeshMaterial=b;var x=
/^\s*(#|rgba?\()/;e.default=b})},"esri/geometry/support/ImageMeshColor":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Identifiable ../../core/urlUtils ../../core/accessorSupport/decorators ./MeshColor ../../views/support/screenshotUtils".split(" "),function(b,e,n,h,l,m,k,a,f){return function(a){function b(b){b=a.call(this)||this;b.type="image";return b}n(b,a);d=b;Object.defineProperty(b.prototype,"url",{get:function(){return this._get("url")||
null},set:function(a){this._set("url",a);a&&this._set("data",null)},enumerable:!0,configurable:!0});b.prototype.writeUrl=function(a,b,c,d){b[c]=m.write(a,d)};Object.defineProperty(b.prototype,"data",{get:function(){return this._get("data")||null},set:function(a){this._set("data",a);a&&this._set("url",null)},enumerable:!0,configurable:!0});b.prototype.writeData=function(a,b,c,d){a instanceof HTMLImageElement?a={type:"image-element",src:m.write(a.src,d)}:a instanceof HTMLCanvasElement?(a=a.getContext("2d").getImageData(0,
0,a.width,a.height),a={type:"canvas-element",imageData:this.encodeImageData(a)}):a={type:"image-data",imageData:this.encodeImageData(a)};b[c]=a};b.prototype.readData=function(a,b){switch(a.type){case "image-element":return b=new Image,b.src=a.src,b;case "canvas-element":return a=this.decodeImageData(a.imageData),b=document.createElement("canvas"),b.width=a.width,b.height=a.height,b.getContext("2d").putImageData(a,0,0),b;case "image-data":return this.decodeImageData(a.imageData)}};Object.defineProperty(b.prototype,
"transparent",{get:function(){var a=this.data;return a instanceof HTMLCanvasElement?this.imageDataContainsTransparent(a.getContext("2d").getImageData(0,0,a.width,a.height)):a instanceof ImageData?this.imageDataContainsTransparent(a):!1},set:function(a){null!=a?this._override("transparent",a):this._clearOverride("transparent")},enumerable:!0,configurable:!0});b.prototype.clone=function(){return new d({url:this.url,data:this.data})};b.prototype.encodeImageData=function(a){for(var b="",c=0;c<a.data.length;c++)b+=
String.fromCharCode(a.data[c]);return{data:btoa(b),width:a.width,height:a.height}};b.prototype.decodeImageData=function(a){for(var b=atob(a.data),c=new Uint8ClampedArray(b.length),d=0;d<b.length;d++)c[d]=b.charCodeAt(d);return f.wrapImageData(c,a.width,a.height)};b.prototype.imageDataContainsTransparent=function(a){for(var b=3;b<a.data.length;b+=4)if(255!==a.data[b])return!0;return!1};var d;h([k.property()],b.prototype,"type",void 0);h([k.property({type:String,json:{write:!0}})],b.prototype,"url",
null);h([k.writer("url")],b.prototype,"writeUrl",null);h([k.property({json:{write:{overridePolicy:function(){return{enabled:!this.url}}}}}),k.property()],b.prototype,"data",null);h([k.writer("data")],b.prototype,"writeData",null);h([k.reader("data")],b.prototype,"readData",null);h([k.property({type:Boolean,dependsOn:["data"],json:{write:{overridePolicy:function(){return{enabled:this._isOverridden("transparent")}}}}})],b.prototype,"transparent",null);return b=d=h([k.subclass("esri.geometry.support.ImageMeshColor")],
b)}(k.declared(a.default,l))})},"esri/geometry/support/MeshColor":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(b,e,n,h,l,m){Object.defineProperty(e,"__esModule",{value:!0});b=function(b){function a(a){return b.call(this)||this}n(a,b);a.prototype.clone=function(){throw Error("not implemented");};h([m.property({readOnly:!0,json:{read:!1,write:{isRequired:!0,
ignoreOrigin:!0,enabled:!0}}})],a.prototype,"type",void 0);return a=h([m.subclass("esri.geometry.support.MeshColor")],a)}(m.declared(l));e.MeshColor=b;e.default=b})},"esri/views/support/screenshotUtils":function(){define(["require","exports","../../core/tsSupport/assignHelper"],function(b,e,n){function h(a,b){var d=a||{},f=d.format,e=d.quality,d=d.rotation,h=b.padding||r,g;g=b.width-h.left-h.right;b=b.height-h.top-h.bottom;var u=0,h=0,t=g,l=b;if(a&&a.area){var u=Math.floor(a.area.x)||0,h=Math.floor(a.area.y)||
0,m=null!=a.area.width?Math.floor(a.area.width):null,x=null!=a.area.height?Math.floor(a.area.height):null,t=t-u,l=l-h;null!=m&&null!=x?(t=Math.min(t,m),l=Math.min(l,x)):null==m&&null!=x?(m=Math.min(t,m),l*=m/t,t=m):null!=m&&null==x&&(m=Math.min(l,x),t*=m/l,l=m)}a&&null!=a.width&&null!=a.height&&(m=a.width/a.height,x=t/l,x!==m&&(x<m?t=Math.floor(l*m):l=Math.floor(t/m)));u=Math.floor(Math.max(u,0));h=Math.floor(Math.max(h,0));g={x:u,y:h,width:Math.floor(Math.min(t,g-u)),height:Math.floor(Math.min(l,
b-h))};b=g.width/g.height;h=t/l;h!==b&&(h>b?(b=Math.floor(g.width/h),g={x:g.x,y:Math.floor(g.y+(g.height-b)/2),width:g.width,height:b}):(b=Math.floor(g.height*h),g={x:Math.floor(g.x+(g.width-b)/2),y:g.y,width:b,height:g.height}));b=k(a,g);a=b.width;b=b.height;a:switch(f){case "png":case "jpg":case "jpeg":break a;default:f=c}h=q[f];e=null!=e?e:h;return{format:f,quality:0>e?0:100<e?100:e,area:g,width:a,height:b,rotation:d}}function l(a,b){return a.toDataURL(d[b.format],b.quality/100)}function m(b,c,
d){d||(a||(a=document.createElement("canvas"),a.width=1,a.height=1),d=a);return d.getContext("2d").createImageData(b,c)}function k(a,b){if(!a)return b;var c=a.width;a=a.height;if(null!=c&&null!=a)return{width:Math.floor(c),height:Math.floor(a)};if(null==c&&null==a)return b;b=b.width/b.height;return null==a?{width:Math.floor(c),height:Math.floor(c/b)}:{width:Math.floor(a*b),height:Math.floor(a)}}Object.defineProperty(e,"__esModule",{value:!0});e.completeUserSettings=h;e.toRenderSettings=function(a,
b){a=h(a,b);var c=a.area,d=a.width/c.width,f=b.padding,e=f.left+f.right,g=f.top+f.bottom;return{framebufferWidth:Math.floor((b.width-e)*d+e),framebufferHeight:Math.floor((b.height-g)*d+g),region:{x:Math.floor(c.x*d)+f.left,y:Math.floor(c.y*d)+f.top,width:a.width,height:a.height},format:a.format,quality:a.quality,rotation:a.rotation,pixelRatio:d}};e.encodeResult=function(a,b,c,d){if(d.premultipliedAlpha)for(var f=a.data,e=f.length,g=0;g<e;g+=4){var h=f[g+3];0<h&&(h/=255,f[g+0]/=h,f[g+1]/=h,f[g+2]/=
h)}c.width=a.width;c.height=a.height;f=c.getContext("2d");f.putImageData(a,0,0);d.flipY&&(f.save(),f.globalCompositeOperation="copy",f.scale(1,-1),f.translate(0,-f.canvas.height),f.drawImage(f.canvas,0,0),f.restore());a=f.getImageData(0,0,a.width,a.height);b=l(c,b);c.width=0;c.height=0;return{dataUrl:b,data:a}};e.toDataUrl=l;e.createEmptyImageData=function(a,b,c){if(!a||!b)throw Error("Cannot construct image data without dimensions");if(f)try{return new ImageData(a,b)}catch(w){f=!1}return m(a,b,c)};
e.wrapImageData=function(a,b,c,d){if(!b||!c)throw Error("Cannot construct image data without dimensions");if(f)try{return new ImageData(a,b,c)}catch(p){f=!1}b=m(b,c,d);b.data.set(a,0);return b};e.resampleHermite=function(a,b,c,d,f,e,g,h){void 0===d&&(d=0);void 0===f&&(f=0);void 0===e&&(e=a.width-d);void 0===g&&(g=a.height-f);void 0===h&&(h=!1);var u=a.data,p=b.width,k=b.height,q=b.data;e/=p;g/=k;var l=Math.ceil(e/2),y=Math.ceil(g/2);a=a.width;for(var m=0;m<k;m++)for(var r=0;r<p;r++){for(var x=4*(r+
(h?k-m-1:m)*p),z=0,v=0,n=0,w=0,X=0,O=0,L=(m+.5)*g,Q=Math.floor(m*g);Q<(m+1)*g;Q++)for(var G=Math.abs(L-(Q+.5))/y,V=(r+.5)*e,G=G*G,U=Math.floor(r*e);U<(r+1)*e;U++){var Y=Math.abs(V-(U+.5))/l,Y=Math.sqrt(G+Y*Y);if(!(1<=Y)){var Y=2*Y*Y*Y-3*Y*Y+1,N=4*(d+U+(f+Q)*a),O=O+Y*u[N+3],v=v+Y;!c&&255>u[N+3]&&(Y=Y*u[N+3]/255);n+=Y*u[N];w+=Y*u[N+1];X+=Y*u[N+2];z+=Y}}q[x]=n/z;q[x+1]=w/z;q[x+2]=X/z;q[x+3]=O/v}return b};var a=null,f=!0,d={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},c="jpg",q={png:100,jpg:98,
jpeg:98},r={top:0,right:0,bottom:0,left:0}})},"esri/geometry/support/ValueMeshColor":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/lang ../../core/accessorSupport/decorators ./MeshColor".split(" "),function(b,e,n,h,l,m,k,a){return function(a){function b(b){b=a.call(this)||this;b.type="value";b.value=null;return b}n(b,a);c=b;b.prototype.clone=function(){return new c({value:m.clone(this.value)})};var c;h([k.property()],
b.prototype,"type",void 0);h([k.property({type:l})],b.prototype,"value",void 0);return b=c=h([k.subclass("esri.geometry.support.ValueMeshColor")],b)}(k.declared(a.default))})},"esri/geometry/support/MeshVertexAttributes":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/lang ../../core/Logger ../../core/accessorSupport/decorators".split(" "),function(b,e,n,h,l,m,k,a){function f(a,b,c,d){var f=b.loggerTag;
b=b.stride;return 0!==a.length%b?(d.error(f,"Invalid array length, expected a multiple of "+b),new c([])):a}function d(a,b,c,d,e){if(!a)return a;if(a instanceof b)return f(a,d,b,e);for(var h=0;h<c.length;h++)if(a instanceof c[h])return f(new b(a),d,b,e);if(Array.isArray(a))return f(new b(a),d,b,e);c=c.map(function(a){return"'"+a.name+"'"});e.error("Failed to set property, expected one of "+c+", but got "+a.constructor.name);return new b([])}function c(a,b,c){for(var d=Array(a.length),f=0;f<a.length;f++)d[f]=
a[f];b[c]=d}Object.defineProperty(e,"__esModule",{value:!0});var q=k.getLogger("esri.geometry.support.MeshVertexAttributes");b=function(b){function f(a){a=b.call(this)||this;a.color=null;a.position=new Float64Array(0);a.uv=null;a.normal=null;return a}n(f,b);e=f;f.prototype.castColor=function(a){return d(a,Uint8Array,[Uint8ClampedArray],{loggerTag:".color\x3d",stride:4},q)};f.prototype.castPosition=function(a){a&&a instanceof Float32Array&&q.warn(".position\x3d","Setting position attribute from a Float32Array may cause precision problems. Consider storing data in a Float64Array or a regular number array");
return d(a,Float64Array,[Float32Array],{loggerTag:".position\x3d",stride:3},q)};f.prototype.castUv=function(a){return d(a,Float32Array,[Float64Array],{loggerTag:".uv\x3d",stride:2},q)};f.prototype.castNormal=function(a){return d(a,Float32Array,[Float64Array],{loggerTag:".normal\x3d",stride:3},q)};f.prototype.clone=function(){return new e({position:m.clone(this.position),uv:m.clone(this.uv),normal:m.clone(this.normal)})};var e;h([a.property({json:{write:c}})],f.prototype,"color",void 0);h([a.cast("color")],
f.prototype,"castColor",null);h([a.property({nonNullable:!0,json:{write:c}})],f.prototype,"position",void 0);h([a.cast("position")],f.prototype,"castPosition",null);h([a.property({json:{write:c}})],f.prototype,"uv",void 0);h([a.cast("uv")],f.prototype,"castUv",null);h([a.property({json:{write:c}})],f.prototype,"normal",void 0);h([a.cast("normal")],f.prototype,"castNormal",null);return f=e=h([a.subclass("esri.geometry.support.MeshVertexAttributes")],f)}(a.declared(l));e.MeshVertexAttributes=b;e.castArray=
d;e.default=b})},"esri/geometry/support/triangulationUtils":function(){define(["require","exports","../../core/libs/earcut/earcut","./coordsUtils"],function(b,e,n,h){function l(a,b,d){if(1===a.length)return a[0];b=new Float64Array(b);d=new Uint32Array(d);for(var c=0,f=0,e=0;e<a.length;e++){for(var h=a[e],k=0;k<h.position.length;k++)b[c++]=h.position[k];for(k=0;k<h.faces.length;k++)d[f++]=h.faces[k]}return{position:b,faces:d}}function m(a,b){for(var d=a.length,c=Array(d),f=Array(d),e=Array(d),l=0,
m=0,v=0,n=0,p=0;p<d;++p)n+=a[p].length;for(var n=new Float64Array(3*n),y=0,g=d-1;0<=g;g--){var u=a[g];if(h.isClockwise(u,!1,!1)||1===d){for(var t=u.length,p=0;p<l;++p)t+=c[p].length;p={index:y,pathLengths:Array(l+1),count:t,holeIndices:Array(l)};p.pathLengths[0]=u.length;0<u.length&&(e[v++]={index:y,count:u.length});y=k(u,0,n,y,u.length,b);for(u=0;u<l;++u)t=c[u],p.holeIndices[u]=y,p.pathLengths[u+1]=t.length,0<t.length&&(e[v++]={index:y,count:t.length}),y=k(t,0,n,y,t.length,b);l=0;0<p.count&&(f[m++]=
p)}else c[l++]=u}for(u=0;u<l;++u)t=c[u],0<t.length&&(e[v++]={index:y,count:t.length}),y=k(t,0,n,y,t.length,b);m<d&&(f.length=m);v<d&&(e.length=v);return{position:n,polygons:f,outlines:e}}function k(a,b,d,c,e,h){c*=3;for(var f=0;f<e;++f){var k=a[b++];d[c++]=k[0];d[c++]=k[1];d[c++]=h?k[2]:0}return c/3}Object.defineProperty(e,"__esModule",{value:!0});e.triangulate=function(a){var b=m(a.rings,a.hasZ),d=[],c=0,e=0;a=function(a){var f=a.index,h=new Float64Array(b.position.buffer,3*f*b.position.BYTES_PER_ELEMENT,
3*a.count);a=a.holeIndices.map(function(a){return a-f});a=new Uint32Array(n(h,a,3));d.push({position:h,faces:a});c+=h.length;e+=a.length};for(var h=0,k=b.polygons;h<k.length;h++)a(k[h]);return l(d,c,e)};e.pathsToTriangulationInfo=m})},"esri/core/libs/earcut/earcut":function(){define([],function(){function b(a,b,c){c=c||2;g=a.length/c+(b?2*b.length:0);u=!1;var d=b&&b.length,t=d?b[0]*c:a.length,p=e(a,0,t,c,!0),q=[];if(!p)return q;var l,y,r,A;if(d)a:{var x=c,d=[],v,w,C;A=0;for(v=b.length;A<v;A++)w=b[A]*
x,C=A<v-1?b[A+1]*x:a.length,w=e(a,w,C,x,!1),w===w.next&&(w.steiner=!0),d.push(f(w));d.sort(m);for(A=0;A<d.length;A++){if(!p){p=null;break a}b=d[A];x=p;if(x=k(b,x))b=z(x,b),n(b,b.next);p=n(p,p.next)}}if(u)return q;if(a.length>80*c){l=r=a[0];y=d=a[1];for(x=c;x<t;x+=c)A=a[x],b=a[x+1],A<l&&(l=A),b<y&&(y=b),A>r&&(r=A),b>d&&(d=b);r=Math.max(r-l,d-y)}h(p,q,c,l,y,r);return q}function e(a,b,g,c,d){var f;if(d===0<y(a,b,g,c))for(d=b;d<g;d+=c)f=v(d,a[d],a[d+1],f);else for(d=g-c;d>=b;d-=c)f=v(d,a[d],a[d+1],f);
f&&q(f,f.next)&&(w(f),f=f.next);return f}function n(a,b){if(!a)return a;b||(b=a);var d,f=0,e=g*g/2;do{d=!1;if(a.steiner||!q(a,a.next)&&0!==c(a.prev,a,a.next))a=a.next;else{w(a);a=b=a.prev;if(a===a.next)return null;d=!0}if(f++>e)return u=!0,null}while(d||a!==b);return b}function h(b,g,f,e,p,k,y){if(b){if(!y&&k){var t=b,m=t;do null===m.z&&(m.z=a(m.x,m.y,e,p,k)),m.prevZ=m.prev,m=m.nextZ=m.next;while(m!==t);m.prevZ.nextZ=null;m.prevZ=null;var t=m,A,v,B,C,F,D,H=1;do{m=t;B=t=null;for(C=0;m;){C++;v=m;for(A=
F=0;A<H&&(F++,v=v.nextZ,v);A++);for(D=H;0<F||0<D&&v;)0===F?(A=v,v=v.nextZ,D--):0!==D&&v?m.z<=v.z?(A=m,m=m.nextZ,F--):(A=v,v=v.nextZ,D--):(A=m,m=m.nextZ,F--),B?B.nextZ=A:t=A,A.prevZ=B,B=A;m=v}B.nextZ=null;H*=2}while(1<C)}for(t=b;b.prev!==b.next;){m=b.prev;v=b.next;if(k)a:{B=b;D=e;var Q=p,G=k;C=B.prev;F=B;H=B.next;if(0<=c(C,F,H))B=!1;else{var V=C.x>F.x?C.x>H.x?C.x:H.x:F.x>H.x?F.x:H.x,U=C.y>F.y?C.y>H.y?C.y:H.y:F.y>H.y?F.y:H.y;A=a(C.x<F.x?C.x<H.x?C.x:H.x:F.x<H.x?F.x:H.x,C.y<F.y?C.y<H.y?C.y:H.y:F.y<H.y?
F.y:H.y,D,Q,G);D=a(V,U,D,Q,G);for(Q=B.nextZ;Q&&Q.z<=D;){if(Q!==B.prev&&Q!==B.next&&d(C.x,C.y,F.x,F.y,H.x,H.y,Q.x,Q.y)&&0<=c(Q.prev,Q,Q.next)){B=!1;break a}Q=Q.nextZ}for(Q=B.prevZ;Q&&Q.z>=A;){if(Q!==B.prev&&Q!==B.next&&d(C.x,C.y,F.x,F.y,H.x,H.y,Q.x,Q.y)&&0<=c(Q.prev,Q,Q.next)){B=!1;break a}Q=Q.prevZ}B=!0}}else B=l(b);if(B)g.push(m.i/f),g.push(b.i/f),g.push(v.i/f),w(b),t=b=v.next;else{if(u)break;b=v;if(b===t){if(!y)h(n(b),g,f,e,p,k,1);else if(1===y){y=g;t=f;m=b;do v=m.prev,B=m.next.next,!q(v,B)&&r(v,
m,m.next,B)&&x(v,B)&&x(B,v)&&(y.push(v.i/t),y.push(m.i/t),y.push(B.i/t),w(m),w(m.next),m=b=B),m=m.next;while(m!==b);b=m;h(b,g,f,e,p,k,2)}else if(2===y)a:{y=b;do{for(t=y.next.next;t!==y.prev;){if(m=y.i!==t.i){m=y;v=t;B=void 0;if(B=m.next.i!==v.i&&m.prev.i!==v.i){B=void 0;b:{B=m;do{if(B.i!==m.i&&B.next.i!==m.i&&B.i!==v.i&&B.next.i!==v.i&&r(B,B.next,m,v)){B=!0;break b}B=B.next}while(B!==m);B=!1}B=!B}C=void 0;if(C=B&&x(m,v)&&x(v,m)){B=m;C=!1;F=(m.x+v.x)/2;v=(m.y+v.y)/2;do B.y>v!==B.next.y>v&&F<(B.next.x-
B.x)*(v-B.y)/(B.next.y-B.y)+B.x&&(C=!C),B=B.next;while(B!==m)}m=C}if(m){b=z(y,t);y=n(y,y.next);b=n(b,b.next);h(y,g,f,e,p,k);h(b,g,f,e,p,k);break a}t=t.next}y=y.next}while(y!==b)}break}}}}}function l(a){var b=a.prev,f=a.next;if(0<=c(b,a,f))return!1;for(var e=a.next.next,h=0;e!==a.prev;){if(d(b.x,b.y,a.x,a.y,f.x,f.y,e.x,e.y)&&0<=c(e.prev,e,e.next))return!1;e=e.next;if(h++>g)return u=!0,!1}return!0}function m(a,b){return a.x-b.x}function k(a,b){var g=b,c=a.x,f=a.y,e=-Infinity,h;do{if(!g)return null;
if(f<=g.y&&f>=g.next.y){var u=g.x+(f-g.y)*(g.next.x-g.x)/(g.next.y-g.y);if(u<=c&&u>e){e=u;if(u===c){if(f===g.y)return g;if(f===g.next.y)return g.next}h=g.x<g.next.x?g:g.next}}g=g.next}while(g!==b);if(!h)return null;if(c===e)return h.prev;b=h;for(var u=h.x,t=h.y,p=Infinity,k,g=h.next;g!==b;)c>=g.x&&g.x>=u&&d(f<t?c:e,f,u,t,f<t?e:c,f,g.x,g.y)&&(k=Math.abs(f-g.y)/(c-g.x),(k<p||k===p&&g.x>h.x)&&x(g,a)&&(h=g,p=k)),g=g.next;return h}function a(a,b,g,c,d){a=32767*(a-g)/d;b=32767*(b-c)/d;a=(a|a<<8)&16711935;
a=(a|a<<4)&252645135;a=(a|a<<2)&858993459;b=(b|b<<8)&16711935;b=(b|b<<4)&252645135;b=(b|b<<2)&858993459;return(a|a<<1)&1431655765|((b|b<<1)&1431655765)<<1}function f(a){var b=a,g=a;do b.x<g.x&&(g=b),b=b.next;while(b!==a);return g}function d(a,b,g,c,d,f,e,h){return 0<=(d-e)*(b-h)-(a-e)*(f-h)&&0<=(a-e)*(c-h)-(g-e)*(b-h)&&0<=(g-e)*(f-h)-(d-e)*(c-h)}function c(a,b,g){return(b.y-a.y)*(g.x-b.x)-(b.x-a.x)*(g.y-b.y)}function q(a,b){return a.x===b.x&&a.y===b.y}function r(a,b,g,d){return q(a,b)&&q(g,d)||q(a,
d)&&q(g,b)?!0:0<c(a,b,g)!==0<c(a,b,d)&&0<c(g,d,a)!==0<c(g,d,b)}function x(a,b){return 0>c(a.prev,a,a.next)?0<=c(a,b,a.next)&&0<=c(a,a.prev,b):0>c(a,b,a.prev)||0>c(a,a.next,b)}function z(a,b){var g=new p(a.i,a.x,a.y),c=new p(b.i,b.x,b.y),d=a.next,f=b.prev;a.next=b;b.prev=a;g.next=d;d.prev=g;c.next=g;g.prev=c;f.next=c;c.prev=f;return c}function v(a,b,g,c){a=new p(a,b,g);c?(a.next=c.next,a.prev=c,c.next.prev=a,c.next=a):(a.prev=a,a.next=a);return a}function w(a){a.next.prev=a.prev;a.prev.next=a.next;
a.prevZ&&(a.prevZ.nextZ=a.nextZ);a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function p(a,b,g){this.i=a;this.x=b;this.y=g;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function y(a,b,g,c){for(var d=0,f=g-c;b<g;b+=c)d+=(a[f]-a[b])*(a[b+1]+a[f+1]),f=b;return d}var g,u;b.deviation=function(a,b,g,c){var d=b&&b.length,f=Math.abs(y(a,0,d?b[0]*g:a.length,g));if(d)for(var d=0,e=b.length;d<e;d++)f-=Math.abs(y(a,b[d]*g,d<e-1?b[d+1]*g:a.length,g));for(d=b=0;d<c.length;d+=3){var e=c[d]*g,h=c[d+1]*
g,u=c[d+2]*g;b+=Math.abs((a[e]-a[u])*(a[h+1]-a[e+1])-(a[e]-a[h])*(a[u+1]-a[e+1]))}return 0===f&&0===b?0:Math.abs((b-f)/f)};b.flatten=function(a){for(var b=a[0][0].length,g={vertices:[],holes:[],dimensions:b},c=0,d=0;d<a.length;d++){for(var f=0;f<a[d].length;f++)for(var e=0;e<b;e++)g.vertices.push(a[d][f][e]);0<d&&(c+=a[d-1].length,g.holes.push(c))}return g};return b})},"esri/geometry/support/coordsUtils":function(){define(["require","exports"],function(b,e){function n(b,e){var h=e[0]-b[0],a=e[1]-
b[1];return 2<b.length&&2<e.length?(b=b[2]-e[2],Math.sqrt(h*h+a*a+b*b)):Math.sqrt(h*h+a*a)}function h(b,e,h){var a=b[0]+h*(e[0]-b[0]),f=b[1]+h*(e[1]-b[1]);return 2<b.length&&2<e.length?[a,f,b[2]+h*(e[2]-b[2])]:[a,f]}Object.defineProperty(e,"__esModule",{value:!0});e.geometryToCoordinates=function(b){if(!b)return null;if(Array.isArray(b))return b;var e=b.hasZ,h=b.hasM;if("point"===b.type)return h&&e?[b.x,b.y,b.z,b.m]:e?[b.x,b.y,b.z]:h?[b.x,b.y,b.m]:[b.x,b.y];if("polygon"===b.type)return b.rings.slice(0);
if("polyline"===b.type)return b.paths.slice(0);if("multipoint"===b.type)return b.points.slice(0);if("extent"===b.type){b=b.clone().normalize();if(!b)return null;var a=!1,f=!1;b.forEach(function(b){b.hasZ&&(a=!0);b.hasM&&(f=!0)});return b.map(function(b){var c=[[b.xmin,b.ymin],[b.xmin,b.ymax],[b.xmax,b.ymax],[b.xmax,b.ymin],[b.xmin,b.ymin]];if(a&&b.hasZ)for(var d=.5*(b.zmax-b.zmin),e=0;e<c.length;e++)c[e].push(d);if(f&&b.hasM)for(b=.5*(b.mmax-b.mmin),e=0;e<c.length;e++)c[e].push(b);return c})}return null};
e.getLength=n;e.getMidpoint=function(b,e){return h(b,e,.5)};e.getPathLength=function(b){for(var e=b.length,h=0,a=0;a<e-1;++a)h+=n(b[a],b[a+1]);return h};e.getPointOnPath=function(b,e){if(0>=e)return b[0];for(var k=b.length,a=0,f=0;f<k-1;++f){var d=n(b[f],b[f+1]);if(e-a<d)return h(b[f],b[f+1],(e-a)/d);a+=d}return b[k-1]};e.isClockwise=function(b,e,h){for(var a=b.length,f=0,d=0,c=0,k=0;k<a;k++){var l=b[k],m=b[(k+1)%a],z=2,f=f+(l[0]*m[1]-m[0]*l[1]);2<l.length&&2<m.length&&h&&(d+=l[0]*m[2]-m[0]*l[2],
z=3);l.length>z&&m.length>z&&e&&(c+=l[0]*m[z]-m[0]*l[z])}return 0>=f&&0>=d&&0>=c}})},"esri/geometry/support/meshUtils/centerAt":function(){define("require exports ../../../core/Logger ./projection ../../../views/3d/lib/gl-matrix ../../../views/3d/support/projectionUtils".split(" "),function(b,e,n,h,l,m){Object.defineProperty(e,"__esModule",{value:!0});var k=n.getLogger("esri.geometry.support.meshUtils.centerAt");e.centerAt=function(b,e,x){if(b.vertexAttributes&&b.vertexAttributes.position){var q=
b.spatialReference,r=x&&x.origin||b.extent.center;if(q.isWGS84||q.isWebMercator&&(!x||!1!==x.geographic)){x=b.spatialReference;var q=f,n=a;if(m.pointToVector(e,n,m.SphericalECEFSpatialReference)){m.pointToVector(r,q,m.SphericalECEFSpatialReference)||m.pointToVector(b.extent.center,q,m.SphericalECEFSpatialReference);r=b.vertexAttributes.position;e=b.vertexAttributes.normal;var p=new Float64Array(r.length),y=new Float32Array(e?e.length:0);h.projectToECEF(r,x,p);e&&h.projectNormalToECEF(e,r,p,x,y);m.computeLinearTransformation(m.SphericalECEFSpatialReference,
q,d,m.SphericalECEFSpatialReference);m.computeLinearTransformation(m.SphericalECEFSpatialReference,n,c,m.SphericalECEFSpatialReference);l.mat4d.inverse(d);l.mat4d.multiply(c,d,c);h.transformBufferInPlace(p,c);l.mat4d.inverse(c);l.mat4d.transpose(c);e&&h.transformBufferInPlace(y,c,!0);h.projectFromECEF(p,r,x);e&&h.projectNormalFromECEF(y,r,p,x,e);b.clearCache()}else k.error("Failed to project centerAt location (wkid:"+e.spatialReference.wkid+") to ECEF")}else if(x=f,q=a,m.pointToVector(e,q,b.spatialReference)){m.pointToVector(r,
x,b.spatialReference)||(e=b.extent.center,x[0]=e.x,x[1]=e.y,x[2]=e.z,k.error("Failed to project specified origin (wkid:"+r.spatialReference.wkid+") to mesh spatial reference (wkid:"+b.spatialReference.wkid+"). Using mesh extent.center instead"));if(r=b.vertexAttributes.position)for(e=0;e<r.length;e+=3)for(n=0;3>n;n++)r[e+n]+=q[n]-x[n];b.clearCache()}else k.error("Failed to project centerAt location (wkid:"+e.spatialReference.wkid+") to mesh spatial reference (wkid:"+b.spatialReference.wkid+")")}};
var a=l.vec3d.create(),f=l.vec3d.create(),d=l.mat4d.create(),c=l.mat4d.create()})},"esri/geometry/support/meshUtils/projection":function(){define(["require","exports","../../../core/Logger","../../../views/3d/lib/gl-matrix","../../../views/3d/support/projectionUtils"],function(b,e,n,h,l){function m(b,e,k,m,v,n){if(e){v=v.isWGS84;for(var p=0;p<e.length;p+=3){for(var q=0;3>q;q++)a[q]=m[p+q],f[q]=e[p+q];l.computeLinearTransformation(l.SphericalECEFSpatialReference,a,d,l.SphericalECEFSpatialReference);
h.mat4d.toMat3(d,c);v?h.mat3d.multiplyVec3(c,f):(q=l.webMercator.y2lat(k[p+1]),q=Math.cos(q),0===b&&(q=1/q),c[0]*=q,c[1]*=q,c[2]*=q,c[3]*=q,c[4]*=q,c[5]*=q,1===b&&h.mat3d.transpose(c),h.mat3d.multiplyVec3(c,f),h.vec3d.normalize(f));for(q=0;3>q;q++)n[p+q]=f[q]}return n}}Object.defineProperty(e,"__esModule",{value:!0});var k=n.getLogger("esri.geometry.support.meshUtils.normalProjection");e.projectNormalToECEF=function(a,b,c,d,f){return d.isWebMercator||d.isWGS84?m(0,a,b,c,d,f):(k.error("Cannot convert PCS spatial reference buffer to ECEF"),
f)};e.projectNormalFromECEF=function(a,b,c,d,f){return d.isWebMercator||d.isWGS84?m(1,a,b,c,d,f):(k.error("Cannot convert to PCS spatial reference buffer from ECEF"),f)};e.projectToECEF=function(a,b,c){l.bufferToBuffer(a,b,0,c,l.SphericalECEFSpatialReference,0,a.length/3);return c};e.projectFromECEF=function(a,b,c){l.bufferToBuffer(a,l.SphericalECEFSpatialReference,0,b,c,0,a.length/3);return b};e.transformBufferInPlace=function(b,c,d){void 0===d&&(d=!1);if(b)for(var f=0;f<b.length;f+=3){for(var e=
0;3>e;e++)a[e]=b[f+e];h.mat4d.multiplyVec3(c,a);d&&h.vec3d.normalize(a);for(e=0;3>e;e++)b[f+e]=a[e]}};var a=h.vec3d.create(),f=h.vec3d.create(),d=h.mat4d.create(),c=h.mat3d.create()})},"esri/views/3d/lib/gl-matrix":function(){define([],function(){var b={};(function(b,n){n(b,!0);n(b,!1)})(b,function(b,n){var e={};(function(){if("undefined"!=typeof Float32Array){var a=new Float32Array(1),b=new Int32Array(a.buffer);e.invsqrt=function(g){a[0]=g;b[0]=1597463007-(b[0]>>1);var c=a[0];return c*(1.5-.5*g*
c*c)}}else e.invsqrt=function(a){return 1/Math.sqrt(a)}})();var l=Array;"undefined"!=typeof Float32Array&&(l=n?Float32Array:Array);var m={create:function(a){var b=new l(3);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2]):b[0]=b[1]=b[2]=0;return b},createFrom:function(a,b,c){var g=new l(3);g[0]=a;g[1]=b;g[2]=c;return g},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];return b},set3:function(a,b,c,d){d[0]=a;d[1]=b;d[2]=c;return d},equal:function(a,b){return a===b||1E-6>Math.abs(a[0]-b[0])&&1E-6>Math.abs(a[1]-b[1])&&
1E-6>Math.abs(a[2]-b[2])},max:function(a,b,c){c[0]=Math.max(a[0],b[0]);c[1]=Math.max(a[1],b[1]);c[2]=Math.max(a[2],b[2]);return c},min:function(a,b,c){c[0]=Math.min(a[0],b[0]);c[1]=Math.min(a[1],b[1]);c[2]=Math.min(a[2],b[2]);return c},add:function(a,b,c){if(!c||a===c)return a[0]+=b[0],a[1]+=b[1],a[2]+=b[2],a;c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];return c},subtract:function(a,b,c){if(!c||a===c)return a[0]-=b[0],a[1]-=b[1],a[2]-=b[2],a;c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];return c},
multiply:function(a,b,c){if(!c||a===c)return a[0]*=b[0],a[1]*=b[1],a[2]*=b[2],a;c[0]=a[0]*b[0];c[1]=a[1]*b[1];c[2]=a[2]*b[2];return c},negate:function(a,b){b||(b=a);b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];return b},scale:function(a,b,c){if(!c||a===c)return a[0]*=b,a[1]*=b,a[2]*=b,a;c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;return c},normalize:function(a,b){b||(b=a);var g=a[0],c=a[1];a=a[2];var d=Math.sqrt(g*g+c*c+a*a);if(!d)return b[0]=0,b[1]=0,b[2]=0,b;if(1===d)return b[0]=g,b[1]=c,b[2]=a,b;d=1/d;b[0]=g*d;b[1]=
c*d;b[2]=a*d;return b},cross:function(a,b,c){c||(c=a);var g=a[0],d=a[1];a=a[2];var f=b[0],e=b[1];b=b[2];c[0]=d*b-a*e;c[1]=a*f-g*b;c[2]=g*e-d*f;return c},length:function(a){var b=a[0],g=a[1];a=a[2];return Math.sqrt(b*b+g*g+a*a)},length2:function(a){var b=a[0],g=a[1];a=a[2];return b*b+g*g+a*a},dot:function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]},direction:function(a,b,c){c||(c=a);var g=a[0]-b[0],d=a[1]-b[1];a=a[2]-b[2];b=Math.sqrt(g*g+d*d+a*a);if(!b)return c[0]=0,c[1]=0,c[2]=0,c;b=1/b;c[0]=g*b;c[1]=
d*b;c[2]=a*b;return c},lerp:function(a,b,c,d){d||(d=a);d[0]=a[0]+c*(b[0]-a[0]);d[1]=a[1]+c*(b[1]-a[1]);d[2]=a[2]+c*(b[2]-a[2]);return d},dist:function(a,b){var g=b[0]-a[0],c=b[1]-a[1];a=b[2]-a[2];return Math.sqrt(g*g+c*c+a*a)},dist2:function(a,b){var g=b[0]-a[0],c=b[1]-a[1];a=b[2]-a[2];return g*g+c*c+a*a}},k=null,a=new l(4);m.unproject=function(b,c,d,f,e){e||(e=b);k||(k=v.create());var g=k;a[0]=2*(b[0]-f[0])/f[2]-1;a[1]=2*(b[1]-f[1])/f[3]-1;a[2]=2*b[2]-1;a[3]=1;v.multiply(d,c,g);if(!v.inverse(g))return null;
v.multiplyVec4(g,a);if(0===a[3])return null;e[0]=a[0]/a[3];e[1]=a[1]/a[3];e[2]=a[2]/a[3];return e};var f=m.createFrom(1,0,0),d=m.createFrom(0,1,0),c=m.createFrom(0,0,1),q=m.create();m.rotationTo=function(a,b,e){e||(e=w.create());var g=m.dot(a,b);if(1<=g)w.set(p,e);else if(-.999999>g)m.cross(f,a,q),1E-6>m.length(q)&&m.cross(d,a,q),1E-6>m.length(q)&&m.cross(c,a,q),m.normalize(q),w.fromAngleAxis(Math.PI,q,e);else{var g=Math.sqrt(2*(1+g)),h=1/g;m.cross(a,b,q);e[0]=q[0]*h;e[1]=q[1]*h;e[2]=q[2]*h;e[3]=
.5*g;w.normalize(e)}1<e[3]?e[3]=1:-1>e[3]&&(e[3]=-1);return e};var r=m.create(),x=m.create();m.project=function(a,b,c,d){d||(d=a);m.direction(b,c,r);m.subtract(a,b,x);a=m.dot(r,x);m.scale(r,a,d);m.add(d,b,d)};m.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+"]"};var z={create:function(a){var b=new l(9);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8]):b[0]=b[1]=b[2]=b[3]=b[4]=b[5]=b[6]=b[7]=b[8]=0;return b},createFrom:function(a,b,c,d,f,e,h,p,k){var g=
new l(9);g[0]=a;g[1]=b;g[2]=c;g[3]=d;g[4]=f;g[5]=e;g[6]=h;g[7]=p;g[8]=k;return g},add:function(a,b,c){c||(c=a);c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];c[3]=a[3]+b[3];c[4]=a[4]+b[4];c[5]=a[5]+b[5];c[6]=a[6]+b[6];c[7]=a[7]+b[7];c[8]=a[8]+b[8];return c},subtract:function(a,b,c){c||(c=a);c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];c[3]=a[3]-b[3];c[4]=a[4]-b[4];c[5]=a[5]-b[5];c[6]=a[6]-b[6];c[7]=a[7]-b[7];c[8]=a[8]-b[8];return c},determinant:function(a){var b=a[3],g=a[4],c=a[5],d=a[6],f=a[7],e=a[8];
return a[0]*(e*g-c*f)+a[1]*(-e*b+c*d)+a[2]*(f*b-g*d)},inverse:function(a,b){var g=a[0],c=a[1],d=a[2],f=a[3],e=a[4],h=a[5],u=a[6],p=a[7];a=a[8];var k=a*e-h*p,q=-a*f+h*u,l=p*f-e*u,m=g*k+c*q+d*l;if(!m)return null;m=1/m;b||(b=z.create());b[0]=k*m;b[1]=(-a*c+d*p)*m;b[2]=(h*c-d*e)*m;b[3]=q*m;b[4]=(a*g-d*u)*m;b[5]=(-h*g+d*f)*m;b[6]=l*m;b[7]=(-p*g+c*u)*m;b[8]=(e*g-c*f)*m;return b},multiply:function(a,b,c){c||(c=a);var g=a[0],d=a[1],f=a[2],e=a[3],h=a[4],u=a[5],p=a[6],t=a[7];a=a[8];var k=b[0],q=b[1],l=b[2],
m=b[3],y=b[4],r=b[5],x=b[6],z=b[7];b=b[8];c[0]=k*g+q*e+l*p;c[1]=k*d+q*h+l*t;c[2]=k*f+q*u+l*a;c[3]=m*g+y*e+r*p;c[4]=m*d+y*h+r*t;c[5]=m*f+y*u+r*a;c[6]=x*g+z*e+b*p;c[7]=x*d+z*h+b*t;c[8]=x*f+z*u+b*a;return c},multiplyVec2:function(a,b,c){c||(c=b);var g=b[0];b=b[1];c[0]=g*a[0]+b*a[3]+a[6];c[1]=g*a[1]+b*a[4]+a[7];return c},multiplyVec3:function(a,b,c){c||(c=b);var g=b[0],d=b[1];b=b[2];c[0]=g*a[0]+d*a[3]+b*a[6];c[1]=g*a[1]+d*a[4]+b*a[7];c[2]=g*a[2]+d*a[5]+b*a[8];return c},set:function(a,b){b[0]=a[0];b[1]=
a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return b},equal:function(a,b){return a===b||1E-6>Math.abs(a[0]-b[0])&&1E-6>Math.abs(a[1]-b[1])&&1E-6>Math.abs(a[2]-b[2])&&1E-6>Math.abs(a[3]-b[3])&&1E-6>Math.abs(a[4]-b[4])&&1E-6>Math.abs(a[5]-b[5])&&1E-6>Math.abs(a[6]-b[6])&&1E-6>Math.abs(a[7]-b[7])&&1E-6>Math.abs(a[8]-b[8])},identity:function(a){a||(a=z.create());a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a},transpose:function(a,b){if(!b||a===b){b=
a[1];var g=a[2],c=a[5];a[1]=a[3];a[2]=a[6];a[3]=b;a[5]=a[7];a[6]=g;a[7]=c;return a}b[0]=a[0];b[1]=a[3];b[2]=a[6];b[3]=a[1];b[4]=a[4];b[5]=a[7];b[6]=a[2];b[7]=a[5];b[8]=a[8];return b},toMat4:function(a,b){b||(b=v.create());b[15]=1;b[14]=0;b[13]=0;b[12]=0;b[11]=0;b[10]=a[8];b[9]=a[7];b[8]=a[6];b[7]=0;b[6]=a[5];b[5]=a[4];b[4]=a[3];b[3]=0;b[2]=a[2];b[1]=a[1];b[0]=a[0];return b},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+"]"}},v={create:function(a){var b=
new l(16);4===arguments.length?(b[0]=arguments[0],b[1]=arguments[1],b[2]=arguments[2],b[3]=arguments[3],b[4]=arguments[4],b[5]=arguments[5],b[6]=arguments[6],b[7]=arguments[7],b[8]=arguments[8],b[9]=arguments[9],b[10]=arguments[10],b[11]=arguments[11],b[12]=arguments[12],b[13]=arguments[13],b[14]=arguments[14],b[15]=arguments[15]):a&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=
a[15]);return b},createFrom:function(a,b,c,d,f,e,h,p,k,q,m,y,r,x,z,v){var g=new l(16);g[0]=a;g[1]=b;g[2]=c;g[3]=d;g[4]=f;g[5]=e;g[6]=h;g[7]=p;g[8]=k;g[9]=q;g[10]=m;g[11]=y;g[12]=r;g[13]=x;g[14]=z;g[15]=v;return g},createFromMatrixRowMajor:function(a){var b=new l(16);b[0]=a[0];b[4]=a[1];b[8]=a[2];b[12]=a[3];b[1]=a[4];b[5]=a[5];b[9]=a[6];b[13]=a[7];b[2]=a[8];b[6]=a[9];b[10]=a[10];b[14]=a[11];b[3]=a[12];b[7]=a[13];b[11]=a[14];b[15]=a[15];return b},createFromMatrix:function(a){var b=new l(16);b[0]=a[0];
b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b},setRowMajor:function(a,b){b[0]=a[0];b[4]=a[1];b[8]=a[2];b[12]=a[3];b[1]=a[4];b[5]=a[5];b[9]=a[6];b[13]=a[7];b[2]=a[8];b[6]=a[9];b[10]=
a[10];b[14]=a[11];b[3]=a[12];b[7]=a[13];b[11]=a[14];b[15]=a[15];return b},equal:function(a,b){return a===b||1E-6>Math.abs(a[0]-b[0])&&1E-6>Math.abs(a[1]-b[1])&&1E-6>Math.abs(a[2]-b[2])&&1E-6>Math.abs(a[3]-b[3])&&1E-6>Math.abs(a[4]-b[4])&&1E-6>Math.abs(a[5]-b[5])&&1E-6>Math.abs(a[6]-b[6])&&1E-6>Math.abs(a[7]-b[7])&&1E-6>Math.abs(a[8]-b[8])&&1E-6>Math.abs(a[9]-b[9])&&1E-6>Math.abs(a[10]-b[10])&&1E-6>Math.abs(a[11]-b[11])&&1E-6>Math.abs(a[12]-b[12])&&1E-6>Math.abs(a[13]-b[13])&&1E-6>Math.abs(a[14]-b[14])&&
1E-6>Math.abs(a[15]-b[15])},identity:function(a){a||(a=v.create());a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a},transpose:function(a,b){if(!b||a===b){b=a[1];var g=a[2],c=a[3],d=a[6],f=a[7],e=a[11];a[1]=a[4];a[2]=a[8];a[3]=a[12];a[4]=b;a[6]=a[9];a[7]=a[13];a[8]=g;a[9]=d;a[11]=a[14];a[12]=c;a[13]=f;a[14]=e;return a}b[0]=a[0];b[1]=a[4];b[2]=a[8];b[3]=a[12];b[4]=a[1];b[5]=a[5];b[6]=a[9];b[7]=a[13];b[8]=a[2];b[9]=a[6];b[10]=
a[10];b[11]=a[14];b[12]=a[3];b[13]=a[7];b[14]=a[11];b[15]=a[15];return b},determinant:function(a){var b=a[0],g=a[1],c=a[2],d=a[3],f=a[4],e=a[5],h=a[6],p=a[7],k=a[8],q=a[9],l=a[10],m=a[11],y=a[12],r=a[13],x=a[14];a=a[15];return y*q*h*d-k*r*h*d-y*e*l*d+f*r*l*d+k*e*x*d-f*q*x*d-y*q*c*p+k*r*c*p+y*g*l*p-b*r*l*p-k*g*x*p+b*q*x*p+y*e*c*m-f*r*c*m-y*g*h*m+b*r*h*m+f*g*x*m-b*e*x*m-k*e*c*a+f*q*c*a+k*g*h*a-b*q*h*a-f*g*l*a+b*e*l*a},inverse:function(a,b){b||(b=a);var g=a[0],c=a[1],d=a[2],f=a[3],e=a[4],h=a[5],p=a[6],
k=a[7],u=a[8],q=a[9],l=a[10],m=a[11],y=a[12],r=a[13],x=a[14];a=a[15];var z=g*h-c*e,v=g*p-d*e,n=g*k-f*e,w=c*p-d*h,U=c*k-f*h,Y=d*k-f*p,N=u*r-q*y,T=u*x-l*y,ba=u*a-m*y,fa=q*x-l*r,la=q*a-m*r,pa=l*a-m*x,ha=z*pa-v*la+n*fa+w*ba-U*T+Y*N;if(!ha)return null;ha=1/ha;b[0]=(h*pa-p*la+k*fa)*ha;b[1]=(-c*pa+d*la-f*fa)*ha;b[2]=(r*Y-x*U+a*w)*ha;b[3]=(-q*Y+l*U-m*w)*ha;b[4]=(-e*pa+p*ba-k*T)*ha;b[5]=(g*pa-d*ba+f*T)*ha;b[6]=(-y*Y+x*n-a*v)*ha;b[7]=(u*Y-l*n+m*v)*ha;b[8]=(e*la-h*ba+k*N)*ha;b[9]=(-g*la+c*ba-f*N)*ha;b[10]=(y*
U-r*n+a*z)*ha;b[11]=(-u*U+q*n-m*z)*ha;b[12]=(-e*fa+h*T-p*N)*ha;b[13]=(g*fa-c*T+d*N)*ha;b[14]=(-y*w+r*v-x*z)*ha;b[15]=(u*w-q*v+l*z)*ha;return b},toRotationMat:function(a,b){b||(b=v.create());b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b},toMat3:function(a,b){b||(b=z.create());b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[4];b[4]=a[5];b[5]=a[6];b[6]=a[8];b[7]=a[9];b[8]=a[10];return b},toInverseMat3:function(a,
b){var g=a[0],c=a[1],d=a[2],f=a[4],e=a[5],h=a[6],p=a[8],k=a[9];a=a[10];var q=a*e-h*k,u=-a*f+h*p,l=k*f-e*p,m=g*q+c*u+d*l;if(!m)return null;m=1/m;b||(b=z.create());b[0]=q*m;b[1]=(-a*c+d*k)*m;b[2]=(h*c-d*e)*m;b[3]=u*m;b[4]=(a*g-d*p)*m;b[5]=(-h*g+d*f)*m;b[6]=l*m;b[7]=(-k*g+c*p)*m;b[8]=(e*g-c*f)*m;return b},multiply:function(a,b,c){c||(c=a);var g=a[0],d=a[1],f=a[2],e=a[3],h=a[4],p=a[5],k=a[6],t=a[7],q=a[8],u=a[9],l=a[10],m=a[11],y=a[12],r=a[13],x=a[14];a=a[15];var z=b[0],v=b[1],n=b[2],w=b[3];c[0]=z*g+
v*h+n*q+w*y;c[1]=z*d+v*p+n*u+w*r;c[2]=z*f+v*k+n*l+w*x;c[3]=z*e+v*t+n*m+w*a;z=b[4];v=b[5];n=b[6];w=b[7];c[4]=z*g+v*h+n*q+w*y;c[5]=z*d+v*p+n*u+w*r;c[6]=z*f+v*k+n*l+w*x;c[7]=z*e+v*t+n*m+w*a;z=b[8];v=b[9];n=b[10];w=b[11];c[8]=z*g+v*h+n*q+w*y;c[9]=z*d+v*p+n*u+w*r;c[10]=z*f+v*k+n*l+w*x;c[11]=z*e+v*t+n*m+w*a;z=b[12];v=b[13];n=b[14];w=b[15];c[12]=z*g+v*h+n*q+w*y;c[13]=z*d+v*p+n*u+w*r;c[14]=z*f+v*k+n*l+w*x;c[15]=z*e+v*t+n*m+w*a;return c},multiplyVec3:function(a,b,c){c||(c=b);var g=b[0],d=b[1];b=b[2];c[0]=
a[0]*g+a[4]*d+a[8]*b+a[12];c[1]=a[1]*g+a[5]*d+a[9]*b+a[13];c[2]=a[2]*g+a[6]*d+a[10]*b+a[14];return c},multiplyVec4:function(a,b,c){c||(c=b);var g=b[0],d=b[1],f=b[2];b=b[3];c[0]=a[0]*g+a[4]*d+a[8]*f+a[12]*b;c[1]=a[1]*g+a[5]*d+a[9]*f+a[13]*b;c[2]=a[2]*g+a[6]*d+a[10]*f+a[14]*b;c[3]=a[3]*g+a[7]*d+a[11]*f+a[15]*b;return c},translate:function(a,b,c){var g=b[0],d=b[1];b=b[2];var f,e,h,p,k,t,q,u,l,m,y,r;if(!c||a===c)return a[12]=a[0]*g+a[4]*d+a[8]*b+a[12],a[13]=a[1]*g+a[5]*d+a[9]*b+a[13],a[14]=a[2]*g+a[6]*
d+a[10]*b+a[14],a[15]=a[3]*g+a[7]*d+a[11]*b+a[15],a;f=a[0];e=a[1];h=a[2];p=a[3];k=a[4];t=a[5];q=a[6];u=a[7];l=a[8];m=a[9];y=a[10];r=a[11];c[0]=f;c[1]=e;c[2]=h;c[3]=p;c[4]=k;c[5]=t;c[6]=q;c[7]=u;c[8]=l;c[9]=m;c[10]=y;c[11]=r;c[12]=f*g+k*d+l*b+a[12];c[13]=e*g+t*d+m*b+a[13];c[14]=h*g+q*d+y*b+a[14];c[15]=p*g+u*d+r*b+a[15];return c},scale:function(a,b,c){var g=b[0],d=b[1];b=b[2];if(!c||a===c)return a[0]*=g,a[1]*=g,a[2]*=g,a[3]*=g,a[4]*=d,a[5]*=d,a[6]*=d,a[7]*=d,a[8]*=b,a[9]*=b,a[10]*=b,a[11]*=b,a;c[0]=
a[0]*g;c[1]=a[1]*g;c[2]=a[2]*g;c[3]=a[3]*g;c[4]=a[4]*d;c[5]=a[5]*d;c[6]=a[6]*d;c[7]=a[7]*d;c[8]=a[8]*b;c[9]=a[9]*b;c[10]=a[10]*b;c[11]=a[11]*b;c[12]=a[12];c[13]=a[13];c[14]=a[14];c[15]=a[15];return c},maxScale:function(a){return Math.max(Math.max(Math.sqrt(a[0]*a[0]+a[4]*a[4]+a[8]*a[8]),Math.sqrt(a[1]*a[1]+a[5]*a[5]+a[9]*a[9])),Math.sqrt(a[2]*a[2]+a[6]*a[6]+a[10]*a[10]))},rotate:function(a,b,c,d){var g=c[0],f=c[1];c=c[2];var e=Math.sqrt(g*g+f*f+c*c),h,p,k,q,t,u,l,m,y,r,x,z,v,A,n,w,N,T,ba,fa;if(!e)return null;
1!==e&&(e=1/e,g*=e,f*=e,c*=e);h=Math.sin(b);p=Math.cos(b);k=1-p;b=a[0];e=a[1];q=a[2];t=a[3];u=a[4];l=a[5];m=a[6];y=a[7];r=a[8];x=a[9];z=a[10];v=a[11];A=g*g*k+p;n=f*g*k+c*h;w=c*g*k-f*h;N=g*f*k-c*h;T=f*f*k+p;ba=c*f*k+g*h;fa=g*c*k+f*h;g=f*c*k-g*h;f=c*c*k+p;d?a!==d&&(d[12]=a[12],d[13]=a[13],d[14]=a[14],d[15]=a[15]):d=a;d[0]=b*A+u*n+r*w;d[1]=e*A+l*n+x*w;d[2]=q*A+m*n+z*w;d[3]=t*A+y*n+v*w;d[4]=b*N+u*T+r*ba;d[5]=e*N+l*T+x*ba;d[6]=q*N+m*T+z*ba;d[7]=t*N+y*T+v*ba;d[8]=b*fa+u*g+r*f;d[9]=e*fa+l*g+x*f;d[10]=q*
fa+m*g+z*f;d[11]=t*fa+y*g+v*f;return d},rotateX:function(a,b,c){var g=Math.sin(b);b=Math.cos(b);var d=a[4],f=a[5],e=a[6],h=a[7],p=a[8],k=a[9],q=a[10],t=a[11];c?a!==c&&(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a;c[4]=d*b+p*g;c[5]=f*b+k*g;c[6]=e*b+q*g;c[7]=h*b+t*g;c[8]=d*-g+p*b;c[9]=f*-g+k*b;c[10]=e*-g+q*b;c[11]=h*-g+t*b;return c},rotateY:function(a,b,c){var g=Math.sin(b);b=Math.cos(b);var d=a[0],f=a[1],e=a[2],h=a[3],p=a[8],k=a[9],q=a[10],t=a[11];c?
a!==c&&(c[4]=a[4],c[5]=a[5],c[6]=a[6],c[7]=a[7],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a;c[0]=d*b+p*-g;c[1]=f*b+k*-g;c[2]=e*b+q*-g;c[3]=h*b+t*-g;c[8]=d*g+p*b;c[9]=f*g+k*b;c[10]=e*g+q*b;c[11]=h*g+t*b;return c},rotateZ:function(a,b,c){var g=Math.sin(b);b=Math.cos(b);var d=a[0],f=a[1],e=a[2],h=a[3],p=a[4],k=a[5],q=a[6],t=a[7];c?a!==c&&(c[8]=a[8],c[9]=a[9],c[10]=a[10],c[11]=a[11],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a;c[0]=d*b+p*g;c[1]=f*b+k*g;c[2]=e*b+q*g;c[3]=h*b+t*g;c[4]=
d*-g+p*b;c[5]=f*-g+k*b;c[6]=e*-g+q*b;c[7]=h*-g+t*b;return c},frustum:function(a,b,c,d,f,e,h){h||(h=v.create());var g=b-a,p=d-c,k=e-f;h[0]=2*f/g;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=2*f/p;h[6]=0;h[7]=0;h[8]=(b+a)/g;h[9]=(d+c)/p;h[10]=-(e+f)/k;h[11]=-1;h[12]=0;h[13]=0;h[14]=-(e*f*2)/k;h[15]=0;return h},perspective:function(a,b,c,d,f){a=c*Math.tan(a*Math.PI/360);b*=a;return v.frustum(-b,b,-a,a,c,d,f)},ortho:function(a,b,c,d,f,e,h){h||(h=v.create());var g=b-a,p=d-c,k=e-f;h[0]=2/g;h[1]=0;h[2]=0;h[3]=0;h[4]=
0;h[5]=2/p;h[6]=0;h[7]=0;h[8]=0;h[9]=0;h[10]=-2/k;h[11]=0;h[12]=-(a+b)/g;h[13]=-(d+c)/p;h[14]=-(e+f)/k;h[15]=1;return h},lookAt:function(a,b,c,d){d||(d=v.create());var g,f,e,h,p,k,q,t,l=a[0],u=a[1];a=a[2];e=c[0];h=c[1];f=c[2];q=b[0];c=b[1];g=b[2];if(l===q&&u===c&&a===g)return v.identity(d);b=l-q;c=u-c;q=a-g;t=1/Math.sqrt(b*b+c*c+q*q);b*=t;c*=t;q*=t;g=h*q-f*c;f=f*b-e*q;e=e*c-h*b;(t=Math.sqrt(g*g+f*f+e*e))?(t=1/t,g*=t,f*=t,e*=t):e=f=g=0;h=c*e-q*f;p=q*g-b*e;k=b*f-c*g;(t=Math.sqrt(h*h+p*p+k*k))?(t=1/
t,h*=t,p*=t,k*=t):k=p=h=0;d[0]=g;d[1]=h;d[2]=b;d[3]=0;d[4]=f;d[5]=p;d[6]=c;d[7]=0;d[8]=e;d[9]=k;d[10]=q;d[11]=0;d[12]=-(g*l+f*u+e*a);d[13]=-(h*l+p*u+k*a);d[14]=-(b*l+c*u+q*a);d[15]=1;return d},fromRotationTranslation:function(a,b,c){c||(c=v.create());var g=a[0],d=a[1],f=a[2],e=a[3],h=g+g,p=d+d,k=f+f;a=g*h;var q=g*p,g=g*k,t=d*p,d=d*k,f=f*k,h=e*h,p=e*p,e=e*k;c[0]=1-(t+f);c[1]=q+e;c[2]=g-p;c[3]=0;c[4]=q-e;c[5]=1-(a+f);c[6]=d+h;c[7]=0;c[8]=g+p;c[9]=d-h;c[10]=1-(a+t);c[11]=0;c[12]=b[0];c[13]=b[1];c[14]=
b[2];c[15]=1;return c},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+"]"}},w={create:function(a){var b=new l(4);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]):b[0]=b[1]=b[2]=b[3]=0;return b},createFrom:function(a,b,c,d){var g=new l(4);g[0]=a;g[1]=b;g[2]=c;g[3]=d;return g},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},equal:function(a,b){return a===
b||1E-6>Math.abs(a[0]-b[0])&&1E-6>Math.abs(a[1]-b[1])&&1E-6>Math.abs(a[2]-b[2])&&1E-6>Math.abs(a[3]-b[3])},identity:function(a){a||(a=w.create());a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a}},p=w.identity();w.calculateW=function(a,b){var c=a[0],g=a[1],d=a[2];if(!b||a===b)return a[3]=-Math.sqrt(Math.abs(1-c*c-g*g-d*d)),a;b[0]=c;b[1]=g;b[2]=d;b[3]=-Math.sqrt(Math.abs(1-c*c-g*g-d*d));return b};w.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]};w.inverse=function(a,b){var c=a[0],g=a[1],d=a[2],
f=a[3],c=(c=c*c+g*g+d*d+f*f)?1/c:0;if(!b||a===b)return a[0]*=-c,a[1]*=-c,a[2]*=-c,a[3]*=c,a;b[0]=-a[0]*c;b[1]=-a[1]*c;b[2]=-a[2]*c;b[3]=a[3]*c;return b};w.conjugate=function(a,b){if(!b||a===b)return a[0]*=-1,a[1]*=-1,a[2]*=-1,a;b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=a[3];return b};w.length=function(a){var b=a[0],c=a[1],g=a[2];a=a[3];return Math.sqrt(b*b+c*c+g*g+a*a)};w.normalize=function(a,b){b||(b=a);var c=a[0],g=a[1],d=a[2];a=a[3];var f=Math.sqrt(c*c+g*g+d*d+a*a);if(0===f)return b[0]=0,b[1]=0,b[2]=
0,b[3]=0,b;f=1/f;b[0]=c*f;b[1]=g*f;b[2]=d*f;b[3]=a*f;return b};w.add=function(a,b,c){if(!c||a===c)return a[0]+=b[0],a[1]+=b[1],a[2]+=b[2],a[3]+=b[3],a;c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];c[3]=a[3]+b[3];return c};w.multiply=function(a,b,c){c||(c=a);var g=a[0],d=a[1],f=a[2];a=a[3];var e=b[0],h=b[1],p=b[2];b=b[3];c[0]=g*b+a*e+d*p-f*h;c[1]=d*b+a*h+f*e-g*p;c[2]=f*b+a*p+g*h-d*e;c[3]=a*b-g*e-d*h-f*p;return c};w.multiplyVec3=function(a,b,c){c||(c=b);var g=b[0],d=b[1],f=b[2];b=a[0];var e=a[1],h=a[2];
a=a[3];var p=a*g+e*f-h*d,k=a*d+h*g-b*f,q=a*f+b*d-e*g,g=-b*g-e*d-h*f;c[0]=p*a+g*-b+k*-h-q*-e;c[1]=k*a+g*-e+q*-b-p*-h;c[2]=q*a+g*-h+p*-e-k*-b;return c};w.scale=function(a,b,c){if(!c||a===c)return a[0]*=b,a[1]*=b,a[2]*=b,a[3]*=b,a;c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;c[3]=a[3]*b;return c};w.toMat3=function(a,b){b||(b=z.create());var c=a[0],g=a[1],d=a[2],f=a[3],e=c+c,h=g+g,p=d+d;a=c*e;var k=c*h,c=c*p,q=g*h,g=g*p,d=d*p,e=f*e,h=f*h,f=f*p;b[0]=1-(q+d);b[1]=k+f;b[2]=c-h;b[3]=k-f;b[4]=1-(a+d);b[5]=g+e;b[6]=
c+h;b[7]=g-e;b[8]=1-(a+q);return b};w.toMat4=function(a,b){b||(b=v.create());var c=a[0],g=a[1],d=a[2],f=a[3],e=c+c,h=g+g,p=d+d;a=c*e;var k=c*h,c=c*p,q=g*h,g=g*p,d=d*p,e=f*e,h=f*h,f=f*p;b[0]=1-(q+d);b[1]=k+f;b[2]=c-h;b[3]=0;b[4]=k-f;b[5]=1-(a+d);b[6]=g+e;b[7]=0;b[8]=c+h;b[9]=g-e;b[10]=1-(a+q);b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};w.slerp=function(a,b,c,d){d||(d=a);var g=a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3],f,e;if(1<=Math.abs(g))return d!==a&&(d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=a[3]),
d;f=Math.acos(g);e=Math.sqrt(1-g*g);if(.001>Math.abs(e))return d[0]=.5*a[0]+.5*b[0],d[1]=.5*a[1]+.5*b[1],d[2]=.5*a[2]+.5*b[2],d[3]=.5*a[3]+.5*b[3],d;g=Math.sin((1-c)*f)/e;c=Math.sin(c*f)/e;d[0]=a[0]*g+b[0]*c;d[1]=a[1]*g+b[1]*c;d[2]=a[2]*g+b[2]*c;d[3]=a[3]*g+b[3]*c;return d};w.fromRotationMatrix=function(a,b){b||(b=w.create());var c=a[0]+a[4]+a[8],g;if(0<c)g=Math.sqrt(c+1),b[3]=.5*g,g=.5/g,b[0]=(a[7]-a[5])*g,b[1]=(a[2]-a[6])*g,b[2]=(a[3]-a[1])*g;else{g=w.fromRotationMatrix.s_iNext=w.fromRotationMatrix.s_iNext||
[1,2,0];c=0;a[4]>a[0]&&(c=1);a[8]>a[3*c+c]&&(c=2);var d=g[c],f=g[d];g=Math.sqrt(a[3*c+c]-a[3*d+d]-a[3*f+f]+1);b[c]=.5*g;g=.5/g;b[3]=(a[3*f+d]-a[3*d+f])*g;b[d]=(a[3*d+c]+a[3*c+d])*g;b[f]=(a[3*f+c]+a[3*c+f])*g}return b};z.toQuat4=w.fromRotationMatrix;(function(){var a=z.create();w.fromAxes=function(b,c,g,d){a[0]=c[0];a[3]=c[1];a[6]=c[2];a[1]=g[0];a[4]=g[1];a[7]=g[2];a[2]=b[0];a[5]=b[1];a[8]=b[2];return w.fromRotationMatrix(a,d)}})();w.identity=function(a){a||(a=w.create());a[0]=0;a[1]=0;a[2]=0;a[3]=
1;return a};w.fromAngleAxis=function(a,b,c){c||(c=w.create());a*=.5;var g=Math.sin(a);c[3]=Math.cos(a);c[0]=g*b[0];c[1]=g*b[1];c[2]=g*b[2];return c};w.toAngleAxis=function(a,b){b||(b=a);var c=a[0]*a[0]+a[1]*a[1]+a[2]*a[2];0<c?(b[3]=2*Math.acos(a[3]),c=e.invsqrt(c),b[0]=a[0]*c,b[1]=a[1]*c,b[2]=a[2]*c):(b[3]=0,b[0]=1,b[1]=0,b[2]=0);return b};w.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"};var y={create:function(a){var b=new l(4);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]):b[0]=b[1]=
b[2]=b[3]=0;return b},createFrom:function(a,b,c,d){var g=new l(4);g[0]=a;g[1]=b;g[2]=c;g[3]=d;return g},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},equal:function(a,b){return a===b||1E-6>Math.abs(a[0]-b[0])&&1E-6>Math.abs(a[1]-b[1])&&1E-6>Math.abs(a[2]-b[2])&&1E-6>Math.abs(a[3]-b[3])},identity:function(a){a||(a=y.create());a[0]=1;a[1]=0;a[2]=0;a[3]=1;return a},transpose:function(a,b){if(!b||a===b)return b=a[1],a[1]=a[2],a[2]=b,a;b[0]=a[0];b[1]=a[2];b[2]=a[1];b[3]=a[3];return b},
determinant:function(a){return a[0]*a[3]-a[2]*a[1]},inverse:function(a,b){b||(b=a);var c=a[0],g=a[1],d=a[2];a=a[3];var f=c*a-d*g;if(!f)return null;f=1/f;b[0]=a*f;b[1]=-g*f;b[2]=-d*f;b[3]=c*f;return b},multiply:function(a,b,c){c||(c=a);var g=a[0],d=a[1],f=a[2];a=a[3];c[0]=g*b[0]+d*b[2];c[1]=g*b[1]+d*b[3];c[2]=f*b[0]+a*b[2];c[3]=f*b[1]+a*b[3];return c},rotate:function(a,b,c){c||(c=a);var g=a[0],d=a[1],f=a[2];a=a[3];var e=Math.sin(b);b=Math.cos(b);c[0]=g*b+d*e;c[1]=g*-e+d*b;c[2]=f*b+a*e;c[3]=f*-e+a*
b;return c},multiplyVec2:function(a,b,c){c||(c=b);var g=b[0];b=b[1];c[0]=g*a[0]+b*a[1];c[1]=g*a[2]+b*a[3];return c},scale:function(a,b,c){c||(c=a);var g=a[1],d=a[2],f=a[3],e=b[0];b=b[1];c[0]=a[0]*e;c[1]=g*b;c[2]=d*e;c[3]=f*b;return c},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"}};n=n?"":"d";b["glMath"+n]=e;b["vec2"+n]={create:function(a){var b=new l(2);a?(b[0]=a[0],b[1]=a[1]):(b[0]=0,b[1]=0);return b},createFrom:function(a,b){var c=new l(2);c[0]=a;c[1]=b;return c},add:function(a,
b,c){c||(c=b);c[0]=a[0]+b[0];c[1]=a[1]+b[1];return c},subtract:function(a,b,c){c||(c=b);c[0]=a[0]-b[0];c[1]=a[1]-b[1];return c},multiply:function(a,b,c){c||(c=b);c[0]=a[0]*b[0];c[1]=a[1]*b[1];return c},divide:function(a,b,c){c||(c=b);c[0]=a[0]/b[0];c[1]=a[1]/b[1];return c},scale:function(a,b,c){c||(c=a);c[0]=a[0]*b;c[1]=a[1]*b;return c},dist:function(a,b){var c=b[0]-a[0];a=b[1]-a[1];return Math.sqrt(c*c+a*a)},dist2:function(a,b){var c=b[0]-a[0];a=b[1]-a[1];return c*c+a*a},set:function(a,b){b[0]=a[0];
b[1]=a[1];return b},set2:function(a,b,c){c[0]=a;c[1]=b;return c},equal:function(a,b){return a===b||1E-6>Math.abs(a[0]-b[0])&&1E-6>Math.abs(a[1]-b[1])},negate:function(a,b){b||(b=a);b[0]=-a[0];b[1]=-a[1];return b},normalize:function(a,b){b||(b=a);var c=a[0]*a[0]+a[1]*a[1];0<c?(c=Math.sqrt(c),b[0]=a[0]/c,b[1]=a[1]/c):b[0]=b[1]=0;return b},cross:function(a,b,c){a=a[0]*b[1]-a[1]*b[0];if(!c)return a;c[0]=c[1]=0;c[2]=a;return c},length:function(a){var b=a[0];a=a[1];return Math.sqrt(b*b+a*a)},length2:function(a){var b=
a[0];a=a[1];return b*b+a*a},dot:function(a,b){return a[0]*b[0]+a[1]*b[1]},direction:function(a,b,c){c||(c=a);var d=a[0]-b[0];a=a[1]-b[1];b=d*d+a*a;if(!b)return c[0]=0,c[1]=0,c[2]=0,c;b=1/Math.sqrt(b);c[0]=d*b;c[1]=a*b;return c},lerp:function(a,b,c,d){d||(d=a);d[0]=a[0]+c*(b[0]-a[0]);d[1]=a[1]+c*(b[1]-a[1]);return d},str:function(a){return"["+a[0]+", "+a[1]+"]"}};b["vec3"+n]=m;b["vec4"+n]={create:function(a){var b=new l(4);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]):(b[0]=0,b[1]=0,b[2]=0,b[3]=0);return b},
createFrom:function(a,b,c,d){var g=new l(4);g[0]=a;g[1]=b;g[2]=c;g[3]=d;return g},add:function(a,b,c){c||(c=b);c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];c[3]=a[3]+b[3];return c},subtract:function(a,b,c){c||(c=b);c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];c[3]=a[3]-b[3];return c},multiply:function(a,b,c){c||(c=b);c[0]=a[0]*b[0];c[1]=a[1]*b[1];c[2]=a[2]*b[2];c[3]=a[3]*b[3];return c},divide:function(a,b,c){c||(c=b);c[0]=a[0]/b[0];c[1]=a[1]/b[1];c[2]=a[2]/b[2];c[3]=a[3]/b[3];return c},scale:function(a,
b,c){c||(c=a);c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;c[3]=a[3]*b;return c},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},set4:function(a,b,c,d,f){f[0]=a;f[1]=b;f[2]=c;f[3]=d;return f},equal:function(a,b){return a===b||1E-6>Math.abs(a[0]-b[0])&&1E-6>Math.abs(a[1]-b[1])&&1E-6>Math.abs(a[2]-b[2])&&1E-6>Math.abs(a[3]-b[3])},negate:function(a,b){b||(b=a);b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=-a[3];return b},length:function(a){var b=a[0],c=a[1],d=a[2];a=a[3];return Math.sqrt(b*b+c*c+
d*d+a*a)},length2:function(a){var b=a[0],c=a[1],d=a[2];a=a[3];return b*b+c*c+d*d+a*a},dot:function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]},lerp:function(a,b,c,d){d||(d=a);d[0]=a[0]+c*(b[0]-a[0]);d[1]=a[1]+c*(b[1]-a[1]);d[2]=a[2]+c*(b[2]-a[2]);d[3]=a[3]+c*(b[3]-a[3]);return d},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"}};b["mat2"+n]=y;b["mat3"+n]=z;b["mat4"+n]=v;b["quat4"+n]=w});return b})},"esri/views/3d/support/projectionUtils":function(){define("require exports ../../../geometry/Point ../../../geometry/SpatialReference ../../../geometry/support/aaBoundingRect ../lib/gl-matrix ./earthUtils ./mathUtils ../webgl-engine/lib/BufferVectorMath".split(" "),
function(b,e,n,h,l,m,k,a,f){function d(a,b,d,g){2===a.length?(D[0]=a[0],D[1]=a[1],D[2]=0,a=D):a===d&&(m.vec3d.set(a,D),a=D);return c(a,b,0,d,g,0,1)}function c(a,b,c,d,f,e,h){void 0===h&&(h=1);w!==b&&(p=q(b),w=b);y!==f&&(g=q(f),y=f);h=c+3*h;if(p!==g||p===v.UNKNOWN&&!b.equals(f))if(p>v.UNKNOWN&&g>v.UNKNOWN)if(g!==v.WGS84)if(b=u[g],p!==v.WGS84)for(f=t[p];c<h;c+=3,e+=3)f(a,c,H,0),b(H,0,d,e);else for(;c<h;c+=3,e+=3)b(a,c,d,e);else for(f=t[p];c<h;c+=3,e+=3)f(a,c,d,e);else return!1;else if(d!==a||c!==e)for(;c<
h;c++,e++)d[e]=a[c];return!0}function q(a){return a.wkt===e.SphericalECEFSpatialReference.wkt?v.SPHERICAL_ECEF:a.isWGS84?v.WGS84:a.isWebMercator?v.WEBMERC:a.wkt===e.WGS84ECEFSpatialReference.wkt?v.WGS84_ECEF:v.UNKNOWN}function r(a,b,c,d){c[d++]=a[b++];c[d++]=a[b++];c[d]=a[b]}function x(b,c,d,g){var f=.4999999*Math.PI,f=a.clamp(A*b[c+1],-f,f),f=Math.sin(f);d[g++]=A*b[c]*B;d[g++]=B/2*Math.log((1+f)/(1-f));d[g]=b[c+2]}function z(a,b,c,d){var g=B+a[b+2],f=A*a[b+1];a=A*a[b];b=Math.cos(f);c[d++]=Math.cos(a)*
b*g;c[d++]=Math.sin(a)*b*g;c[d]=Math.sin(f)*g}Object.defineProperty(e,"__esModule",{value:!0});e.SphericalECEFSpatialReference=new h({wkt:'GEOCCS["Spherical geocentric",\n  DATUM["Not specified",\n    SPHEROID["Sphere",\' + earthUtils.earthRadius + \',0]],\n  PRIMEM["Greenwich",0.0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",EAST],\n  AXIS["Geocentric Z",NORTH]\n]'});e.WGS84ECEFSpatialReference=new h({wkt:'GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",6378137,298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]'});
var v;(function(a){a[a.UNKNOWN=0]="UNKNOWN";a[a.SPHERICAL_ECEF=1]="SPHERICAL_ECEF";a[a.WGS84=2]="WGS84";a[a.WEBMERC=3]="WEBMERC";a[a.WGS84_ECEF=4]="WGS84_ECEF"})(v||(v={}));var w,p,y,g;e.vectorToVector=d;e.pointToVector=function(a,b,d){D[0]=a.x;D[1]=a.y;var g=a.z;D[2]=void 0!==g?g:0;return c(D,a.spatialReference,0,b,d,0,1)};e.vectorToPoint=function(a,b,d,g){"esri.geometry.SpatialReference"===d.declaredClass?(g=d,d=new n({spatialReference:g})):g=g||d.spatialReference;return c(a,b,0,D,g,0,1)?(d.x=D[0],
d.y=D[1],d.z=D[2],d.spatialReference=g,d):null};e.xyzToVector=function(a,b,d,g,f,e){D[0]=a;D[1]=b;D[2]=d;return c(D,g,0,f,e,0,1)};e.bufferToBuffer=c;e.computeLinearTransformation=function(a,b,c,d){var g=q(a),f=q(d);if(g===f&&f!==v.SPHERICAL_ECEF&&(g!==v.UNKNOWN||a.equals(d)))return m.mat4d.identity(c),m.mat4d.translate(c,b),!0;if(f===v.SPHERICAL_ECEF){if(a=t[g])return a(b,0,H,0),z(H,0,aa,0),d=A*H[0],a=A*H[1],b=Math.sin(d),d=Math.cos(d),g=Math.sin(a),a=Math.cos(a),c[0]=-b,c[4]=-g*d,c[8]=a*d,c[12]=
aa[0],c[1]=d,c[5]=-g*b,c[9]=a*b,c[13]=aa[1],c[2]=0,c[6]=a,c[10]=g,c[14]=aa[2],c[3]=0,c[7]=0,c[11]=0,c[15]=1,!0}else if(f===v.WEBMERC&&(g===v.WGS84||g===v.SPHERICAL_ECEF))return t[g](b,0,H,0),b=A*H[1],x(H,0,aa,0),m.mat4d.identity(c),m.mat4d.translate(c,aa),b=1/Math.cos(b),m.mat4d.scale(c,[b,b,1]),!0;return!1};e.transformDirection=function(a,b,c,g,f){m.vec3d.set(a,ga);m.vec3d.add(a,b,P);d(ga,c,ga,f);d(P,c,P,f);m.vec3d.subtract(P,ga,g);m.vec3d.normalize(g)};e.mbsToMbs=function(a,b,c,d){var g=q(b),f=
q(d);if(g===f&&(g!==v.UNKNOWN||b.equals(d)))return c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],!0;if(f===v.SPHERICAL_ECEF){if(b=t[g])return b(a,0,H,0),z(H,0,c,0),c[3]=a[3],!0}else if(f===v.WEBMERC&&(g===v.WGS84||g===v.SPHERICAL_ECEF))return t[g](a,0,H,0),b=Math.abs(A*H[1])+Math.asin(a[3]/(B+a[2])),x(H,0,c,0),c[3]=b>.9999*Math.PI?Number.MAX_VALUE:1/Math.cos(b)*a[3],!0;return!1};e.extentToBoundingBox=function(a,b,d){if(null==a)return!1;var g;D[0]=null!=a.xmin?a.xmin:0;D[1]=null!=a.ymin?a.ymin:0;D[2]=null!=
a.zmin?a.zmin:0;g=c(D,a.spatialReference,0,b,d,0,1);D[0]=null!=a.xmax?a.xmax:0;D[1]=null!=a.ymax?a.ymax:0;D[2]=null!=a.zmax?a.zmax:0;g=g&&c(D,a.spatialReference,0,b,d,3,1);null==a.xmin&&(b[0]=-Infinity);null==a.ymin&&(b[1]=-Infinity);null==a.zmin&&(b[2]=-Infinity);null==a.xmax&&(b[3]=Infinity);null==a.ymax&&(b[4]=Infinity);null==a.zmax&&(b[5]=Infinity);return g};e.extentToBoundingRect=function(a,b,d){if(null==a)return!1;var g;D[0]=null!=a.xmin?a.xmin:0;D[1]=null!=a.ymin?a.ymin:0;D[2]=null!=a.zmin?
a.zmin:0;g=c(D,a.spatialReference,0,D,d,0,1);b[0]=D[0];b[1]=D[1];D[0]=null!=a.xmax?a.xmax:0;D[1]=null!=a.ymax?a.ymax:0;D[2]=null!=a.zmax?a.zmax:0;g=g&&c(D,a.spatialReference,0,D,d,0,1);b[2]=D[0];b[3]=D[1];null==a.xmin&&(b[0]=-Infinity);null==a.ymin&&(b[1]=-Infinity);null==a.xmax&&(b[2]=Infinity);null==a.ymax&&(b[3]=Infinity);return g};e.boundingRectToBoundingRect=function(a,b,d,g){if(null==a)return!1;if(b.equals(g))return l.set(d,a),!0;var f;D[0]=a[0];D[1]=a[1];D[2]=0;f=c(D,b,0,D,g,0,1);d[0]=D[0];
d[1]=D[1];D[0]=a[2];D[1]=a[3];D[2]=0;f=f&&c(D,b,0,D,g,0,1);d[2]=D[0];d[3]=D[1];return f};(function(a){a.x2lon=function(a){return a/B};a.y2lat=function(a){return Math.PI/2-2*Math.atan(Math.exp(-1*a/B))};a.lon2x=function(a){return a*B};a.lat2y=function(a){a=Math.sin(a);return B/2*Math.log((1+a)/(1-a))}})(e.webMercator||(e.webMercator={}));var u=[void 0,z,r,x,function(a,b,c,d){var g=F,f=A*a[b],e=A*a[b+1];a=a[b+2];b=Math.sin(e);var e=Math.cos(e),h=g.a/Math.sqrt(1-g.e2*b*b);c[d++]=(h+a)*e*Math.cos(f);
c[d++]=(h+a)*e*Math.sin(f);c[d++]=(h*(1-g.e2)+a)*b}],t=[void 0,function(b,c,d,g){var e=f.Vec3Compact.length(b,c),h=a.asin(b[c+2]/e);b=(0<b[c+1]?1:-1)*a.acos(b[c]/(Math.cos(h)*e));d[g++]=C*b;d[g++]=C*h;d[g]=e-B},r,function(a,b,c,d){c[d++]=C*(a[b++]/B);c[d++]=C*(Math.PI/2-2*Math.atan(Math.exp(-1*a[b++]/B)));c[d]=a[b]},function(a,b,c,d){var g=F,f=a[b],e=a[b+1];a=a[b+2];var h,p,k,q,l,m;b=Math.abs(a);h=f*f+e*e;p=Math.sqrt(h);k=h+a*a;q=Math.sqrt(k);f=Math.atan2(e,f);l=a*a/k;k=h/k;e=g.a2/q;h=g.a3-g.a4/q;
.3<k?(l=b/q*(1+k*(g.a1+e+l*h)/q),q=Math.asin(l),e=l*l,k=Math.sqrt(1-e)):(k=p/q*(1-l*(g.a5-e-k*h)/q),q=Math.acos(k),e=1-k*k,l=Math.sqrt(e));m=1-g.e2*e;e=g.a/Math.sqrt(m);g=g.a6*e;e=p-e*k;h=b-g*l;b=k*e+l*h;p=k*h-l*e;g=p/(g/m+b);q+=g;0>a&&(q=-q);c[d++]=C*f;c[d++]=C*q;c[d]=b+p*g/2}],A=a.deg2rad(1),C=a.rad2deg(1),B=k.earthRadius,F={a:6378137,e2:.006694379990137799,a1:42697.67270715754,a2:1.8230912546075456E9,a3:142.91722289812412,a4:4.557728136518864E9,a5:42840.589930055656,a6:.9933056200098622},D=m.vec3d.create(),
H=m.vec3d.create(),aa=m.vec3d.create(),ga=m.vec3d.create(),P=m.vec3d.create()})},"esri/geometry/support/aaBoundingRect":function(){define(["require","exports","../Extent"],function(b,e,n){function h(a){void 0===a&&(a=e.ZERO);return[a[0],a[1],a[2],a[3]]}function l(a){return a[0]>=a[2]?0:a[2]-a[0]}function m(a){return a[1]>=a[3]?0:a[3]-a[1]}function k(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];return a}function a(a){return 4===a.length}function f(a,b,f){return a<b?b:a>f?f:a}Object.defineProperty(e,
"__esModule",{value:!0});e.create=h;e.clone=function(a){return[a[0],a[1],a[2],a[3]]};e.fromValues=function(a,b,f,e,k){void 0===k&&(k=h());k[0]=a;k[1]=b;k[2]=f;k[3]=e;return k};e.fromExtent=function(a,b){void 0===b&&(b=h());b[0]=a.xmin;b[1]=a.ymin;b[2]=a.xmax;b[3]=a.ymax;return b};e.toExtent=function(a,b){return new n({xmin:a[0],ymin:a[1],xmax:a[2],ymax:a[3],spatialReference:b})};e.expandPointInPlace=function(a,b){b[0]<a[0]&&(a[0]=b[0]);b[0]>a[2]&&(a[2]=b[0]);b[1]<a[1]&&(a[1]=b[1]);b[1]>a[3]&&(a[3]=
b[1])};e.expand=function(b,c,f){void 0===f&&(f=b);if("length"in c)if(a(c))f[0]=Math.min(b[0],c[0]),f[1]=Math.min(b[1],c[1]),f[2]=Math.max(b[2],c[2]),f[3]=Math.max(b[3],c[3]);else{if(2===c.length||3===c.length)f[0]=Math.min(b[0],c[0]),f[1]=Math.min(b[1],c[1]),f[2]=Math.max(b[2],c[0]),f[3]=Math.max(b[3],c[1])}else switch(c.type){case "extent":f[0]=Math.min(b[0],c.xmin);f[1]=Math.min(b[1],c.ymin);f[2]=Math.max(b[2],c.xmax);f[3]=Math.max(b[3],c.ymax);break;case "point":f[0]=Math.min(b[0],c.x),f[1]=Math.min(b[1],
c.y),f[2]=Math.max(b[2],c.x),f[3]=Math.max(b[3],c.y)}return f};e.expandWithNestedArray=function(a,b,f){void 0===f&&(f=a);var c=b.length,d=a[0],e=a[1],h=a[2];a=a[3];for(var k=0;k<c;k++){var p=b[k],d=Math.min(d,p[0]),e=Math.min(e,p[1]),h=Math.max(h,p[0]);a=Math.max(a,p[1])}f[0]=d;f[1]=e;f[2]=h;f[3]=a;return f};e.allFinite=function(a){for(var b=0;4>b;b++)if(!isFinite(a[b]))return!1;return!0};e.width=l;e.height=m;e.diameter=function(a){var b=l(a);a=m(a);return Math.sqrt(b*b+a*a)};e.area=function(a){return l(a)*
m(a)};e.center=function(a,b){void 0===b&&(b=[0,0]);b[0]=a[0]+l(a)/2;b[1]=a[1]+m(a)/2;return b};e.containsPoint=function(a,b){return b[0]>=a[0]&&b[1]>=a[1]&&b[0]<=a[2]&&b[1]<=a[3]};e.containsPointWithMargin=function(a,b,f){return b[0]>=a[0]-f&&b[1]>=a[1]-f&&b[0]<=a[2]+f&&b[1]<=a[3]+f};e.intersects=function(a,b){return Math.max(b[0],a[0])<=Math.min(b[2],a[2])&&Math.max(b[1],a[1])<=Math.min(b[3],a[3])};e.contains=function(a,b){return b[0]>=a[0]&&b[2]<=a[2]&&b[1]>=a[1]&&b[3]<=a[3]};e.intersection=function(a,
b,e){void 0===e&&(e=a);var c=b[0],d=b[1],h=b[2];b=b[3];e[0]=f(a[0],c,h);e[1]=f(a[1],d,b);e[2]=f(a[2],c,h);e[3]=f(a[3],d,b);return e};e.distance=function(a,b){var c=(a[1]+a[3])/2,d=Math.max(Math.abs(b[0]-(a[0]+a[2])/2)-l(a)/2,0);a=Math.max(Math.abs(b[1]-c)-m(a)/2,0);return Math.sqrt(d*d+a*a)};e.offset=function(a,b,f,e){void 0===e&&(e=a);e[0]=a[0]+b;e[1]=a[1]+f;e[2]=a[2]+b;e[3]=a[3]+f;return e};e.pad=function(a,b,f){void 0===f&&(f=a);f[0]=a[0]-b;f[1]=a[1]-b;f[2]=a[2]+b;f[3]=a[3]+b;return f};e.setMin=
function(a,b,f){void 0===f&&(f=a);f[0]=b[0];f[1]=b[1];f!==a&&(f[2]=a[2],f[3]=a[3]);return f};e.setMax=function(a,b,f){void 0===f&&(f=a);f[2]=b[0];f[3]=b[1];f!==a&&(f[0]=a[0],f[1]=a[1]);return a};e.set=k;e.empty=function(a){return a?k(a,e.NEGATIVE_INFINITY):h(e.NEGATIVE_INFINITY)};e.is=a;e.isPoint=function(a){return(0===l(a)||!isFinite(a[0]))&&(0===m(a)||!isFinite(a[1]))};e.equals=function(b,c,f){if(null==b||null==c)return b===c;if(!a(b)||!a(c))return!1;if(f)for(var d=0;d<b.length;d++){if(!f(b[d],
c[d]))return!1}else for(d=0;d<b.length;d++)if(b[d]!==c[d])return!1;return!0};e.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];e.NEGATIVE_INFINITY=[Infinity,Infinity,-Infinity,-Infinity];e.ZERO=[0,0,0,0]})},"esri/views/3d/support/earthUtils":function(){define("require exports ../../../core/wgs84Constants ../../../geometry/Point ../../../geometry/SpatialReference ../../../geometry/support/webMercatorUtils ../lib/gl-matrix ./mathUtils".split(" "),function(b,e,n,h,l,m,k,a){function f(b,c,d,
f){var p,k;b instanceof h&&c instanceof h&&(d=c.longitude,f=c.latitude,k=b.latitude,p=b.longitude);b=a.deg2rad(k);f=a.deg2rad(f);p=a.deg2rad(p);c=a.deg2rad(d);d=Math.sin((b-f)/2);p=Math.sin((p-c)/2);d=2*a.asin(Math.sqrt(d*d+Math.cos(b)*Math.cos(f)*p*p))*e.earthRadius;return Math.round(1E4*d)/1E4}function d(b,c,d){b=d/e.earthRadius;c=a.deg2rad(c);b=Math.sin(b/2);c=Math.cos(c);c=2*a.asin(Math.sqrt(b*b/(c*c)));return a.rad2deg(c)}function c(b,c,d){return a.rad2deg(d/e.earthRadius)}function q(a,b){a/=
15;b||(a=Math.round(a));return a}Object.defineProperty(e,"__esModule",{value:!0});e.earthRadius=n.wgs84Radius;e.halfEarthCircumference=Math.PI*e.earthRadius;e.earthCircumference=2*e.halfEarthCircumference;e.metersPerDegree=e.halfEarthCircumference/180;var r=new h(0,0,l.WGS84);e.getGreatCircleDistance=f;e.getGreatCircleSpanAt=function(a,b,c){var d=b.spatialReference,e=new h(b.x,a.y,d),k=new h(c.x,a.y,d);b=new h(a.x,b.y,d);a=new h(a.x,c.y,d);return{lon:f(e,k),lat:f(b,a)}};e.getLonDeltaForDistance=d;
e.getLatDeltaForDistance=c;e.getLatLonDeltaForDistance=function(a,b,f){return{lat:c(a,b,f),lon:d(a,b,f)}};e.getMaxCameraAltitude=function(b){b=a.deg2rad(b/2);return(1-Math.sin(b))*e.earthRadius/Math.sin(b)};e.getViewExtentDistance=function(b,c){c=a.deg2rad(c/2);return 2*a.acos((Math.pow(b+e.earthRadius,2)+Math.pow(e.earthRadius,2)-Math.pow((b+e.earthRadius)*Math.cos(c)-Math.sqrt(Math.pow(Math.cos(c)*(b+e.earthRadius),2)-b*b-2*b*e.earthRadius),2))/(2*(b+e.earthRadius)*e.earthRadius))*e.earthRadius};
e.computeCarthesianDistance=function(b,c){function d(b){var c=a.deg2rad(b.latitude),d=a.deg2rad(b.longitude),g=Math.cos(c);b=e.earthRadius+(b.z||0);return[Math.cos(d)*g*b,Math.sin(c)*b,-Math.sin(d)*g*b]}b=d(b);c=d(c);c=[c[0]-b[0],c[1]-b[1],c[2]-b[2]];return Math.sqrt(c[0]*c[0]+c[1]*c[1]+c[2]*c[2])};e.longitudeToTimezone=q;e.positionToTimezone=function(a,b){a.spatialReference.wkid!==l.WGS84.wkid?m.webMercatorToGeographic(a,!1,r):(r.x=a.x,r.y=a.y);r.z=a.z;b||(b={hours:0,minutes:0,seconds:0});b.hours=
q(r.x,!0);a=b.hours%1;b.hours-=a;b.minutes=60*a;a=b.minutes%1;b.minutes-=a;b.seconds=Math.round(60*a);return b};e.distanceToIdealHorizon=function(a,b){b=b||e.earthRadius;a=k.vec3d.dot(a,a);return Math.sqrt(Math.abs(a-b*b))}})},"esri/views/3d/support/mathUtils":function(){define(["require","exports","../lib/gl-matrix"],function(b,e,n){function h(a){return Math.asin(1<a?1:-1>a?-1:a)}function l(a){return Math.acos(1<a?1:-1>a?-1:a)}function m(a,b,c){return a<b?b:a>c?c:a}function k(a){for(var b in a){var c=
a[b];c instanceof Function&&(a[b]=c.bind(a))}return a}Object.defineProperty(e,"__esModule",{value:!0});e.deg2rad=function(a){return a*Math.PI/180};e.rad2deg=function(a){return 180*a/Math.PI};e.asin=h;e.acos=l;e.sign=Math.sign||function(a){return+(0<a)-+(0>a)||+a};e.log2=Math.log2||function(a){return Math.log(a)/Math.LN2};e.isPowerOfTwo=function(a){return 0===(a&a-1)};e.nextHighestPowerOfTwo=function(a){--a;for(var b=1;32>b;b<<=1)a|=a>>b;return a+1};e.nextHighestPowerOfTen=function(a){return Math.pow(10,
Math.ceil(Math.LOG10E*Math.log(a)))};e.fovx2fovy=function(a,b,c){return 2*Math.atan(c*Math.tan(.5*a)/b)};e.fovy2fovx=function(a,b,c){return 2*Math.atan(b*Math.tan(.5*a)/c)};e.makeOrthonormal=function(a,b,c){c=c||a;var d=n.vec3d.dot(a,b);n.vec3d.set3(a[0]-d*b[0],a[1]-d*b[1],a[2]-d*b[2],c);n.vec3d.normalize(c)};e.tangentFrame=function(a,b,c){Math.abs(a[0])>Math.abs(a[1])?n.vec3d.set3(0,1,0,b):n.vec3d.set3(1,0,0,b);n.vec3d.cross(a,b,c);n.vec3d.normalize(b);n.vec3d.cross(c,a,b);n.vec3d.normalize(c)};
e.cartesianToSpherical=function(a,b){var c=n.vec3d.length(a),d=h(a[2]/c);n.vec3d.set3(c,d,Math.atan2(a[1]/c,a[0]/c),b)};e.sphericalToCartesian=function(a,b){var c=a[0],d=a[1];a=a[2];var f=Math.cos(d);n.vec3d.set3(c*f*Math.cos(a),c*f*Math.sin(a),c*Math.sin(d),b)};e.lerp=function(a,b,c){return a+(b-a)*c};e.bilerp=function(a,b,c,d,f,e){a+=(b-a)*f;return a+(c+(d-c)*f-a)*e};e.slerp=function(a,b,d,f){void 0===f&&(f=a);var e=n.vec3d.length(a),h=n.vec3d.length(b),k=n.vec3d.dot(a,b)/(e*h);if(.9999999999999999>
k){var k=Math.acos(k),g=((1-d)*e+d*h)/Math.sin(k),h=g/h*Math.sin(d*k);n.vec3d.scale(a,g/e*Math.sin((1-d)*k),c);n.vec3d.scale(b,h,q);return n.vec3d.add(c,q,f)}return n.vec3d.lerp(a,b,d,f)};e.angle=function(a,b,f){a=n.vec3d.normalize(a,c);b=n.vec3d.normalize(b,q);var e=l(n.vec3d.dot(a,b));return f&&(a=n.vec3d.cross(a,b,d),0>n.vec3d.dot(a,f))?-e:e};e.clamp=m;e.isFinite=Number.isFinite||function(a){return"number"===typeof a&&window.isFinite(a)};e.isNaN=Number.isNaN||function(a){return a!==a};e.makePiecewiseLinearFunction=
function(a){var b=a.length;return function(c){if(c<=a[0][0])return a[0][1];if(c>=a[b-1][0])return a[b-1][1];for(var d=1;c>a[d][0];)d++;var f=a[d][0];c=(f-c)/(f-a[d-1][0]);return c*a[d-1][1]+(1-c)*a[d][1]}};e.vectorEquals=function(a,b){if(null==a||null==b)return a!==b;if(a.length!==b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0};e.floatEqualRelative=function(a,b,c){void 0===c&&(c=1E-6);if(e.isNaN(a)||e.isNaN(b))return!1;if(a===b)return!0;var d=Math.abs(a-b),f=Math.abs(a),
h=Math.abs(b);if(0===a||0===b||1E-12>f&&1E-12>h){if(d>.01*c)return!1}else if(d/(f+h)>c)return!1;return!0};e.floatEqualAbsolute=function(a,b,c){void 0===c&&(c=1E-6);return e.isNaN(a)||e.isNaN(b)?!1:(a>b?a-b:b-a)<=c};b=function(){function a(a,b){this.min=a;this.max=b;this.range=b-a}a.prototype.ndiff=function(a,b){void 0===b&&(b=0);return Math.ceil((a-b)/this.range)*this.range+b};a.prototype._normalize=function(a,b,c,d){void 0===d&&(d=0);c-=d;c<a?c+=this.ndiff(a-c):c>b&&(c-=this.ndiff(c-b));return c+
d};a.prototype.normalize=function(a,b){return this._normalize(this.min,this.max,a,b)};a.prototype.clamp=function(a,b){void 0===b&&(b=0);return m(a-b,this.min,this.max)+b};a.prototype.monotonic=function(a,b,c){return a<b?b:b+this.ndiff(a-b,c)};a.prototype.minimalMonotonic=function(a,b,c){return this._normalize(a,a+this.range,b,c)};a.prototype.center=function(a,b,c){b=this.monotonic(a,b,c);return this.normalize((a+b)/2,c)};a.prototype.diff=function(a,b,c){return this.monotonic(a,b,c)-a};a.prototype.contains=
function(a,b,c){b=this.minimalMonotonic(a,b);c=this.minimalMonotonic(a,c);return c>a&&c<b};return a}();e.Cyclical=b;e.planeFromPoints=function(b,c,d,e){n.vec3d.subtract(c,b,a);n.vec3d.subtract(d,b,f);n.vec3d.cross(a,f,e);n.vec3d.normalize(e,e);e[3]=-n.vec3d.dot(b,e)};var a=n.vec3d.create(),f=n.vec3d.create();e.cyclical2PI=k(new b(0,2*Math.PI));e.cyclicalPI=k(new b(-Math.PI,Math.PI));e.cyclicalDeg=k(new b(0,360));var d=n.vec3d.create(),c=n.vec3d.create(),q=n.vec3d.create()})},"esri/views/3d/webgl-engine/lib/BufferVectorMath":function(){define(["require",
"exports"],function(b,e){Object.defineProperty(e,"__esModule",{value:!0});(function(b){b.length=function(b,e){var h=b[e],k=b[e+1];b=b[e+2];return Math.sqrt(h*h+k*k+b*b)};b.normalize=function(b,e){var h=b[e],k=b[e+1],a=b[e+2],h=1/Math.sqrt(h*h+k*k+a*a);b[e]*=h;b[e+1]*=h;b[e+2]*=h};b.scale=function(b,e,m){b[e]*=m;b[e+1]*=m;b[e+2]*=m};b.add=function(b,e,m,k,a,f){void 0===f&&(f=e);a=a||b;a[f]=b[e]+m[k];a[f+1]=b[e+1]+m[k+1];a[f+2]=b[e+2]+m[k+2]};b.subtract=function(b,e,m,k,a,f){void 0===f&&(f=e);a=a||
b;a[f]=b[e]-m[k];a[f+1]=b[e+1]-m[k+1];a[f+2]=b[e+2]-m[k+2]}})(e.Vec3Compact||(e.Vec3Compact={}))})},"esri/geometry/support/meshUtils/offset":function(){define(["require","exports","./projection","../../../views/3d/lib/gl-matrix","../../../views/3d/support/projectionUtils"],function(b,e,n,h,l){function m(a,b){if(a)for(var c=0;c<a.length;c+=3)for(var d=0;3>d;d++)a[c+d]+=b[d]}Object.defineProperty(e,"__esModule",{value:!0});e.offset=function(b,c,e){if(b.vertexAttributes&&b.vertexAttributes.position){var d=
b.spatialReference;if(d.isWGS84||d.isWebMercator&&(!e||!1!==e.geographic)){e=b.spatialReference;var d=b.vertexAttributes.position,q=b.vertexAttributes.normal,z=new Float64Array(d.length),v=new Float32Array(q?q.length:0),w=b.extent.center,p=k;l.computeLinearTransformation(e,[w.x,w.y,w.z],a,l.SphericalECEFSpatialReference);h.mat4d.toMat3(a,f);h.mat3d.multiplyVec3(f,c,p);n.projectToECEF(d,e,z);q&&n.projectNormalToECEF(q,d,z,e,v);m(z,p);n.projectFromECEF(z,d,e);q&&n.projectNormalFromECEF(v,d,z,e,q)}else m(b.vertexAttributes.position,
c);b.clearCache()}};var k=h.vec3d.create(),a=h.mat4d.create(),f=h.mat3d.create()})},"esri/geometry/support/meshUtils/primitives":function(){define(["require","exports","./georeference","../../../views/3d/lib/gl-matrix"],function(b,e,n,h){Object.defineProperty(e,"__esModule",{value:!0});e.createUnitSizeBox=function(){for(var a=m.faceDescriptions,b=m.faceVertexOffsets,c=m.uvScales,e=4*a.length,h=new Float64Array(3*e),k=new Float32Array(3*e),e=new Float32Array(2*e),l=new Uint32Array(6*a.length),v=0,
n=0,p=0,y=0,g=0;g<a.length;g++){for(var u=a[g],t=v/3,A=0,C=b;A<C.length;A++){var B=C[A];l[y++]=t+B}t=u.corners;for(A=0;4>A;A++){C=t[A];B=0;e[p++]=.25*c[A][0]+u.uvOrigin[0];e[p++]=u.uvOrigin[1]-.25*c[A][1];for(var F=0;3>F;F++)0!==u.axis[F]?(h[v++]=.5*u.axis[F],k[n++]=u.axis[F]):(h[v++]=.5*C[B++],k[n++]=0)}}return{position:h,normal:k,uv:e,faces:l}};e.createUnitSizeSphere=function(a){void 0===a&&(a=0);a=Math.round(8*Math.pow(2,a));for(var b=2*a,c=(a-1)*(b+1)+2*b,f=new Float64Array(3*c),e=new Float32Array(3*
c),c=new Float32Array(2*c),h=new Uint32Array((a-1)*b*6),l=0,m=0,n=0,p=0,y=0,g=0;g<=a;g++){var u=g/a*Math.PI+.5*Math.PI,t=Math.cos(u);k[2]=Math.sin(u);for(var A=(u=0===g||g===a)?b-1:b,C=0;C<=A;C++){var B=C/A*2*Math.PI;k[0]=-Math.sin(B)*t;k[1]=Math.cos(B)*t;for(B=0;3>B;B++)f[l++]=.5*k[B],e[m++]=k[B];c[n++]=(C+(u?.5:0))/b;c[n++]=g/a;0!==g&&C!==b&&(g!==a&&(h[p++]=y,h[p++]=y+1,h[p++]=y-b),1!==g&&(h[p++]=y,h[p++]=y-b,h[p++]=y-b-1));y++}}return{position:f,normal:e,uv:c,faces:h}};e.createUnitSizeCylinder=
function(a){void 0===a&&(a=0);a=Math.round(16*Math.pow(2,a));for(var b=4*(a+1)+2*a,c=new Float64Array(3*b),f=new Float32Array(3*b),b=new Float32Array(2*b),e=new Uint32Array(12*a),h=0,l=0,m=0,n=0,p=0,y=0;5>=y;y++)for(var g=0===y||5===y,u=1>=y||4<=y,t=2===y||4===y,A=g?a-1:a,C=0;C<=A;C++){var B=C/A*2*Math.PI,F=g?0:.5;k[0]=F*Math.sin(B);k[1]=F*-Math.cos(B);k[2]=2>=y?.5:-.5;for(B=0;3>B;B++)c[h++]=k[B],u?f[l++]=2===B?1>=y?1:-1:0:f[l++]=2===B?0:k[B]/F;b[m++]=(C+(g?.5:0))/a;1>=y?b[m++]=1*y/3:3>=y?b[m++]=
1*(y-2)/3+1/3:b[m++]=1*(y-4)/3+2/3;t||0===y||C===a||(5!==y&&(e[n++]=p,e[n++]=p+1,e[n++]=p-a),1!==y&&(e[n++]=p,e[n++]=p-a,e[n++]=p-a-1));p++}return{position:c,normal:f,uv:b,faces:e}};e.createUnitSizePlane=function(a){a=l.facingAxisOrderSwap[a];for(var b=l.position,c=l.normal,f=new Float64Array(b.length),e=new Float32Array(c.length),h=0,k=0;4>k;k++)for(var m=h,n=0;3>n;n++){var p=a[n],y=Math.abs(p)-1,p=0<=p?1:-1;f[h]=b[m+y]*p;e[h]=c[m+y]*p;h++}return{position:f,normal:e,uv:new Float32Array(l.uv),faces:new Uint32Array(l.faces)}};
var l={position:[-.5,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0],normal:[0,0,1,0,0,1,0,0,1,0,0,1],uv:[0,1,1,1,1,0,0,0],faces:[0,1,2,0,2,3],facingAxisOrderSwap:{east:[3,1,2],west:[-3,-1,2],north:[-1,3,2],south:[1,-3,2],up:[1,2,3],down:[1,-2,-3]}};e.convertUnitGeometry=function(b,d,c){for(var f=0;f<b.position.length;f+=3)b.position[f+2]+=.5;f=c&&c.size;if(null!=f){f="number"===typeof f?[f,f,f]:[null!=f.width?f.width:1,null!=f.depth?f.depth:1,null!=f.height?f.height:1];a[0]=f[0];a[4]=f[1];a[8]=f[2];for(var e=0;e<
b.position.length;e+=3){for(var l=0;3>l;l++)k[l]=b.position[e+l];h.mat3d.multiplyVec3(a,k);for(l=0;3>l;l++)b.position[e+l]=k[l]}if(f[0]!==f[1]||f[1]!==f[2])for(a[0]=1/f[0],a[4]=1/f[1],a[8]=1/f[2],e=0;e<b.normal.length;e+=3){for(l=0;3>l;l++)k[l]=b.normal[e+l];h.mat3d.multiplyVec3(a,k);h.vec3d.normalize(k);for(l=0;3>l;l++)b.normal[e+l]=k[l]}}f=n.georeference(b,d,c);return{vertexAttributes:{position:f.position,normal:f.normal,uv:b.uv},components:[{faces:b.faces,material:c&&c.material||null}],spatialReference:d.spatialReference}};
var m={faceDescriptions:[{axis:[0,-1,0],uvOrigin:[0,.625],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[1,0,0],uvOrigin:[.25,.625],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[0,1,0],uvOrigin:[.5,.625],corners:[[1,-1],[-1,-1],[-1,1],[1,1]]},{axis:[-1,0,0],uvOrigin:[.75,.625],corners:[[1,-1],[-1,-1],[-1,1],[1,1]]},{axis:[0,0,1],uvOrigin:[0,.375],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[0,0,-1],uvOrigin:[0,.875],corners:[[-1,1],[1,1],[1,-1],[-1,-1]]}],uvScales:[[0,0],[1,0],[1,1],[0,1]],faceVertexOffsets:[0,
1,2,0,2,3]};e.boxFaceOrder={south:0,east:1,north:2,west:3,up:4,down:5};var k=h.vec3d.create(),a=h.mat3d.identity()})},"esri/geometry/support/meshUtils/georeference":function(){define(["require","exports","../../../views/3d/lib/gl-matrix","../../../views/3d/support/projectionUtils"],function(b,e,n,h){Object.defineProperty(e,"__esModule",{value:!0});e.georeference=function(b,a,f){var d=a.spatialReference;if(d.isWGS84||d.isWebMercator&&(!f||!1!==f.geographic)){f=a.spatialReference;h.computeLinearTransformation(a.spatialReference,
[a.x,a.y,a.z||0],l,h.SphericalECEFSpatialReference);var d=b.position,c=l,e=a.spatialReference,k=new Float64Array(d.length);for(a=0;a<d.length;a+=3){for(var x=0;3>x;x++)m[x]=d[a+x];n.mat4d.multiplyVec3(c,m);for(x=0;3>x;x++)k[a+x]=m[x]}a=new Float64Array(d.length);h.bufferToBuffer(k,h.SphericalECEFSpatialReference,0,a,e,0,k.length/3);b=b.normal;if(f.isWebMercator&&b){f=new Float32Array(b.length);for(d=0;d<b.length;d+=3)for(c=h.webMercator.y2lat(a[d+1]),c=Math.cos(c),m[0]=b[d+0]*c,m[1]=b[d+1]*c,m[2]=
b[d+2],n.vec3d.normalize(m),c=0;3>c;c++)f[d+c]=m[c];b=f}b={position:a,normal:b}}else{f=new Float64Array(b.position.length);d=b.position;for(c=0;c<d.length;c+=3)f[c+0]=d[c+0]+a.x,f[c+1]=d[c+1]+a.y,f[c+2]=d[c+2]+(a.z||0);b={position:f,normal:b.normal}}return b};var l=n.mat4d.create(),m=n.vec3d.create()})},"esri/geometry/support/meshUtils/rotate":function(){define("require exports ../../../core/Logger ./projection ../../../views/3d/lib/gl-matrix ../../../views/3d/support/projectionUtils".split(" "),
function(b,e,n,h,l,m){function k(a,b,c){void 0===c&&(c=z);if(a)for(l.mat4d.identity(r),l.mat4d.rotate(r,b[3],b),b=0;b<a.length;b+=3){for(var g=0;3>g;g++)f[g]=a[b+g]-c[g];l.mat4d.multiplyVec3(r,f);for(g=0;3>g;g++)a[b+g]=f[g]+c[g]}}Object.defineProperty(e,"__esModule",{value:!0});var a=n.getLogger("esri.geometry.support.meshUtils.rotate");e.rotate=function(b,c,f){if(b.vertexAttributes&&b.vertexAttributes.position&&0!==c[3]){var g=b.spatialReference,e=f&&f.origin||b.extent.center;if(g.isWGS84||g.isWebMercator&&
(!f||!1!==f.geographic)){f=b.spatialReference;g=v;m.pointToVector(e,g,m.SphericalECEFSpatialReference)||m.pointToVector(b.extent.center,g,m.SphericalECEFSpatialReference);var e=b.vertexAttributes.position,p=b.vertexAttributes.normal,q=new Float64Array(e.length),y=new Float32Array(p?p.length:0);m.computeLinearTransformation(m.SphericalECEFSpatialReference,g,r,m.SphericalECEFSpatialReference);l.mat4d.toMat3(r,x);var n=l.mat3d.multiplyVec3(x,c,d);n[3]=c[3];h.projectToECEF(e,f,q);p&&h.projectNormalToECEF(p,
e,q,f,y);k(q,n,g);h.projectFromECEF(q,e,f);p&&(k(y,n),h.projectNormalFromECEF(y,e,q,f,p))}else f=v,m.pointToVector(e,f,b.spatialReference)||(g=b.extent.center,f[0]=g.x,f[1]=g.y,f[2]=g.z,a.error("Failed to project specified origin (wkid:"+e.spatialReference.wkid+") to mesh spatial reference (wkid:"+b.spatialReference.wkid+"). Using mesh extent.center instead")),k(b.vertexAttributes.position,c,f),k(b.vertexAttributes.normal,c);b.clearCache()}};e.axisAngleFrom=function(a,b,c){l.vec3d.set(a,c);c[3]=b;
return c};e.axisAngleMultiply=function(a,b,d){l.quat4d.fromAngleAxis(a[3],a,c);l.quat4d.fromAngleAxis(b[3],b,q);l.quat4d.multiply(q,c,c);l.quat4d.toAngleAxis(c,d);return d};var f=l.vec3d.create(),d=l.vec4d.create(),c=l.quat4d.create(),q=l.quat4d.create(),r=l.mat4d.create(),x=l.mat3d.create(),z=[0,0,0],v=[0,0,0]})},"esri/geometry/Multipoint":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Extent ./Geometry ./Point ./support/zmUtils".split(" "),
function(b,e,n,h,l,m,k,a,f,d){function c(a){return function(b,c){return null==b?c:null==c?b:a(b,c)}}b=function(a){function b(){for(var b=0;b<arguments.length;b++);b=a.call(this)||this;b.points=[];b.type="multipoint";return b}n(b,a);e=b;b.prototype.normalizeCtorArgs=function(a,b){if(!a&&!b)return null;var c={};Array.isArray(a)?(c.points=a,c.spatialReference=b):!a||"esri.geometry.SpatialReference"!==a.declaredClass&&null==a.wkid?(a.points&&(c.points=a.points),a.spatialReference&&(c.spatialReference=
a.spatialReference),a.hasZ&&(c.hasZ=a.hasZ),a.hasM&&(c.hasM=a.hasM)):c.spatialReference=a;if(a=c.points&&c.points[0])void 0===c.hasZ&&void 0===c.hasM?(c.hasZ=2<a.length,c.hasM=!1):void 0===c.hasZ?c.hasZ=3<a.length:void 0===c.hasM&&(c.hasM=3<a.length);return c};Object.defineProperty(b.prototype,"extent",{get:function(){var a=this.points;if(!a.length)return null;for(var b=new k,d=this.hasZ,f=this.hasM,e=d?3:2,g=a[0],h=c(Math.min),q=c(Math.max),l=g[0],m=g[1],r=g[0],g=g[1],n,x,H,aa,ga=0,P=a.length;ga<
P;ga++){var K=a[ga],ja=K[0],M=K[1],l=h(l,ja),m=h(m,M),r=q(r,ja),g=q(g,M);d&&2<K.length&&(ja=K[2],n=h(n,ja),H=q(H,ja));f&&K.length>e&&(K=K[e],x=h(x,K),aa=q(aa,K))}b.xmin=l;b.ymin=m;b.xmax=r;b.ymax=g;b.spatialReference=this.spatialReference;d?(b.zmin=n,b.zmax=H):(b.zmin=null,b.zmax=null);f?(b.mmin=x,b.mmax=aa):(b.mmin=null,b.mmax=null);return b},enumerable:!0,configurable:!0});b.prototype.writePoints=function(a,b,c,d){b.points=l.clone(this.points)};b.prototype.addPoint=function(a){this.clearCache();
d.updateSupportFromPoint(this,a);Array.isArray(a)?this.points.push(a):this.points.push(a.toArray());return this};b.prototype.clone=function(){var a={points:l.clone(this.points),spatialReference:this.spatialReference};this.hasZ&&(a.hasZ=!0);this.hasM&&(a.hasM=!0);return new e(a)};b.prototype.getPoint=function(a){if(!this._validateInputs(a))return null;a=this.points[a];var b={x:a[0],y:a[1],spatialReference:this.spatialReference},c=2;this.hasZ&&(b.z=a[2],c=3);this.hasM&&(b.m=a[c]);return new f(b)};b.prototype.removePoint=
function(a){if(!this._validateInputs(a))return null;this.clearCache();return new f(this.points.splice(a,1)[0],this.spatialReference)};b.prototype.setPoint=function(a,b){if(!this._validateInputs(a))return this;this.clearCache();d.updateSupportFromPoint(b);this.points[a]=b.toArray();return this};b.prototype.toJSON=function(a){return this.write(null,a)};b.prototype._validateInputs=function(a){return null!=a&&0<=a&&a<this.points.length};var e;h([m.property({dependsOn:["points","hasZ","hasM","spatialReference"]})],
b.prototype,"cache",void 0);h([m.property({dependsOn:["cache"]})],b.prototype,"extent",null);h([m.property({type:[[Number]],json:{write:{isRequired:!0}}})],b.prototype,"points",void 0);h([m.writer("points")],b.prototype,"writePoints",null);return b=e=h([m.subclass("esri.geometry.Multipoint")],b)}(m.declared(a));b.prototype.toJSON.isDefaultToJSON=!0;return b})},"esri/geometry/support/zmUtils":function(){define(["require","exports"],function(b,e){Object.defineProperty(e,"__esModule",{value:!0});e.updateSupportFromPoint=
function(b,e,l){void 0===l&&(l=!1);var h=b.hasM,k=b.hasZ;Array.isArray(e)?4!==e.length||h||k?3===e.length&&l&&!h?(k=!0,h=!1):3===e.length&&h&&k&&(k=h=!1):k=h=!0:(k=!k&&e.hasZ&&(!h||e.hasM),h=!h&&e.hasM&&(!k||e.hasZ));b.hasZ=k;b.hasM=h}})},"esri/geometry/Polygon":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Extent ./Geometry ./Point ./SpatialReference ./support/centroid ./support/contains ./support/coordsUtils ./support/intersects ./support/webMercatorUtils ./support/zmUtils".split(" "),
function(b,e,n,h,l,m,k,a,f,d,c,q,r,x,z,v){function w(a){return function(b,c){return null==b?c:null==c?b:a(b,c)}}var p=w(Math.min),y=w(Math.max);b=function(a){function b(){for(var b=0;b<arguments.length;b++);b=a.call(this)||this;b.rings=[];b.type="polygon";return b}n(b,a);g=b;b.createEllipse=function(a){var b=a.center.x,c=a.center.y,d=a.center.z,f=a.center.m,e=a.center.hasZ,h=a.center.hasM,p=a.longAxis,k=a.shortAxis,q=a.numberOfPoints;a=a.view;for(var l=[],m=2*Math.PI/q,y=e?3:2,t=0;t<q;t++){var u=
a.toMap(p*Math.cos(t*m)+b,k*Math.sin(t*m)+c),u=[u.x,u.y];e&&(u[2]=d);h&&(u[y]=f);l.push(u)}l.push(l[0]);return new g({rings:[l],spatialReference:a.spatialReference})};b.createCircle=function(a){return g.createEllipse({center:a.center,longAxis:a.r,shortAxis:a.r,numberOfPoints:a.numberOfPoints,view:a.view})};b.fromExtent=function(a){var b=a.clone().normalize();a=a.spatialReference;var c=!1,d=!1;b.map(function(a){a.hasZ&&(c=!0);a.hasM&&(d=!0)});b={rings:b.map(function(a){var b=[[a.xmin,a.ymin],[a.xmin,
a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]];if(c&&a.hasZ)for(var g=a.zmin+.5*(a.zmax-a.zmin),f=0;f<b.length;f++)b[f].push(g);if(d&&a.hasM)for(a=a.mmin+.5*(a.mmax-a.mmin),f=0;f<b.length;f++)b[f].push(a);return b}),spatialReference:a};c&&(b.hasZ=!0);d&&(b.hasM=!0);return new g(b)};b.prototype.normalizeCtorArgs=function(a,b){var c=null,g,f,e=null;a&&!Array.isArray(a)?(c=a.rings?a.rings:null,b||(a.spatialReference?b=a.spatialReference:a.rings||(b=a)),g=a.hasZ,f=a.hasM):c=a;c=c||[];b=b||d.WGS84;
c.length&&c[0]&&null!=c[0][0]&&"number"===typeof c[0][0]&&(c=[c]);if(e=c[0]&&c[0][0])void 0===g&&void 0===f?(g=2<e.length,f=!1):void 0===g?g=!f&&3<e.length:void 0===f&&(f=!g&&3<e.length);return{rings:c,spatialReference:b,hasZ:g,hasM:f}};Object.defineProperty(b.prototype,"centroid",{get:function(){var a=c.polygonCentroid(this);if(!a||isNaN(a[0])||isNaN(a[1])||this.hasZ&&isNaN(a[2]))return null;var b=new f;b.x=a[0];b.y=a[1];b.spatialReference=this.spatialReference;this.hasZ&&(b.z=a[2]);return b},enumerable:!0,
configurable:!0});Object.defineProperty(b.prototype,"extent",{get:function(){var a=this.hasZ,b=this.hasM,c=this.spatialReference,g=this.rings,d=a?3:2;if(!g.length||!g[0].length)return null;for(var f=g[0][0],e=f[0],f=f[1],h=g[0][0],q=h[0],h=h[1],l=void 0,m=void 0,t=void 0,u=void 0,r=[],n=0;n<g.length;n++){for(var v=g[n],x=v[0],z=x[0],x=x[1],w=v[0],Y=w[0],w=w[1],N=void 0,T=void 0,ba=void 0,fa=void 0,la=0;la<v.length;la++){var pa=v[la],ha=pa[0],qa=pa[1],e=p(e,ha),f=p(f,qa),q=y(q,ha),h=y(h,qa),z=p(z,
ha),x=p(x,qa),Y=y(Y,ha),w=y(w,qa);a&&2<pa.length&&(ha=pa[2],l=p(l,ha),m=y(m,ha),N=p(N,ha),T=y(T,ha));b&&pa.length>d&&(fa=pa[d],t=p(l,fa),u=y(m,fa),ba=p(N,fa),fa=y(T,fa))}r.push(new k({xmin:z,ymin:x,zmin:N,mmin:ba,xmax:Y,ymax:w,zmax:T,mmax:fa,spatialReference:c}))}g=new k;g.xmin=e;g.ymin=f;g.xmax=q;g.ymax=h;g.spatialReference=c;a&&(g.zmin=l,g.zmax=m);b&&(g.mmin=t,g.mmax=u);g.cache._partwise=1<r.length?r:null;return g},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"isSelfIntersecting",
{get:function(){return x.isSelfIntersecting(this.rings)},enumerable:!0,configurable:!0});b.prototype.writePaths=function(a,b,c,g){b.rings=l.clone(this.rings)};b.prototype.addRing=function(a){if(a){this.clearCache();var b=this.rings,c=b.length;if(Array.isArray(a[0]))b[c]=a.concat();else{for(var g=[],d=0,f=a.length;d<f;d++)g[d]=a[d].toArray();b[c]=g}return this}};b.prototype.clone=function(){var a=new g;a.spatialReference=this.spatialReference;a.rings=l.clone(this.rings);a.hasZ=this.hasZ;a.hasM=this.hasM;
return a};b.prototype.contains=function(a){if(!a)return!1;z.canProject(a,this.spatialReference)&&(a=z.project(a,this.spatialReference));return q.polygonContainsPoint(this,a)};b.prototype.isClockwise=function(a){var b=this;a=Array.isArray(a[0])?a:a.map(function(a){return b.hasZ?b.hasM?[a.x,a.y,a.z,a.m]:[a.x,a.y,a.z]:[a.x,a.y]});return r.isClockwise(a,this.hasM,this.hasZ)};b.prototype.getPoint=function(a,b){if(!this._validateInputs(a,b))return null;a=this.rings[a][b];b=this.hasZ;var c=this.hasM;return b&&
!c?new f(a[0],a[1],a[2],void 0,this.spatialReference):c&&!b?new f(a[0],a[1],void 0,a[2],this.spatialReference):b&&c?new f(a[0],a[1],a[2],a[3],this.spatialReference):new f(a[0],a[1],this.spatialReference)};b.prototype.insertPoint=function(a,b,c){if(!this._validateInputs(a,b,!0))return this;this.clearCache();v.updateSupportFromPoint(this,c);Array.isArray(c)||(c=c.toArray());this.rings[a].splice(b,0,c);return this};b.prototype.removePoint=function(a,b){if(!this._validateInputs(a,b))return null;this.clearCache();
return new f(this.rings[a].splice(b,1)[0],this.spatialReference)};b.prototype.removeRing=function(a){if(!this._validateInputs(a,null))return null;this.clearCache();a=this.rings.splice(a,1)[0];var b=this.spatialReference;return a.map(function(a){return new f(a,b)})};b.prototype.setPoint=function(a,b,c){if(!this._validateInputs(a,b))return this;this.clearCache();v.updateSupportFromPoint(this,c);Array.isArray(c)||(c=c.toArray());this.rings[a][b]=c;return this};b.prototype._validateInputs=function(a,
b,c){void 0===c&&(c=!1);return null==a||0>a||a>=this.rings.length||null!=b&&(a=this.rings[a],c&&(0>b||b>a.length)||!c&&(0>b||b>=a.length))?!1:!0};b.prototype.toJSON=function(a){return this.write(null,a)};var g;h([m.property({dependsOn:["hasM","hasZ","rings"]})],b.prototype,"cache",void 0);h([m.property({readOnly:!0,dependsOn:["cache"]})],b.prototype,"centroid",null);h([m.property({dependsOn:["cache"],readOnly:!0})],b.prototype,"extent",null);h([m.property({dependsOn:["cache"],readOnly:!0})],b.prototype,
"isSelfIntersecting",null);h([m.property({type:[[[Number]]],json:{write:{isRequired:!0}}})],b.prototype,"rings",void 0);h([m.writer("rings")],b.prototype,"writePaths",null);return b=g=h([m.subclass("esri.geometry.Polygon")],b)}(m.declared(a));b.prototype.toJSON.isDefaultToJSON=!0;return b})},"esri/geometry/support/centroid":function(){define(["require","exports","./coordsUtils"],function(b,e,n){function h(b,a){if(!b||!b.length)return null;for(var f=[],d=[],c=a?[Infinity,-Infinity,Infinity,-Infinity,
Infinity,-Infinity]:[Infinity,-Infinity,Infinity,-Infinity],e=0,h=b.length;e<h;e++){var k=l(b[e],a,c);k&&d.push(k)}d.sort(function(b,c){var d=b[2]-c[2];0===d&&a&&(d=b[4]-c[4]);return d});d.length&&(e=6*d[0][2],f[0]=d[0][0]/e,f[1]=d[0][1]/e,a&&(e=6*d[0][4],f[2]=0!==e?d[0][3]/e:0),f[0]<c[0]||f[0]>c[1]||f[1]<c[2]||f[1]>c[3]||a&&(f[2]<c[4]||f[2]>c[5]))&&(f.length=0);if(!f.length)if(b=b[0]&&b[0].length?m(b[0],a):null)f[0]=b[0],f[1]=b[1],a&&2<b.length&&(f[2]=b[2]);else return null;return f}function l(b,
a,f){for(var d=0,c=0,e=0,h=0,k=0,l=0,m=b.length-1;l<m;l++){var n=b[l],p=n[0],y=n[1],g=n[2],u=b[l+1],t=u[0],A=u[1],C=u[2],B=p*A-t*y,h=h+B,d=d+(p+t)*B,c=c+(y+A)*B;a&&2<n.length&&2<u.length&&(B=p*C-t*g,e+=(g+C)*B,k+=B);p<f[0]&&(f[0]=p);p>f[1]&&(f[1]=p);y<f[2]&&(f[2]=y);y>f[3]&&(f[3]=y);a&&(g<f[4]&&(f[4]=g),g>f[5]&&(f[5]=g))}0<h&&(h*=-1);0<k&&(k*=-1);if(!h)return null;b=[d,c,.5*h];a&&(b[3]=e,b[4]=.5*k);return b}function m(b,a){for(var f=a?[0,0,0]:[0,0],d=a?[0,0,0]:[0,0],c=0,e=0,h=0,k=0,l=0,m=b.length;l<
m-1;l++){var w=b[l],p=b[l+1];if(w&&p){f[0]=w[0];f[1]=w[1];d[0]=p[0];d[1]=p[1];a&&2<w.length&&2<p.length&&(f[2]=w[2],d[2]=p[2]);var y=n.getLength(f,d);y&&(c+=y,w=n.getMidpoint(w,p),e+=y*w[0],h+=y*w[1],a&&2<w.length&&(k+=y*w[2]))}}return 0<c?a?[e/c,h/c,k/c]:[e/c,h/c]:b.length?b[0]:null}Object.defineProperty(e,"__esModule",{value:!0});e.extentCentroid=function(b){return b?b.hasZ?[b.xmax-b.xmin/2,b.ymax-b.ymin/2,b.zmax-b.zmin/2]:[b.xmax-b.xmin/2,b.ymax-b.ymin/2]:null};e.polygonCentroid=function(b){return b?
h(b.rings,b.hasZ):null};e.ringsCentroid=h;e.lineCentroid=m})},"esri/geometry/Polyline":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Extent ./Geometry ./Point ./SpatialReference ./support/zmUtils".split(" "),function(b,e,n,h,l,m,k,a,f,d,c){function q(a){return function(b,c){return null==b?c:null==c?b:a(b,c)}}var r=q(Math.min),x=q(Math.max);b=function(a){function b(){for(var b=0;b<arguments.length;b++);
b=a.call(this)||this;b.paths=[];b.type="polyline";return b}n(b,a);e=b;b.prototype.normalizeCtorArgs=function(a,b){var c=null,f,e,h=null;a&&!Array.isArray(a)?(c=a.paths?a.paths:null,b||(a.spatialReference?b=a.spatialReference:a.paths||(b=a)),f=a.hasZ,e=a.hasM):c=a;c=c||[];b=b||d.WGS84;c.length&&c[0]&&null!=c[0][0]&&"number"===typeof c[0][0]&&(c=[c]);if(h=c[0]&&c[0][0])void 0===f&&void 0===e?(f=2<h.length,e=!1):void 0===f?f=!e&&3<h.length:void 0===e&&(e=!f&&3<h.length);return{paths:c,spatialReference:b,
hasZ:f,hasM:e}};Object.defineProperty(b.prototype,"extent",{get:function(){var a=this.hasZ,b=this.hasM,c=this.spatialReference,d=this.paths,f=a?3:2;if(!d.length||!d[0].length)return null;for(var e=d[0][0],h=e[0],e=e[1],l=d[0][0],q=l[0],l=l[1],m=void 0,n=void 0,v=void 0,z=void 0,w=[],K=0;K<d.length;K++){for(var ja=d[K],M=ja[0],X=M[0],M=M[1],O=ja[0],L=O[0],O=O[1],Q=void 0,G=void 0,V=void 0,U=void 0,Y=0;Y<ja.length;Y++){var N=ja[Y],T=N[0],ba=N[1],h=r(h,T),e=r(e,ba),q=x(q,T),l=x(l,ba),X=r(X,T),M=r(M,
ba),L=x(L,T),O=x(O,ba);a&&2<N.length&&(T=N[2],m=r(m,T),n=x(n,T),Q=r(Q,T),G=x(G,T));b&&N.length>f&&(U=N[f],v=r(m,U),z=x(n,U),V=r(Q,U),U=x(G,U))}w.push(new k({xmin:X,ymin:M,zmin:Q,mmin:V,xmax:L,ymax:O,zmax:G,mmax:U,spatialReference:c}))}d=new k;d.xmin=h;d.ymin=e;d.xmax=q;d.ymax=l;d.spatialReference=c;a&&(d.zmin=m,d.zmax=n);b&&(d.mmin=v,d.mmax=z);d.cache._partwise=1<w.length?w:null;return d},enumerable:!0,configurable:!0});b.prototype.writePaths=function(a,b,c,d){b.paths=l.clone(this.paths)};b.prototype.addPath=
function(a){if(a){this.clearCache();var b=this.paths,c=b.length;if(Array.isArray(a[0]))b[c]=a.concat();else{for(var d=[],f=0,e=a.length;f<e;f++)d[f]=a[f].toArray();b[c]=d}return this}};b.prototype.clone=function(){var a=new e;a.spatialReference=this.spatialReference;a.paths=l.clone(this.paths);a.hasZ=this.hasZ;a.hasM=this.hasM;return a};b.prototype.getPoint=function(a,b){if(!this._validateInputs(a,b))return null;a=this.paths[a][b];b=this.hasZ;var c=this.hasM;return b&&!c?new f(a[0],a[1],a[2],void 0,
this.spatialReference):c&&!b?new f(a[0],a[1],void 0,a[2],this.spatialReference):b&&c?new f(a[0],a[1],a[2],a[3],this.spatialReference):new f(a[0],a[1],this.spatialReference)};b.prototype.insertPoint=function(a,b,d){if(!this._validateInputs(a,b,!0))return this;this.clearCache();c.updateSupportFromPoint(this,d);Array.isArray(d)||(d=d.toArray());this.paths[a].splice(b,0,d);return this};b.prototype.removePath=function(a){if(!this._validateInputs(a,null))return null;this.clearCache();a=this.paths.splice(a,
1)[0];var b=this.spatialReference;return a.map(function(a){return new f(a,b)})};b.prototype.removePoint=function(a,b){if(!this._validateInputs(a,b))return null;this.clearCache();return new f(this.paths[a].splice(b,1)[0],this.spatialReference)};b.prototype.setPoint=function(a,b,d){if(!this._validateInputs(a,b))return this;this.clearCache();c.updateSupportFromPoint(this,d);Array.isArray(d)||(d=d.toArray());this.paths[a][b]=d;return this};b.prototype._validateInputs=function(a,b,c){void 0===c&&(c=!1);
return null==a||0>a||a>=this.paths.length||null!=b&&(a=this.paths[a],c&&(0>b||b>a.length)||!c&&(0>b||b>=a.length))?!1:!0};b.prototype.toJSON=function(a){return this.write(null,a)};var e;h([m.property({dependsOn:["hasM","hasZ","paths"]})],b.prototype,"cache",void 0);h([m.property({dependsOn:["cache"],readOnly:!0})],b.prototype,"extent",null);h([m.property({type:[[[Number]]],json:{write:{isRequired:!0}}})],b.prototype,"paths",void 0);h([m.writer("paths")],b.prototype,"writePaths",null);return b=e=h([m.subclass("esri.geometry.Polyline")],
b)}(m.declared(a));b.prototype.toJSON.isDefaultToJSON=!0;return b})},"esri/geometry/ScreenPoint":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/accessorSupport/decorators".split(" "),function(b,e,n,h,l,m){return function(b){function a(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];a=b.apply(this,a)||this;a.x=0;a.y=0;a.z=void 0;return a}n(a,b);f=a;a.prototype.normalizeCtorArgs=function(a,b){return"number"===
typeof a?{x:a,y:b}:Array.isArray(a)?{x:a[0],y:a[1]}:a};a.prototype.clone=function(){return new f({x:this.x,y:this.y,z:this.z})};a.prototype.toArray=function(){return null==this.z?[this.x,this.y]:[this.x,this.y,this.z]};var f;h([m.property({type:Number})],a.prototype,"x",void 0);h([m.property({type:Number})],a.prototype,"y",void 0);h([m.property({type:Number})],a.prototype,"z",void 0);return a=f=h([m.subclass("esri.geometry.ScreenPoint")],a)}(m.declared(l))})},"esri/geometry/support/jsonUtils":function(){define("require exports ../Extent ../Mesh ../Multipoint ../Point ../Polygon ../Polyline".split(" "),
function(b,e,n,h,l,m,k,a){function f(a){return void 0!==a.xmin&&void 0!==a.ymin&&void 0!==a.xmax&&void 0!==a.ymax}function d(a){return void 0!==a.points}function c(a){return void 0!==a.x&&void 0!==a.y}function q(a){return void 0!==a.paths}function r(a){return void 0!==a.rings}function x(a){return void 0!==a.vertexAttributes}function z(b){if(b){if(c(b))return m.fromJSON(b);if(q(b))return a.fromJSON(b);if(r(b))return k.fromJSON(b);if(d(b))return l.fromJSON(b);if(f(b))return n.fromJSON(b);if(x(b))return h.fromJSON(b)}return null}
Object.defineProperty(e,"__esModule",{value:!0});e.fromJson=function(a){try{throw Error("fromJson is deprecated, use fromJSON instead");}catch(p){console.warn(p.stack)}return z(a)};e.isMultipoint=d;e.isPoint=c;e.isPolyline=q;e.isPolygon=r;e.isMesh=x;e.fromJSON=z;e.getJsonType=function(a){if(a){if(c(a))return"esriGeometryPoint";if(q(a))return"esriGeometryPolyline";if(r(a))return"esriGeometryPolygon";if(f(a))return"esriGeometryEnvelope";if(d(a))return"esriGeometryMultipoint"}return null};var v={esriGeometryPoint:m,
esriGeometryPolyline:a,esriGeometryPolygon:k,esriGeometryEnvelope:n,esriGeometryMultipoint:l};e.getGeometryType=function(a){return a&&v[a]||null}})},"esri/layers/mixins/ArcGISService":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Logger ../../core/MultiOriginJSONSupport ../../core/accessorSupport/decorators ../support/arcgisLayerUrl".split(" "),function(b,e,n,h,l,m,k,a){var f=l.getLogger("esri.layers.mixins.ArcGISService");
return function(b){function c(){return null!==b&&b.apply(this,arguments)||this}n(c,b);Object.defineProperty(c.prototype,"title",{get:function(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){var b=a.parse(this.url);if(b&&b.title)return b.title}return this._get("title")||""},set:function(a){this._set("title",a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"url",{set:function(b){this._set("url",a.sanitizeUrl(b,f))},enumerable:!0,
configurable:!0});h([k.property({dependsOn:["url"]})],c.prototype,"title",null);h([k.property({type:String})],c.prototype,"url",null);return c=h([k.subclass("esri.layers.mixins.ArcGISService")],c)}(k.declared(m))})},"esri/core/MultiOriginJSONSupport":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper ./Accessor ./accessorSupport/decorators ./accessorSupport/MultiOriginStore ./accessorSupport/PropertyOrigin ./accessorSupport/read ./accessorSupport/utils ./accessorSupport/write".split(" "),
function(b,e,n,h,l,m,k,a,f,d,c){function q(a){return d.getProperties(a).store}return function(b){function e(){var c=b.call(this)||this,f=d.getProperties(c),e=f.metadatas,h=f.store,l=new k.default;f.store=l;h.keys().forEach(function(b){l.set(b,h.get(b),a.OriginId.DEFAULTS)});Object.keys(e).forEach(function(b){f.internalGet(b)&&l.set(b,f.internalGet(b),a.OriginId.DEFAULTS)});return c}n(e,b);e.prototype.clear=function(b,c){void 0===c&&(c="user");return q(this).clear(b,a.nameToId(c))};e.prototype.read=
function(a,b){f.default(this,a,b);return this};e.prototype.write=function(a,b){a=a||{};c.default(this,a,b);return a};e.prototype.getAtOrigin=function(b,c){var d=q(this),f=a.nameToId(c);if("string"===typeof b)return d.get(b,f);var e={};b.forEach(function(a){e[a]=d.get(a,f)});return e};e.prototype.originOf=function(b){var c=q(this);if("string"===typeof b)return a.idToName(c.originOf(b));b.forEach(function(b){a.idToName(c.originOf(b))})};e.prototype.revert=function(b,c){var f=q(this),e=a.nameToId(c),
h=d.getProperties(this);("string"===typeof b?"*"===b?Object.keys(f.getAll(e)):[b]:b).forEach(function(a){h.propertyInvalidated(a);f.revert(a,e);h.propertyCommitted(a)})};e.prototype.removeOrigin=function(b){var c=q(this);b=a.nameToId(b);var d=c.getAll(b),f;for(f in d)c.originOf(f)===b&&c.set(f,d[f],a.OriginId.USER)};e.prototype.updateOrigin=function(b,c){var d=q(this);c=a.nameToId(c);var f=this.get(b);d.clear(b);d.set(b,f,c)};return e=h([m.subclass("esri.core.MultiOriginJSONSupport")],e)}(m.declared(l))})},
"esri/core/accessorSupport/MultiOriginStore":function(){define(["require","exports","./PropertyOrigin"],function(b,e,n){Object.defineProperty(e,"__esModule",{value:!0});b=function(){function b(){this._propertyOriginMap={};this._originStores=Array(n.OriginId.NUM);this._values={}}b.prototype.get=function(b,e){return(e=void 0===e?this._values:this._originStores[e])?e[b]:void 0};b.prototype.keys=function(){return Object.keys(this._values)};b.prototype.set=function(b,e,h){void 0===h&&(h=n.OriginId.USER);
var a=this._originStores[h];a||(a={},this._originStores[h]=a);a[b]=e;return!(b in this._values)||this._propertyOriginMap[b]<=h?(a=this._values[b],this._values[b]=e,this._propertyOriginMap[b]=h,a!==e):!1};b.prototype.clear=function(b,e){void 0===e&&(e=n.OriginId.USER);var h=this._originStores[e];if(h){var a=h[b];delete h[b];if(b in this._values&&this._propertyOriginMap[b]===e)for(delete this._values[b],--e;0<=e;e--)if((h=this._originStores[e])&&b in h){this._values[b]=h[b];this._propertyOriginMap[b]=
e;break}return a}};b.prototype.has=function(b,e){return(e=void 0===e?this._values:this._originStores[e])?b in e:!1};b.prototype.revert=function(b,e){for(;0<e&&!this.has(b,e);)--e;var h=this._originStores[e],h=h&&h[b],a=this._values[b];this._values[b]=h;this._propertyOriginMap[b]=e;return a!==h};b.prototype.originOf=function(b,e){return this._propertyOriginMap[b]||n.OriginId.DEFAULTS};b.prototype.getAll=function(b){return this._originStores[b]};return b}();e.default=b})},"esri/layers/support/arcgisLayerUrl":function(){define(["require",
"exports","../../core/urlUtils"],function(b,e,n){function h(b){var h=n.urlToObject(b).path.match(e.match);if(!h)return null;b=h[1];var a=h[2],f=h[3],h=h[4],d=a.indexOf("/");return{title:l(-1!==d?a.slice(d+1):a),serverType:f,sublayer:null!=h&&""!==h?parseInt(h,10):null,url:{path:b}}}function l(b){b=b.replace(/\s*[/_]+\s*/g," ");return b[0].toUpperCase()+b.slice(1)}Object.defineProperty(e,"__esModule",{value:!0});e.serverTypes="MapServer ImageServer FeatureServer SceneServer StreamServer VectorTileServer".split(" ");
e.match=new RegExp("^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/("+e.serverTypes.join("|")+"))(?:\\/(?:layers\\/)?(\\d+))?","i");e.test=function(b){return!!e.match.test(b)};e.parse=h;e.cleanTitle=l;e.titleFromUrlAndName=function(b,e){var a=[];b&&(b=h(b))&&b.title&&a.push(b.title);e&&(e=l(e),a.push(e));if(2===a.length){if(-1!==a[0].toLowerCase().indexOf(a[1].toLowerCase()))return a[0];if(-1!==a[1].toLowerCase().indexOf(a[0].toLowerCase()))return a[1]}return a.join(" - ")};e.isHostedAgolService=
function(b){if(!b)return!1;b=b.toLowerCase();var e=-1!==b.indexOf(".arcgis.com/");b=-1!==b.indexOf("//services")||-1!==b.indexOf("//tiles")||-1!==b.indexOf("//features");return e&&b};e.isHostedSecuredProxyService=function(b,e){return e&&b&&-1!==b.toLowerCase().indexOf(e.toLowerCase())};e.sanitizeUrl=function(b,e){return b?n.removeTrailingSlash(n.removeQueryParameters(b,e)):b};e.sanitizeUrlWithLayerId=function(b,e,a){if(!e)return{url:e};e=n.removeQueryParameters(e,a);a=n.urlToObject(e);a=h(a.path);
var f;a&&null!=a.sublayer&&(null==b.layerId&&(f=a.sublayer),e=a.url.path);return{url:n.removeTrailingSlash(e),layerId:f}};e.writeUrlWithLayerId=function(b,e,a,f){var d=null;f?d=a:f=a;n.writeOperationalLayerUrl(e,f);f.url&&null!=b.layerId&&(f.url=n.join(f.url,d,b.layerId.toString()))}})},"esri/layers/support/TileInfo":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../geometry ../../core/JSONSupport ../../core/kebabDictionary ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ../../geometry/support/aaBoundingRect ../../geometry/support/scaleUtils ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ./LOD".split(" "),
function(b,e,n,h,l,m,k,a,f,d,c,q,r,x,z){var v=a({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc"});return function(a){function b(b){b=a.call(this)||this;b.dpi=96;b.format=null;b.origin=null;b.minScale=0;b.maxScale=0;b.size=null;b.spatialReference=null;return b}h(b,a);e=b;b.create=function(a){void 0===a&&(a={size:256,spatialReference:m.SpatialReference.WebMercator});
var b=a.resolutionFactor||1,c=a.scales,d=a.size||256;a=a.spatialReference||m.SpatialReference.WebMercator;var g=r.getInfo(a),g=g?new m.Point(g.origin[0],g.origin[1],a):new m.Point(0,0,a),f=1/(39.37*q.getMetersPerUnitForSR(a)*96),h=[];if(c)for(var p=0;p<c.length;p++){var k=c[p],l=k*f;h.push({level:p,scale:k,resolution:l})}else for(k=r.isGeographic(a)?512/d*1.47748799285417E8:256/d*5.91657527591555E8,c=Math.ceil(24/b),h.push({level:0,scale:k,resolution:k*f}),p=1;p<c;p++)k/=Math.pow(2,b),l=k*f,h.push({level:p,
scale:k,resolution:l});return new e({dpi:96,lods:h,origin:g,size:d,spatialReference:a})};Object.defineProperty(b.prototype,"isWrappable",{get:function(){var a=this.spatialReference,b=this.origin;if(a&&b){var c=r.getInfo(a);return a.isWrappable&&Math.abs(c.origin[0]-b.x)<=c.dx}return!1},enumerable:!0,configurable:!0});b.prototype.readOrigin=function(a,b){return m.Point.fromJSON(n({spatialReference:b.spatialReference},a))};Object.defineProperty(b.prototype,"lods",{set:function(a){var b=this,c=0,d=0,
g=[];this._levelToLOD={};a&&(c=-Infinity,d=Infinity,a.forEach(function(a){g.push(a.scale);c=a.scale>c?a.scale:c;d=a.scale<d?a.scale:d;b._levelToLOD[a.level]=a}));this._set("scales",g);this._set("minScale",c);this._set("maxScale",d);this._set("lods",a);this._initializeUpsampleLevels()},enumerable:!0,configurable:!0});b.prototype.readSize=function(a,b){return[b.cols,b.rows]};b.prototype.writeSize=function(a,b){b.cols=a[0];b.rows=a[0]};b.prototype.zoomToScale=function(a){var b=this.scales;if(0>=a)return b[0];
if(a>=b.length)return b[b.length-1];var c=Math.round(a);return b[c]+(c-a)*(b[Math.round(a-.5)]-b[c])};b.prototype.scaleToZoom=function(a){for(var b=this.scales,c=b.length-1,d=0;d<c;d++){var g=b[d],f=b[d+1];if(g<=a)break;if(f===a)return d+1;if(g>a&&f<a)return d+1-(a-f)/(g-f)}return d};b.prototype.snapScale=function(a,b){void 0===b&&(b=.95);a=this.scaleToZoom(a);return a%Math.floor(a)>=b?this.zoomToScale(Math.ceil(a)):this.zoomToScale(Math.floor(a))};b.prototype.tileAt=function(a,b,d,f){var g=this.lodAt(a);
if(!g)return null;var e;if("number"===typeof b)e=b,b=d;else{if(r.equals(b.spatialReference,this.spatialReference))e=b.x,b=b.y;else{f=x.project(b,this.spatialReference);if(!f)return null;e=f.x;b=f.y}f=d}d=g.resolution*this.size[0];g=g.resolution*this.size[1];f||(f={id:null,level:0,row:0,col:0,extent:c.create()});f.level=a;f.row=Math.floor((this.origin.y-b)/g+.001);f.col=Math.floor((e-this.origin.x)/d+.001);this.updateTileInfo(f);return f};b.prototype.updateTileInfo=function(a){var b=this.lodAt(a.level);
if(b){var d=b.resolution*this.size[0],b=b.resolution*this.size[1];a.id=a.level+"/"+a.row+"/"+a.col;a.extent||(a.extent=c.create());a.extent[0]=this.origin.x+a.col*d;a.extent[1]=this.origin.y-(a.row+1)*b;a.extent[2]=a.extent[0]+d;a.extent[3]=a.extent[1]+b}};b.prototype.upsampleTile=function(a){var b=this._upsampleLevels[a.level];if(!b||-1===b.parentLevel)return!1;a.level=b.parentLevel;a.row=Math.floor(a.row/b.factor+.001);a.col=Math.floor(a.col/b.factor+.001);this.updateTileInfo(a);return!0};b.prototype.getTileBounds=
function(a,b){var c=this.lodAt(b.level).resolution,d=c*this.size[0],c=c*this.size[1];a[0]=this.origin.x+b.col*d;a[1]=this.origin.y-(b.row+1)*c;a[2]=a[0]+d;a[3]=a[1]+c;return a};b.prototype.lodAt=function(a){return this._levelToLOD&&this._levelToLOD[a]||null};b.prototype.clone=function(){return e.fromJSON(this.write({}))};b.prototype._initializeUpsampleLevels=function(){var a=this.lods;this._upsampleLevels=[];for(var b=null,c=0;c<a.length;c++){var d=a[c];this._upsampleLevels[d.level]={parentLevel:b?
b.level:-1,factor:b?b.resolution/d.resolution:0};b=d}};var e;l([f.property({type:Number,json:{write:!0}})],b.prototype,"compressionQuality",void 0);l([f.property({type:Number,json:{write:!0}})],b.prototype,"dpi",void 0);l([f.property({type:String,json:{read:v.read,write:v.write}})],b.prototype,"format",void 0);l([f.property({readOnly:!0,dependsOn:["spatialReference","origin"]})],b.prototype,"isWrappable",null);l([f.property({type:m.Point,json:{write:!0}})],b.prototype,"origin",void 0);l([f.reader("origin")],
b.prototype,"readOrigin",null);l([f.property({type:[z],value:null,json:{write:!0}})],b.prototype,"lods",null);l([f.property({readOnly:!0})],b.prototype,"minScale",void 0);l([f.property({readOnly:!0})],b.prototype,"maxScale",void 0);l([f.property({readOnly:!0})],b.prototype,"scales",void 0);l([f.property({cast:function(a){return Array.isArray(a)?a:"number"===typeof a?[a,a]:[256,256]}})],b.prototype,"size",void 0);l([f.reader("size",["rows","cols"])],b.prototype,"readSize",null);l([f.writer("size",
{cols:{type:d.Integer},rows:{type:d.Integer}})],b.prototype,"writeSize",null);l([f.property({type:m.SpatialReference,json:{write:!0}})],b.prototype,"spatialReference",void 0);return b=e=l([f.subclass("esri.layers.support.TileInfo")],b)}(f.declared(k))})},"esri/layers/support/LOD":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType".split(" "),
function(b,e,n,h,l,m,k){return function(a){function b(b){b=a.call(this,b)||this;b.level=0;b.levelValue=null;b.resolution=0;b.scale=0;return b}n(b,a);d=b;b.prototype.clone=function(){return new d({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})};var d;h([m.property({type:k.Integer,json:{write:!0}})],b.prototype,"level",void 0);h([m.property({type:String,json:{write:!0}})],b.prototype,"levelValue",void 0);h([m.property({type:Number,json:{write:!0}})],b.prototype,
"resolution",void 0);h([m.property({type:Number,json:{write:!0}})],b.prototype,"scale",void 0);return b=d=h([m.subclass("esri.layers.support.LOD")],b)}(m.declared(l))})},"esri/layers/support/TilemapCache":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper dojo/io-query ../../request ../../core/Accessor ../../core/Error ../../core/Handles ../../core/Logger ../../core/LRUMap ../../core/PooledArray ../../core/promiseUtils ../../core/watchUtils ../../core/accessorSupport/decorators ./Tilemap".split(" "),
function(b,e,n,h,l,m,k,a,f,d,c,q,r,x,z,v,w){var p=c.getLogger("esri.layers.support.TilemapCache");return function(a){function b(b){b=a.call(this)||this;b._handles=new d;b._pendingTilemapRequests={};b._availableLevels={};b.levels=5;b.cacheByteSize=2097152;b.request=k;return b}h(b,a);c=b;b.prototype.initialize=function(){var a=this;this._tilemapCache=new q(this.cacheByteSize,{sizeOfFunction:function(a){return a.byteSize}});this._handles.add([this.watch(["layer.parsedUrl","layer.tileServers?"],function(){return a._initializeTilemapDefinition()}),
z.init(this,"layer.tileInfo.lods",function(b){return a._initializeAvailableLevels(b)},!0)]);this._initializeTilemapDefinition()};b.prototype.destroy=function(){this._handles&&(this._handles.destroy(),this._handles=null)};b.prototype.castLevels=function(a){return 2>=a?(p.error("Minimum levels for Tilemap is 3, but got ",a),3):a};Object.defineProperty(b.prototype,"size",{get:function(){return 1<<this.levels},enumerable:!0,configurable:!0});b.prototype.getTilemap=function(a,b,c){return this._tilemapFromCache(a,
b,c,this._tmpTilemapDefinition)};b.prototype.fetchTilemap=function(a,b,c,d){var g=this;if(!this._availableLevels[a])return x.reject(new f("tilemap-cache:level-unavailable","Level "+a+" is unavailable in the service"));var e=this._tmpTilemapDefinition;if(a=this._tilemapFromCache(a,b,c,e))return x.resolve(a);var h=w.tilemapDefinitionId(e),p=this._pendingTilemapRequests[h];p||(p=w.Tilemap.fromDefinition(e,d).then(function(a){g._tilemapCache.set(h,a);delete g._pendingTilemapRequests[h];return a}).catch(function(a){delete g._pendingTilemapRequests[h];
return x.reject(a)}),this._pendingTilemapRequests[h]=p);return x.create(function(a,b){p.then(a,b)})};b.prototype.getAvailability=function(a,b,c){return this._availableLevels[a]?(a=this.getTilemap(a,b,c))?a.getAvailability(b,c):"unknown":"unavailable"};b.prototype.getAvailabilityUpsample=function(a,b,c,d){d.level=a;d.row=b;d.col=c;a=this.layer.tileInfo;for(a.updateTileInfo(d);;)if(b=this.getAvailability(d.level,d.row,d.col),"unavailable"===b){if(!a.upsampleTile(d))return"unavailable"}else return b};
b.prototype.fetchAvailability=function(a,b,c,d){return this._availableLevels[a]?this.fetchTilemap(a,b,c,d).always(function(d){return d instanceof w.Tilemap?(d=d.getAvailability(b,c),"unavailable"===d?x.reject(new f("tile-map:tile-unavailable","Tile is not available",{level:a,row:b,col:c})):d):d&&"cancel"===d.dojoType?x.reject(d):"unknown"}):x.reject(new f("tilemap-cache:level-unavailable","Level "+a+" is unavailable in the service"))};b.prototype.fetchAvailabilityUpsample=function(a,b,d,g,f){var e=
this;g.level=a;g.row=b;g.col=d;var h=this.layer.tileInfo;h.updateTileInfo(g);var p=this.fetchAvailability(a,b,d,f).catch(function(a){return a&&"cancel"===a.dojoType?x.reject(a):h.upsampleTile(g)?e.fetchAvailabilityUpsample(g.level,g.row,g.col,g):x.reject(a)}),k={id:g.id,level:a,row:b,col:d};a=function(a){var b=q.fetchAvailability(k.level,k.row,k.col,f);c._prefetches.push(b);p.always(function(){return b.cancel()});b.always(function(){return c._prefetches.removeUnordered(b)})};var q=this;for(b=0;c._prefetches.length<
c._maxPrefetch&&h.upsampleTile(k);++b)a(b);return p};b.prototype._initializeTilemapDefinition=function(){if(this.layer.parsedUrl){var a=this.layer.parsedUrl,b=a.query;b&&b.token||!this.layer.token||(b=n({},b,{token:this.layer.token}));this._tilemapCache.clear();this._tmpTilemapDefinition={service:{url:a.path,query:b?m.objectToQuery(b):null,tileServers:this.layer.tileServers,request:this.request,type:this.layer.type},width:this.size,height:this.size,level:0,row:0,col:0}}};b.prototype._tilemapFromCache=
function(a,b,c,d){a=this._getTilemapDefinition(a,b,c,d);a=w.tilemapDefinitionId(a);return this._tilemapCache.get(a)};b.prototype._getTilemapDefinition=function(a,b,c,d){d.level=a;d.row=b-b%this.size;d.col=c-c%this.size;return d};b.prototype._initializeAvailableLevels=function(a){var b=this;this._availableLevels={};a&&a.forEach(function(a){return b._availableLevels[a.level]=!0})};var c;b._maxPrefetch=4;b._prefetches=new r({initialSize:c._maxPrefetch});l([v.property({constructOnly:!0,type:Number})],
b.prototype,"levels",void 0);l([v.cast("levels")],b.prototype,"castLevels",null);l([v.property({readOnly:!0,dependsOn:["levels"],type:Number})],b.prototype,"size",null);l([v.property({constructOnly:!0,type:Number})],b.prototype,"cacheByteSize",void 0);l([v.property({constructOnly:!0})],b.prototype,"layer",void 0);l([v.property({constructOnly:!0})],b.prototype,"request",void 0);return b=c=l([v.subclass("esri.layers.support.TilemapCache")],b)}(v.declared(a))})},"esri/core/LRUMap":function(){define(["require",
"exports"],function(b,e){return function(){function b(b,e){void 0===b&&(b=0);this.sizeOfFunction=function(){return 1};this._sizeOf=0;this._cache=new Map;this._queue=[];if(0>=b)throw Error("LRU cache size must be bigger than zero!");this._maxSize=b;e&&(e.disposeFunction&&(this.disposeFunction=e.disposeFunction),e.sizeOfFunction&&(this.sizeOfFunction=e.sizeOfFunction))}Object.defineProperty(b.prototype,"length",{get:function(){return this._cache.size},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,
"size",{get:function(){return this._sizeOf},enumerable:!0,configurable:!0});b.prototype.clear=function(){var b=this;this._queue.length=0;this.disposeFunction&&this._cache.forEach(function(e,h){b.disposeFunction(h,e)});this._cache.clear();this._sizeOf=0};b.prototype.delete=function(b){var e=this._cache.get(b);return this._cache.delete(b)?(this._sizeOf-=this.sizeOfFunction(e),this._queue.splice(this._queue.indexOf(b),1),this.disposeFunction&&this.disposeFunction(b,e),!0):!1};b.prototype.forEach=function(b,
e){this._cache.forEach(b,e)};b.prototype.get=function(b){var e=this._cache.get(b);if(void 0!==e)return this._queue.splice(this._queue.indexOf(b),1),this._queue.unshift(b),e};b.prototype.has=function(b){return this._cache.has(b)};b.prototype.set=function(b,e){var h=this.get(b);void 0!==h?this._sizeOf-=this.sizeOfFunction(h):this._queue.unshift(b);this._sizeOf+=this.sizeOfFunction(e);this._cache.set(b,e);this._collect();return this};b.prototype._collect=function(){for(;this._queue.length&&this._sizeOf>
this._maxSize;){var b=this._queue.pop(),e=this._cache.get(b);this._cache.delete(b)&&(this._sizeOf-=this.sizeOfFunction(e),this.disposeFunction&&this.disposeFunction(b,e))}};return b}()})},"esri/core/PooledArray":function(){define(["require","exports","./arrayUtils","./HeapSort"],function(b,e,n,h){return function(){function b(b){var e=this;this.data=[];this._length=0;this._allocator=null;this._deallocator=function(a,b){return e.data[b]=void 0};this._shrink=function(){};this._hint=new n.RemoveHint;
if(b){b.initialSize&&(this.data=Array(b.initialSize));if(b.allocator&&(this._allocator=b.allocator,this._deallocator=b.deallocator,b.initialSize))for(var a=0;a<b.initialSize;++a)this.data[a]=this._allocator(a);b.shrink&&(this._shrink=function(){e.data.length>2*e.length&&(e.data.length=e.length)})}}b.prototype.toArray=function(){return this.data.slice(0,this.length)};Object.defineProperty(b.prototype,"length",{get:function(){return this._length},set:function(b){if(this._allocator)for(;this.data.length<
b;)this.data.push(this._allocator(this.data.length));if(this._deallocator)for(var e=b;e<this._length;++e)this._deallocator(this.data[e],e);this._length=b;this._shrink()},enumerable:!0,configurable:!0});b.prototype.clear=function(){this.length=0};b.prototype.equal=function(b){return n.equals(this.data,b.data)};b.prototype.push=function(b){this.data.length===this.length&&this._grow(2*(this.length+1));return this.data[this.length++]=b};b.prototype.pushArray=function(b){var e=this.length+b.length;e>=
this.data.length&&this._grow(Math.max(2*this.length,e));for(e=0;e<b.length;e++)this.data[this._length++]=b[e];return this.back()};b.prototype.pushNew=function(){this.data.length===this.length&&this._grow(2*(this.length+1));++this._length;return this.back()};b.prototype.pop=function(){if(0!==this.length){var b=this.data[this.length-1];--this.length;this._shrink();return b}};b.prototype.removeMany=function(b){var e=this,a=[];this.data=this.data.filter(function(f,d){if(d>=e.length)return!1;if(0>b.indexOf(f))return!0;
a.push(f);return!1});this._length=this.data.length;return a};b.prototype.removeUnordered=function(b){b=n.removeUnordered(this.data,b,this.length,this._hint);void 0!==b&&--this.length;return b};b.prototype.removeUnorderedMany=function(b){b=n.removeUnorderedMany(this.data,b,this.length,this._hint);this.length-=b.length;return b};b.prototype.front=function(){if(0!==this.length)return this.data[0]};b.prototype.back=function(){if(0!==this.length)return this.data[this.length-1]};b.prototype.swapElements=
function(b,e){var a;b>=this.length||e>=this.length||(a=[this.data[e],this.data[b]],this.data[b]=a[0],this.data[e]=a[1])};b.prototype.sort=function(b){h.sort(this.data,0,this.length,b)};b.prototype.some=function(b,e){for(var a=0;a<this.length;++a)if(b.call(e,this.data[a],a,this.data))return!0;return!1};b.prototype.find=function(b,e){for(var a=0;a<this.length;++a){var f=this.data[a];if(b.call(e,f,a,this.data))return f}};b.prototype.filter=function(e,h,a){a=a||new b;for(var f=0;f<this.length;++f)e.call(h,
this.data[f],f,this.data)&&a.push(this.data[f]);return a};b.prototype.forEach=function(b,e){for(var a=0;a<this.length;++a)b.call(e,this.data[a],a,this.data)};b.prototype.map=function(b,e){for(var a=Array(this.length),f=0;f<this.length;++f)a[f]=b.call(e,this.data[f],f,this.data);return a};b.prototype._grow=function(b){if(this._allocator)for(;this.data.length<b;)this.data.push(this._allocator(this.data.length))};return b}()})},"esri/core/arrayUtils":function(){define(["require","exports"],function(b,
e){function n(a,b,d){for(var c=a.length,f=0;f<c;f++)if(b.call(d,a[f],f,a))return f;return-1}function h(a,b,f,e){void 0===f&&(f=a.length);e=e||d;for(var c=Math.max(0,e.last-10),h=-1,k=c;k<f;++k)if(a[k]===b){h=k;break}if(-1===h){for(k=0;k<c;++k)if(a[k]===b){h=k;break}if(-1===h)return}a[h]=a[f-1];a.pop();e.last=h;return b}function l(a,b,d,f){void 0===d&&(d=a.length);var c=[];b.forEach(function(b){void 0!==h(a,b,d,f)&&(c.push(b),--d)});return c}function m(a,b){return-1===a.indexOf(b)}function k(a,b,d){return!a.some(b.bind(null,
d))}function a(a){return a}Object.defineProperty(e,"__esModule",{value:!0});e.findIndex=n;e.find=function(a,b,d){for(var c=a.length,f=0;f<c;f++){var e=a[f];if(b.call(d,e,f,a))return e}};e.unique=function(a){return a.filter(function(a,b,c){return c.indexOf(a)===b})};e.equals=function(a,b,d){if(!a&&!b)return!0;if(!a||!b||a.length!==b.length)return!1;if(d)for(var c=0;c<a.length;c++){if(!d(a[c],b[c]))return!1}else for(c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0};e.difference=function(a,b,d){var c;
d?(c=b.filter(k.bind(null,a,d)),a=a.filter(k.bind(null,b,d))):(c=b.filter(m.bind(null,a)),a=a.filter(m.bind(null,b)));return{added:c,removed:a}};e.intersect=function(a,b,d){return a&&b?d?a.filter(function(a){return-1<n(b,function(b){return d(a,b)})}):a.filter(function(a){return-1<b.indexOf(a)}):[]};e.constant=function(a,b){for(var c=Array(a),d=0;d<a;d++)c[d]=b;return c};e.range=function(a,b){void 0===b&&(b=a,a=0);for(var c=Array(b-a),d=a;d<b;d++)c[d-a]=d;return c};e.binaryIndexOf=function(a,b,d){for(var c=
a.length,f=0,e=c-1;f<e;){var h=f+Math.floor((e-f)/2);b>a[h]?f=h+1:e=h}e=a[f];return d?b>=a[c-1]?-1:e===b?f:f-1:e===b?f:-1};var f=function(){return function(){this.last=0}}();e.RemoveHint=f;var d=new f;b=function(){return function(a){var b=this;this._array=a;this._hint=new f;this.remove=function(a){return h(b._array,a,b._array.length,b._hint)};this.removeMany=function(a){return l(b._array,a,b._array.length,b._hint)}}}();e.UnorderedRemover=b;e.removeUnordered=h;e.removeUnorderedMany=l;e.keysOfMap=function(a){var b=
[];a.forEach(function(a,c){return b.push(c)});return b};e.keysOfSet=function(b,d){void 0===d&&(d=a);var c=[];b.forEach(function(a){return c.push(d(a))});return c};e.fromMapValues=function(a){if(Array.from)return Array.from(a.values());var b=Array(a.size),c=0;a.forEach(function(a){b[c++]=a});return b}})},"esri/core/HeapSort":function(){define([],function(){function b(b,e,l,m){for(var h=e,a=l>>>1,f=b[h-1];e<=a;){e=h<<1;e<l&&0>m(b[e-1],b[e])&&++e;var d=b[e-1];if(0>=m(d,f))break;b[h-1]=d;h=e}b[h-1]=f}
function e(b,e){return b<e?-1:b>e?1:0}return{sort:function(n,h,l,m){void 0===h&&(h=0);void 0===l&&(l=n.length);void 0===m&&(m=e);for(var k=l>>>1;k>h;k--)b(n,k,l,m);for(var a=h+1,k=l-1;k>h;k--)l=n[h],n[h]=n[k],n[k]=l,b(n,a,k,m);return n}}})},"esri/core/watchUtils":function(){define(["require","exports","dojo/Deferred","dojo/promise/Promise"],function(b,e,n,h){function l(a,b,c,d,f){f=a.watch(b,function(b,g,f,e){d&&!d(b)||c.call(a,b,g,f,e)},f);if(Array.isArray(b))for(var e=0;e<b.length;e++){var g=a.get(b[e]);
d&&d(g)&&c.call(a,g,g,b,a)}else g=a.get(b),d&&d(g)&&c.call(a,g,g,b,a);return f}function m(a,b,c,d,f){function e(){p&&(p.remove(),p=null)}var g=!1,p,k=new n(e),q=new h;q.cancel=k.cancel;q.isCanceled=k.isCanceled;q.isFulfilled=k.isFulfilled;q.isRejected=k.isRejected;q.isResolved=k.isResolved;q.then=k.then;q.remove=e;Object.freeze(q);p=l(a,b,function(b,d,f,h){g=!0;e();c&&c.call(a,b,d,f,h);k.resolve({value:b,oldValue:d,propertyName:f,target:h})},d,f);g&&e();return q}function k(a){return!!a}function a(a){return!a}
function f(a){return!0===a}function d(a){return!1===a}function c(a){return void 0!==a}function q(a){return void 0===a}function r(a,b,c,d){var f=Array.isArray(b)?b:-1<b.indexOf(",")?b.split(","):[b];b=a.watch(b,c,d);for(d=0;d<f.length;d++){var e=f[d].trim(),g=a.get(e);c.call(a,g,g,e,a)}return b}Object.defineProperty(e,"__esModule",{value:!0});e.init=r;e.watch=function(a,b,c,d){return a.watch(b,c,d)};e.once=function(a,b,c,d){return m(a,b,c,null,d)};e.when=function(a,b,c,d){return l(a,b,c,k,d)};e.whenOnce=
function(a,b,c,d){return m(a,b,c,k,d)};e.whenNot=function(b,c,d,f){return l(b,c,d,a,f)};e.whenNotOnce=function(b,c,d,f){return m(b,c,d,a,f)};e.whenTrue=function(a,b,c,d){return l(a,b,c,f,d)};e.whenTrueOnce=function(a,b,c,d){return m(a,b,c,f,d)};e.whenFalse=function(a,b,c,f){return l(a,b,c,d,f)};e.whenFalseOnce=function(a,b,c,f){return m(a,b,c,d,f)};e.whenDefined=function(a,b,d,f){return l(a,b,d,c,f)};e.whenDefinedOnce=function(a,b,d,f){return m(a,b,d,c,f)};e.whenUndefined=function(a,b,c,d){return l(a,
b,c,q,d)};e.whenUndefinedOnce=function(a,b,c,d){return m(a,b,c,q,d)};e.pausable=function(a,b,c,d){var f=!1,e=a.watch(b,function(b,d,e,h){f||c.call(a,b,d,e,h)},d);return{remove:function(){e.remove()},pause:function(){f=!0},resume:function(){f=!1}}};e.on=function(a,b,c,d,f,e,g){function h(b){var d=p[b];d&&(e&&e(d.target,b,a,c),d.handle.remove(),delete p[b])}var p={},k=r(a,b,function(b,g,e){h(e);b&&"function"===typeof b.on&&(p[e]={handle:b.on(c,d),target:b},f&&f(b,e,a,c))},g);return{remove:function(){k.remove();
for(var a in p)h(a)}}}})},"esri/layers/support/Tilemap":function(){define("require exports ../../core/tsSupport/assignHelper ../../request ../../core/Error ../../core/lang ../../core/promiseUtils".split(" "),function(b,e,n,h,l,m,k){function a(a){var b;"vector-tile"===a.service.type?b=a.service.url+"/tilemap/"+a.level+"/"+a.row+"/"+a.col+"/"+a.width+"/"+a.height:(b=a.service.tileServers,b=(b&&b.length?b[a.row%b.length]:a.service.url)+"/tilemap/"+a.level+"/"+a.row+"/"+a.col+"/"+a.width+"/"+a.height);
(a=a.service.query)&&(b=b+"?"+a);return b}Object.defineProperty(e,"__esModule",{value:!0});b=function(){function b(){this.location={left:0,top:0,width:0,height:0};this.byteSize=40}b.prototype.getAvailability=function(a,b){if(this._isAllAvailable)return"available";if(this._isAllUnvailable)return"unavailable";a=(a-this.location.top)*this.location.width+(b-this.location.left);b=a>>3;var c=this._tileAvailabilityBitSet;return 0>b||b>c.length?"unknown":c[b]&1<<a%8?"available":"unavailable"};b.prototype._updateFromData=
function(a){for(var b=!0,d=!0,f=new Uint8Array(Math.ceil(this.location.width*this.location.height/8)),e=0,h=0;h<a.length;h++){var k=h%8;a[h]?(d=!1,f[e]|=1<<k):b=!1;7===k&&++e}this._isAllUnvailable=d;this._isAllAvailable=b;this._isAllAvailable||this._isAllUnvailable||(this._tileAvailabilityBitSet=f,this.byteSize+=f.length)};b.fromDefinition=function(d,c){var f=d.service.request||h,e=d.row,m=d.col,z=d.width,v=d.height,w={query:{f:"json"}};c=c?n({},w,c):w;return f(a(d),c).then(function(a){return a.data}).catch(function(a){if(a&&
a.details&&422===a.details.httpStatus){a=[];for(var b=0,c=z*v;b<c;b++)a[b]=0;return{location:{top:e,left:m,width:z,height:v},valid:!0,data:a}}return k.reject(a)}).then(function(a){if(a.location&&(a.location.top!==e||a.location.left!==m||a.location.width!==z||a.location.height!==v))throw new l("tilemap:location-mismatch","Tilemap response for different location than requested",{response:a,definition:{top:e,left:m,width:z,height:v}});return b.fromJSON(a)})};b.fromJSON=function(a){b.validateJSON(a);
var c=new b;c.location=Object.freeze(m.clone(a.location));c._updateFromData(a.data);return Object.freeze(c)};b.validateJSON=function(a){if(!a||!a.location)throw new l("tilemap:missing-location","Location missing from tilemap response");if(!1===a.valid)throw new l("tilemap:invalid","Tilemap response was marked as invalid");if(!a.data)throw new l("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(a.data))throw new l("tilemap:data-mismatch","Data must be an array of numbers");
if(a.data.length!==a.location.width*a.location.height)throw new l("tilemap:data-mismatch","Number of data items does not match width/height of tilemap");};return b}();e.Tilemap=b;e.tilemapDefinitionId=function(a){return a.level+"/"+a.row+"/"+a.col+"/"+a.width+"/"+a.height};e.tilemapDefinitionUrl=a;e.default=b})},"esri/layers/mixins/OperationalLayer":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Error ../../core/MultiOriginJSONSupport ../../core/promiseUtils ../../core/urlUtils ../../core/accessorSupport/decorators ../../core/accessorSupport/read ../../core/accessorSupport/write ../../webdoc/support/opacityUtils".split(" "),
function(b,e,n,h,l,m,k,a,f,d,c,q,r){e=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.title="Layer";return b}n(b,a);e=b;b.prototype.writeListMode=function(a,b,c,d){d&&"ground"===d.layerContainerType?b[c]=a:a&&q.willPropertyWrite(this,c,{},d)&&(b[c]=a)};b.prototype.writeTitle=function(a,b){b.title=a||"Layer"};b.prototype.writeOperationalLayerType=function(a,b){a&&(b.layerType=a)};b.prototype.readOpacity=function(a,b,c){if(void 0!==b.opacity&&(!c||"web-map"===c.origin||"web-scene"===
c.origin))return b.opacity;if((!c||"service"===c.origin)&&b.drawingInfo&&void 0!==b.drawingInfo.transparency)return r.transparencyToOpacity(b.drawingInfo.transparency);if(b.layerDefinition&&b.layerDefinition.drawingInfo&&void 0!==b.layerDefinition.drawingInfo.transparency)return r.transparencyToOpacity(b.layerDefinition.drawingInfo.transparency)};b.prototype.readVisible=function(a,b){return!!b.visibility};b.prototype.read=function(a,b){var d=this,f=arguments;b&&(b.layer=this);c.readLoadable(this,
a,function(b){return d.inherited(f,[a,b])},b);return this};b.prototype.write=function(a,b){if(b&&b.origin){var c=b.origin+"/"+(b.layerContainerType||"operational-layers"),d=e.supportedTypes[c],d=d&&d[this.operationalLayerType];if("write"!==d&&"readwrite"!==d)return b.messages&&b.messages.push(new m("layer:unsupported","Layers ("+this.title+", "+this.id+") of type '"+this.declaredClass+"' are not supported in the context of '"+c+"'",{layer:this})),null;if(!this.url&&!x[this.operationalLayerType])return b.messages&&
b.messages.push(new m("layer:unsupported","Layers ("+this.title+", "+this.id+") of type '"+this.declaredClass+"' require a url to a service to be written to a '"+b.origin+"'",{layer:this})),null}return this.inherited(arguments,[a,b])};var e;h([d.property({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}}}}})],b.prototype,"id",void 0);h([d.property({type:String,json:{write:{ignoreOrigin:!0}}})],b.prototype,"listMode",void 0);h([d.writer("listMode")],
b.prototype,"writeListMode",null);h([d.property({type:String,json:{write:{ignoreOrigin:!0,allowNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}}}}})],b.prototype,"title",void 0);h([d.writer("title")],b.prototype,"writeTitle",null);h([d.property({type:String,json:{write:{ignoreOrigin:!0,writer:f.writeOperationalLayerUrl}}})],b.prototype,"url",void 0);h([d.property({type:String,json:{write:{target:"layerType",ignoreOrigin:!0}}})],b.prototype,"operationalLayerType",void 0);h([d.writer("operationalLayerType")],
b.prototype,"writeOperationalLayerType",null);h([d.property({type:Number,json:{write:{ignoreOrigin:!0}}})],b.prototype,"opacity",void 0);h([d.reader("opacity",["opacity","layerDefinition.drawingInfo.transparency","drawingInfo.transparency"])],b.prototype,"readOpacity",null);h([d.property({type:Boolean,json:{write:{target:"visibility",ignoreOrigin:!0}}})],b.prototype,"visible",void 0);h([d.reader("visible",["visibility"])],b.prototype,"readVisible",null);return b=e=h([d.subclass("esri.layers.mixins.OperationalLayer")],
b)}(d.declared(l,k));var x={GroupLayer:!0,WebTiledLayer:!0,OpenStreetMap:!0,ArcGISFeatureLayer:!0,CSV:!0,VectorTileLayer:!0,KML:!0,BingMapsAerial:!0,BingMapsRoad:!0,BingMapsHybrid:!0};(function(c){c.typeModuleMap={ArcGISFeatureLayer:function(){return a.create(function(a){return b(["../FeatureLayer"],a)})},ArcGISImageServiceLayer:function(){return a.create(function(a){return b(["../ImageryLayer"],a)})},ArcGISImageServiceVectorLayer:function(){return a.resolve(null)},ArcGISMapServiceLayer:function(){return a.create(function(a){return b(["../MapImageLayer"],
a)})},ArcGISSceneServiceLayer:function(){return a.create(function(a){return b(["../SceneLayer"],a)})},ArcGISStreamLayer:function(){return a.create(function(a){return b(["../StreamLayer"],a)})},ArcGISTiledElevationServiceLayer:function(){return a.create(function(a){return b(["../ElevationLayer"],a)})},ArcGISTiledImageServiceLayer:function(){return a.create(function(a){return b(["../TileLayer"],a)})},ArcGISTiledMapServiceLayer:function(){return a.create(function(a){return b(["../TileLayer"],a)})},BingMapsAerial:function(){return a.create(function(a){return b(["../BingMapsLayer"],
a)})},BingMapsRoad:function(){return a.create(function(a){return b(["../BingMapsLayer"],a)})},BingMapsHybrid:function(){return a.create(function(a){return b(["../BingMapsLayer"],a)})},CSV:function(){return a.create(function(a){return b(["../CSVLayer"],a)})},GeoRSS:function(){return a.create(function(a){return b(["../GeoRSSLayer"],a)})},GroupLayer:function(){return a.create(function(a){return b(["../GroupLayer"],a)})},IntegratedMeshLayer:function(){return a.create(function(a){return b(["../IntegratedMeshLayer"],
a)})},KML:function(){return a.create(function(a){return b(["../KMLLayer"],a)})},OpenStreetMap:function(){return a.create(function(a){return b(["../OpenStreetMapLayer"],a)})},PointCloudLayer:function(){return a.create(function(a){return b(["../PointCloudLayer"],a)})},VectorTileLayer:function(){return a.create(function(a){return b(["../VectorTileLayer"],a)})},WebTiledLayer:function(){return a.create(function(a){return b(["../WebTileLayer"],a)})},WMS:function(){return a.create(function(a){return b(["../WMSLayer"],
a)})}};c.supportedTypes={"web-scene/operational-layers":{ArcGISFeatureLayer:"readwrite",ArcGISImageServiceLayer:"readwrite",ArcGISMapServiceLayer:"readwrite",ArcGISSceneServiceLayer:"readwrite",ArcGISTiledElevationServiceLayer:"read",ArcGISTiledImageServiceLayer:"readwrite",ArcGISTiledMapServiceLayer:"readwrite",GroupLayer:"readwrite",IntegratedMeshLayer:"readwrite",PointCloudLayer:"readwrite",WebTiledLayer:"readwrite",CSV:"readwrite",VectorTileLayer:"readwrite",WMS:"readwrite"},"web-scene/basemap":{ArcGISTiledImageServiceLayer:"readwrite",
ArcGISTiledMapServiceLayer:"readwrite",WebTiledLayer:"readwrite",OpenStreetMap:"readwrite",VectorTileLayer:"readwrite",ArcGISImageServiceLayer:"readwrite",WMS:"readwrite",ArcGISMapServiceLayer:"readwrite"},"web-scene/ground":{ArcGISTiledElevationServiceLayer:"readwrite"},"web-map/operational-layers":{ArcGISImageServiceLayer:"readwrite",ArcGISImageServiceVectorLayer:"readwrite",ArcGISMapServiceLayer:"readwrite",ArcGISStreamLayer:"readwrite",ArcGISTiledImageServiceLayer:"readwrite",ArcGISTiledMapServiceLayer:"readwrite",
ArcGISFeatureLayer:"readwrite",BingMapsAerial:"readwrite",BingMapsRoad:"readwrite",BingMapsHybrid:"readwrite",CSV:"readwrite",GeoRSS:"readwrite",KML:"readwrite",VectorTileLayer:"readwrite",WMS:"readwrite",WebTiledLayer:"readwrite"},"web-map/basemap":{ArcGISImageServiceLayer:"readwrite",ArcGISImageServiceVectorLayer:"readwrite",ArcGISMapServiceLayer:"readwrite",ArcGISTiledImageServiceLayer:"readwrite",ArcGISTiledMapServiceLayer:"readwrite",OpenStreetMap:"readwrite",VectorTileLayer:"readwrite",WMS:"readwrite",
WebTiledLayer:"readwrite",BingMapsAerial:"readwrite",BingMapsRoad:"readwrite",BingMapsHybrid:"readwrite"}}})(e||(e={}));return e})},"esri/layers/mixins/PortalLayer":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Error ../../core/Logger ../../core/promiseUtils ../../core/urlUtils ../../core/accessorSupport/decorators ../../portal/Portal ../../portal/PortalItem".split(" "),function(b,e,n,h,l,m,k,a,f,d,c,
q){var r=k.getLogger("esri.layers.mixins.PortalLayer");return function(e){function k(){return null!==e&&e.apply(this,arguments)||this}n(k,e);Object.defineProperty(k.prototype,"portalItem",{set:function(a){a!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",a))},enumerable:!0,configurable:!0});k.prototype.writePortalItem=function(a,b,c){a&&a.id&&(b.itemId=a.id)};k.prototype.loadFromPortal=function(c){var d=this;return this.portalItem&&this.portalItem.id?a.create(function(a){return b(["../../portal/support/layersLoader"],
a)}).then(function(a){return a.load({instance:d,supportedTypes:c.supportedTypes,validateItem:c.validateItem,supportsData:c.supportsData}).catch(function(a){r.warn("Failed to load layer ("+d.title+", "+d.id+") portal item ("+d.portalItem.id+")\n  "+a);throw a;})}):a.resolve()};k.prototype.read=function(a,b){b&&(b.layer=this);return this.inherited(arguments)};k.prototype.write=function(a,b){var d=b&&b.portal,e=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||c.getDefault());return d&&e&&
!f.hasSamePortal(e.restUrl,d.restUrl)?(b.messages&&b.messages.push(new m("layer:cross-portal","The layer '"+this.title+" ("+this.id+")' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save the scene, set the layer.portalItem to null or save the scene to the same portal as the item associated with the layer",{layer:this})),null):this.inherited(arguments)};h([d.property({type:q})],k.prototype,"portalItem",null);h([d.writer("portalItem",{itemId:{type:String}})],
k.prototype,"writePortalItem",null);return k=h([d.subclass("esri.layers.mixins.PortalLayer")],k)}(d.declared(l))})},"esri/layers/support/rasterFormats/LercCodec":function(){define([],function(){var b={defaultNoDataValue:-3.4027999387901484E38,decode:function(n,h){var l;h=h||{};var m=h.inputOffset||0,k=h.encodedMaskData||null===h.encodedMaskData,a={},f=new Uint8Array(n,m,10);a.fileIdentifierString=String.fromCharCode.apply(null,f);if("CntZImage"!=a.fileIdentifierString.trim())throw"Unexpected file identifier string: "+
a.fileIdentifierString;m+=10;f=new DataView(n,m,24);a.fileVersion=f.getInt32(0,!0);a.imageType=f.getInt32(4,!0);a.height=f.getUint32(8,!0);a.width=f.getUint32(12,!0);a.maxZError=f.getFloat64(16,!0);m+=24;if(!k)if(f=new DataView(n,m,16),a.mask={},a.mask.numBlocksY=f.getUint32(0,!0),a.mask.numBlocksX=f.getUint32(4,!0),a.mask.numBytes=f.getUint32(8,!0),a.mask.maxValue=f.getFloat32(12,!0),m+=16,0<a.mask.numBytes){var k=new Uint8Array(Math.ceil(a.width*a.height/8)),f=new DataView(n,m,a.mask.numBytes),
d=f.getInt16(0,!0),c=2,q=0;do{if(0<d)for(;d--;)k[q++]=f.getUint8(c++);else for(var r=f.getUint8(c++),d=-d;d--;)k[q++]=r;d=f.getInt16(c,!0);c+=2}while(c<a.mask.numBytes);if(-32768!==d||q<k.length)throw"Unexpected end of mask RLE encoding";a.mask.bitset=k;m+=a.mask.numBytes}else 0===(a.mask.numBytes|a.mask.numBlocksY|a.mask.maxValue)&&(k=new Uint8Array(Math.ceil(a.width*a.height/8)),a.mask.bitset=k);f=new DataView(n,m,16);a.pixels={};a.pixels.numBlocksY=f.getUint32(0,!0);a.pixels.numBlocksX=f.getUint32(4,
!0);a.pixels.numBytes=f.getUint32(8,!0);a.pixels.maxValue=f.getFloat32(12,!0);m+=16;k=a.pixels.numBlocksX;f=a.pixels.numBlocksY;k+=0<a.width%k?1:0;d=f+(0<a.height%f?1:0);a.pixels.blocks=Array(k*d);c=1E9;for(r=q=0;r<d;r++)for(var x=0;x<k;x++){var z=0,f=new DataView(n,m,Math.min(10,n.byteLength-m)),v={};a.pixels.blocks[q++]=v;var w=f.getUint8(0);z++;v.encoding=w&63;if(3<v.encoding)throw"Invalid block encoding ("+v.encoding+")";if(2===v.encoding)m++,c=Math.min(c,0);else{if(0!==w&&2!==w){w>>=6;v.offsetType=
w;if(2===w)v.offset=f.getInt8(1),z++;else if(1===w)v.offset=f.getInt16(1,!0),z+=2;else if(0===w)v.offset=f.getFloat32(1,!0),z+=4;else throw"Invalid block offset type";c=Math.min(v.offset,c);if(1===v.encoding)if(w=f.getUint8(z),z++,v.bitsPerPixel=w&63,w>>=6,v.numValidPixelsType=w,2===w)v.numValidPixels=f.getUint8(z),z++;else if(1===w)v.numValidPixels=f.getUint16(z,!0),z+=2;else if(0===w)v.numValidPixels=f.getUint32(z,!0),z+=4;else throw"Invalid valid pixel count type";}m+=z;if(3!=v.encoding)if(0===
v.encoding){f=(a.pixels.numBytes-1)/4;if(f!==Math.floor(f))throw"uncompressed block has invalid length";z=new ArrayBuffer(4*f);w=new Uint8Array(z);w.set(new Uint8Array(n,m,4*f));z=new Float32Array(z);for(w=0;w<z.length;w++)c=Math.min(c,z[w]);v.rawData=z;m+=4*f}else 1===v.encoding&&(f=Math.ceil(v.numValidPixels*v.bitsPerPixel/8),z=new ArrayBuffer(4*Math.ceil(f/4)),w=new Uint8Array(z),w.set(new Uint8Array(n,m,f)),v.stuffedData=new Uint32Array(z),m+=f)}}a.pixels.minValue=c;a.eofOffset=m;n=null!=h.noDataValue?
h.noDataValue:b.defaultNoDataValue;var k=h.encodedMaskData,v=h.returnMask,f=0,d=a.pixels.numBlocksX,c=a.pixels.numBlocksY,q=Math.floor(a.width/d),r=Math.floor(a.height/c),x=2*a.maxZError,k=k||(a.mask?a.mask.bitset:null),p,m=new (h.pixelType||Float32Array)(a.width*a.height);v&&k&&(p=new Uint8Array(a.width*a.height));for(var v=new Float32Array(q*r),y,g,z=0;z<=c;z++)if(w=z!==c?r:a.height%c,0!==w)for(var u=0;u<=d;u++){var t=u!==d?q:a.width%d;if(0!==t){var A=z*a.width*r+u*q,C=a.width-t,B=a.pixels.blocks[f],
F,D;if(2>B.encoding){if(0===B.encoding)F=B.rawData;else{F=B.stuffedData;D=B.bitsPerPixel;y=B.numValidPixels;g=B.offset;var H=x,aa=v,ga=a.pixels.maxValue,P=(1<<D)-1,K=0,ja=void 0,M=0,X=void 0,O=void 0,L=Math.ceil((ga-g)/H);F[F.length-1]<<=8*(4*F.length-Math.ceil(D*y/8));for(ja=0;ja<y;ja++)0===M&&(O=F[K++],M=32),M>=D?(X=O>>>M-D&P,M-=D):(M=D-M,X=(O&P)<<M&P,O=F[K++],M=32-M,X+=O>>>M),aa[ja]=X<L?g+X*H:ga;F=v}D=0}else l=2===B.encoding?0:B.offset;var Q;if(k)for(g=0;g<w;g++){A&7&&(Q=k[A>>3],Q<<=A&7);for(y=
0;y<t;y++)A&7||(Q=k[A>>3]),Q&128?(p&&(p[A]=1),m[A++]=2>B.encoding?F[D++]:l):(p&&(p[A]=0),m[A++]=n),Q<<=1;A+=C}else if(2>B.encoding)for(g=0;g<w;g++){for(y=0;y<t;y++)m[A++]=F[D++];A+=C}else for(g=0;g<w;g++)if(m.fill)m.fill(l,A,A+t),A+=t+C;else{for(y=0;y<t;y++)m[A++]=l;A+=C}if(1===B.encoding&&D!==B.numValidPixels)throw"Block and Mask do not match";f++}}l=p;p={width:a.width,height:a.height,pixelData:m,minValue:a.pixels.minValue,maxValue:a.pixels.maxValue,noDataValue:n};l&&(p.maskData=l);h.returnEncodedMask&&
a.mask&&(p.encodedMaskData=a.mask.bitset?a.mask.bitset:null);if(h.returnFileInfo&&(p.fileInfo=e(a),h.computeUsedBitDepths)){h=p.fileInfo;l=a.pixels.numBlocksX*a.pixels.numBlocksY;Q={};for(F=0;F<l;F++)D=a.pixels.blocks[F],0===D.encoding?Q.float32=!0:1===D.encoding?Q[D.bitsPerPixel]=!0:Q[0]=!0;a=Object.keys(Q);h.bitDepths=a}return p}},e=function(b){return{fileIdentifierString:b.fileIdentifierString,fileVersion:b.fileVersion,imageType:b.imageType,height:b.height,width:b.width,maxZError:b.maxZError,eofOffset:b.eofOffset,
mask:b.mask?{numBlocksX:b.mask.numBlocksX,numBlocksY:b.mask.numBlocksY,numBytes:b.mask.numBytes,maxValue:b.mask.maxValue}:null,pixels:{numBlocksX:b.pixels.numBlocksX,numBlocksY:b.pixels.numBlocksY,numBytes:b.pixels.numBytes,maxValue:b.pixels.maxValue,minValue:b.pixels.minValue,noDataValue:this.noDataValue}}};return b})},"esri/support/LayersMixin":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/Collection ../core/collectionUtils ../core/Logger ../core/promiseUtils ../core/accessorSupport/decorators ../layers/Layer".split(" "),
function(b,e,n,h,l,m,k,a,f,d,c){function q(a,b,c){for(var d,f=0,g=a.length;f<g;f++)if(d=a.getItemAt(f),d[b]===c||d&&null!=d.layers&&(d=q(d.layers,b,c)))return d}var r=m.ofType(c),x=a.getLogger("esri.support.LayersMixin");return function(a){function b(b){var c=a.call(this,b)||this;c.layers=new r;c.layers.on("after-add",function(a){a=a.item;a.parent&&a.parent!==c&&"remove"in a.parent&&a.parent.remove(a);a.parent=c;c.layerAdded(a);"elevation"===a.type&&x.error("Layer '"+a.title+", id:"+a.id+"' of type '"+
a.type+"' is not supported as an operational layer and will therefore be ignored.")});c.layers.on("after-remove",function(a){a=a.item;a.parent=null;c.layerRemoved(a)});return c}n(b,a);b.prototype.destroy=function(){this.layers.drain(this.layerRemoved,this)};Object.defineProperty(b.prototype,"layers",{set:function(a){this._set("layers",k.referenceSetter(a,this._get("layers"),r))},enumerable:!0,configurable:!0});b.prototype.findLayerById=function(a){return q(this.layers,"id",a)};b.prototype.add=function(a,
b){var d=this,g=this.layers;b=g.getNextIndex(b);a instanceof c?(a.parent===this&&this.reorder(a,b),g.add(a,b)):f.isThenable(a)?a.then(function(a){d.destroyed||d.add(a,b)}):x.error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")};b.prototype.addMany=function(a,b){var c=this,d=this.layers;b=d.getNextIndex(b);a.slice().forEach(function(a){a.parent===c?c.reorder(a,b):(d.add(a,b),b+=1)})};b.prototype.findLayerByUid=function(a){return q(this.layers,"uid",a)};b.prototype.remove=
function(a){return this.layers.remove(a)};b.prototype.removeMany=function(a){return this.layers.removeMany(a)};b.prototype.removeAll=function(){return this.layers.removeAll()};b.prototype.reorder=function(a,b){return this.layers.reorder(a,b)};b.prototype.layerAdded=function(a){};b.prototype.layerRemoved=function(a){};h([d.property({type:r,cast:k.castForReferenceSetter})],b.prototype,"layers",null);return b=h([d.subclass("esri.support.LayersMixin")],b)}(d.declared(l))})},"esri/Viewpoint":function(){define("require exports ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./Camera ./core/JSONSupport ./core/accessorSupport/decorators ./geometry/support/jsonUtils ./geometry/support/typeUtils".split(" "),
function(b,e,n,h,l,m,k,a,f){function d(){return{enabled:!this.camera}}return function(b){function c(a){a=b.call(this)||this;a.rotation=0;a.scale=0;a.targetGeometry=null;a.camera=null;return a}n(c,b);e=c;c.prototype.castRotation=function(a){a%=360;0>a&&(a+=360);return a};c.prototype.clone=function(){return new e({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry?this.targetGeometry.clone():null,camera:this.camera?this.camera.clone():null})};var e;h([k.property({type:Number,
json:{write:!0,origins:{"web-scene":{write:{overridePolicy:d}}}}})],c.prototype,"rotation",void 0);h([k.cast("rotation")],c.prototype,"castRotation",null);h([k.property({type:Number,json:{write:!0,origins:{"web-scene":{write:{overridePolicy:d}}}}})],c.prototype,"scale",void 0);h([k.property({types:f.types,json:{read:a.fromJSON,write:!0,origins:{"web-scene":{read:a.fromJSON,write:{overridePolicy:d}}}}})],c.prototype,"targetGeometry",void 0);h([k.property({type:l,json:{write:!0}})],c.prototype,"camera",
void 0);return c=e=h([k.subclass("esri.Viewpoint")],c)}(k.declared(m))})},"esri/Camera":function(){define("require exports ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./core/JSONSupport ./core/accessorSupport/decorators ./geometry/Point ./views/3d/support/mathUtils".split(" "),function(b,e,n,h,l,m,k,a){return function(b){function d(a,c,d,f){a=b.call(this)||this;a.position=null;a.heading=0;a.tilt=0;a.fov=55;return a}n(d,b);c=d;d.prototype.getDefaults=function(a){if(!a.position)return{position:new k([0,
0,0])}};d.prototype.normalizeCtorArgs=function(a,b,c,d){a&&"object"===typeof a&&("x"in a||Array.isArray(a))&&(a={position:a},null!=b&&(a.heading=b),null!=c&&(a.tilt=c),null!=d&&(a.fov=d));return a};d.prototype.equals=function(a){return a?this.tilt===a.tilt&&this.heading===a.heading&&this.fov===a.fov&&this.position.equals(a.position):!1};d.prototype.clone=function(){return new c({position:this.position.clone(),heading:this.heading,tilt:this.tilt,fov:this.fov})};var c;h([m.property({type:k,json:{write:{isRequired:!0}}})],
d.prototype,"position",void 0);h([m.property({type:Number,json:{write:{isRequired:!0}}}),m.cast(function(b){return a.cyclicalDeg.normalize(b)})],d.prototype,"heading",void 0);h([m.property({type:Number,json:{write:{isRequired:!0}}}),m.cast(function(b){return a.clamp(b,-180,180)})],d.prototype,"tilt",void 0);h([m.property({json:{read:!1,write:!1}})],d.prototype,"fov",void 0);return d=c=h([m.subclass("esri.Camera")],d)}(m.declared(l))})},"esri/geometry/support/typeUtils":function(){define("require exports ../../core/accessorSupport/ensureType ../Extent ../Geometry ../Mesh ../Multipoint ../Point ../Polygon ../Polyline".split(" "),
function(b,e,n,h,l,m,k,a,f,d){Object.defineProperty(e,"__esModule",{value:!0});e.types={base:l,key:"type",typeMap:{extent:h,multipoint:k,point:a,polyline:d,polygon:f,mesh:m}};e.ensureType=n.ensureOneOfType(e.types)})},"esri/layers/graphics/sources/FeatureLayerSource":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/tsSupport/assignHelper dojo/io-query ../../../request ../../../core/Accessor ../../../core/Error ../../../core/Loadable ../../../core/promiseUtils ../../../core/accessorSupport/decorators ../../../tasks/QueryTask ../../../tasks/operations/queryAttachments".split(" "),
function(b,e,n,h,l,m,k,a,f,d,c,q,r,x){Object.defineProperty(e,"__esModule",{value:!0});b=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}n(b,a);b.prototype.load=function(){this.addResolvingPromise(this._fetchService());return this.when()};Object.defineProperty(b.prototype,"queryTask",{get:function(){var a=this.layer,b=a.parsedUrl,c=a.gdbVersion;return new r({url:null!=a.dynamicDataSource?b.path+"?"+m.objectToQuery(b.query):b.path,gdbVersion:c})},enumerable:!0,configurable:!0});
b.prototype.addAttachment=function(a,b){var d=this;return this.load().then(function(){var g=a.attributes[d.layer.objectIdField];return k(d.layer.parsedUrl.path+"/"+g+"/addAttachment",{body:b,query:l({f:"json"},d.layer.parsedUrl.query,{token:d.layer.token}),responseType:"json"}).then(function(a){return d._createFeatureEditResult(a.data.addAttachmentResult)}).catch(function(a){return c.reject(d._createAttachmentErrorResult(g,a))})})};b.prototype.updateAttachment=function(a,b,d){var g=this;return this.load().then(function(){var f=
a.attributes[g.layer.objectIdField];return k(g.layer.parsedUrl.path+"/"+f+"/updateAttachment",{body:d,query:l({f:"json"},g.layer.parsedUrl.query,{attachmentId:b,token:g.layer.token}),responseType:"json"}).then(function(a){return g._createFeatureEditResult(a.data.updateAttachmentResult)}).catch(function(a){return c.reject(g._createAttachmentErrorResult(f,a))})})};b.prototype.applyEdits=function(a){var b=this;return this.load().then(function(){var c=a.addFeatures.map(b._serializeFeature,b),d=a.updateFeatures.map(b._serializeFeature,
b),f=b._getFeatureIds(a.deleteFeatures),c={f:"json",adds:c.length?JSON.stringify(c):null,updates:d.length?JSON.stringify(d):null,deletes:f.length?f.join(","):null};return k(b.layer.parsedUrl.path+"/applyEdits",{query:c,method:"post",responseType:"json"})}).then(function(a){return b._createEditsResult(a)})};b.prototype.deleteAttachments=function(a,b){var d=this;return this.load().then(function(){var g=a.attributes[d.layer.objectIdField];return k(d.layer.parsedUrl.path+"/"+g+"/deleteAttachments",{query:l({f:"json"},
d.layer.parsedUrl.query,{token:d.layer.token,attachmentIds:b.join(",")}),method:"post",responseType:"json"}).then(function(a){return a.data.deleteAttachmentResults.map(d._createFeatureEditResult)}).catch(function(a){return c.reject(d._createAttachmentErrorResult(g,a))})})};b.prototype.queryAttachments=function(a){var b=this,d=this.layer,g=d.token,f=d.parsedUrl,e=f.path;return this.load().then(function(){var d={query:l({},f.query,{f:"json",token:g}),responseType:"json"};if(!b.layer.get("capabilities.query.supportsAttachments")){for(var h=
a.objectIds,p=[],q=0;q<h.length;q++)p.push(k(e+"/"+h[q]+"/attachments",d));return c.all(p).then(function(a){return h.map(function(b,c){return{parentObjectId:b,attachmentInfos:a[c].data.attachmentInfos}})}).then(function(a){return x.processAttachmentQueryResult(a,e,g)})}return b.queryTask.executeAttachmentQuery(a,d)})};b.prototype.queryFeatures=function(a,b){var c=this;return this.load().then(function(){return c.queryTask.execute(a,b)})};b.prototype.queryFeaturesJSON=function(a,b){var c=this;return this.load().then(function(){return c.queryTask.executeJSON(a,
b)})};b.prototype.queryObjectIds=function(a,b){var c=this;return this.load().then(function(){return c.queryTask.executeForIds(a,b)})};b.prototype.queryFeatureCount=function(a,b){var c=this;return this.load().then(function(){return c.queryTask.executeForCount(a,b)})};b.prototype.queryExtent=function(a,b){var c=this;return this.load().then(function(){return c.queryTask.executeForExtent(a,b)})};b.prototype.queryRelatedFeatures=function(a){var b=this;return this.load().then(function(){return b.queryTask.executeRelationshipQuery(a)})};
b.prototype._fetchService=function(){var a=this;return k(this.layer.parsedUrl.path,{query:l({f:"json"},this.layer.parsedUrl.query),responseType:"json"}).then(function(b){a.layerDefinition=b.data})};b.prototype._serializeFeature=function(a){var b=a.geometry;a=a.attributes;return{geometry:b&&b.toJSON(),attributes:a}};b.prototype._getFeatureIds=function(a){var b=a[0];return b?"objectId"in b?this._getIdsFromFeatureIdentifier(a):this._getIdsFromFeatures(a):[]};b.prototype._getIdsFromFeatures=function(a){var b=
this.layer.objectIdField;return a.map(function(a){return a.attributes&&a.attributes[b]})};b.prototype._getIdsFromFeatureIdentifier=function(a){return a.map(function(a){return a.objectId})};b.prototype._createEditsResult=function(a){a=a.data;return{addFeatureResults:a.addResults?a.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:a.updateResults?a.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:a.deleteResults?a.deleteResults.map(this._createFeatureEditResult,
this):[]}};b.prototype._createFeatureEditResult=function(a){var b=!0===a.success?null:a.error||{code:void 0,description:void 0};return{objectId:a.objectId,globalId:a.globalId,error:b?new f("feature-layer-source:edit-failure",b.description,{code:b.code}):null}};b.prototype._createAttachmentErrorResult=function(a,b){return{objectId:a,globalId:null,error:new f("feature-layer-source:attachment-failure",b.details.messages&&b.details.messages[0]||b.message,{code:b.details.httpStatus||b.details.messageCode})}};
h([q.property({constructOnly:!0})],b.prototype,"layer",void 0);h([q.property({readOnly:!0,dependsOn:["layer.parsedUrl","layer.gdbVersion","layer.dynamicDataSource"]})],b.prototype,"queryTask",null);return b=h([q.subclass("esri.layers.graphics.sources.FeatureLayerSource")],b)}(q.declared(a,d));e.default=b})},"esri/tasks/QueryTask":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../core/tsSupport/assignHelper ../geometry ../core/accessorSupport/decorators ./Task ./operations/query ./operations/queryAttachments ./operations/queryRelatedRecords ./support/AttachmentQuery ./support/FeatureSet ./support/Query ./support/RelationshipQuery".split(" "),
function(b,e,n,h,l,m,k,a,f,d,c,q,r,x,z,v){return function(b){function f(a){a=b.call(this,a)||this;a.gdbVersion=null;a.source=null;return a}n(f,b);f.prototype.execute=function(a,b){return this.executeJSON(a,b).then(function(a){return x.fromJSON(a)})};f.prototype.executeJSON=function(a,b){return d.executeQuery(this.parsedUrl,this._normalizeQuery(a),m({},this.requestOptions,b)).then(function(a){return a.data})};f.prototype.executeForCount=function(a,b){return d.executeQueryForCount(this.parsedUrl,this._normalizeQuery(a),
m({},this.requestOptions,b)).then(function(a){return a.data.count})};f.prototype.executeForExtent=function(a,b){return d.executeQueryForExtent(this.parsedUrl,this._normalizeQuery(a),m({},this.requestOptions,b)).then(function(a){return{count:a.data.count,extent:k.Extent.fromJSON(a.data.extent)}})};f.prototype.executeForIds=function(a,b){return d.executeQueryForIds(this.parsedUrl,this._normalizeQuery(a),m({},this.requestOptions,b)).then(function(a){return a.data.objectIds})};f.prototype.executeRelationshipQuery=
function(a,b){if(this.gdbVersion||this.source)a=a.clone().set({gdbVersion:this.gdbVersion||a.gdbVersion,source:this.source||a.source});return q.executeRelationshipQuery(this.parsedUrl,a,m({},this.requestOptions,b)).then(function(a){var b=a.data,c={};Object.keys(b).forEach(function(a){return c[a]=x.fromJSON(b[a])});return c})};f.prototype.executeAttachmentQuery=function(a,b){var d=this,g=b&&b.query&&b.query.token;return c.executeAttachmentQuery(this.parsedUrl,a,m({},this.requestOptions,b)).then(function(a){return c.processAttachmentQueryResult(a.data.attachmentGroups,
d.parsedUrl.path,g)})};f.prototype._normalizeQuery=function(a){return this.gdbVersion||this.source?a.clone().set({gdbVersion:this.gdbVersion||a.gdbVersion,source:this.source||a.source}):a};h([a.property()],f.prototype,"gdbVersion",void 0);h([a.property()],f.prototype,"source",void 0);h([l(0,a.cast(z))],f.prototype,"execute",null);h([l(0,a.cast(z))],f.prototype,"executeJSON",null);h([l(0,a.cast(z))],f.prototype,"executeForCount",null);h([l(0,a.cast(z))],f.prototype,"executeForExtent",null);h([l(0,
a.cast(z))],f.prototype,"executeForIds",null);h([l(0,a.cast(v))],f.prototype,"executeRelationshipQuery",null);h([l(0,a.cast(r))],f.prototype,"executeAttachmentQuery",null);return f=h([a.subclass("esri.tasks.QueryTask")],f)}(a.declared(f))})},"esri/tasks/Task":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../core/tsSupport/assignHelper ../core/Accessor ../core/urlUtils ../core/accessorSupport/decorators".split(" "),
function(b,e,n,h,l,m,k,a,f){return function(b){function c(a){a=b.call(this)||this;a.requestOptions=null;a.url=null;return a}n(c,b);c.prototype.normalizeCtorArgs=function(a,b){return"string"!==typeof a?a:m({url:a},b)};Object.defineProperty(c.prototype,"parsedUrl",{get:function(){return this._parseUrl(this.url)},enumerable:!0,configurable:!0});c.prototype._parseUrl=function(b){return b?a.urlToObject(b):null};c.prototype._encode=function(a,b,c){var d={},f;for(f in a)if("declaredClass"!==f){var e=a[f];
if(null!=e&&"function"!==typeof e)if(Array.isArray(e)){d[f]=[];for(var h=0;h<e.length;h++)d[f][h]=this._encode(e[h])}else"object"===typeof e?e.toJSON&&(e=e.toJSON(c&&c[f]),d[f]=b?e:JSON.stringify(e)):d[f]=e}return d};h([f.property({readOnly:!0,dependsOn:["url"]})],c.prototype,"parsedUrl",null);h([f.property()],c.prototype,"requestOptions",void 0);h([f.property({type:String})],c.prototype,"url",void 0);return c=h([f.subclass("esri.tasks.Task")],c)}(f.declared(k))})},"esri/tasks/operations/query":function(){define("require exports ../../core/tsSupport/assignHelper ../../request ../../core/urlUtils ../../geometry/support/jsonUtils ../../geometry/support/normalizeUtils ./pbfQueryUtils ./urlUtils".split(" "),
function(b,e,n,h,l,m,k,a,f){function d(a,b){var c=a.geometry;a=a.toJSON();c&&(a.geometry=JSON.stringify(c),a.geometryType=m.getJsonType(c),a.inSR=c.spatialReference.wkid||JSON.stringify(c.spatialReference));a.groupByFieldsForStatistics&&(a.groupByFieldsForStatistics=a.groupByFieldsForStatistics.join(","));a.objectIds&&(a.objectIds=a.objectIds.join(","));a.orderByFields&&(a.orderByFields=a.orderByFields.join(","));!a.outFields||b&&(b.returnCountOnly||b.returnExtentOnly||b.returnIdsOnly)?delete a.outFields:
-1!==a.outFields.indexOf("*")?a.outFields="*":a.outFields=a.outFields.join(",");a.outSR?a.outSR=a.outSR.wkid||JSON.stringify(a.outSR):c&&(a.returnGeometry||a.returnCentroid)&&(a.outSR=a.inSR);a.returnGeometry&&delete a.returnGeometry;a.outStatistics&&(a.outStatistics=JSON.stringify(a.outStatistics));a.pixelSize&&(a.pixelSize=JSON.stringify(a.pixelSize));a.quantizationParameters&&(a.quantizationParameters=JSON.stringify(a.quantizationParameters));a.source&&(a.layer=JSON.stringify({source:a.source}),
delete a.source);a.timeExtent&&(b=a.timeExtent,a.time=[null!=b.startTime?b.startTime:"null",null!=b.endTime?b.endTime:"null"],delete a.timeExtent);return a}function c(a,b,c,e,m){void 0===e&&(e={});var q="string"===typeof a?l.urlToObject(a):a;a=b.geometry?[b.geometry]:[];e.responseType="pbf"===c?"array-buffer":"json";return k.normalizeCentralMeridian(a,null,e).then(function(a){if(a=a&&a[0])b=b.clone(),b.geometry=a;a=f.mapParameters(n({},q.query,{f:c},m,d(b,m)));return h(q.path+"/query",n({},e,{query:a}))})}
Object.defineProperty(e,"__esModule",{value:!0});e.queryToQueryStringParameters=d;e.executeQuery=function(a,b,d){return c(a,b,"json",d)};e.executeQueryPBF=function(b,d,f){return c(b,d,"pbf",f).then(function(b){var c=a.parsePBFFeatureQuery(b.data);b.data=c;return b})};e.executeQueryForIds=function(a,b,d){return c(a,b,"json",d,{returnIdsOnly:!0})};e.executeQueryForCount=function(a,b,d){return c(a,b,"json",d,{returnIdsOnly:!0,returnCountOnly:!0})};e.executeQueryForExtent=function(a,b,d){return c(a,b,
"json",d,{returnExtentOnly:!0,returnCountOnly:!0}).then(function(a){var b=a.data;if(!b.hasOwnProperty("extent")){if(b.features)throw Error("Layer does not support extent calculation.");if(b.hasOwnProperty("count"))throw Error("Layer does not support extent calculation.");}return a})}})},"esri/geometry/support/normalizeUtils":function(){define("require exports ../../config ../../core/Error ../../core/Logger ../../core/promiseUtils ../Polygon ../Polyline ../SpatialReference ./spatialReferenceUtils ./webMercatorUtils ../../tasks/GeometryService".split(" "),
function(b,e,n,h,l,m,k,a,f,d,c,q){function r(a){return"polygon"===a.type?a.rings:a.paths}function x(a,b){return Math.ceil((a-b)/(2*b))}function z(a,b){for(var c=0,d=r(a);c<d.length;c++)for(var g=0,f=d[c];g<f.length;g++)f[g][0]+=b;return a}function v(a){for(var b=[],c=0,d=0,g=0;g<a.length;g++){for(var f=a[g],e=null,h=0;h<f.length;h++)e=f[h],b.push(e),0===h?d=c=e[0]:(c=Math.min(c,e[0]),d=Math.max(d,e[0]));e&&b.push([(c+d)/2,0])}return b}function w(b,c){if(!(b instanceof a||b instanceof k))throw t.error("straightLineDensify: the input geometry is neither polyline nor polygon"),
new h("straightLineDensify: the input geometry is neither polyline nor polygon");for(var d=[],g=0,f=r(b);g<f.length;g++){var e=f[g],p=[];d.push(p);p.push([e[0][0],e[0][1]]);for(var l=0;l<e.length-1;l++){var q=e[l][0],m=e[l][1],y=e[l+1][0],u=e[l+1][1],n=Math.sqrt((y-q)*(y-q)+(u-m)*(u-m)),x=(u-m)/n,v=(y-q)/n,z=n/c;if(1<z){for(var B=1;B<=z-1;B++){var A=B*c;p.push([v*A+q,x*A+m])}n=(n+Math.floor(z-1)*c)/2;p.push([v*n+q,x*n+m])}p.push([y,u])}}return"polygon"===b.type?new k({rings:d,spatialReference:b.spatialReference}):
new a({paths:d,spatialReference:b.spatialReference})}function p(a,b,d){b&&(a=w(a,1E6),a=c.webMercatorToGeographic(a,!0));d&&(a=z(a,d));return a}function y(a,b,c){if(Array.isArray(a)){var d=a[0];if(d>b){var g=x(d,b);a[0]=d+-2*g*b}else d<c&&(g=x(d,c),a[0]=d+-2*g*c)}else d=a.x,d>b?(g=x(d,b),a=a.clone().offset(-2*g*b,0)):d<c&&(g=x(d,c),a=a.clone().offset(-2*g*c,0));return a}function g(a,b){for(var c=-1,d=function(d){var g=b.cutIndexes[d],f=b.geometries[d],e=r(f);d=function(a){var b=e[a];b.some(function(c){if(!(180>
c[0])){for(var d=c=0;d<b.length;d++){var g=b[d][0];c=g>c?g:c}c=Number(c.toFixed(9));c=-360*x(c,180);for(d=0;d<b.length;d++)g=f.getPoint(a,d),f.setPoint(a,d,g.clone().offset(c,0))}return!0})};for(var h=0;h<e.length;h++)d(h);if(g===c)if("polygon"===a[0].type)for(d=0,h=r(f);d<h.length;d++)a[g]=a[g].addRing(h[d]);else{if("polyline"===a[0].type)for(d=0,h=r(f);d<h.length;d++)a[g]=a[g].addPath(h[d])}else c=g,a[g]=f},g=0;g<b.cutIndexes.length;g++)d(g);return a}function u(b,f,e){if(!Array.isArray(b))return u([b],
f);f||(C||(C=new q({url:n.geometryServiceUrl})),f=C);for(var h,l,t,r,v,B,w,F=0,D=[],L=[],Q=0;Q<b.length;Q++){var G=b[Q];if(G)if(h||(h=G.spatialReference,l=d.getInfo(h),B=(t=h.isWebMercator)?102100:4326,r=A[B].maxX,v=A[B].minX,w=A[B].plus180Line,B=A[B].minus180Line),l)if("mesh"===G.type)L.push(G);else if("point"===G.type)L.push(y(G.clone(),r,v));else if("multipoint"===G.type)G=G.clone(),G.points=G.points.map(function(a){return y(a,r,v)}),L.push(G);else if("extent"===G.type){var V=G.clone(),G=V._normalize(!1,
!1,l);L.push(G.rings?new k(G):G)}else if(G.extent){var V=G.extent,U=2*x(V.xmin,v)*r,G=0===U?G.clone():z(G.clone(),U);V.offset(U,0);V.intersects(w)&&V.xmax!==r?(F=V.xmax>F?V.xmax:F,G=p(G,t),D.push(G),L.push("cut")):V.intersects(B)&&V.xmin!==v?(F=2*V.xmax*r>F?2*V.xmax*r:F,G=p(G,t,360),D.push(G),L.push("cut")):L.push(G)}else L.push(G.clone());else L.push(G);else L.push(G)}h=x(F,r);l=-90;w=h;for(F=new a;0<h;)Q=-180+360*h,F.addPath([[Q,l],[Q,-1*l]]),l*=-1,h--;if(0<D.length&&0<w)return f.cut(D,F,e).then(function(a){return g(D,
a)}).then(function(a){for(var d=[],g=[],h=0;h<L.length;h++){var k=L[h];if("cut"!==k)g.push(k);else{var k=a.shift(),p=b[h];"polygon"===p.type&&p.rings&&1<p.rings.length&&k.rings.length>=p.rings.length?(d.push(k),g.push("simplify")):g.push(t?c.geographicToWebMercator(k):k)}}return d.length?f.simplify(d,e).then(function(a){for(var b=[],d=0;d<g.length;d++){var f=g[d];"simplify"!==f?b.push(f):b.push(t?c.geographicToWebMercator(a.shift()):a.shift())}return b}):g});h=[];for(l=0;l<L.length;l++)w=L[l],"cut"!==
w?h.push(w):(w=D.shift(),h.push(!0===t?c.geographicToWebMercator(w):w));return m.resolve(h)}Object.defineProperty(e,"__esModule",{value:!0});var t=l.getLogger("esri.geometry.support.normalizeUtils"),A={102100:{maxX:2.0037508342788905E7,minX:-2.0037508342788905E7,plus180Line:new a({paths:[[[2.0037508342788905E7,-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:f.WebMercator}),minus180Line:new a({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,
2.0037508342788905E7]]],spatialReference:f.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new a({paths:[[[180,-180],[180,180]]],spatialReference:f.WebMercator}),minus180Line:new a({paths:[[[-180,-180],[-180,180]]],spatialReference:f.WebMercator})}};e.straightLineDensify=w;var C;e.normalizeCentralMeridian=u;e.getDenormalizedExtent=function(a){var b;if(!a)return null;var c=a.extent;if(!c)return null;var g=a.spatialReference&&d.getInfo(a.spatialReference);if(!g)return c;var g=g.valid,f=g[0],g=g[1],
e=c.width,h=c.xmin;b=c.xmax;b=[b,h];h=b[0];b=b[1];if("extent"===a.type||0===e||e<=g||e>2*g||h<f||b>g)return c;var k;switch(a.type){case "polygon":if(1<a.rings.length)k=v(a.rings);else return c;break;case "polyline":if(1<a.paths.length)k=v(a.paths);else return c;break;case "multipoint":k=a.points}a=c.clone();for(f=0;f<k.length;f++){var p=k[f][0];0>p?(p+=g,b=Math.max(p,b)):(p-=g,h=Math.min(p,h))}a.xmin=h;a.xmax=b;return a.width<e?(a.xmin-=g,a.xmax-=g,a):c}})},"esri/tasks/GeometryService":function(){define("../core/lang ../core/kebabDictionary ../core/accessorSupport/ensureType ../geometry/Extent ../geometry/Multipoint ../geometry/Polyline ../geometry/Polygon ../geometry/support/jsonUtils ../request ./Task ./support/ProjectParameters".split(" "),
function(b,e,n,h,l,m,k,a,f,d,c){var q=e({MGRS:"mgrs",USNG:"usng",UTM:"utm",GeoRef:"geo-ref",GARS:"gars",DMS:"dms",DDM:"ddm",DD:"dd"}),r=n.ensureType(c);e=d.createSubclass({declaredClass:"esri.tasks.GeometryService",areasAndLengths:function(a,c){a={query:b.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON())};if(this.requestOptions||c)a=b.mixin({},this.requestOptions,c,a);return f(this.parsedUrl.path+"/areasAndLengths",a).then(function(a){return a.data})},autoComplete:function(a,c,d){var e=a[0].spatialReference;
a={query:b.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(e.toJSON()),polygons:JSON.stringify(this._encodeGeometries(a).geometries),polylines:JSON.stringify(this._encodeGeometries(c).geometries)})};if(this.requestOptions||d)a=b.mixin({},this.requestOptions,d,a);return f(this.parsedUrl.path+"/autoComplete",a).then(function(a){return(a.data.geometries||[]).map(function(a){return new k({spatialReference:e,rings:a.rings})})})},buffer:function(a,c){var d=b.mixin({},this.parsedUrl.query,{f:"json"},
a.toJSON()),e=a.outSpatialReference||a.geometries[0].spatialReference;a={query:d};if(this.requestOptions||c)a=b.mixin({},this.requestOptions,c,a);return f(this.parsedUrl.path+"/buffer",a).then(function(a){return(a.data.geometries||[]).map(function(a){return new k({spatialReference:e,rings:a.rings})})})},cut:function(c,d,e){var h=c[0].spatialReference,k=c.map(function(a){return a.toJSON()});c={query:b.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(h.toJSON()),target:JSON.stringify({geometryType:a.getJsonType(c[0]),
geometries:k}),cutter:JSON.stringify(d.toJSON())})};if(this.requestOptions||e)c=b.mixin({},this.requestOptions,e,c);return f(this.parsedUrl.path+"/cut",c).then(function(b){b=b.data;return{cutIndexes:b.cutIndexes,geometries:(b.geometries||[]).map(function(b){return a.fromJSON(b).set("spatialReference",h)})}})},convexHull:function(c,d){var e=c[0].spatialReference;c={query:b.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(e.toJSON()),geometries:JSON.stringify(this._encodeGeometries(c))})};
if(this.requestOptions||d)c=b.mixin({},this.requestOptions,d,c);return f(this.parsedUrl.path+"/convexHull",c).then(function(b){return a.fromJSON(b.data.geometry).set("spatialReference",e)})},densify:function(c,d){var e=b.mixin({},this.parsedUrl.query,{f:"json"},c.toJSON()),h=c.geometries[0].spatialReference;c={query:e};if(this.requestOptions||d)c=b.mixin({},this.requestOptions,d,c);return f(this.parsedUrl.path+"/densify",c).then(function(b){return(b.data.geometries||[]).map(function(b){return a.fromJSON(b).set("spatialReference",
h)})})},difference:function(c,d,e){var h=c[0].spatialReference;c={query:b.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(h.toJSON()),geometries:JSON.stringify(this._encodeGeometries(c)),geometry:JSON.stringify({geometryType:a.getJsonType(d),geometry:d.toJSON()})})};if(this.requestOptions||e)c=b.mixin({},this.requestOptions,e,c);return f(this.parsedUrl.path+"/difference",c).then(function(b){return(b.data.geometries||[]).map(function(b){return a.fromJSON(b).set("spatialReference",h)})})},
distance:function(a,c){a={query:b.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON())};if(this.requestOptions||c)a=b.mixin({},this.requestOptions,c,a);return f(this.parsedUrl.path+"/distance",a).then(this._handleDistanceResponse)},fromGeoCoordinateString:function(a,c){var d={};d.sr=null!=a.sr&&"object"===typeof a.sr?a.sr.wkid||JSON.stringify(a.sr):a.sr;d.strings=JSON.stringify(a.strings);d.conversionType=q.toJSON(a.conversionType||"mgrs");d.conversionMode=a.conversionMode;a={query:b.mixin({},this.parsedUrl.query,
{f:"json"},d)};if(this.requestOptions||c)a=b.mixin({},this.requestOptions,c,a);return f(this.parsedUrl.path+"/fromGeoCoordinateString",a).then(this._handleFromGeoCoordinateResponse)},generalize:function(c,d){var e=b.mixin({},this.parsedUrl.query,{f:"json"},c.toJSON()),h=c.geometries[0].spatialReference;c={query:e};if(this.requestOptions||d)c=b.mixin({},this.requestOptions,d,c);return f(this.parsedUrl.path+"/generalize",c).then(function(b){return(b.data.geometries||[]).map(function(b){return a.fromJSON(b).set("spatialReference",
h)})})},intersect:function(c,d,e){var h=c[0].spatialReference;c={query:b.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(h.toJSON()),geometries:JSON.stringify(this._encodeGeometries(c)),geometry:JSON.stringify({geometryType:a.getJsonType(d),geometry:d.toJSON()})})};if(this.requestOptions||e)c=b.mixin({},this.requestOptions,e,c);return f(this.parsedUrl.path+"/intersect",c).then(function(b){return(b.data.geometries||[]).map(function(b){return a.fromJSON(b).set("spatialReference",h)})})},lengths:function(a,
c){a={query:b.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON())};if(this.requestOptions||c)a=b.mixin({},this.requestOptions,c,a);return f(this.parsedUrl.path+"/lengths",a).then(function(a){return a.data})},labelPoints:function(c,d){var e=c.map(function(a){return a.toJSON()}),h=c[0].spatialReference;c={query:b.mixin({},this.parsedUrl.query,{f:"json",sr:h.wkid?h.wkid:JSON.stringify(h.toJSON()),polygons:JSON.stringify(e)})};if(this.requestOptions||d)c=b.mixin({},this.requestOptions,d,c);return f(this.parsedUrl.path+
"/labelPoints",c).then(function(b){return(b.data.labelPoints||[]).map(function(b){return a.fromJSON(b).set("spatialReference",h)})})},offset:function(c,d){var e=b.mixin({},this.parsedUrl.query,{f:"json"},c.toJSON()),h=c.geometries[0].spatialReference;c={query:e};if(this.requestOptions||d)c=b.mixin({},this.requestOptions,d,c);return f(this.parsedUrl.path+"/offset",c).then(function(b){return(b.data.geometries||[]).map(function(b){return a.fromJSON(b).set("spatialReference",h)})})},project:function(c,
d){c=r(c);var e=b.mixin({},c.toJSON(),this.parsedUrl.query,{f:"json"}),h=c.outSpatialReference,k=a.getJsonType(c.geometries[0]),l=this._decodeGeometries;c={query:e};if(this.requestOptions||d)c=b.mixin({},this.requestOptions,d,c);return f(this.parsedUrl.path+"/project",c).then(function(a){return l(a.data,k,h)})},relation:function(a,c){a={query:b.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON())};if(this.requestOptions||c)a=b.mixin({},this.requestOptions,c,a);return f(this.parsedUrl.path+"/relation",
a).then(this._handleRelationResponse)},reshape:function(c,d,e){var h=c.spatialReference;c={query:b.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(h.toJSON()),target:JSON.stringify({geometryType:a.getJsonType(c),geometry:c.toJSON()}),reshaper:JSON.stringify(d.toJSON())})};if(this.requestOptions||e)c=b.mixin({},this.requestOptions,e,c);return f(this.parsedUrl.path+"/reshape",c).then(function(b){return a.fromJSON(b.data.geometry).set("spatialReference",h)})},simplify:function(c,d){var e=c[0].spatialReference,
h=b.mixin({},this.parsedUrl.query,{f:"json",sr:e.wkid?e.wkid:JSON.stringify(e.toJSON()),geometries:JSON.stringify(this._encodeGeometries(c))}),k=a.getJsonType(c[0]),l=this._decodeGeometries;c={query:h};if(this.requestOptions||d)c=b.mixin({},this.requestOptions,d,c);return f(this.parsedUrl.path+"/simplify",c).then(function(a){return l(a.data,k,e)})},toGeoCoordinateString:function(a,c){var d={};d.sr=null!=a.sr&&"object"===typeof a.sr?a.sr.wkid||JSON.stringify(a.sr):a.sr;d.coordinates=JSON.stringify(a.coordinates);
d.conversionType=q.toJSON(a.conversionType||"mgrs");d.conversionMode=a.conversionMode;d.numOfDigits=a.numOfDigits;d.rounding=a.rounding;d.addSpaces=a.addSpaces;a={query:b.mixin({},this.parsedUrl.query,{f:"json"},d)};if(this.requestOptions||c)a=b.mixin({},this.requestOptions,c,a);return f(this.parsedUrl.path+"/toGeoCoordinateString",a).then(this._handleToGeoCoordinateResponse)},trimExtend:function(a,c){var d=b.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),e=a.sr;a={query:d};if(this.requestOptions||
c)a=b.mixin({},this.requestOptions,c,a);return f(this.parsedUrl.path+"/trimExtend",a).then(function(a){return(a.data.geometries||[]).map(function(a){return new m({spatialReference:e,paths:a.paths})})})},union:function(c,d){var e=c[0].spatialReference;c={query:b.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(e.toJSON()),geometries:JSON.stringify(this._encodeGeometries(c))})};if(this.requestOptions||d)c=b.mixin({},this.requestOptions,d,c);return f(this.parsedUrl.path+"/union",c).then(function(b){return a.fromJSON(b.data.geometry).set("spatialReference",
e)})},_handleRelationResponse:function(a){return a.data.relations},_handleDistanceResponse:function(a){return(a=a.data)&&a.distance},_handleToGeoCoordinateResponse:function(a){return a.data.strings},_handleFromGeoCoordinateResponse:function(a){return a.data.coordinates},_encodeGeometries:function(b){var c=[],d,f=b.length;for(d=0;d<f;d++)c.push(b[d].toJSON());return{geometryType:a.getJsonType(b[0]),geometries:c}},_decodeGeometries:function(c,d,f){var e=a.getGeometryType(d);c=c.geometries;var h=[],
k={spatialReference:f.toJSON()},g=b.mixin;c.forEach(function(a,b){h[b]=new e(g(a,k))});return h},_toProjectGeometry:function(a){var b=a.spatialReference.toJSON();return a instanceof h?new k({rings:[[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]]],spatialReference:b}):new m({paths:[[].concat(a.points)],spatialReference:b})},_fromProjectedGeometry:function(a,b,c){return"extent"===b?(a=a.rings[0],new h(a[0][0],a[0][1],a[2][0],a[2][1],c)):new l({points:a.paths[0],spatialReference:c.toJSON()})}});
b.mixin(e,{UNIT_METER:9001,UNIT_GERMAN_METER:9031,UNIT_FOOT:9002,UNIT_SURVEY_FOOT:9003,UNIT_CLARKE_FOOT:9005,UNIT_FATHOM:9014,UNIT_NAUTICAL_MILE:9030,UNIT_SURVEY_CHAIN:9033,UNIT_SURVEY_LINK:9034,UNIT_SURVEY_MILE:9035,UNIT_KILOMETER:9036,UNIT_CLARKE_YARD:9037,UNIT_CLARKE_CHAIN:9038,UNIT_CLARKE_LINK:9039,UNIT_SEARS_YARD:9040,UNIT_SEARS_FOOT:9041,UNIT_SEARS_CHAIN:9042,UNIT_SEARS_LINK:9043,UNIT_BENOIT_1895A_YARD:9050,UNIT_BENOIT_1895A_FOOT:9051,UNIT_BENOIT_1895A_CHAIN:9052,UNIT_BENOIT_1895A_LINK:9053,
UNIT_BENOIT_1895B_YARD:9060,UNIT_BENOIT_1895B_FOOT:9061,UNIT_BENOIT_1895B_CHAIN:9062,UNIT_BENOIT_1895B_LINK:9063,UNIT_INDIAN_FOOT:9080,UNIT_INDIAN_1937_FOOT:9081,UNIT_INDIAN_1962_FOOT:9082,UNIT_INDIAN_1975_FOOT:9083,UNIT_INDIAN_YARD:9084,UNIT_INDIAN_1937_YARD:9085,UNIT_INDIAN_1962_YARD:9086,UNIT_INDIAN_1975_YARD:9087,UNIT_FOOT_1865:9070,UNIT_RADIAN:9101,UNIT_DEGREE:9102,UNIT_ARCMINUTE:9103,UNIT_ARCSECOND:9104,UNIT_GRAD:9105,UNIT_GON:9106,UNIT_MICRORADIAN:9109,UNIT_ARCMINUTE_CENTESIMAL:9112,UNIT_ARCSECOND_CENTESIMAL:9113,
UNIT_MIL6400:9114,UNIT_BRITISH_1936_FOOT:9095,UNIT_GOLDCOAST_FOOT:9094,UNIT_INTERNATIONAL_CHAIN:109003,UNIT_INTERNATIONAL_LINK:109004,UNIT_INTERNATIONAL_YARD:109001,UNIT_STATUTE_MILE:9093,UNIT_SURVEY_YARD:109002,UNIT_50KILOMETER_LENGTH:109030,UNIT_150KILOMETER_LENGTH:109031,UNIT_DECIMETER:109005,UNIT_CENTIMETER:109006,UNIT_MILLIMETER:109007,UNIT_INTERNATIONAL_INCH:109008,UNIT_US_SURVEY_INCH:109009,UNIT_INTERNATIONAL_ROD:109010,UNIT_US_SURVEY_ROD:109011,UNIT_US_NAUTICAL_MILE:109012,UNIT_UK_NAUTICAL_MILE:109013,
UNIT_SQUARE_INCHES:"esriSquareInches",UNIT_SQUARE_FEET:"esriSquareFeet",UNIT_SQUARE_YARDS:"esriSquareYards",UNIT_ACRES:"esriAcres",UNIT_SQUARE_MILES:"esriSquareMiles",UNIT_SQUARE_MILLIMETERS:"esriSquareMillimeters",UNIT_SQUARE_CENTIMETERS:"esriSquareCentimeters",UNIT_SQUARE_DECIMETERS:"esriSquareDecimeters",UNIT_SQUARE_METERS:"esriSquareMeters",UNIT_ARES:"esriAres",UNIT_HECTARES:"esriHectares",UNIT_SQUARE_KILOMETERS:"esriSquareKilometers"});return e})},"esri/tasks/support/ProjectParameters":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/Logger ../../core/accessorSupport/decorators ../../geometry/support/jsonUtils".split(" "),
function(b,e,n,h,l,m,k,a){var f=m.getLogger("esri.tasks.support.ProjectParameters");return function(b){function c(a){a=b.call(this)||this;a.geometries=null;a.outSpatialReference=null;a.transformation=null;a.transformForward=null;return a}n(c,b);Object.defineProperty(c.prototype,"outSR",{get:function(){f.warn("ProjectParameters.outSR is deprecated. Use outSpatialReference instead.");return this.outSpatialReference},set:function(a){f.warn("ProjectParameters.outSR is deprecated. Use outSpatialReference instead.");
this.outSpatialReference=a},enumerable:!0,configurable:!0});c.prototype.toJSON=function(){var b=this.geometries.map(function(a){return a.toJSON()}),c=this.geometries[0],d={};d.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON());d.inSR=c.spatialReference.wkid||JSON.stringify(c.spatialReference.toJSON());d.geometries=JSON.stringify({geometryType:a.getJsonType(c),geometries:b});this.transformation&&(d.transformation=this.transformation.wkid||JSON.stringify(this.transformation));
null!=this.transformForward&&(d.transformForward=this.transformForward);return d};h([k.property()],c.prototype,"geometries",void 0);h([k.property({json:{read:{source:"outSR"}}})],c.prototype,"outSpatialReference",void 0);h([k.property({json:{read:!1}})],c.prototype,"outSR",null);h([k.property()],c.prototype,"transformation",void 0);h([k.property()],c.prototype,"transformForward",void 0);return c=h([k.subclass("esri.tasks.support.ProjectParameters")],c)}(k.declared(l))})},"esri/tasks/operations/pbfQueryUtils":function(){define("require exports ../../core/Error ../../core/Logger ../../layers/graphics/OptimizedFeatureSet ./pbfFeatureServiceParser".split(" "),
function(b,e,n,h,l,m){Object.defineProperty(e,"__esModule",{value:!0});var k=h.getLogger("esri.tasks.operations.pbfQueryUtils");e.parsePBFFeatureQuery=function(a){try{var b=m.parseFeatureQuery(a).queryResult.featureResult;if(b&&b.features&&b.features.length&&b.objectIdFieldName){var d=b.objectIdFieldName;a=0;for(var c=b.features;a<c.length;a++){var e=c[a];e.attributes&&(e.objectId=e.attributes[d])}}return b}catch(r){return b=new n("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:r}),
k.error(b),new l.default}}})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(["require","exports"],function(b,e){Object.defineProperty(e,"__esModule",{value:!0});b=function(){return function(){this.spatialReference=this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=null;this.exceededTransferLimit=!1}}();e.default=b})},"esri/tasks/operations/pbfFeatureServiceParser":function(){define("require exports ../../core/pbf ../../layers/graphics/OptimizedFeature ../../layers/graphics/OptimizedFeatureSet ../../layers/graphics/OptimizedGeometry".split(" "),
function(b,e,n,h,l,m){function k(a){for(;a.next();)switch(a.tag()){case 1:return a.getString();case 2:return a.getFloat();case 3:return a.getDouble();case 4:return a.getSInt32();case 5:return a.getUInt32();case 6:return a.getInt64();case 7:return a.getUInt64();case 8:return a.getSInt64();case 9:return a.getBool();default:return a.skip(),null}return null}function a(a){for(var b={type:0>=d.length?null:d[0]};a.next();)switch(a.tag()){case 1:b.name=a.getString();break;case 2:var f=a.getEnum();b.type=
f>=d.length?null:d[f];break;case 3:b.alias=a.getString();break;case 4:f=a.getEnum();f=f>=c.length?null:c[f];b.sqlType=f;break;default:a.skip()}return b}function f(a,b){for(var c=new h.default,d=0;a.next();)switch(a.tag()){case 1:var f=a.getMessage(),e=b[d++].name;c.attributes[e]=k(f);break;case 2:for(var f=a.getMessage(),e=new m.default,g=e.coords,l=e.lengths;f.next();)switch(f.tag()){case 2:for(var q=f.getUInt32(),q=f.pos()+q;f.pos()<q;)l.push(f.getUInt32());break;case 3:for(var q=f.getUInt32(),
q=f.pos()+q,n=0;f.pos()<q;)g[n++]=f.getSInt64();break;default:f.skip()}c.geometry=e;break;case 4:f=a.getMessage();e=new m.default;for(g=e.coords;f.next();)switch(f.tag()){case 3:l=f.getUInt32();l=f.pos()+l;for(q=0;f.pos()<l;)g[q++]=f.getSInt64();break;default:f.skip()}c.centroid=e;break;default:a.skip()}return c}Object.defineProperty(e,"__esModule",{value:!0});var d="esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeString esriFieldTypeDate esriFieldTypeOID esriFieldTypeGeometry esriFieldTypeBlob esriFieldTypeRaster esriFieldTypeGUID esriFieldTypeGlobalID esriFieldTypeXML".split(" "),
c="sqlTypeBigInt sqlTypeBinary sqlTypeBit sqlTypeChar sqlTypeDate sqlTypeDecimal sqlTypeDouble sqlTypeFloat sqlTypeGeometry sqlTypeGUID sqlTypeInteger sqlTypeLongNVarchar sqlTypeLongVarbinary sqlTypeLongVarchar sqlTypeNChar sqlTypeNVarchar sqlTypeOther sqlTypeReal sqlTypeSmallInt sqlTypeSqlXml sqlTypeTime sqlTypeTimestamp sqlTypeTimestamp2 sqlTypeTinyInt sqlTypeVarbinary sqlTypeVarchar".split(" "),q=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"],r=["upperLeft",
"lowerLeft"];e.parseFeatureQuery=function(b){b=new n(new Uint8Array(b),new DataView(b));for(var c={};b.next();)switch(b.tag()){case 2:for(var d=b.getMessage(),e={};d.next();)switch(d.tag()){case 1:var h=d.getMessage(),k=new l.default;for(k.geometryType=0>=q.length?null:q[0];h.next();)switch(h.tag()){case 1:k.objectIdFieldName=h.getString();break;case 3:k.globalIdFieldName=h.getString();break;case 4:k.geohashFieldName=h.getString();break;case 5:for(var g=h.getMessage(),m={};g.next();)switch(g.tag()){case 1:m.shapeAreaFieldName=
g.getString();break;case 2:m.shapeLengthFieldName=g.getString();break;case 3:m.units=g.getString();break;default:g.skip()}k.geometryProperties=m;break;case 7:g=h.getEnum();k.geometryType=g>=q.length?null:q[g];break;case 8:g=h.getMessage();for(m={};g.next();)switch(g.tag()){case 1:m.wkid=g.getUInt32();break;case 5:m.wkt=g.getString();break;default:g.skip()}k.spatialReference=m;break;case 10:k.hasZ=h.getBool();break;case 11:k.hasM=h.getBool();break;case 12:g=h.getMessage();for(m={originPosition:0>=
r.length?null:r[0]};g.next();)switch(g.tag()){case 1:var t=g.getEnum();m.originPosition=t>=r.length?null:r[t];break;case 2:for(var t=g.getMessage(),A=[0,0];t.next();)switch(t.tag()){case 1:A[0]=t.getDouble();break;case 2:A[1]=t.getDouble();break;case 3:A.push(t.getDouble());break;case 4:A.push(t.getDouble());break;default:t.skip()}m.scale=A;break;case 3:t=g.getMessage();for(A=[0,0];t.next();)switch(t.tag()){case 1:A[0]=t.getDouble();break;case 2:A[1]=t.getDouble();break;case 3:A.push(t.getDouble());
break;case 4:A.push(t.getDouble());break;default:t.skip()}m.translate=A;break;default:g.skip()}k.transform=m;break;case 9:g=h.getBool();k.exceededTransferLimit=g;break;case 13:g=h.getMessage();k.fields.push(a(g));break;case 15:g=h.getMessage();k.features.push(f(g,k.fields));break;default:h.skip()}e.featureResult=k;break;default:d.skip()}c.queryResult=e;break;default:b.skip()}return c}})},"esri/core/pbf":function(){define(["require","exports"],function(b,e){return function(){function b(b,e,m,k){this._tag=
0;this._dataType=99;this._data=b;this._dataView=e;this._pos=m||0;this._end=k||b.byteLength}b.prototype.clone=function(){return new b(this._data,this._dataView,this._pos,this._end)};b.prototype.pos=function(){return this._pos};b.prototype.next=function(b){for(;;){if(this._pos===this._end)return!1;var e=this._decodeVarint();this._tag=e>>3;this._dataType=e&7;if(!b||b===this._tag)break;this.skip()}return!0};b.prototype.empty=function(){return this._pos>=this._end};b.prototype.tag=function(){return this._tag};
b.prototype.getInt32=function(){return this._decodeVarint()};b.prototype.getInt64=function(){return this._decodeVarint()};b.prototype.getUInt32=function(){var b=4294967295,b=(this._data[this._pos]&127)>>>0;if(128>this._data[this._pos++])return b;b=(b|(this._data[this._pos]&127)<<7)>>>0;if(128>this._data[this._pos++])return b;b=(b|(this._data[this._pos]&127)<<14)>>>0;if(128>this._data[this._pos++])return b;b=(b|(this._data[this._pos]&127)<<21)>>>0;if(128>this._data[this._pos++])return b;b=(b|(this._data[this._pos]&
15)<<28)>>>0;if(128>this._data[this._pos++])return b};b.prototype.getUInt64=function(){return this._decodeVarint()};b.prototype.getSInt32=function(){var b=this.getUInt32();return b>>>1^-(b&1)|0};b.prototype.getSInt64=function(){return this._decodeSVarint()};b.prototype.getBool=function(){var b=0!==this._data[this._pos];this._skip(1);return b};b.prototype.getEnum=function(){return this._decodeVarint()};b.prototype.getFixed64=function(){var b=this._dataView,e=this._pos,b=b.getUint32(e,!0)+4294967296*
b.getUint32(e+4,!0);this._skip(8);return b};b.prototype.getSFixed64=function(){var b=this._dataView,e=this._pos,b=b.getUint32(e,!0)+4294967296*b.getInt32(e+4,!0);this._skip(8);return b};b.prototype.getDouble=function(){var b=this._dataView.getFloat64(this._pos,!0);this._skip(8);return b};b.prototype.getFixed32=function(){var b=this._dataView.getUint32(this._pos,!0);this._skip(4);return b};b.prototype.getSFixed32=function(){var b=this._dataView.getInt32(this._pos,!0);this._skip(4);return b};b.prototype.getFloat=
function(){var b=this._dataView.getFloat32(this._pos,!0);this._skip(4);return b};b.prototype.getString=function(){var b=this._getLength(),e=this._pos,e=this._toString(this._data,e,e+b);this._skip(b);return e};b.prototype.getBytes=function(){var b=this._getLength(),e=this._pos,e=this._toBytes(this._data,e,e+b);this._skip(b);return e};b.prototype.getMessage=function(){var e=this._getLength(),l=this._pos,l=new b(this._data,this._dataView,l,l+e);this._skip(e);return l};b.prototype.skip=function(){switch(this._dataType){case 0:this._decodeVarint();
break;case 1:this._skip(8);break;case 2:this._skip(this._getLength());break;case 5:this._skip(4);break;default:throw Error("Invalid data type!");}};b.prototype._skip=function(b){if(this._pos+b>this._end)throw Error("Attempt to skip past the end of buffer!");this._pos+=b};b.prototype._decodeVarint=function(){var b=this._data,e=this._pos,m=0,k;if(10<=this._end-e){if(k=b[e++],m|=k&127,0!==(k&128)&&(k=b[e++],m|=(k&127)<<7,0!==(k&128)&&(k=b[e++],m|=(k&127)<<14,0!==(k&128)&&(k=b[e++],m|=(k&127)<<21,0!==
(k&128)&&(k=b[e++],m+=268435456*(k&127),0!==(k&128)&&(k=b[e++],m+=34359738368*(k&127),0!==(k&128)&&(k=b[e++],m+=4398046511104*(k&127),0!==(k&128)&&(k=b[e++],m+=562949953421312*(k&127),0!==(k&128)&&(k=b[e++],m+=72057594037927936*(k&127),0!==(k&128)&&(k=b[e++],m+=0x7fffffffffffffff*(k&127),0!==(k&128)))))))))))throw Error("Varint too long!");}else{for(var a=1;e!==this._end;){k=b[e];if(0===(k&128))break;++e;m+=(k&127)*a;a*=128}if(e===this._end)throw Error("Varint overrun!");++e;m+=k*a}this._pos=e;return m};
b.prototype._decodeSVarint=function(){var b=this._decodeVarint();return b%2?-(b+1)/2:b/2};b.prototype._getLength=function(){if(2!==this._dataType)throw Error("Not a delimited data type!");return this._decodeVarint()};b.prototype._toString=function(b,e,m){var h="",a="";for(m=Math.min(this._end,m);e<m;++e){var f=b[e];f&128?a+="%"+f.toString(16):(h+=decodeURIComponent(a)+String.fromCharCode(f),a="")}a.length&&(h+=decodeURIComponent(a));return h};b.prototype._toBytes=function(b,e,m){m=Math.min(this._end,
m);return new Uint8Array(b.buffer,e,m-e)};return b}()})},"esri/layers/graphics/OptimizedFeature":function(){define(["require","exports"],function(b,e){Object.defineProperty(e,"__esModule",{value:!0});b=function(){return function(b,e,l,m){void 0===b&&(b=null);void 0===e&&(e={});this.geometry=b;this.attributes=e;l&&(this.centroid=l);null!=m&&(this.objectId=m)}}();e.default=b})},"esri/layers/graphics/OptimizedGeometry":function(){define(["require","exports"],function(b,e){Object.defineProperty(e,"__esModule",
{value:!0});b=function(){return function(b,e){void 0===b&&(b=[]);void 0===e&&(e=[]);this.lengths=b;this.coords=e}}();e.default=b})},"esri/tasks/operations/urlUtils":function(){define(["require","exports"],function(b,e){function n(b){var e={},h;for(h in b)if("declaredClass"!==h){var k=b[h];if(null!=k&&"function"!==typeof k)if(Array.isArray(k)){e[h]=[];for(var a=0;a<k.length;a++)e[h][a]=n(k[a])}else"object"===typeof k?k.toJSON&&(e[h]=JSON.stringify(k)):e[h]=k}return e}Object.defineProperty(e,"__esModule",
{value:!0});e.mapParameters=n})},"esri/tasks/operations/queryAttachments":function(){define("require exports ../../core/tsSupport/assignHelper ../../request ../../core/urlUtils ./urlUtils".split(" "),function(b,e,n,h,l,m){function k(a){a=a.toJSON();a.attachmentTypes&&(a.attachmentTypes=a.attachmentTypes.join(","));a.globalIds&&(a.globalIds=a.globalIds.join(","));a.objectIds&&(a.objectIds=a.objectIds.join(","));a.size&&(a.size=a.size.join(","));return a}Object.defineProperty(e,"__esModule",{value:!0});
e.processAttachmentQueryResult=function(a,b,d){for(var c={},f=0;f<a.length;f++)for(var e=a[f],h=e.parentObjectId,k=0,e=e.attachmentInfos;k<e.length;k++){var m=e[k],w=l.addProxy(b+"/"+h+"/attachments/"+m.id+(d?"?token\x3d"+d:"")),m=n({},m,{parentObjectId:h,url:w});c[h]?c[h].push(m):c[h]=[m]}return c};e.executeAttachmentQuery=function(a,b,d){b={query:m.mapParameters(n({},a.query,{f:"json"},k(b)))};d&&(b=n({},d,b));return h(a.path+"/queryAttachments",b)}})},"esri/tasks/operations/queryRelatedRecords":function(){define(["require",
"exports","../../core/tsSupport/assignHelper","../../request","./urlUtils"],function(b,e,n,h,l){function m(b){b=b.toJSON();b.objectIds&&(b.objectIds=b.objectIds.join(","));b.outFields&&(b.outFields=b.outFields.join(","));b.outSpatialReference&&(b.outSR=b.outSR.wkid||JSON.stringify(b.outSR.toJSON()),delete b.outSpatialReference);b.source&&(b.layer=JSON.stringify({source:b.source}),delete b.source);return b}Object.defineProperty(e,"__esModule",{value:!0});e.toQueryStringParameters=m;e.executeRelationshipQuery=
function(b,a,f){a={query:l.mapParameters(n({},b.query,{f:"json"},m(a)))};f&&(a=n({},f,a));return h(b.path+"/queryRelatedRecords",a).then(function(a){for(var b=a.data,d=b.geometryType,f=b.spatialReference,e={},h=0,b=b.relatedRecordGroups;h<b.length;h++){var k=b[h],l={fields:void 0,objectIdFieldName:void 0,geometryType:d,spatialReference:f,features:k.relatedRecords};if(null!=k.objectId)e[k.objectId]=l;else for(var p in k)k.hasOwnProperty(p)&&"relatedRecords"!==p&&(e[k[p]]=l)}a.data=e;return a})}})},
"esri/tasks/support/AttachmentQuery":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators".split(" "),function(b,e,n,h,l,m,k){return function(a){function b(b){b=a.call(this,b)||this;b.attachmentTypes=null;b.definitionExpression=null;b.globalIds=null;b.num=null;b.objectIds=null;b.size=null;b.start=null;return b}n(b,a);d=b;b.prototype.writeStart=function(a,b,d){b.resultOffset=
this.start;b.resultRecordCount=this.num||10};b.prototype.clone=function(){return new d(m.clone({attachmentTypes:this.attachmentTypes,definitionExpression:this.definitionExpression,globalIds:this.globalIds,num:this.num,objectIds:this.objectIds,size:this.size,start:this.start}))};var d;h([k.property({type:[String],json:{write:!0}})],b.prototype,"attachmentTypes",void 0);h([k.property({type:String,json:{write:!0}})],b.prototype,"definitionExpression",void 0);h([k.property({type:[Number],json:{write:!0}})],
b.prototype,"globalIds",void 0);h([k.property({type:Number,json:{read:{source:"resultRecordCount"}}})],b.prototype,"num",void 0);h([k.property({type:[Number],json:{write:!0}})],b.prototype,"objectIds",void 0);h([k.property({type:[Number],json:{write:!0}})],b.prototype,"size",void 0);h([k.property({type:Number,json:{read:{source:"resultOffset"}}})],b.prototype,"start",void 0);h([k.writer("start"),k.writer("num")],b.prototype,"writeStart",null);return b=d=h([k.subclass("esri.tasks.support.AttachmentQuery")],
b)}(k.declared(l))})},"esri/tasks/support/FeatureSet":function(){define("../../core/kebabDictionary ../../core/JSONSupport ../../core/lang ../../Graphic ../../layers/support/Field ../../geometry/SpatialReference ../../geometry/support/graphicsUtils ../../geometry/support/jsonUtils".split(" "),function(b,e,n,h,l,m,k,a){b=b({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent"});return e.createSubclass({declaredClass:"esri.tasks.support.FeatureSet",
getDefaults:function(){return n.mixin(this.inherited(arguments),{features:[]})},properties:{displayFieldName:null,exceededTransferLimit:null,features:{value:null,json:{read:function(a,b){for(var c=m.fromJSON(b.spatialReference),d=[],f=0;f<a.length;f++){var e=a[f],k=h.fromJSON(e),e=e.geometry&&e.geometry.spatialReference;k.geometry&&!e&&(k.geometry.spatialReference=c);d.push(k)}b.transform&&this._hydrate(b.transform,b.geometryType,d);return d}}},fields:{value:null,type:[l]},geometryType:{value:null,
json:{read:b.read}},spatialReference:{type:m}},toJSON:function(b){var d={hasZ:this.hasZ,hasM:this.hasM};this.displayFieldName&&(d.displayFieldName=this.displayFieldName);this.fields&&(d.fields=this.fields.map(function(a){return a.toJSON()}));this.spatialReference?d.spatialReference=this.spatialReference.toJSON():this.features[0]&&this.features[0].geometry&&(d.spatialReference=this.features[0].geometry.spatialReference.toJSON());this.features[0]&&(this.features[0].geometry&&(d.geometryType=a.getJsonType(this.features[0].geometry)),
d.features=k._encodeGraphics(this.features,b));d.exceededTransferLimit=this.exceededTransferLimit;d.transform=this.transform;return n.fixJson(d)},quantize:function(a){var b=a.translate[0],c=a.translate[1],f=a.scale[0],e=a.scale[1],h=this.features,k=function(a,b,c){var d,g,f,e,h,k,p=[];d=0;for(g=a.length;d<g;d++)if(f=a[d],0<d){if(k=b(f[0]),f=c(f[1]),k!==e||f!==h)p.push([k-e,f-h]),e=k,h=f}else e=b(f[0]),h=c(f[1]),p.push([e,h]);return 0<p.length?p:null},l=function(a,b,c){if("point"===a)return function(a){a.x=
b(a.x);a.y=c(a.y);return a};if("polyline"===a||"polygon"===a)return function(a){var d,g,f,e,h;f=a.rings||a.paths;h=[];d=0;for(g=f.length;d<g;d++)e=f[d],(e=k(e,b,c))&&h.push(e);return 0<h.length?(a.rings?a.rings=h:a.paths=h,a):null};if("multipoint"===a)return function(a){var d;d=k(a.points,b,c);return 0<d.length?(a.points=d,a):null};if("extent"===a)return function(a){return a}}(this.geometryType,function(a){return Math.round((a-b)/f)},function(a){return Math.round((c-a)/e)}),m,p;m=0;for(p=h.length;m<
p;m++)l(h[m].geometry)||(h.splice(m,1),m--,p--);this.transform=a;return this},_hydrate:function(a,b,c){if(a){var d=a.translate[0],f=a.translate[1],e=a.scale[0],h=a.scale[1],k=function(a,b,c){if("esriGeometryPoint"===a)return function(a){a.x=b(a.x);a.y=c(a.y)};if("esriGeometryPolyline"===a||"esriGeometryPolygon"===a)return function(a){a=a.rings||a.paths;var d,g,f,e,h,k,p,l;d=0;for(g=a.length;d<g;d++)for(h=a[d],f=0,e=h.length;f<e;f++)k=h[f],0<f?(p+=k[0],l+=k[1]):(p=k[0],l=k[1]),k[0]=b(p),k[1]=c(l)};
if("esriGeometryEnvelope"===a)return function(a){a.xmin=b(a.xmin);a.ymin=c(a.ymin);a.xmax=b(a.xmax);a.ymax=c(a.ymax)};if("esriGeometryMultipoint"===a)return function(a){a=a.points;var d,g,f,e,h;d=0;for(g=a.length;d<g;d++)f=a[d],0<d?(e+=f[0],h+=f[1]):(e=f[0],h=f[1]),f[0]=b(e),f[1]=c(h)}}(b,function(a){return a*e+d},function(a){return f-a*h});a=0;for(b=c.length;a<b;a++)c[a].geometry&&k(c[a].geometry)}}})})},"esri/Graphic":function(){define("require exports ./core/tsSupport/assignHelper ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./geometry ./PopupTemplate ./core/JSONSupport ./core/lang ./core/accessorSupport/decorators ./geometry/support/typeUtils ./symbols/support/jsonUtils ./symbols/support/typeUtils".split(" "),
function(b,e,n,h,l,m,k,a,f,d,c,q,r){b=function(a){function b(b,c,d,f){b=a.call(this,b,c,d,f)||this;b.layer=null;b.popupTemplate=null;b.sourceLayer=null;Object.defineProperty(b,"uid",{value:e.generateUID()});return b}h(b,a);e=b;b.prototype.normalizeCtorArgs=function(a,b,c,d){return a&&!a.declaredClass?a:{geometry:a,symbol:b,attributes:c,popupTemplate:d}};Object.defineProperty(b.prototype,"attributes",{set:function(a){var b=this._get("attributes");b!==a&&(this._set("attributes",a),this._notifyLayer("attributes",
b,a))},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"geometry",{set:function(a){var b=this._get("geometry");b!==a&&(this._set("geometry",a),this._notifyLayer("geometry",b,a))},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"symbol",{set:function(a){var b=this._get("symbol");b!==a&&(this._set("symbol",a),this._notifyLayer("symbol",b,a))},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"visible",{set:function(a){var b=this._get("visible");b!==
a&&(this._set("visible",a),this._notifyLayer("visible",b,a))},enumerable:!0,configurable:!0});b.prototype.getEffectivePopupTemplate=function(){return this.popupTemplate||this.sourceLayer&&this.sourceLayer.popupTemplate};b.prototype.getAttribute=function(a){return this.attributes&&this.attributes[a]};b.prototype.setAttribute=function(a,b){var c;this.attributes?(c=this.getAttribute(a),this.attributes[a]=b,this._notifyLayer("attributes",c,b,a)):(this.attributes=(c={},c[a]=b,c),this._notifyLayer("attributes",
void 0,b,a))};b.prototype.toJSON=function(){return{geometry:this.geometry&&this.geometry.toJSON(),symbol:this.symbol&&this.symbol.toJSON(),attributes:n({},this.attributes),popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}};b.prototype.clone=function(){return new e({attributes:f.clone(this.attributes),geometry:this.geometry&&this.geometry.clone()||null,layer:this.layer,popupTemplate:this.popupTemplate&&this.popupTemplate.clone(),sourceLayer:this.sourceLayer,symbol:this.symbol&&this.symbol.clone()||
null,visible:this.visible})};b.prototype._notifyLayer=function(a,b,c,d){this.layer&&(b={graphic:this,property:a,oldValue:b,newValue:c},"attributes"===a&&(b.attributeName=d),this.layer.graphicChanged(b))};var e;l([d.property({value:null})],b.prototype,"attributes",null);l([d.property({value:null,types:c.types,json:{read:m.fromJSON}})],b.prototype,"geometry",null);l([d.property()],b.prototype,"layer",void 0);l([d.property({type:k})],b.prototype,"popupTemplate",void 0);l([d.property()],b.prototype,"sourceLayer",
void 0);l([d.property({value:null,types:r.types,json:{read:q.read}})],b.prototype,"symbol",null);l([d.property({type:Boolean,value:!0,set:function(a){}})],b.prototype,"visible",null);return b=e=l([d.subclass("esri.Graphic")],b)}(d.declared(a));var x=0;(function(a){a.generateUID=function(){return x++}})(b||(b={}));return b})},"esri/PopupTemplate":function(){define("require exports ./core/tsSupport/assignHelper ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./core/Collection ./core/date ./core/JSONSupport ./core/kebabDictionary ./core/lang ./core/accessorSupport/decorators ./support/arcadeUtils ./support/actions/ActionBase ./support/actions/ActionButton ./support/actions/ActionToggle".split(" "),
function(b,e,n,h,l,m,k,a,f,d,c,q,r,x,z){var v=m.ofType({key:"type",defaultKeyValue:"button",base:r,typeMap:{button:x,toggle:z}}),w=f({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),p=f({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});return function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.actions=null;b.content="";b.expressionInfos=null;b.fieldInfos=null;b.layerOptions=null;b.outFields=null;b.overwriteActions=!1;
b.title="";b.relatedRecordsInfo=null;return b}h(b,a);f=b;b.prototype.readContent=function(a,b){var c=this,d=b.description,f=b.mediaInfos;a=b.showAttachments;if((b=b.popupElements)&&b.length)return b.map(function(a){"text"!==a.type||a.text?"media"===a.type&&(a.mediaInfos||f)&&(a.mediaInfos||(a.mediaInfos=f),a.mediaInfos=c._readMediaInfos(a.mediaInfos)):a.text=d;return a});b=[];d?b.push({type:"text",text:d}):b.push({type:"fields"});f&&f.length&&b.push({type:"media",mediaInfos:this._readMediaInfos(f)});
a&&b.push({type:"attachments",displayType:"list"});return b.length?b:d};b.prototype.writeContent=function(a,b){var c=this;b.showAttachments=!1;"string"===typeof a?b.description=a:Array.isArray(a)&&(b.popupElements=d.clone(a),b.popupElements.forEach(function(a){"attachments"!==a.type||b.showAttachments?"media"!==a.type||b.mediaInfos?"text"!==a.type||b.description?"fields"!==a.type||b.fieldInfos||(a.fieldInfos&&(b.fieldInfos=c._writeFieldInfos(d.clone(a.fieldInfos))),delete a.fieldInfos):(a.text&&(b.description=
a.text),delete a.text):(a.mediaInfos&&(b.mediaInfos=d.clone(a.mediaInfos),b.mediaInfos.forEach(function(a){a.type=p.toJSON(a.type)})),delete a.mediaInfos):b.showAttachments=!0;return a}))};b.prototype.writeExpressionInfos=function(a,b){b.expressionInfos=a||null};b.prototype.readFieldInfos=function(a){if(a)return a.forEach(function(a){var b=a.format&&a.format.dateFormat,c=a.stringFieldOption;b&&(a.format.dateFormat=k.fromJSON(b));c&&(a.stringFieldOption=w.fromJSON(c))}),a};b.prototype.writeFieldInfos=
function(a,b){b.fieldInfos=a?this._writeFieldInfos(d.clone(a)):a};b.prototype.writeLayerOptions=function(a,b){b.layerOptions=a||null};b.prototype.writeTitle=function(a,b){b.title=a||""};b.prototype.writeRelatedRecordsInfo=function(a,b){b.relatedRecordsInfo=a||null};Object.defineProperty(b.prototype,"requiredFields",{get:function(){return this.collectRequiredFields()},enumerable:!0,configurable:!0});b.prototype.clone=function(){var a=this.actions,a=a?d.clone(a.toArray()):[];return new f({actions:a,
content:Array.isArray(this.content)?d.clone(this.content):this.content,fieldInfos:this.fieldInfos?d.clone(this.fieldInfos):null,layerOptions:this.layerOptions?d.clone(this.layerOptions):null,overwriteActions:this.overwriteActions,relatedRecordsInfo:this.relatedRecordsInfo?d.clone(this.relatedRecordsInfo):null,title:this.title})};b.prototype.collectRequiredFields=function(){var a=(this.outFields||[]).concat(this._getActionsFields(this.actions),this._getTitleFields(this.title),this._getContentFields(this.content),
this._getExpressionInfoFields(this.expressionInfos));return-1!==a.indexOf("*")?["*"]:a.filter(function(a,b,c){return a&&b===c.indexOf(a)})};b.prototype._getContentElementFields=function(a){var b=this;if(!a||"attachments"===a.type)return[];if("fields"===a.type)return this._getFieldInfoFields(a.fieldInfos||this.fieldInfos);if("media"===a.type)return(a.mediaInfos||[]).reduce(function(a,c){return a.concat(b._getMediaInfoFields(c))},[]);if("text"===a.type)return this._extractFieldNames(a.text)};b.prototype._getMediaInfoFields=
function(a){var b=a.caption,c=a.value||{},d=c.fields,f=void 0===d?[]:d,d=c.normalizeField,g=c.tooltipField,e=c.sourceURL,c=c.linkURL;a=this._extractFieldNames(a.title).concat(this._extractFieldNames(b),this._extractFieldNames(e),this._extractFieldNames(c),f);d&&a.push(d);g&&a.push(g);return a};b.prototype._getContentFields=function(a){var b=this;return"string"===typeof a?this._extractFieldNames(a):Array.isArray(a)?a.reduce(function(a,c){return a.concat(b._getContentElementFields(c))},[]):[]};b.prototype._getExpressionInfoFields=
function(a){return a?a.reduce(function(a,b){return a.concat(q.extractFieldNames(b.expression))},[]):[]};b.prototype._getFieldInfoFields=function(a){return a?a.filter(function(a){return"undefined"===typeof a.visible?!0:!!a.visible}).map(function(a){return a.fieldName}).filter(function(a){return-1===a.indexOf("relationships/")&&-1===a.indexOf("expression/")}):[]};b.prototype._getActionsFields=function(a){var b=this;return a?a.toArray().reduce(function(a,c){return a.concat(b._getActionFields(c))},[]):
[]};b.prototype._getActionFields=function(a){var b=a.className,c=a.type,c="button"===c||"toggle"===c?a.image:"";return this._extractFieldNames(a.title).concat(this._extractFieldNames(b),this._extractFieldNames(c))};b.prototype._getTitleFields=function(a){return"string"===typeof a?this._extractFieldNames(a):[]};b.prototype._readMediaInfos=function(a){a.forEach(function(a){a.type=p.fromJSON(a.type)});return a};b.prototype._writeFieldInfos=function(a){a.forEach(function(a){var b=a.format&&a.format.dateFormat,
c=a.stringFieldOption;b&&(a.format.dateFormat=k.toJSON(b));c&&(a.stringFieldOption=w.toJSON(c));a.format||delete a.format});return a};b.prototype._extractFieldNames=function(a){if(!a||"string"!==typeof a)return[];a=a.match(/{[^}]*}/g);if(!a)return[];var b=/\{(\w+):.+\}/;return(a=a.filter(function(a){return!(0===a.indexOf("{relationships/")||0===a.indexOf("{expression/"))}).map(function(a){return a.replace(b,"{$1}")}))?a.map(function(a){return a.slice(1,-1)}):[]};var f;l([c.property({type:v})],b.prototype,
"actions",void 0);l([c.property()],b.prototype,"content",void 0);l([c.reader("content",["description","popupElements","mediaInfos","showAttachments"])],b.prototype,"readContent",null);l([c.writer("content")],b.prototype,"writeContent",null);l([c.property()],b.prototype,"expressionInfos",void 0);l([c.writer("expressionInfos")],b.prototype,"writeExpressionInfos",null);l([c.property()],b.prototype,"fieldInfos",void 0);l([c.reader("fieldInfos")],b.prototype,"readFieldInfos",null);l([c.writer("fieldInfos")],
b.prototype,"writeFieldInfos",null);l([c.property()],b.prototype,"layerOptions",void 0);l([c.writer("layerOptions")],b.prototype,"writeLayerOptions",null);l([c.property()],b.prototype,"outFields",void 0);l([c.property()],b.prototype,"overwriteActions",void 0);l([c.property({json:{type:String}})],b.prototype,"title",void 0);l([c.writer("title")],b.prototype,"writeTitle",null);l([c.property()],b.prototype,"relatedRecordsInfo",void 0);l([c.writer("relatedRecordsInfo")],b.prototype,"writeRelatedRecordsInfo",
null);l([c.property({dependsOn:"actions title content fieldInfos expressionInfos outFields".split(" "),readOnly:!0})],b.prototype,"requiredFields",null);return b=f=l([c.subclass("esri.PopupTemplate")],b)}(c.declared(a))})},"esri/core/date":function(){define(["require","exports","./kebabDictionary"],function(b,e,n){Object.defineProperty(e,"__esModule",{value:!0});var h={"short-date":"(datePattern: 'M/d/y', selector: 'date')","short-date-le":"(datePattern: 'd/M/y', selector: 'date')","long-month-day-year":"(datePattern: 'MMMM d, y', selector: 'date')",
"day-short-month-year":"(datePattern: 'd MMM y', selector: 'date')","long-date":"(datePattern: 'EEEE, MMMM d, y', selector: 'date')","short-date-short-time":"(datePattern: 'M/d/y', timePattern: 'h:mm a', selector: 'date and time')","short-date-le-short-time":"(datePattern: 'd/M/y', timePattern: 'h:mm a', selector: 'date and time')","short-date-short-time-24":"(datePattern: 'M/d/y', timePattern: 'H:mm', selector: 'date and time')","short-date-le-short-time-24":"(datePattern: 'd/M/y', timePattern: 'H:mm', selector: 'date and time')",
"short-date-long-time":"(datePattern: 'M/d/y', timePattern: 'h:mm:ss a', selector: 'date and time')","short-date-le-long-time":"(datePattern: 'd/M/y', timePattern: 'h:mm:ss a', selector: 'date and time')","short-date-long-time-24":"(datePattern: 'M/d/y', timePattern: 'H:mm:ss', selector: 'date and time')","short-date-le-long-time-24":"(datePattern: 'd/M/y', timePattern: 'H:mm:ss', selector: 'date and time')","long-month-year":"(datePattern: 'MMMM y', selector: 'date')","short-month-year":"(datePattern: 'MMM y', selector: 'date')",
year:"(datePattern: 'y', selector: 'date')"};b=n({shortDate:"short-date",shortDateLE:"short-date-le",longDate:"long-date",dayShortMonthYear:"day-short-month-year",longMonthDayYear:"long-month-day-year",shortDateLongTime:"short-date-long-time",shortDateLELongTime:"short-date-le-long-time",shortDateShortTime:"short-date-short-time",shortDateLEShortTime:"short-date-le-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLongTime24:"short-date-long-time-24",
shortDateLELongTime24:"short-date-le-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year"});e.toJSON=b.toJSON.bind(b);e.fromJSON=b.fromJSON.bind(b);e.getFormat=function(b){return h[b]}})},"esri/support/arcadeUtils":function(){define("require exports ../arcade/arcade ../arcade/Dictionary ../arcade/Feature ../core/lang".split(" "),function(b,e,n,h,l,m){function k(a){var b;try{b=a?n.parseScript(a):null}catch(q){b=null}return b}Object.defineProperty(e,"__esModule",{value:!0});
var a=/^\$feature\./i,f={vars:{$feature:"any",$view:"any"},spatialReference:null};e.createSyntaxTree=k;e.createFunction=function(a,b){b=b||m.clone(f);a="string"===typeof a?k(a):a;if(!a)return null;var c;try{c=a?n.compileScript(a,b):null}catch(r){c=null}return c};e.createExecContext=function(a,b){return{vars:{$feature:null==a?new l:l.createFromGraphic(a),$view:b&&b.view},spatialReference:b&&b.sr}};e.createFeature=function(a,b,f){return l.createFromGraphicLikeObject(b,a,f)};e.updateExecContext=function(a,
b){a.vars.$feature=b};e.evalSyntaxTree=function(a,b){var c;try{c=n.executeScript(a,b,b.spatialReference)}catch(r){c=null}return c};e.executeFunction=function(a,b){var c;try{c=a?a(b,b.spatialReference):null}catch(r){c=null}return c};e.extractFieldNames=function(b){if(!b)return[];b="string"===typeof b?k(b):b;if(!b)return[];var c=[];n.extractFieldLiterals(b).forEach(function(b){a.test(b)&&(b=b.replace(a,""),c.push(b))});c.sort();return c.filter(function(a,b){return 0===b||c[b-1]!==a})};e.dependsOnView=
function(a){return n.referencesMember(a,"$view")};e.getViewInfo=function(a){if(a&&a.viewingMode&&null!=a.scale&&a.spatialReference)return{view:new h({viewingMode:a.viewingMode,scale:a.scale}),sr:a.spatialReference}};e.hasGeometryOperations=function(a){return(a="string"===typeof a?k(a):a)&&n.scriptUsesGeometryEngine(a)};e.enableGeometryOperations=function(){return n.enableGeometrySupport()}})},"esri/arcade/arcade":function(){define("require exports dojo/Deferred ./arcadeCompiler ./arcadeRuntime ./parser ../core/has".split(" "),
function(b,e,n,h,l,m,k){Object.defineProperty(e,"__esModule",{value:!0});var a="disjoint intersects touches crosses within contains overlaps equals relate intersection union difference symmetricdifference clip cut area areageodetic length lengthgeodetic distance densify densifygeodetic generalize buffer buffergeodetic offset rotate issimple simplify multiparttosinglepart".split(" ");e.compileScript=function(a,b){return k("csp-restrictions")?function(b,d){return l.executeScript(a,b,d)}:h.compileScript(a,
b)};e.extend=function(a){l.extend(a);h.extend(a)};e.parseScript=function(a){return m.parseScript(a)};e.validateScript=function(a,b){return m.validateScript(a,b,"simple")};e.scriptCheck=function(a,b,c){return m.scriptCheck(a,b,c,"full")};e.parseAndExecuteScript=function(a,b,c){return l.executeScript(m.parseScript(a),b,c)};e.executeScript=function(a,b,c){return l.executeScript(a,b,c)};e.referencesMember=function(a,b){return l.referencesMember(a,b)};e.referencesFunction=function(a,b){return l.referencesFunction(a,
b)};e.extractFieldLiterals=function(a,b){void 0===b&&(b=!1);return m.extractFieldLiterals(a,b)};e.scriptUsesGeometryEngine=function(b){b=l.findFunctionCalls(b);for(var d=0;d<b.length;d++)if(-1<a.indexOf(b[d]))return!0;return!1};e.enableGeometrySupport=function(){var a=new n;b(["esri/geometry/geometryEngine","./functions/geomsync"],function(b,c){c.setGeometryEngine(b);a.resolve(!0)},function(b){a.reject(b)});return a.promise}})},"esri/arcade/arcadeCompiler":function(){define("require exports ./Dictionary ./Feature ./ImmutablePathArray ./ImmutablePointArray ./languageUtils ./treeAnalysis ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../geometry/SpatialReference".split(" "),
function(b,e,n,h,l,m,k,a,f,d,c,q,r,x,z,v,w,p,y,g,u){function t(a,b,c){try{return c(a,null,b)}catch(la){throw la;}}function A(b,c){try{switch(c.type){case "EmptyStatement":return"lc.voidOperation";case "VariableDeclarator":return H(b,c);case "VariableDeclaration":for(var d=[],g=0;g<c.declarations.length;g++)d.push(A(b,c.declarations[g]));return d.join("\n")+" \n lastStatement\x3d  lc.voidOperation; \n";case "BlockStatement":return D(b,c);case "FunctionDeclaration":var g=c.id.name.toLowerCase(),f={applicationCache:void 0===
b.applicationCache?null:b.applicationCache,spatialReference:b.spatialReference,console:b.console,symbols:b.symbols,localScope:{_SymbolsMap:{}},depthCounter:b.depthCounter+1,globalScope:b.globalScope};if(64<f.depthCounter)throw Error("Exceeded maximum function depth");for(var e="new lc.SizzleFunction( lang.functionDepthchecker(function() { var lastStatement \x3d lc.voidOperation; var lscope \x3d [];\n ",h=0;h<c.params.length;h++){var k=c.params[h].name.toLowerCase(),p=X(k,b);f.localScope._SymbolsMap[k]=
p;e+="lscope['"+p+"']\x3darguments["+h.toString()+"];\n"}e+=D(f,c.body)+"\n return lastStatement; }, runtimeCtx))";e+="\n lastStatement \x3d lc.voidOperation; \n";void 0!==b.globalScope[g]?d="gscope['"+g+"']\x3d"+e:void 0!==b.globalScope._SymbolsMap[g]?d="gscope['"+b.globalScope._SymbolsMap[g]+"']\x3d"+e:(p=X(g,b),b.globalScope._SymbolsMap[g]=p,d="gscope['"+p+"']\x3d"+e);return d;case "ReturnStatement":var l;l=null===c.argument?"return lc.voidOperation;":"return "+A(b,c.argument)+";";return l;case "IfStatement":if("AssignmentExpression"===
c.test.type||"UpdateExpression"===c.test.type)throw Error(a.nodeErrorMessage(c.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var q=A(b,c.test),m=O(b),t="var "+m+" \x3d "+q+";\n if ("+m+" \x3d\x3d\x3d true) {\n"+F(b,c.consequent)+"\n }\n",t=null!==c.alternate?t+("else if ("+m+"\x3d\x3d\x3dfalse)   { \n"+F(b,c.alternate)+"}\n"):t+("else if ("+m+"\x3d\x3d\x3dfalse) { \n lastStatement \x3d lc.voidOperation;\n }\n");return t+="else { lang.error({type: '"+c.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION'); \n}\n";
case "ExpressionStatement":var y;y="AssignmentExpression"===c.expression.type?"lastStatement \x3d lc.voidOperation; "+A(b,c.expression)+" \n ":"lastStatement \x3d "+A(b,c.expression)+";";return y;case "AssignmentExpression":return B(b,c);case "UpdateExpression":return C(b,c);case "BreakStatement":return"break;";case "ContinueStatement":return"continue;";case "ForStatement":d="lastStatement \x3d lc.voidOperation; \n";null!==c.init&&(d+=A(b,c.init));var u=O(b),r=O(b),d=d+("var "+u+" \x3d true;")+"\n do { ";
null!==c.update&&(d+=" if ("+u+"\x3d\x3d\x3dfalse) {\n "+A(b,c.update)+"  \n}\n "+u+"\x3dfalse; \n");null!==c.test&&(d+="var "+r+" \x3d "+A(b,c.test)+";",d+="if ("+r+"\x3d\x3d\x3dfalse) { break; } else if ("+r+"!\x3d\x3dtrue) { lang.error({type: '"+c.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION');   }\n");d+=A(b,c.body);null!==c.update&&(d+="\n "+A(b,c.update));return d+("\n"+u+" \x3d true; \n} while(true);  lastStatement \x3d lc.voidOperation;");case "ForInStatement":var n=O(b),v=O(b),
z=O(b),x="var "+n+" \x3d "+A(b,c.right)+";\n";"VariableDeclaration"===c.left.type&&(x+=A(b,c.left));var w="VariableDeclaration"===c.left.type?c.left.declarations[0].id.name:c.left.name,w=w.toLowerCase(),d="";null!==b.localScope&&(void 0!==b.localScope[w]?d="lscope['"+w+"']":void 0!==b.localScope._SymbolsMap[w]&&(d="lscope['"+b.localScope._SymbolsMap[w]+"']"));""===d&&(void 0!==b.globalScope[w]?d="gscope['"+w+"']":void 0!==b.globalScope._SymbolsMap[w]&&(d="gscope['"+b.globalScope._SymbolsMap[w]+"']"));
x=x+("if ("+n+"\x3d\x3d\x3dnull) {  lastStatement \x3d lc.voidOperation; }\n ")+("else if (lc.isArray("+n+") || lc.isString("+n+")) {")+("var "+v+"\x3d"+n+".length; \n")+("for(var "+z+"\x3d0; "+z+"\x3c"+v+"; "+z+"++) {\n");x+=d+"\x3d"+z+";\n";x+=A(b,c.body);x+="\n}\n";x+=" lastStatement \x3d lc.voidOperation; \n";x+=" \n}\n";x+="else if (lc.isImmutableArray("+n+")) {";x=x+("var "+v+"\x3d"+n+".length(); \n")+("for(var "+z+"\x3d0; "+z+"\x3c"+v+"; "+z+"++) {\n");x+=d+"\x3d"+z+";\n";x+=A(b,c.body);x+=
"\n}\n";x+=" lastStatement \x3d lc.voidOperation; \n";x+=" \n}\n";x+="else if (( "+n+" instanceof lang.Dictionary) || ( "+n+" instanceof lang.Feature)) {";x=x+("var "+v+"\x3d"+n+".keys(); \n")+("for(var "+z+"\x3d0; "+z+"\x3c"+v+".length; "+z+"++) {\n");x+=d+"\x3d"+v+"["+z+"];\n";x+=A(b,c.body);x+="\n}\n";x+=" lastStatement \x3d lc.voidOperation; \n";x+=" \n}\n";return x+"else { lastStatement \x3d lc.voidOperation; } \n";case "Identifier":return ga(b,c);case "MemberExpression":var L;try{d=void 0,d=
!0===c.computed?A(b,c.property):"'"+c.property.name+"'",L="lang.member("+A(b,c.object)+","+d+")"}catch(va){throw va;}return L;case "Literal":return null===c.value||void 0===c.value?"null":JSON.stringify(c.value);case "ThisExpression":throw Error(a.nodeErrorMessage(c,"RUNTIME","NOTSUPPORTED"));case "CallExpression":try{if("Identifier"!==c.callee.type)throw Error(a.nodeErrorMessage(c,"RUNTIME","ONLYNODESSUPPORTED"));var T=c.callee.name.toLowerCase(),d="";null!==b.localScope&&(void 0!==b.localScope[T]?
d="lscope['"+T+"']":void 0!==b.localScope._SymbolsMap[T]&&(d="lscope['"+b.localScope._SymbolsMap[T]+"']"));""===d&&(void 0!==b.globalScope[T]?d="gscope['"+T+"']":void 0!==b.globalScope._SymbolsMap[T]&&(d="gscope['"+b.globalScope._SymbolsMap[T]+"']"));if(""!==d)for(g="[",f=0;f<c.arguments.length;f++)0<f&&(g+=", "),g+=A(b,c.arguments[f]);else throw Error(a.nodeErrorMessage(c,"RUNTIME","NOTFOUND"));}catch(va){throw va;}return"lang.callfunc("+d+","+(g+"]")+",runtimeCtx)";case "UnaryExpression":var ba;
try{ba="lang.unary("+A(b,c.argument)+",'"+c.operator+"')"}catch(va){throw va;}return ba;case "BinaryExpression":var aa;try{aa="lang.binary("+A(b,c.left)+","+A(b,c.right)+",'"+c.operator+"')"}catch(va){throw va;}return aa;case "LogicalExpression":var Q;try{if("AssignmentExpression"===c.left.type||"UpdateExpression"===c.left.type)throw Error(a.nodeErrorMessage(c.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===c.right.type||"UpdateExpression"===c.right.type)throw Error(a.nodeErrorMessage(c.right,
"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("\x26\x26"===c.operator||"||"===c.operator)Q="(lang.logicalCheck("+A(b,c.left)+") "+c.operator+" lang.logicalCheck("+A(b,c.right)+"))";else throw Error(a.nodeErrorMessage("LogicalExpression","RUNTIME","ONLYORORAND"));}catch(va){throw va;}return Q;case "ConditionalExpression":throw Error(a.nodeErrorMessage(c,"RUNTIME","NOTSUPPORTED"));case "ArrayExpression":try{d=[];for(g=0;g<c.elements.length;g++)"Literal"===c.elements[g].type?d.push(A(b,c.elements[g])):
d.push("lang.aCheck("+A(b,c.elements[g])+",'ArrayExpression')");e="["+d.join(",")+"]"}catch(va){throw va;}return e;case "ObjectExpression":d="lang.dictionary([";for(g=0;g<c.properties.length;g++){var h=c.properties[g],P="Identifier"===h.key.type?"'"+h.key.name+"'":A(b,h.key),ja=A(b,h.value);0<g&&(d+=",");d+="lang.strCheck("+P+",'ObjectExpression'),lang.aCheck("+ja+", 'ObjectExpression')"}return d+"])";case "Property":throw Error("Should not get here");case "Array":throw Error(a.nodeErrorMessage(c,
"RUNTIME","NOTSUPPORTED"));default:throw Error(a.nodeErrorMessage(c,"RUNTIME","UNREOGNISED"));}}catch(va){throw va;}}function C(a,b){var c=null,d="";if("MemberExpression"===b.argument.type)return c=A(a,b.argument.object),d=!0===b.argument.computed?A(a,b.argument.property):"'"+b.argument.property.name+"'","lang.memberupdate("+c+","+d+",'"+b.operator+"',"+b.prefix+")";c=b.argument.name.toLowerCase();if(null!==a.localScope){if(void 0!==a.localScope[c])return"lang.update(lscope, '"+c+"','"+b.operator+
"',"+b.prefix+")";if(void 0!==a.localScope._SymbolsMap[c])return"lang.update(lscope, '"+a.localScope._SymbolsMap[c]+"','"+b.operator+"',"+b.prefix+")"}if(void 0!==a.globalScope[c])return"lang.update(gscope, '"+c+"','"+b.operator+"',"+b.prefix+")";if(void 0!==a.globalScope._SymbolsMap[c])return"lang.update(gscope, '"+a.globalScope._SymbolsMap[c]+"','"+b.operator+"',"+b.prefix+")";throw Error("Variable not recognised");}function B(a,b){var c=A(a,b.right),d=null,g="";if("MemberExpression"===b.left.type)return d=
A(a,b.left.object),g=!0===b.left.computed?A(a,b.left.property):"'"+b.left.property.name+"'","lang.assignmember("+d+","+g+",'"+b.operator+"',"+c+");";d=b.left.name.toLowerCase();if(null!==a.localScope){if(void 0!==a.localScope[d])return"lscope['"+d+"']\x3dlang.assign("+c+",'"+b.operator+"', lscope['"+d+"']); ";if(void 0!==a.localScope._SymbolsMap[d])return"lscope['"+a.localScope._SymbolsMap[d]+"']\x3dlang.assign("+c+",'"+b.operator+"', lscope['"+a.localScope._SymbolsMap[d]+"']); "}if(void 0!==a.globalScope[d])return"gscope['"+
d+"']\x3dlang.assign("+c+",'"+b.operator+"', gscope['"+d+"']); ";if(void 0!==a.globalScope._SymbolsMap[d])return"gscope['"+a.globalScope._SymbolsMap[d]+"']\x3dlang.assign("+c+",'"+b.operator+"', gscope['"+a.globalScope._SymbolsMap[d]+"']); ";throw Error("Variable not recognised");}function F(a,b){return"BlockStatement"===b.type?A(a,b):"ReturnStatement"===b.type?A(a,b):"BreakStatement"===b.type?A(a,b):"ContinueStatement"===b.type?A(a,b):"UpdateExpression"===b.type?"lastStatement \x3d "+A(a,b)+";":
"ExpressionStatement"===b.type?A(a,b):"ObjectExpression"===b.type?"lastStatement \x3d "+A(a,b)+";":A(a,b)}function D(a,b){for(var c="",d=0;d<b.body.length;d++)c="ReturnStatement"===b.body[d].type?c+(A(a,b.body[d])+" \n"):"BreakStatement"===b.body[d].type?c+(A(a,b.body[d])+" \n"):"ContinueStatement"===b.body[d].type?c+(A(a,b.body[d])+" \n"):"UpdateExpression"===b.body[d].type?c+("lastStatement \x3d "+A(a,b.body[d])+"; \n"):"ObjectExpression"===b.body[d].type?c+("lastStatement \x3d "+A(a,b.body[d])+
"; \n"):c+(A(a,b.body[d])+" \n");return c}function H(a,b){var c=null===b.init?null:A(a,b.init);c===k.voidOperation&&(c=null);b=b.id.name.toLowerCase();if(null!==a.localScope){if(void 0!==a.localScope[b])return"lscope['"+b+"']\x3d"+c+";";if(void 0!==a.localScope._SymbolsMap[b])return"lscope['"+a.localScope._SymbolsMap[b]+"']\x3d"+c+";";var d=X(b,a);a.localScope._SymbolsMap[b]=d;return"lscope['"+d+"']\x3d"+c+";"}if(void 0!==a.globalScope[b])return"gscope['"+b+"']\x3d"+c+";";if(void 0!==a.globalScope._SymbolsMap[b])return"gscope['"+
a.globalScope._SymbolsMap[b]+"']\x3d"+c+";";d=X(b,a);a.globalScope._SymbolsMap[b]=d;return"gscope['"+d+"']\x3d"+c+";"}function aa(b,c,d){c=c.toLowerCase();switch(c){case "hasz":return b=b.hasZ,void 0===b?!1:b;case "hasm":return b=b.hasM,void 0===b?!1:b;case "spatialreference":return c=b.spatialReference._arcadeCacheId,void 0===c&&(d=!0,Object.freeze&&Object.isFrozen(b.spatialReference)&&(d=!1),d&&(G++,c=b.spatialReference._arcadeCacheId=G)),b=new n({wkt:b.spatialReference.wkt,wkid:b.spatialReference.wkid}),
void 0!==c&&(b._arcadeCacheId="SPREF"+c.toString()),b}switch(b.type){case "extent":switch(c){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return b=b[c],void 0!==b?b:null;case "type":return"Extent"}break;case "polygon":switch(c){case "rings":return c=k.isVersion4?b.cache._arcadeCacheId:b.getCacheValue("_arcadeCacheId"),void 0===c&&(G++,c=G,k.isVersion4?b.cache._arcadeCacheId=c:b.setCacheValue("_arcadeCacheId",c)),b=new l(b.rings,b.spatialReference,
!0===b.hasZ,!0===b.hasM,c);case "type":return"Polygon"}break;case "point":switch(c){case "x":case "y":case "z":case "m":return void 0!==b[c]?b[c]:null;case "type":return"Point"}break;case "polyline":switch(c){case "paths":return c=k.isVersion4?b.cache._arcadeCacheId:b.getCacheValue("_arcadeCacheId"),void 0===c&&(G++,c=G,k.isVersion4?b.cache._arcadeCacheId=c:b.setCacheValue("_arcadeCacheId",c)),b=new l(b.paths,b.spatialReference,!0===b.hasZ,!0===b.hasM,c);case "type":return"Polyline"}break;case "multipoint":switch(c){case "points":return c=
k.isVersion4?b.cache._arcadeCacheId:b.getCacheValue("_arcadeCacheId"),void 0===c&&(G++,c=G,k.isVersion4?b.cache._arcadeCacheId=c:b.setCacheValue("_arcadeCacheId",c)),b=new m(b.points,b.spatialReference,!0===b.hasZ,!0===b.hasM,c,1);case "type":return"Multipoint"}}throw Error(a.nodeErrorMessage(d,"RUNTIME","PROPERTYNOTFOUND"));}function ga(b,c){try{var d=c.name.toLowerCase();if(null!==b.localScope){if(void 0!==b.localScope[d])return"lscope['"+d+"']";if(void 0!==b.localScope._SymbolsMap[d])return"lscope['"+
b.localScope._SymbolsMap[d]+"']"}if(void 0!==b.globalScope[d])return"gscope['"+d+"']";if(void 0!==b.globalScope._SymbolsMap[d])return"gscope['"+b.globalScope._SymbolsMap[d]+"']";throw Error(a.nodeErrorMessage(c,"RUNTIME","VARIABLENOTFOUND"));}catch(la){throw la;}}function P(a){return null===a?"":k.isArray(a)||k.isImmutableArray(a)?"Array":k.isDate(a)?"Date":k.isString(a)?"String":k.isBoolean(a)?"Boolean":k.isNumber(a)?"Number":a instanceof n?"Dictionary":a instanceof h?"Feature":a instanceof p?"Point":
a instanceof y?"Polygon":a instanceof g?"Polyline":a instanceof w?"Multipoint":a instanceof z?"Extent":k.isFunctionParameter(a)?"Function":a===k.voidOperation?"":"number"===typeof a&&isNaN(a)?"Number":"Unrecognised Type"}function K(a,b,c,d){try{if(k.equalityTest(b[c],d))return b[c+1];var g=b.length-c;return 1===g?b[c]:2===g?null:3===g?b[c+2]:K(a,b,c+2,d)}catch(ha){throw ha;}}function ja(a,b,c,d){try{if(!0===d)return b[c+1];if(3===b.length-c)return b[c+2];var g=b[c+2];if(!1===k.isBoolean(g))throw Error("WHEN needs boolean test conditions");
return ja(a,b,c+2,g)}catch(ha){throw ha;}}function M(a,b){var c=a.length,d=Math.floor(c/2);if(0===c)return[];if(1===c)return[a[0]];var g=M(a.slice(0,d),b);a=M(a.slice(d,c),b);for(c=[];0<g.length||0<a.length;)0<g.length&&0<a.length?(d=b(g[0],a[0]),isNaN(d)&&(d=0),0>=d?(c.push(g[0]),g=g.slice(1)):(c.push(a[0]),a=a.slice(1))):0<g.length?(c.push(g[0]),g=g.slice(1)):0<a.length&&(c.push(a[0]),a=a.slice(1));return c}function X(a,b){b.symbols.symbolCounter++;return"_T"+b.symbols.symbolCounter.toString()}
function O(a){a.symbols.symbolCounter++;return"_Tvar"+a.symbols.symbolCounter.toString()}function L(a,b,c){var d={};a||(a={});c||(c={});d._SymbolsMap={};d.textformatting=1;d.infinity=1;d.pi=1;for(var g in b)d[g]=1;for(g in c)d[g]=1;for(g in a)d[g]=1;return d}function Q(a){console.log(a)}Object.defineProperty(e,"__esModule",{value:!0});var G=0,V={};f.registerFunctions(V,t);x.registerFunctions(V,t);q.registerFunctions(V,t);d.registerFunctions(V,t);r.registerFunctions(V,t);c.registerFunctions(V,t);V["typeof"]=
function(a,b){return t(a,b,function(a,b,c){k.pcCheck(c,1,1);a=P(c[0]);if("Unrecognised Type"===a)throw Error("Unrecognised Type");return a})};V.iif=function(a,b){try{return t(a,b,function(a,b,c){k.pcCheck(c,3,3);if(!1===k.isBoolean(c[0]))throw Error("IF Function must have a boolean test condition");return c[0]?c[1]:c[2]})}catch(fa){throw fa;}};V.decode=function(a,b){try{return t(a,b,function(b,c,d){if(2>d.length)throw Error("Missing Parameters");if(2===d.length)return d[1];if(0===(d.length-1)%2)throw Error("Must have a default value result.");
return K(a,d,1,d[0])})}catch(fa){throw fa;}};V.when=function(a,b){try{return t(a,b,function(b,c,d){if(3>d.length)throw Error("Missing Parameters");if(0===d.length%2)throw Error("Must have a default value result.");b=d[0];if(!1===k.isBoolean(b))throw Error("WHEN needs boolean test conditions");return ja(a,d,0,b)})}catch(fa){throw fa;}};V.top=function(a,b){return t(a,b,function(a,b,c){k.pcCheck(c,2,2);if(k.isArray(c[0]))return k.toNumber(c[1])>=c[0].length?c[0].slice(0):c[0].slice(0,k.toNumber(c[1]));
if(k.isImmutableArray(c[0]))return k.toNumber(c[1])>=c[0].length()?c[0].slice(0):c[0].slice(0,k.toNumber(c[1]));throw Error("Top cannot accept this parameter type");})};V.first=function(a,b){return t(a,b,function(a,b,c){k.pcCheck(c,1,1);return k.isArray(c[0])?0===c[0].length?null:c[0][0]:k.isImmutableArray(c[0])?0===c[0].length()?null:c[0].get(0):null})};V.sort=function(a,b){return t(a,b,function(a,b,c){k.pcCheck(c,1,2);b=c[0];k.isImmutableArray(b)&&(b=b.toArray());if(!1===k.isArray(b))throw Error("Illegal Argument");
if(1<c.length){if(!1===k.isFunctionParameter(c[1]))throw Error("Illegal Argument");b=M(b,function(b,d){return N.callfunc(c[1],[b,d],a)})}else{if(0===b.length)return[];for(var d={},g=0;g<b.length;g++){var f=P(b[g]);""!==f&&(d[f]=!0)}if(!0===d.Array||!0===d.Dictionary||!0===d.Feature||!0===d.Point||!0===d.Polygon||!0===d.Polyline||!0===d.Multipoint||!0===d.Extent||!0===d.Function)return b.slice(0);var g=0,f="",e;for(e in d)g++,f=e;b=1<g||"String"===f?M(b,function(a,b){if(null===a||void 0===a||a===k.voidOperation)return null===
b||void 0===b||b===k.voidOperation?0:1;if(null===b||void 0===b||b===k.voidOperation)return-1;a=k.toString(a);b=k.toString(b);return a<b?-1:a===b?0:1}):"Number"===f?M(b,function(a,b){return a-b}):"Boolean"===f?M(b,function(a,b){return a===b?0:b?-1:1}):"Date"===f?M(b,function(a,b){return b-a}):b.slice(0)}return b})};for(var U in V)V[U]=new k.NativeFunction(V[U]);var Y=function(){};Y.prototype=V;e.functionHelper={fixSpatialReference:k.fixSpatialReference,parseArguments:function(a,b){for(var c=[],d=0;d<
b.arguments.length;d++)c.push(A(a,b.arguments[d]));return c},standardFunction:t};e.extend=function(b){for(var c={mode:"sync",compiled:!0,functions:{},signatures:[],standardFunction:t},d=0;d<b.length;d++)b[d].registerFunctions(c);for(var g in c.functions)V[g]=new k.NativeFunction(c.functions[g]),Y.prototype[g]=V[g];for(d=0;d<c.signatures.length;d++)a.addFunctionDeclaration(c.signatures[d],"f")};e.executeScript=function(a,b,c){return a(b,c)};e.extractFieldLiterals=function(b,c){void 0===c&&(c=!1);return a.findFieldLiterals(b,
c)};e.validateScript=function(b,c){return a.validateScript(b,c,"simple")};e.referencesMember=function(b,c){return a.referencesMember(b,c)};e.referencesFunction=function(b,c){return a.referencesFunction(b,c)};var N={error:function(b,c,d){throw Error(a.nodeErrorMessage(b,c,d));},functionDepthchecker:function(a,b){return function(){b.depthCounte++;if(64<b.depthCounter)throw Error("Exceeded maximum function depth");var c=a.apply(this,arguments);b.depthCounte--;return c}},aCheck:function(b,c){if(k.isFunctionParameter(b))throw Error(a.nodeErrorMessage({type:c},
"RUNTIME","FUNCTIONCONTEXTILLEGAL"));return b===k.voidOperation?null:b},Dictionary:n,Feature:h,dictionary:function(a){for(var b={},c=0;c<a.length;c+=2){if(k.isFunctionParameter(a[c+1]))throw Error("Illegal Argument");if(!1===k.isString(a[c]))throw Error("Illegal Argument");b[a[c].toString()]=a[c+1]===k.voidOperation?null:a[c+1]}a=new n(b);a.immutable=!1;return a},strCheck:function(a,b){if(!1===k.isString(a))throw Error("Illegal Argument");return a},unary:function(b,c){if(k.isBoolean(b)){if("!"===
c)return!b;if("-"===c)return-1*k.toNumber(b);if("+"===c)return 1*k.toNumber(b);throw Error(a.nodeErrorMessage({type:"UnaryExpression"},"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}if("-"===c)return-1*k.toNumber(b);if("+"===c)return 1*k.toNumber(b);throw Error(a.nodeErrorMessage({type:"UnaryExpression"},"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));},logicalCheck:function(b){if(!1===k.isBoolean(b))throw Error(a.nodeErrorMessage("LogicalExpression","RUNTIME","ONLYORORAND"));return b},logical:function(b,c,d){if(k.isBoolean(b)&&
k.isBoolean(c))switch(d){case "||":return b||c;case "\x26\x26":return b&&c;default:throw Error(a.nodeErrorMessage("LogicalExpression","RUNTIME","ONLYORORAND"));}else throw Error(a.nodeErrorMessage("LogicalExpression","RUNTIME","ONLYORORAND"));},binary:function(b,c,d){switch(d){case "\x3d\x3d":return k.equalityTest(b,c);case "\x3d":return k.equalityTest(b,c);case "!\x3d":return!k.equalityTest(b,c);case "\x3c":return k.greaterThanLessThan(b,c,d);case "\x3e":return k.greaterThanLessThan(b,c,d);case "\x3c\x3d":return k.greaterThanLessThan(b,
c,d);case "\x3e\x3d":return k.greaterThanLessThan(b,c,d);case "+":return k.isString(b)||k.isString(c)?k.toString(b)+k.toString(c):k.toNumber(b)+k.toNumber(c);case "-":return k.toNumber(b)-k.toNumber(c);case "*":return k.toNumber(b)*k.toNumber(c);case "/":return k.toNumber(b)/k.toNumber(c);case "%":return k.toNumber(b)%k.toNumber(c);default:throw Error(a.nodeErrorMessage({type:"BinaryExpression"},"RUNTIME","OPERATORNOTRECOGNISED"));}},assign:function(b,c,d){switch(c){case "\x3d":return b===k.voidOperation?
null:b;case "/\x3d":return k.toNumber(d)/k.toNumber(b);case "*\x3d":return k.toNumber(d)*k.toNumber(b);case "-\x3d":return k.toNumber(d)-k.toNumber(b);case "+\x3d":return k.isString(d)||k.isString(b)?k.toString(d)+k.toString(b):k.toNumber(d)+k.toNumber(b);case "%\x3d":return k.toNumber(d)%k.toNumber(b);default:throw Error(a.nodeErrorMessage("AssignmentExpression","RUNTIME","OPERATORNOTRECOGNISED"));}},update:function(a,b,c,d){var g=k.toNumber(a[b]);a[b]="++"===c?g+1:g-1;return!1===d?g:"++"===c?g+
1:g-1},memberupdate:function(a,b,c,d){var g;if(k.isArray(a))if(k.isNumber(b)){0>b&&(b=a.length+b);if(0>b||b>=a.length)throw Error("Assignment outside of array bounds");g=k.toNumber(a[b]);a[b]="++"===c?g+1:g-1}else throw Error("Invalid Parameter");else if(a instanceof n){if(!1===k.isString(b))throw Error("Dictionary accessor must be a string");if(!0===a.hasField(b))g=k.toNumber(a.field(b)),a.setField(b,"++"===c?g+1:g-1);else throw Error("Invalid Parameter");}else if(a instanceof h){if(!1===k.isString(b))throw Error("Feature accessor must be a string");
if(!0===a.hasField(b))g=k.toNumber(a.field(b)),a.setField(b,"++"===c?g+1:g-1);else throw Error("Invalid Parameter");}else{if(k.isImmutableArray(a))throw Error("Array is Immutable");throw Error("Invalid Parameter");}return!1===d?g:"++"===c?g+1:g-1},assignmember:function(a,b,c,d){if(k.isArray(a))if(k.isNumber(b)){0>b&&(b=a.length+b);if(0>b||b>a.length)throw Error("Assignment outside of array bounds");if(b===a.length&&"\x3d"!==c)throw Error("Invalid Parameter");a[b]=this.assign(d,c,a[b])}else throw Error("Invalid Parameter");
else if(a instanceof n){if(!1===k.isString(b))throw Error("Dictionary accessor must be a string");if(!0===a.hasField(b))a.setField(b,this.assign(d,c,a.field(b)));else{if("\x3d"!==c)throw Error("Invalid Parameter");a.setField(b,this.assign(d,c,null))}}else if(a instanceof h){if(!1===k.isString(b))throw Error("Feature accessor must be a string");if(!0===a.hasField(b))a.setField(b,this.assign(d,c,a.field(b)));else{if("\x3d"!==c)throw Error("Invalid Parameter");a.setField(b,this.assign(d,c,null))}}else{if(k.isImmutableArray(a))throw Error("Array is Immutable");
throw Error("Invalid Parameter");}},member:function(b,c){if(null===b)throw Error(a.nodeErrorMessage("MemberExpression","RUNTIME","NOTFOUND"));if(b instanceof n||b instanceof h){if(k.isString(c))return b.field(c)}else if(b instanceof v){if(k.isString(c))return aa(b,c,"MemberExpression")}else if(k.isArray(b)){if(k.isNumber(c)&&isFinite(c)&&Math.floor(c)===c){0>c&&(c=b.length+c);if(c>=b.length||0>c)throw Error(a.nodeErrorMessage("MemberExpression","RUNTIME","OUTOFBOUNDS"));return b[c]}}else if(k.isString(b)){if(k.isNumber(c)&&
isFinite(c)&&Math.floor(c)===c){0>c&&(c=b.length+c);if(c>=b.length||0>c)throw Error(a.nodeErrorMessage("MemberExpression","RUNTIME","OUTOFBOUNDS"));return b[c]}}else if(k.isImmutableArray(b)&&k.isNumber(c)&&isFinite(c)&&Math.floor(c)===c){0>c&&(c=b.length()+c);if(c>=b.length()||0>c)throw Error(a.nodeErrorMessage("MemberExpression","RUNTIME","OUTOFBOUNDS"));return b.get(c)}throw Error(a.nodeErrorMessage("MemberExpression","RUNTIME","INVALIDTYPE"));},callfunc:function(a,b,c){return a instanceof k.NativeFunction?
a.fn(c,b):a instanceof k.SizzleFunction?a.fn.apply(this,b):a.apply(this,b)}};e.compileScript=function(a,b){void 0===b&&(b=null);null===b&&(b={vars:{},customfunctions:{}});b={globalScope:L(b.vars,V,b.customfunctions),localScope:null,console:Q,symbols:{symbolCounter:0}};a=A(b,a.body[0].body);""===a&&(a="lc.voidOperation;");b={lc:k,lang:N,postProcess:function(a){a instanceof k.ReturnResult&&(a=a.value);a instanceof k.ImplicitResult&&(a=a.value);a===k.voidOperation&&(a=null);if(a===k.breakResult)throw Error("Cannot return BREAK");
if(a===k.continueResult)throw Error("Cannot return CONTINUE");if(k.isFunctionParameter(a))throw Error("Cannot return FUNCTION");return a},prepare:function(a,b){b||(b=new u({wkid:102100}));var c=a.vars,d=a.customfunctions,g=new Y;c||(c={});d||(d={});var f=new n({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});f.immutable=!1;g._SymbolsMap={textformatting:1,infinity:1,pi:1};g.textformatting=f;g.infinity=Number.POSITIVE_INFINITY;g.pi=Math.PI;for(var e in d)g[e]=
d[e],g._SymbolsMap[e]=1;for(e in c)g._SymbolsMap[e]=1,g[e]=c[e]&&"esri.Graphic"===c[e].declaredClass?h.createFromGraphic(c[e]):c[e];return{spatialReference:b,globalScope:g,localScope:null,console:a.console?a.console:Q,symbols:{symbolCounter:0},depthCounter:1,applicationCache:void 0===a.applicationCache?null:a.applicationCache}}};return(new Function("context","spatialReference","var runtimeCtx\x3dthis.prepare(context, spatialReference);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n "+
a+"\n return lastStatement; } \n return this.postProcess(mainBody());")).bind(b)}})},"esri/arcade/Dictionary":function(){define(["require","exports","./ImmutableArray","./languageUtils","../geometry/Geometry"],function(b,e,n,h,l){return function(){function b(e){this.attributes=null;this.plain=!1;this.immutable=!0;this.attributes=e instanceof b?e.attributes:void 0===e?{}:null===e?{}:e}b.prototype.field=function(b){var a=b.toLowerCase();b=this.attributes[b];if(void 0!==b)return b;for(var f in this.attributes)if(f.toLowerCase()===
a)return this.attributes[f];throw Error("Field not Found");};b.prototype.setField=function(b,a){if(this.immutable)throw Error("Dictionary is Immutable");var f=b.toLowerCase();if(void 0===this.attributes[b])for(var d in this.attributes)if(d.toLowerCase()===f){this.attributes[d]=a;return}this.attributes[b]=a};b.prototype.hasField=function(b){var a=b.toLowerCase();if(void 0!==this.attributes[b])return!0;for(var f in this.attributes)if(f.toLowerCase()===a)return!0;return!1};b.prototype.keys=function(){var b=
[],a;for(a in this.attributes)b.push(a);return b=b.sort()};b.prototype.castToText=function(){var b="",a;for(a in this.attributes){""!==b&&(b+=",");var f=this.attributes[a];null==f?b+=JSON.stringify(a)+":null":h.isBoolean(f)||h.isNumber(f)||h.isString(f)?b+=JSON.stringify(a)+":"+JSON.stringify(f):f instanceof l?b+=JSON.stringify(a)+":"+h.toStringExplicit(f):f instanceof n?b+=JSON.stringify(a)+":"+h.toStringExplicit(f):f instanceof Array?b+=JSON.stringify(a)+":"+h.toStringExplicit(f):f instanceof Date?
b+=JSON.stringify(a)+":"+JSON.stringify(f):null!==f&&"object"===typeof f&&void 0!==f.castToText&&(b+=JSON.stringify(a)+":"+f.castToText())}return"{"+b+"}"};return b}()})},"esri/arcade/ImmutableArray":function(){define(["require","exports"],function(b,e){return function(){function b(b){void 0===b&&(b=[]);this._elements=b}b.prototype.length=function(){return this._elements.length};b.prototype.get=function(b){return this._elements[b]};b.prototype.toArray=function(){for(var b=[],e=0;e<this.length();e++)b.push(this.get(e));
return b};return b}()})},"esri/arcade/languageUtils":function(){define("require exports dojo/number ../kernel ../moment ./FunctionWrapper ./ImmutableArray ./ImmutablePathArray ./ImmutablePointArray ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline".split(" "),function(b,e,n,h,l,m,k,a,f,d,c,q,r,x,z){function v(a,b,c){if(""===b||null===b||void 0===b||b===c||b===c)return a;do a=a.replace(b,c);while(-1!==a.indexOf(b));return a}function w(a){return a instanceof
X||a instanceof m||a instanceof O}function p(a){return"string"===typeof a||a instanceof String}function y(a){return"boolean"===typeof a}function g(a){return"number"===typeof a}function u(a){return a instanceof Array}function t(a){return a instanceof Date}function A(a,b){if(!1===isNaN(a)){if(void 0===b||null===b||""===b)return a.toString();b=v(b,"\u2030","");b=v(b,"\u00a4","");return n.format(a,{pattern:b})}return a.toString()}function C(a,b){a=l(a);return void 0===b||null===b||""===b?a.format():a.format(B(b))}
function B(a){return a.replace(/(LTS)|L|l/g,function(a){return"["+a+"]"})}function F(a,b,c){switch(c){case "\x3e":return a>b;case "\x3c":return a<b;case "\x3e\x3d":return a>=b;case "\x3c\x3d":return a<=b}return!1}function D(b,c){if(b===c||null===b&&c===e.voidOperation||null===c&&b===e.voidOperation)return!0;if(t(b)&&t(c))return b.getTime()===c.getTime();if(b instanceof a||b instanceof f)return b.equalityTest(c);if(b instanceof r&&c instanceof r){var d=void 0,g=void 0;e.isVersion4?(d=b.cache._arcadeCacheId,
g=c.cache._arcadeCacheId):(d=b.getCacheValue("_arcadeCacheId"),g=c.getCacheValue("_arcadeCacheId"));if(void 0!==d&&null!==d)return d===g}return void 0!==b&&void 0!==c&&null!==b&&null!==c&&"object"===typeof b&&"object"===typeof c&&(b._arcadeCacheId===c._arcadeCacheId&&void 0!==b._arcadeCacheId&&null!==b._arcadeCacheId||b._underlyingGraphic===c._underlyingGraphic&&void 0!==b._underlyingGraphic&&null!==b._underlyingGraphic)?!0:!1}function H(a,b){if(p(a))return a;if(null===a)return"";if(g(a))return A(a,
b);if(y(a))return a.toString();if(t(a))return C(a,b);if(a instanceof c)return JSON.stringify(a.toJSON());if(u(a)){b=[];for(var d=0;d<a.length;d++)b[d]=ga(a[d]);return"["+b.join(",")+"]"}if(a instanceof k){b=[];for(d=0;d<a.length();d++)b[d]=ga(a.get(d));return"["+b.join(",")+"]"}return null!==a&&"object"===typeof a&&void 0!==a.castToText?a.castToText():w(a)?"object, Function":""}function aa(a,b){if(p(a))return a;if(null===a)return"";if(g(a))return A(a,b);if(y(a))return a.toString();if(t(a))return C(a,
b);if(a instanceof c)return a instanceof d?'{"xmin":'+a.xmin.toString()+',"ymin":'+a.ymin.toString()+","+(a.hasZ?'"zmin":'+a.zmin.toString()+",":"")+(a.hasM?'"mmin":'+a.mmin.toString()+",":"")+'"xmax":'+a.xmax.toString()+',"ymax":'+a.ymax.toString()+","+(a.hasZ?'"zmax":'+a.zmax.toString()+",":"")+(a.hasM?'"mmax":'+a.mmax.toString()+",":"")+'"spatialReference":'+ja(a.spatialReference)+"}":ja(a.toJSON(),function(a,b){return a.key===b.key?0:"spatialReference"===a.key?1:"spatialReference"===b.key||a.key<
b.key?-1:a.key>b.key?1:0});if(u(a)){b=[];for(var f=0;f<a.length;f++)b[f]=ga(a[f]);return"["+b.join(",")+"]"}if(a instanceof k){b=[];for(f=0;f<a.length();f++)b[f]=ga(a.get(f));return"["+b.join(",")+"]"}return null!==a&&"object"===typeof a&&void 0!==a.castToText?a.castToText():w(a)?"object, Function":""}function ga(a){if(null!==a){if(y(a)||g(a)||p(a))return JSON.stringify(a);if(a instanceof c||a instanceof k||a instanceof Array)return aa(a);if(a instanceof Date)return JSON.stringify(C(a,""));if(null!==
a&&"object"===typeof a&&void 0!==a.castToText)return a.castToText()}return"null"}function P(a,b){return g(a)?a:null===a||""===a?0:t(a)?NaN:y(a)?a?1:0:u(a)||""===a||void 0===a?NaN:void 0!==b&&p(a)?(b=v(b,"\u2030",""),b=v(b,"\u00a4",""),n.parse(a,{pattern:b})):a===e.voidOperation?0:Number(a)}function K(a,b){var c;b.fields.some(function(b){b.name===a&&(c=b.domain);return!!c});return c}function ja(a,b){b||(b={});"function"===typeof b&&(b={cmp:b});var c="boolean"===typeof b.cycles?b.cycles:!1,d=b.cmp&&
function(a){return function(b){return function(c,d){return a({key:c,value:b[c]},{key:d,value:b[d]})}}}(b.cmp),g=[];return function N(a){a&&a.toJSON&&"function"===typeof a.toJSON&&(a=a.toJSON());if(void 0!==a){if("number"===typeof a)return isFinite(a)?""+a:"null";if("object"!==typeof a)return JSON.stringify(a);var b,f;if(Array.isArray(a)){f="[";for(b=0;b<a.length;b++)b&&(f+=","),f+=N(a[b])||"null";return f+"]"}if(null===a)return"null";if(-1!==g.indexOf(a)){if(c)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");
}var e=g.push(a)-1,h=Object.keys(a).sort(d&&d(a));f="";for(b=0;b<h.length;b++){var k=h[b],p=N(a[k]);p&&(f&&(f+=","),f+=JSON.stringify(k)+":"+p)}g.splice(e,1);return"{"+f+"}"}}(a)}Object.defineProperty(e,"__esModule",{value:!0});b=function(){return function(a){this.value=a}}();var M=function(){return function(a){this.value=a}}(),X=function(){return function(a){this.fn=a}}(),O=function(){return function(a){this.fn=a}}();e.NativeFunction=X;e.ImplicitResult=M;e.ReturnResult=b;e.SizzleFunction=O;e.isVersion4=
0===h.version.indexOf("4.");e.voidOperation={type:"VOID"};e.breakResult={type:"BREAK"};e.continueResult={type:"CONTINUE"};e.multiReplace=v;e.isFunctionParameter=w;e.isSimpleType=function(a){return p(a)||g(a)||t(a)||y(a)||null===a||a===e.voidOperation||"number"===typeof a?!0:!1};e.defaultUndefined=function(a,b){return void 0===a?b:a};e.isString=p;e.isBoolean=y;e.isNumber=g;e.isArray=u;e.isFeatureCursor=function(a){return a&&void 0!==a.isFeatureCursor};e.isImmutableArray=function(a){return a instanceof
k};e.isDate=t;e.pcCheck=function(a,b,c){if(a.length<b||a.length>c)throw Error("Function called with wrong number of Parameters");};e.generateUUID=function(){var a=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var c=(a+16*Math.random())%16|0;a=Math.floor(a/16);return("x"===b?c:c&3|8).toString(16)})};e.formatNumber=A;e.formatDate=C;e.standardiseDateFormat=B;e.greaterThanLessThan=function(a,b,c){if(null===a){if(null===b||b===e.voidOperation)return F(null,
null,c);if(g(b))return F(0,b,c);if(p(b)||y(b))return F(0,P(b),c);if(t(b))return F(0,b.getTime(),c)}if(a===e.voidOperation){if(null===b||b===e.voidOperation)return F(null,null,c);if(g(b))return F(0,b,c);if(p(b)||y(b))return F(0,P(b),c);if(t(b))return F(0,b.getTime(),c)}else if(g(a)){if(g(b))return F(a,b,c);if(y(b))return F(a,P(b),c);if(null===b||b===e.voidOperation)return F(a,0,c);if(p(b))return F(a,P(b),c);if(t(b))return F(a,b.getTime(),c)}else if(p(a)){if(p(b))return F(H(a),H(b),c);if(t(b))return F(P(a),
b.getTime(),c);if(g(b))return F(P(a),b,c);if(null===b||b===e.voidOperation)return F(P(a),0,c);if(y(b))return F(P(a),P(b),c)}else if(t(a)){if(t(b))return F(a,b,c);if(null===b||b===e.voidOperation)return F(a.getTime(),0,c);if(g(b))return F(a.getTime(),b,c);if(y(b)||p(b))return F(a.getTime(),P(b),c)}else if(y(a)){if(y(b))return F(a,b,c);if(g(b))return F(P(a),P(b),c);if(t(b))return F(P(a),b.getTime(),c);if(null===b||b===e.voidOperation)return F(P(a),0,c);if(p(b))return F(P(a),P(b),c)}return!D(a,b)||"\x3c\x3d"!==
c&&"\x3e\x3d"!==c?!1:!0};e.equalityTest=D;e.toString=H;e.toNumberArray=function(a){var b=[];if(!1===u(a))return null;if(a instanceof k){for(var c=0;c<a.length();c++)b[c]=P(a.get(c));return b}for(c=0;c<a.length;c++)b[c]=P(a[c]);return b};e.toStringExplicit=aa;e.toNumber=P;e.toDate=function(a,b){return t(a)?a:p(a)&&(a=l(a,[void 0===b||null===b||""===b?l.ISO_8601:b]),a.isValid())?a.toDate():null};e.toDateM=function(a,b){return t(a)?l(a):p(a)&&(a=l(a,[void 0===b||null===b||""===b?l.ISO_8601:b]),a.isValid())?
a:null};e.toBoolean=function(a){if(y(a))return a;if(p(a)){if(a=a.toLowerCase(),"true"===a)return!0}else if(g(a))return 0===a||isNaN(a)?!1:!0;return!1};e.fixSpatialReference=function(a,b){if(null===a||void 0===a)return null;if(null===a.spatialReference||void 0===a.spatialReference)a.spatialReference=b;return a};e.fixNullGeometry=function(a){return null===a?null:a instanceof r?"NaN"===a.x||null===a.x||isNaN(a.x)?null:a:a instanceof x?0===a.rings.length?null:a:a instanceof z?0===a.paths.length?null:
a:a instanceof q?0===a.points.length?null:a:a instanceof d?"NaN"===a.xmin||null===a.xmin||isNaN(a.xmin)?null:a:null};e.getDomainValue=function(a,b){if(!a||!a.domain)return null;var c=null;b="string"===a.field.type||"esriFieldTypeString"===a.field.type?H(b):P(b);for(var d=0;d<a.domain.codedValues.length;d++){var g=a.domain.codedValues[d];g.code===b&&(c=g)}return null===c?null:c.name};e.getDomainCode=function(a,b){if(!a||!a.domain)return null;var c=null;b=H(b);for(var d=0;d<a.domain.codedValues.length;d++){var g=
a.domain.codedValues[d];g.name===b&&(c=g)}return null===c?null:c.code};e.getDomain=function(a,b,c,d){void 0===c&&(c=null);if(!b||!b.fields)return null;for(var g=null,f=0;f<b.fields.length;f++){var e=b.fields[f];e.name.toLowerCase()===a.toString().toLowerCase()&&(g=e)}if(null===g)return null;var h,k;d||(d=c&&b.typeIdField&&c._field(b.typeIdField));null!=d&&b.types.some(function(a){return a.id===d?((h=a.domains&&a.domains[g.name])&&"inherited"===h.type&&(h=K(g.name,b),k=!0),!0):!1});k||h||(h=K(a,b));
return{field:g,domain:h}};e.stableStringify=ja;e.autoCastFeatureToGeometry=function(a){if(null===a)return null;for(var b=[],c=0;c<a.length;c++){var d=a[c];d&&d.declaredClass&&"esri.arcade.Feature"===d.declaredClass?b.push(d.geometry()):b.push(d)}return b}})},"esri/moment":function(){define(["require","exports","./plugins/moment!"],function(b,e,n){return n})},"esri/plugins/moment":function(){define(["require","exports","dojo/_base/kernel","moment/moment"],function(b,e,n,h){Object.defineProperty(e,
"__esModule",{value:!0});var l={ar:1,"ar-dz":1,"ar-kw":1,"ar-ly":1,"ar-ma":1,"ar-sa":1,"ar-tn":1,bs:1,ca:1,cs:1,da:1,de:1,"de-at":1,"de-ch":1,el:1,"en-au":1,"en-ca":1,"en-gb":1,"en-ie":1,"en-il":1,"en-nz":1,es:1,"es-do":1,"es-us":1,et:1,fi:1,fr:1,"fr-ca":1,"fr-ch":1,he:1,hi:1,hr:1,hu:1,id:1,it:1,ja:1,ko:1,lt:1,lv:1,nb:1,nl:1,"nl-be":1,pl:1,pt:1,"pt-br":1,ro:1,ru:1,sl:1,sr:1,"sr-cyrl":1,sv:1,th:1,tr:1,vi:1,"zh-cn":1,"zh-hk":1,"zh-tw":1};e.load=function(b,e,a){b=n.locale;var f=b in l;if(!f){var d=b.split("-");
1<d.length&&d[0]in l&&(b=d[0],f=!0)}f?e(["moment/locale/"+b],function(){a(h)}):a(h)}})},"moment/moment":function(){(function(b,e){"object"===typeof exports&&"undefined"!==typeof module?module.exports=e():"function"===typeof define&&define.amd?define(e):b.moment=e()})(this,function(){function b(){return Vb.apply(null,arguments)}function e(a){return a instanceof Array||"[object Array]"===Object.prototype.toString.call(a)}function n(a){return null!=a&&"[object Object]"===Object.prototype.toString.call(a)}
function h(a){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(a).length;for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}function l(a){return void 0===a}function m(a){return"number"===typeof a||"[object Number]"===Object.prototype.toString.call(a)}function k(a){return a instanceof Date||"[object Date]"===Object.prototype.toString.call(a)}function a(a,b){var c=[],d;for(d=0;d<a.length;++d)c.push(b(a[d],d));return c}function f(a,b){return Object.prototype.hasOwnProperty.call(a,
b)}function d(a,b){for(var c in b)f(b,c)&&(a[c]=b[c]);f(b,"toString")&&(a.toString=b.toString);f(b,"valueOf")&&(a.valueOf=b.valueOf);return a}function c(a,b,c,d){return eb(a,b,c,d,!0).utc()}function q(a){null==a._pf&&(a._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1});return a._pf}function r(a){if(null==a._isValid){var b=q(a),c=Wb.call(b.parsedDateParts,
function(a){return null!=a}),c=!isNaN(a._d.getTime())&&0>b.overflow&&!b.empty&&!b.invalidMonth&&!b.invalidWeekday&&!b.weekdayMismatch&&!b.nullInput&&!b.invalidFormat&&!b.userInvalidated&&(!b.meridiem||b.meridiem&&c);a._strict&&(c=c&&0===b.charsLeftOver&&0===b.unusedTokens.length&&void 0===b.bigHour);if(null!=Object.isFrozen&&Object.isFrozen(a))return c;a._isValid=c}return a._isValid}function x(a){var b=c(NaN);null!=a?d(q(b),a):q(b).userInvalidated=!0;return b}function z(a,b){var c,d,g;l(b._isAMomentObject)||
(a._isAMomentObject=b._isAMomentObject);l(b._i)||(a._i=b._i);l(b._f)||(a._f=b._f);l(b._l)||(a._l=b._l);l(b._strict)||(a._strict=b._strict);l(b._tzm)||(a._tzm=b._tzm);l(b._isUTC)||(a._isUTC=b._isUTC);l(b._offset)||(a._offset=b._offset);l(b._pf)||(a._pf=q(b));l(b._locale)||(a._locale=b._locale);if(0<Hb.length)for(c=0;c<Hb.length;c++)d=Hb[c],g=b[d],l(g)||(a[d]=g);return a}function v(a){z(this,a);this._d=new Date(null!=a._d?a._d.getTime():NaN);this.isValid()||(this._d=new Date(NaN));!1===Ib&&(Ib=!0,b.updateOffset(this),
Ib=!1)}function w(a){return a instanceof v||null!=a&&null!=a._isAMomentObject}function p(a){return 0>a?Math.ceil(a)||0:Math.floor(a)}function y(a){a=+a;var b=0;0!==a&&isFinite(a)&&(b=p(a));return b}function g(a,b,c){var d=Math.min(a.length,b.length),g=Math.abs(a.length-b.length),f=0,e;for(e=0;e<d;e++)(c&&a[e]!==b[e]||!c&&y(a[e])!==y(b[e]))&&f++;return f+g}function u(a){!1===b.suppressDeprecationWarnings&&"undefined"!==typeof console&&console.warn&&console.warn("Deprecation warning: "+a)}function t(a,
c){var g=!0;return d(function(){null!=b.deprecationHandler&&b.deprecationHandler(null,a);if(g){for(var d=[],f,e=0;e<arguments.length;e++){f="";if("object"===typeof arguments[e]){f+="\n["+e+"] ";for(var h in arguments[0])f+=h+": "+arguments[0][h]+", ";f=f.slice(0,-2)}else f=arguments[e];d.push(f)}u(a+"\nArguments: "+Array.prototype.slice.call(d).join("")+"\n"+Error().stack);g=!1}return c.apply(this,arguments)},c)}function A(a,c){null!=b.deprecationHandler&&b.deprecationHandler(a,c);Xb[a]||(u(c),Xb[a]=
!0)}function C(a){return a instanceof Function||"[object Function]"===Object.prototype.toString.call(a)}function B(a,b){var c=d({},a),g;for(g in b)f(b,g)&&(n(a[g])&&n(b[g])?(c[g]={},d(c[g],a[g]),d(c[g],b[g])):null!=b[g]?c[g]=b[g]:delete c[g]);for(g in a)f(a,g)&&!f(b,g)&&n(a[g])&&(c[g]=d({},c[g]));return c}function F(a){null!=a&&this.set(a)}function D(a,b){var c=a.toLowerCase();ob[c]=ob[c+"s"]=ob[b]=a}function H(a){return"string"===typeof a?ob[a]||ob[a.toLowerCase()]:void 0}function aa(a){var b={},
c,d;for(d in a)f(a,d)&&(c=H(d))&&(b[c]=a[d]);return b}function ga(a){var b=[],c;for(c in a)b.push({unit:c,priority:Ea[c]});b.sort(function(a,b){return a.priority-b.priority});return b}function P(a,b,c){var d=""+Math.abs(a);return(0<=a?c?"+":"":"-")+Math.pow(10,Math.max(0,b-d.length)).toString().substr(1)+d}function K(a,b,c,d){var g=d;"string"===typeof d&&(g=function(){return this[d]()});a&&(lb[a]=g);b&&(lb[b[0]]=function(){return P(g.apply(this,arguments),b[1],b[2])});c&&(lb[c]=function(){return this.localeData().ordinal(g.apply(this,
arguments),a)})}function ja(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function M(a){var b=a.match(Yb),c,d;c=0;for(d=b.length;c<d;c++)b[c]=lb[b[c]]?lb[b[c]]:ja(b[c]);return function(c){var g="",f;for(f=0;f<d;f++)g+=C(b[f])?b[f].call(c,a):b[f];return g}}function X(a,b){if(!a.isValid())return a.localeData().invalidDate();b=O(b,a.localeData());Jb[b]=Jb[b]||M(b);return Jb[b](a)}function O(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(zb.lastIndex=0;0<=d&&
zb.test(a);)a=a.replace(zb,c),zb.lastIndex=0,--d;return a}function L(a,b,c){Kb[a]=C(b)?b:function(a,d){return a&&c?c:b}}function Q(a,b){return f(Kb,a)?Kb[a](b._strict,b._locale):new RegExp(G(a))}function G(a){return V(a.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,g){return b||c||d||g}))}function V(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$\x26")}function U(a,b){var c,d=b;"string"===typeof a&&(a=[a]);m(b)&&(d=function(a,c){c[b]=y(a)});for(c=0;c<a.length;c++)Lb[a[c]]=
d}function Y(a,b){U(a,function(a,c,d,g){d._w=d._w||{};b(a,d._w,d,g)})}function N(a){return 0===a%4&&0!==a%100||0===a%400}function T(a,c){return function(d){return null!=d?(fa(this,a,d),b.updateOffset(this,c),this):ba(this,a)}}function ba(a,b){return a.isValid()?a._d["get"+(a._isUTC?"UTC":"")+b]():NaN}function fa(a,b,c){if(a.isValid()&&!isNaN(c))if("FullYear"===b&&N(a.year())&&1===a.month()&&29===a.date())a._d["set"+(a._isUTC?"UTC":"")+b](c,a.month(),la(c,a.month()));else a._d["set"+(a._isUTC?"UTC":
"")+b](c)}function la(a,b){if(isNaN(a)||isNaN(b))return NaN;var c=(b%12+12)%12;return 1===c?N(a+(b-c)/12)?29:28:31-c%7%2}function pa(a,b){var c;if(!a.isValid())return a;if("string"===typeof b)if(/^\d+$/.test(b))b=y(b);else if(b=a.localeData().monthsParse(b),!m(b))return a;c=Math.min(a.date(),la(a.year(),b));a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c);return a}function ha(a){return null!=a?(pa(this,a),b.updateOffset(this,!0),this):ba(this,"Month")}function qa(){function a(a,b){return b.length-a.length}
var b=[],d=[],g=[],f,e;for(f=0;12>f;f++)e=c([2E3,f]),b.push(this.monthsShort(e,"")),d.push(this.months(e,"")),g.push(this.months(e,"")),g.push(this.monthsShort(e,""));b.sort(a);d.sort(a);g.sort(a);for(f=0;12>f;f++)b[f]=V(b[f]),d[f]=V(d[f]);for(f=0;24>f;f++)g[f]=V(g[f]);this._monthsShortRegex=this._monthsRegex=new RegExp("^("+g.join("|")+")","i");this._monthsStrictRegex=new RegExp("^("+d.join("|")+")","i");this._monthsShortStrictRegex=new RegExp("^("+b.join("|")+")","i")}function Ca(a,b,c,d,g,f,e){b=
new Date(a,b,c,d,g,f,e);100>a&&0<=a&&isFinite(b.getFullYear())&&b.setFullYear(a);return b}function sa(a){var b=new Date(Date.UTC.apply(null,arguments));100>a&&0<=a&&isFinite(b.getUTCFullYear())&&b.setUTCFullYear(a);return b}function Ba(a,b,c){c=7+b-c;return-((7+sa(a,0,c).getUTCDay()-b)%7)+c-1}function wa(a,b,c,d,g){c=(7+c-d)%7;d=Ba(a,d,g);d=1+7*(b-1)+c+d;0>=d?(b=a-1,a=(N(b)?366:365)+d):d>(N(a)?366:365)?(b=a+1,a=d-(N(a)?366:365)):(b=a,a=d);return{year:b,dayOfYear:a}}function Da(a,b,c){var d=Ba(a.year(),
b,c),d=Math.floor((a.dayOfYear()-d-1)/7)+1;1>d?(a=a.year()-1,b=d+Ga(a,b,c)):d>Ga(a.year(),b,c)?(b=d-Ga(a.year(),b,c),a=a.year()+1):(a=a.year(),b=d);return{week:b,year:a}}function Ga(a,b,c){var d=Ba(a,b,c);b=Ba(a+1,b,c);return((N(a)?366:365)-d+b)/7}function Sa(a,b,d){var g,f;a=a.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],g=0;7>g;++g)f=c([2E3,1]).day(g),this._minWeekdaysParse[g]=this.weekdaysMin(f,"").toLocaleLowerCase(),
this._shortWeekdaysParse[g]=this.weekdaysShort(f,"").toLocaleLowerCase(),this._weekdaysParse[g]=this.weekdays(f,"").toLocaleLowerCase();if(d)b="dddd"===b?xa.call(this._weekdaysParse,a):"ddd"===b?xa.call(this._shortWeekdaysParse,a):xa.call(this._minWeekdaysParse,a);else if("dddd"===b){b=xa.call(this._weekdaysParse,a);if(-1!==b)return b;b=xa.call(this._shortWeekdaysParse,a);if(-1!==b)return b;b=xa.call(this._minWeekdaysParse,a)}else if("ddd"===b){b=xa.call(this._shortWeekdaysParse,a);if(-1!==b)return b;
b=xa.call(this._weekdaysParse,a);if(-1!==b)return b;b=xa.call(this._minWeekdaysParse,a)}else{b=xa.call(this._minWeekdaysParse,a);if(-1!==b)return b;b=xa.call(this._weekdaysParse,a);if(-1!==b)return b;b=xa.call(this._shortWeekdaysParse,a)}return-1!==b?b:null}function ra(){function a(a,b){return b.length-a.length}var b=[],d=[],g=[],f=[],e,h,k,p;for(e=0;7>e;e++)h=c([2E3,1]).day(e),k=this.weekdaysMin(h,""),p=this.weekdaysShort(h,""),h=this.weekdays(h,""),b.push(k),d.push(p),g.push(h),f.push(k),f.push(p),
f.push(h);b.sort(a);d.sort(a);g.sort(a);f.sort(a);for(e=0;7>e;e++)d[e]=V(d[e]),g[e]=V(g[e]),f[e]=V(f[e]);this._weekdaysMinRegex=this._weekdaysShortRegex=this._weekdaysRegex=new RegExp("^("+f.join("|")+")","i");this._weekdaysStrictRegex=new RegExp("^("+g.join("|")+")","i");this._weekdaysShortStrictRegex=new RegExp("^("+d.join("|")+")","i");this._weekdaysMinStrictRegex=new RegExp("^("+b.join("|")+")","i")}function da(){return this.hours()%12||12}function Aa(a,b){K(a,0,0,function(){return this.localeData().meridiem(this.hours(),
this.minutes(),b)})}function Ma(a,b){return b._meridiemParse}function Wa(a){return a?a.toLowerCase().replace("_","-"):a}function Ka(a){var b=null;if(!ya[a]&&"undefined"!==typeof module&&module&&module.exports)try{b=pb._abbr,require("./locale/"+a),La(b)}catch(Wc){}return ya[a]}function La(a,b){a&&((b=l(b)?Fa(a):Ia(a,b))?pb=b:"undefined"!==typeof console&&console.warn&&console.warn("Locale "+a+" not found. Did you forget to load it?"));return pb._abbr}function Ia(a,b){if(null!==b){var c;c=Zb;b.abbr=
a;if(null!=ya[a])A("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),c=ya[a]._config;else if(null!=b.parentLocale)if(null!=ya[b.parentLocale])c=ya[b.parentLocale]._config;else if(c=Ka(b.parentLocale),null!=c)c=c._config;else return qb[b.parentLocale]||(qb[b.parentLocale]=[]),qb[b.parentLocale].push({name:a,
config:b}),null;ya[a]=new F(B(c,b));qb[a]&&qb[a].forEach(function(a){Ia(a.name,a.config)});La(a);return ya[a]}delete ya[a];return null}function Fa(a){var b;a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr);if(!a)return pb;if(!e(a)){if(b=Ka(a))return b;a=[a]}a:{b=0;for(var c,d,f,h;b<a.length;){h=Wa(a[b]).split("-");c=h.length;for(d=(d=Wa(a[b+1]))?d.split("-"):null;0<c;){if(f=Ka(h.slice(0,c).join("-"))){a=f;break a}if(d&&d.length>=c&&g(h,d,!0)>=c-1)break;c--}b++}a=pb}return a}function Za(a){var b;
(b=a._a)&&-2===q(a).overflow&&(b=0>b[ab]||11<b[ab]?ab:1>b[Xa]||b[Xa]>la(b[Ua],b[ab])?Xa:0>b[za]||24<b[za]||24===b[za]&&(0!==b[Va]||0!==b[bb]||0!==b[ib])?za:0>b[Va]||59<b[Va]?Va:0>b[bb]||59<b[bb]?bb:0>b[ib]||999<b[ib]?ib:-1,q(a)._overflowDayOfYear&&(b<Ua||b>Xa)&&(b=Xa),q(a)._overflowWeeks&&-1===b&&(b=mc),q(a)._overflowWeekday&&-1===b&&(b=nc),q(a).overflow=b);return a}function Ja(a,b,c){return null!=a?a:null!=b?b:c}function Ra(a){var c,d=[],g;if(!a._d){g=new Date(b.now());g=a._useUTC?[g.getUTCFullYear(),
g.getUTCMonth(),g.getUTCDate()]:[g.getFullYear(),g.getMonth(),g.getDate()];if(a._w&&null==a._a[Xa]&&null==a._a[ab]){var f,e,h,k,p,l;f=a._w;if(null!=f.GG||null!=f.W||null!=f.E){if(p=1,l=4,e=Ja(f.GG,a._a[Ua],Da(I(),1,4).year),h=Ja(f.W,1),k=Ja(f.E,1),1>k||7<k)c=!0}else if(p=a._locale._week.dow,l=a._locale._week.doy,h=Da(I(),p,l),e=Ja(f.gg,a._a[Ua],h.year),h=Ja(f.w,h.week),null!=f.d){if(k=f.d,0>k||6<k)c=!0}else if(null!=f.e){if(k=f.e+p,0>f.e||6<f.e)c=!0}else k=p;1>h||h>Ga(e,p,l)?q(a)._overflowWeeks=!0:
null!=c?q(a)._overflowWeekday=!0:(c=wa(e,h,k,p,l),a._a[Ua]=c.year,a._dayOfYear=c.dayOfYear)}if(null!=a._dayOfYear){c=Ja(a._a[Ua],g[Ua]);if(a._dayOfYear>(N(c)?366:365)||0===a._dayOfYear)q(a)._overflowDayOfYear=!0;c=sa(c,0,a._dayOfYear);a._a[ab]=c.getUTCMonth();a._a[Xa]=c.getUTCDate()}for(c=0;3>c&&null==a._a[c];++c)a._a[c]=d[c]=g[c];for(;7>c;c++)a._a[c]=d[c]=null==a._a[c]?2===c?1:0:a._a[c];24===a._a[za]&&0===a._a[Va]&&0===a._a[bb]&&0===a._a[ib]&&(a._nextDay=!0,a._a[za]=0);a._d=(a._useUTC?sa:Ca).apply(null,
d);d=a._useUTC?a._d.getUTCDay():a._d.getDay();null!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm);a._nextDay&&(a._a[za]=24);a._w&&"undefined"!==typeof a._w.d&&a._w.d!==d&&(q(a).weekdayMismatch=!0)}}function R(a){var b,c;b=a._i;var d=oc.exec(b)||pc.exec(b),g,f,e,h;if(d){q(a).iso=!0;b=0;for(c=Ab.length;b<c;b++)if(Ab[b][1].exec(d[1])){f=Ab[b][0];g=!1!==Ab[b][2];break}if(null==f)a._isValid=!1;else{if(d[3]){b=0;for(c=Mb.length;b<c;b++)if(Mb[b][1].exec(d[3])){e=(d[2]||" ")+Mb[b][0];break}if(null==
e){a._isValid=!1;return}}if(g||null==e){if(d[4])if(qc.exec(d[4]))h="Z";else{a._isValid=!1;return}a._f=f+(e||"")+(h||"");ea(a)}else a._isValid=!1}}else a._isValid=!1}function Ha(a){var b=rc.exec(a._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim());if(b){var c=b[3],d=b[2],g=b[5],f=b[6],e=b[7],h=parseInt(b[4],10),c=[49>=h?2E3+h:999>=h?1900+h:h,$b.indexOf(c),parseInt(d,10),parseInt(g,10),parseInt(f,10)];e&&c.push(parseInt(e,10));a:{if(e=b[1])if(e=ac.indexOf(e),d=(new Date(c[0],c[1],c[2])).getDay(),
e!==d){q(a).weekdayMismatch=!0;e=a._isValid=!1;break a}e=!0}e&&(a._a=c,(e=b[8])?b=sc[e]:b[9]?b=0:(b=parseInt(b[10],10),e=b%100,b=(b-e)/100*60+e),a._tzm=b,a._d=sa.apply(null,a._a),a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm),q(a).rfc2822=!0)}else a._isValid=!1}function va(a){var c=tc.exec(a._i);null!==c?a._d=new Date(+c[1]):(R(a),!1===a._isValid&&(delete a._isValid,Ha(a),!1===a._isValid&&(delete a._isValid,b.createFromInputFallback(a))))}function ea(a){if(a._f===b.ISO_8601)R(a);else if(a._f===b.RFC_2822)Ha(a);
else{a._a=[];q(a).empty=!0;var c=""+a._i,d,g,e,h,k,p=c.length,l=0;e=O(a._f,a._locale).match(Yb)||[];for(d=0;d<e.length;d++){h=e[d];if(g=(c.match(Q(h,a))||[])[0])k=c.substr(0,c.indexOf(g)),0<k.length&&q(a).unusedInput.push(k),c=c.slice(c.indexOf(g)+g.length),l+=g.length;if(lb[h]){if(g?q(a).empty=!1:q(a).unusedTokens.push(h),k=a,null!=g&&f(Lb,h))Lb[h](g,k._a,k,h)}else a._strict&&!g&&q(a).unusedTokens.push(h)}q(a).charsLeftOver=p-l;0<c.length&&q(a).unusedInput.push(c);12>=a._a[za]&&!0===q(a).bigHour&&
0<a._a[za]&&(q(a).bigHour=void 0);q(a).parsedDateParts=a._a.slice(0);q(a).meridiem=a._meridiem;c=a._a;d=za;p=a._locale;e=a._a[za];l=a._meridiem;null!=l&&(null!=p.meridiemHour?e=p.meridiemHour(e,l):null!=p.isPM&&((p=p.isPM(l))&&12>e&&(e+=12),p||12!==e||(e=0)));c[d]=e;Ra(a);Za(a)}}function Qa(b){if(!b._d){var c=aa(b._i);b._a=a([c.year,c.month,c.day||c.date,c.hour,c.minute,c.second,c.millisecond],function(a){return a&&parseInt(a,10)});Ra(b)}}function Na(a){var b=a._i,c=a._f;a._locale=a._locale||Fa(a._l);
if(null===b||void 0===c&&""===b)return x({nullInput:!0});"string"===typeof b&&(a._i=b=a._locale.preparse(b));if(w(b))return new v(Za(b));if(k(b))a._d=b;else if(e(c)){var g,f,h;if(0===a._f.length)q(a).invalidFormat=!0,a._d=new Date(NaN);else{for(b=0;b<a._f.length;b++)if(c=0,g=z({},a),null!=a._useUTC&&(g._useUTC=a._useUTC),g._f=a._f[b],ea(g),r(g)&&(c+=q(g).charsLeftOver,c+=10*q(g).unusedTokens.length,q(g).score=c,null==h||c<h))h=c,f=g;d(a,f||g)}}else c?ea(a):ka(a);r(a)||(a._d=null);return a}function ka(c){var d=
c._i;l(d)?c._d=new Date(b.now()):k(d)?c._d=new Date(d.valueOf()):"string"===typeof d?va(c):e(d)?(c._a=a(d.slice(0),function(a){return parseInt(a,10)}),Ra(c)):n(d)?Qa(c):m(d)?c._d=new Date(d):b.createFromInputFallback(c)}function eb(a,b,c,d,g){var f={};if(!0===c||!1===c)d=c,c=void 0;if(n(a)&&h(a)||e(a)&&0===a.length)a=void 0;f._isAMomentObject=!0;f._useUTC=f._isUTC=g;f._l=c;f._i=a;f._f=b;f._strict=d;a=new v(Za(Na(f)));a._nextDay&&(a.add(1,"d"),a._nextDay=void 0);return a}function I(a,b,c,d){return eb(a,
b,c,d,!1)}function ma(a,b){var c,d;1===b.length&&e(b[0])&&(b=b[0]);if(!b.length)return I();c=b[0];for(d=1;d<b.length;++d)if(!b[d].isValid()||b[d][a](c))c=b[d];return c}function E(a){for(var b in a)if(-1===xa.call(rb,b)||null!=a[b]&&isNaN(a[b]))return!1;b=!1;for(var c=0;c<rb.length;++c)if(a[rb[c]]){if(b)return!1;parseFloat(a[rb[c]])!==y(a[rb[c]])&&(b=!0)}return!0}function ca(a){a=aa(a);var b=a.year||0,c=a.quarter||0,d=a.month||0,g=a.week||0,f=a.day||0,e=a.hour||0,h=a.minute||0,k=a.second||0,p=a.millisecond||
0;this._isValid=E(a);this._milliseconds=+p+1E3*k+6E4*h+36E5*e;this._days=+f+7*g;this._months=+d+3*c+12*b;this._data={};this._locale=Fa();this._bubble()}function ia(a){return a instanceof ca}function na(a){return 0>a?-1*Math.round(-1*a):Math.round(a)}function W(a,b){K(a,0,0,function(){var a=this.utcOffset(),c="+";0>a&&(a=-a,c="-");return c+P(~~(a/60),2)+b+P(~~a%60,2)})}function Z(a,b){a=(b||"").match(a);if(null===a)return null;a=((a[a.length-1]||[])+"").match(uc)||["-",0,0];b=+(60*a[1])+y(a[2]);return 0===
b?0:"+"===a[0]?b:-b}function J(a,c){return c._isUTC?(c=c.clone(),a=(w(a)||k(a)?a.valueOf():I(a).valueOf())-c.valueOf(),c._d.setTime(c._d.valueOf()+a),b.updateOffset(c,!1),c):I(a).local()}function nb(){return this.isValid()?this._isUTC&&0===this._offset:!1}function Oa(a,b){var c=a,d=null;ia(a)?c={ms:a._milliseconds,d:a._days,M:a._months}:m(a)?(c={},b?c[b]=a:c.milliseconds=a):(d=vc.exec(a))?(c="-"===d[1]?-1:1,c={y:0,d:y(d[Xa])*c,h:y(d[za])*c,m:y(d[Va])*c,s:y(d[bb])*c,ms:y(na(1E3*d[ib]))*c}):(d=wc.exec(a))?
(c="-"===d[1]?-1:1,c={y:$a(d[2],c),M:$a(d[3],c),w:$a(d[4],c),d:$a(d[5],c),h:$a(d[6],c),m:$a(d[7],c),s:$a(d[8],c)}):null==c?c={}:"object"===typeof c&&("from"in c||"to"in c)&&(d=I(c.from),c=I(c.to),d.isValid()&&c.isValid()?(c=J(c,d),d.isBefore(c)?c=wb(d,c):(c=wb(c,d),c.milliseconds=-c.milliseconds,c.months=-c.months),d=c):d={milliseconds:0,months:0},c={},c.ms=d.milliseconds,c.M=d.months);c=new ca(c);ia(a)&&f(a,"_locale")&&(c._locale=a._locale);return c}function $a(a,b){a=a&&parseFloat(a.replace(",",
"."));return(isNaN(a)?0:a)*b}function wb(a,b){var c={milliseconds:0,months:0};c.months=b.month()-a.month()+12*(b.year()-a.year());a.clone().add(c.months,"M").isAfter(b)&&--c.months;c.milliseconds=+b-+a.clone().add(c.months,"M");return c}function Ta(a,b){return function(c,d){var g;null===d||isNaN(+d)||(A(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),g=c,c=d,d=g);c=Oa("string"===
typeof c?+c:c,d);yb(this,c,a);return this}}function yb(a,c,d,g){var f=c._milliseconds,e=na(c._days);c=na(c._months);a.isValid()&&(g=null==g?!0:g,c&&pa(a,ba(a,"Month")+c*d),e&&fa(a,"Date",ba(a,"Date")+e*d),f&&a._d.setTime(a._d.valueOf()+f*d),g&&b.updateOffset(a,e||c))}function tb(a,b){var c=12*(b.year()-a.year())+(b.month()-a.month()),d=a.clone().add(c,"months");0>b-d?(a=a.clone().add(c-1,"months"),b=(b-d)/(d-a)):(a=a.clone().add(c+1,"months"),b=(b-d)/(a-d));return-(c+b)||0}function ub(a){if(void 0===
a)return this._locale._abbr;a=Fa(a);null!=a&&(this._locale=a);return this}function mb(){return this._locale}function jb(a,b){K(0,[a,a.length],0,b)}function Qb(a,b,c,d,g){var f;if(null==a)return Da(this,d,g).year;f=Ga(a,d,g);b>f&&(b=f);a=wa(a,b,c,d,g);a=sa(a.year,0,a.dayOfYear);this.year(a.getUTCFullYear());this.month(a.getUTCMonth());this.date(a.getUTCDate());return this}function kc(a,b){b[ib]=y(1E3*("0."+a))}function Rb(a){return a}function vb(a,b,d,g){var f=Fa();b=c().set(g,b);return f[d](b,a)}
function Sb(a,b,c){m(a)&&(b=a,a=void 0);a=a||"";if(null!=b)return vb(a,b,c,"month");var d=[];for(b=0;12>b;b++)d[b]=vb(a,b,c,"month");return d}function Gb(a,b,c,d){"boolean"!==typeof a&&(c=b=a,a=!1);m(b)&&(c=b,b=void 0);b=b||"";var g=Fa();a=a?g._week.dow:0;if(null!=c)return vb(b,(c+a)%7,d,"day");g=[];for(c=0;7>c;c++)g[c]=vb(b,(c+a)%7,d,"day");return g}function Tb(a,b,c,d){b=Oa(b,c);a._milliseconds+=d*b._milliseconds;a._days+=d*b._days;a._months+=d*b._months;return a._bubble()}function Ub(a){return 0>
a?Math.floor(a):Math.ceil(a)}function db(a){return function(){return this.as(a)}}function hb(a){return function(){return this.isValid()?this._data[a]:NaN}}function lc(a,b,c,d,g){return g.relativeTime(b||1,!!c,a,d)}function kb(a){return(0<a)-(0>a)||+a}function xb(){if(!this.isValid())return this.localeData().invalidDate();var a=Nb(this._milliseconds)/1E3,b=Nb(this._days),c=Nb(this._months),d,g;d=p(a/60);g=p(d/60);a%=60;d%=60;var f=p(c/12),c=c%12,a=a?a.toFixed(3).replace(/\.?0+$/,""):"",e=this.asSeconds();
if(!e)return"P0D";var h=0>e?"-":"",k=kb(this._months)!==kb(e)?"-":"",l=kb(this._days)!==kb(e)?"-":"",e=kb(this._milliseconds)!==kb(e)?"-":"";return h+"P"+(f?k+f+"Y":"")+(c?k+c+"M":"")+(b?l+b+"D":"")+(g||d||a?"T":"")+(g?e+g+"H":"")+(d?e+d+"M":"")+(a?e+a+"S":"")}var Vb,Wb;Wb=Array.prototype.some?Array.prototype.some:function(a){for(var b=Object(this),c=b.length>>>0,d=0;d<c;d++)if(d in b&&a.call(this,b[d],d,b))return!0;return!1};var Hb=b.momentProperties=[],Ib=!1,Xb={};b.suppressDeprecationWarnings=
!1;b.deprecationHandler=null;var bc;bc=Object.keys?Object.keys:function(a){var b,c=[];for(b in a)f(a,b)&&c.push(b);return c};var ob={},Ea={},Yb=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,zb=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Jb={},lb={},cc=/\d/,Pa=/\d\d/,dc=/\d{3}/,Ob=/\d{4}/,Bb=/[+-]?\d{6}/,ua=/\d\d?/,ec=/\d\d\d\d?/,fc=/\d\d\d\d\d\d?/,Cb=/\d{1,3}/,
Pb=/\d{1,4}/,Db=/[+-]?\d{1,6}/,xc=/\d+/,Eb=/[+-]?\d+/,yc=/Z|[+-]\d\d:?\d\d/gi,Fb=/Z|[+-]\d\d(?::?\d\d)?/gi,sb=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Kb={},Lb={},Ua=0,ab=1,Xa=2,za=3,Va=4,bb=5,ib=6,mc=7,nc=8;K("Y",0,0,function(){var a=this.year();return 9999>=a?""+a:"+"+a});K(0,["YY",2],0,function(){return this.year()%100});K(0,["YYYY",4],0,"year");K(0,["YYYYY",5],0,"year");K(0,["YYYYYY",
6,!0],0,"year");D("year","y");Ea.year=1;L("Y",Eb);L("YY",ua,Pa);L("YYYY",Pb,Ob);L("YYYYY",Db,Bb);L("YYYYYY",Db,Bb);U(["YYYYY","YYYYYY"],Ua);U("YYYY",function(a,c){c[Ua]=2===a.length?b.parseTwoDigitYear(a):y(a)});U("YY",function(a,c){c[Ua]=b.parseTwoDigitYear(a)});U("Y",function(a,b){b[Ua]=parseInt(a,10)});b.parseTwoDigitYear=function(a){return y(a)+(68<y(a)?1900:2E3)};var gc=T("FullYear",!0),xa;xa=Array.prototype.indexOf?Array.prototype.indexOf:function(a){var b;for(b=0;b<this.length;++b)if(this[b]===
a)return b;return-1};K("M",["MM",2],"Mo",function(){return this.month()+1});K("MMM",0,0,function(a){return this.localeData().monthsShort(this,a)});K("MMMM",0,0,function(a){return this.localeData().months(this,a)});D("month","M");Ea.month=8;L("M",ua);L("MM",ua,Pa);L("MMM",function(a,b){return b.monthsShortRegex(a)});L("MMMM",function(a,b){return b.monthsRegex(a)});U(["M","MM"],function(a,b){b[ab]=y(a)-1});U(["MMM","MMMM"],function(a,b,c,d){d=c._locale.monthsParse(a,d,c._strict);null!=d?b[ab]=d:q(c).invalidMonth=
a});var hc=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,$b="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");K("w",["ww",2],"wo","week");K("W",["WW",2],"Wo","isoWeek");D("week","w");D("isoWeek","W");Ea.week=5;Ea.isoWeek=5;L("w",ua);L("ww",ua,Pa);L("W",ua);L("WW",ua,Pa);Y(["w","ww","W","WW"],function(a,b,c,d){b[d.substr(0,1)]=y(a)});K("d",0,"do","day");K("dd",0,0,function(a){return this.localeData().weekdaysMin(this,a)});K("ddd",0,0,function(a){return this.localeData().weekdaysShort(this,a)});K("dddd",
0,0,function(a){return this.localeData().weekdays(this,a)});K("e",0,0,"weekday");K("E",0,0,"isoWeekday");D("day","d");D("weekday","e");D("isoWeekday","E");Ea.day=11;Ea.weekday=11;Ea.isoWeekday=11;L("d",ua);L("e",ua);L("E",ua);L("dd",function(a,b){return b.weekdaysMinRegex(a)});L("ddd",function(a,b){return b.weekdaysShortRegex(a)});L("dddd",function(a,b){return b.weekdaysRegex(a)});Y(["dd","ddd","dddd"],function(a,b,c,d){d=c._locale.weekdaysParse(a,d,c._strict);null!=d?b.d=d:q(c).invalidWeekday=a});
Y(["d","e","E"],function(a,b,c,d){b[d]=y(a)});var ac="Sun Mon Tue Wed Thu Fri Sat".split(" ");K("H",["HH",2],0,"hour");K("h",["hh",2],0,da);K("k",["kk",2],0,function(){return this.hours()||24});K("hmm",0,0,function(){return""+da.apply(this)+P(this.minutes(),2)});K("hmmss",0,0,function(){return""+da.apply(this)+P(this.minutes(),2)+P(this.seconds(),2)});K("Hmm",0,0,function(){return""+this.hours()+P(this.minutes(),2)});K("Hmmss",0,0,function(){return""+this.hours()+P(this.minutes(),2)+P(this.seconds(),
2)});Aa("a",!0);Aa("A",!1);D("hour","h");Ea.hour=13;L("a",Ma);L("A",Ma);L("H",ua);L("h",ua);L("k",ua);L("HH",ua,Pa);L("hh",ua,Pa);L("kk",ua,Pa);L("hmm",ec);L("hmmss",fc);L("Hmm",ec);L("Hmmss",fc);U(["H","HH"],za);U(["k","kk"],function(a,b,c){a=y(a);b[za]=24===a?0:a});U(["a","A"],function(a,b,c){c._isPm=c._locale.isPM(a);c._meridiem=a});U(["h","hh"],function(a,b,c){b[za]=y(a);q(c).bigHour=!0});U("hmm",function(a,b,c){var d=a.length-2;b[za]=y(a.substr(0,d));b[Va]=y(a.substr(d));q(c).bigHour=!0});U("hmmss",
function(a,b,c){var d=a.length-4,g=a.length-2;b[za]=y(a.substr(0,d));b[Va]=y(a.substr(d,2));b[bb]=y(a.substr(g));q(c).bigHour=!0});U("Hmm",function(a,b,c){c=a.length-2;b[za]=y(a.substr(0,c));b[Va]=y(a.substr(c))});U("Hmmss",function(a,b,c){c=a.length-4;var d=a.length-2;b[za]=y(a.substr(0,c));b[Va]=y(a.substr(c,2));b[bb]=y(a.substr(d))});var zc=T("Hours",!0),Zb={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",
sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:"January February March April May June July August September October November December".split(" "),
monthsShort:$b,week:{dow:0,doy:6},weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),weekdaysMin:"Su Mo Tu We Th Fr Sa".split(" "),weekdaysShort:ac,meridiemParse:/[ap]\.?m?\.?/i},ya={},qb={},pb,oc=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,pc=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,
qc=/Z|[+-]\d\d(?::?\d\d)?/,Ab=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Mb=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",
/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],tc=/^\/?Date\((\-?\d+)/i,rc=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,sc={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};b.createFromInputFallback=t("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",
function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))});b.ISO_8601=function(){};b.RFC_2822=function(){};var Ac=t("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var a=I.apply(null,arguments);return this.isValid()&&a.isValid()?a<this?this:a:x()}),Bc=t("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var a=I.apply(null,arguments);return this.isValid()&&a.isValid()?a>this?this:
a:x()}),rb="year quarter month week day hour minute second millisecond".split(" ");W("Z",":");W("ZZ","");L("Z",Fb);L("ZZ",Fb);U(["Z","ZZ"],function(a,b,c){c._useUTC=!0;c._tzm=Z(Fb,a)});var uc=/([\+\-]|\d\d)/gi;b.updateOffset=function(){};var vc=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,wc=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;Oa.fn=ca.prototype;Oa.invalid=
function(){return Oa(NaN)};var Cc=Ta(1,"add"),Dc=Ta(-1,"subtract");b.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";b.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var ic=t("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(a){return void 0===a?this.localeData():this.locale(a)});K(0,["gg",2],0,function(){return this.weekYear()%100});K(0,["GG",2],0,function(){return this.isoWeekYear()%100});jb("gggg","weekYear");
jb("ggggg","weekYear");jb("GGGG","isoWeekYear");jb("GGGGG","isoWeekYear");D("weekYear","gg");D("isoWeekYear","GG");Ea.weekYear=1;Ea.isoWeekYear=1;L("G",Eb);L("g",Eb);L("GG",ua,Pa);L("gg",ua,Pa);L("GGGG",Pb,Ob);L("gggg",Pb,Ob);L("GGGGG",Db,Bb);L("ggggg",Db,Bb);Y(["gggg","ggggg","GGGG","GGGGG"],function(a,b,c,d){b[d.substr(0,2)]=y(a)});Y(["gg","GG"],function(a,c,d,g){c[g]=b.parseTwoDigitYear(a)});K("Q",0,"Qo","quarter");D("quarter","Q");Ea.quarter=7;L("Q",cc);U("Q",function(a,b){b[ab]=3*(y(a)-1)});
K("D",["DD",2],"Do","date");D("date","D");Ea.date=9;L("D",ua);L("DD",ua,Pa);L("Do",function(a,b){return a?b._dayOfMonthOrdinalParse||b._ordinalParse:b._dayOfMonthOrdinalParseLenient});U(["D","DD"],Xa);U("Do",function(a,b){b[Xa]=y(a.match(ua)[0])});var jc=T("Date",!0);K("DDD",["DDDD",3],"DDDo","dayOfYear");D("dayOfYear","DDD");Ea.dayOfYear=4;L("DDD",Cb);L("DDDD",dc);U(["DDD","DDDD"],function(a,b,c){c._dayOfYear=y(a)});K("m",["mm",2],0,"minute");D("minute","m");Ea.minute=14;L("m",ua);L("mm",ua,Pa);
U(["m","mm"],Va);var Ec=T("Minutes",!1);K("s",["ss",2],0,"second");D("second","s");Ea.second=15;L("s",ua);L("ss",ua,Pa);U(["s","ss"],bb);var Fc=T("Seconds",!1);K("S",0,0,function(){return~~(this.millisecond()/100)});K(0,["SS",2],0,function(){return~~(this.millisecond()/10)});K(0,["SSS",3],0,"millisecond");K(0,["SSSS",4],0,function(){return 10*this.millisecond()});K(0,["SSSSS",5],0,function(){return 100*this.millisecond()});K(0,["SSSSSS",6],0,function(){return 1E3*this.millisecond()});K(0,["SSSSSSS",
7],0,function(){return 1E4*this.millisecond()});K(0,["SSSSSSSS",8],0,function(){return 1E5*this.millisecond()});K(0,["SSSSSSSSS",9],0,function(){return 1E6*this.millisecond()});D("millisecond","ms");Ea.millisecond=16;L("S",Cb,cc);L("SS",Cb,Pa);L("SSS",Cb,dc);var fb;for(fb="SSSS";9>=fb.length;fb+="S")L(fb,xc);for(fb="S";9>=fb.length;fb+="S")U(fb,kc);var Gc=T("Milliseconds",!1);K("z",0,0,"zoneAbbr");K("zz",0,0,"zoneName");var S=v.prototype;S.add=Cc;S.calendar=function(a,c){a=a||I();var d=J(a,this).startOf("day"),
d=b.calendarFormat(this,d)||"sameElse";c=c&&(C(c[d])?c[d].call(this,a):c[d]);return this.format(c||this.localeData().calendar(d,this,I(a)))};S.clone=function(){return new v(this)};S.diff=function(a,b,c){var d;if(!this.isValid())return NaN;a=J(a,this);if(!a.isValid())return NaN;d=6E4*(a.utcOffset()-this.utcOffset());b=H(b);switch(b){case "year":b=tb(this,a)/12;break;case "month":b=tb(this,a);break;case "quarter":b=tb(this,a)/3;break;case "second":b=(this-a)/1E3;break;case "minute":b=(this-a)/6E4;break;
case "hour":b=(this-a)/36E5;break;case "day":b=(this-a-d)/864E5;break;case "week":b=(this-a-d)/6048E5;break;default:b=this-a}return c?b:p(b)};S.endOf=function(a){a=H(a);if(void 0===a||"millisecond"===a)return this;"date"===a&&(a="day");return this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms")};S.format=function(a){a||(a=this.isUtc()?b.defaultFormatUtc:b.defaultFormat);a=X(this,a);return this.localeData().postformat(a)};S.from=function(a,b){return this.isValid()&&(w(a)&&a.isValid()||I(a).isValid())?
Oa({to:this,from:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()};S.fromNow=function(a){return this.from(I(),a)};S.to=function(a,b){return this.isValid()&&(w(a)&&a.isValid()||I(a).isValid())?Oa({from:this,to:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()};S.toNow=function(a){return this.to(I(),a)};S.get=function(a){a=H(a);return C(this[a])?this[a]():this};S.invalidAt=function(){return q(this).overflow};S.isAfter=function(a,b){a=w(a)?a:I(a);if(!this.isValid()||
!a.isValid())return!1;b=H(l(b)?"millisecond":b);return"millisecond"===b?this.valueOf()>a.valueOf():a.valueOf()<this.clone().startOf(b).valueOf()};S.isBefore=function(a,b){a=w(a)?a:I(a);if(!this.isValid()||!a.isValid())return!1;b=H(l(b)?"millisecond":b);return"millisecond"===b?this.valueOf()<a.valueOf():this.clone().endOf(b).valueOf()<a.valueOf()};S.isBetween=function(a,b,c,d){d=d||"()";return("("===d[0]?this.isAfter(a,c):!this.isBefore(a,c))&&(")"===d[1]?this.isBefore(b,c):!this.isAfter(b,c))};S.isSame=
function(a,b){a=w(a)?a:I(a);if(!this.isValid()||!a.isValid())return!1;b=H(b||"millisecond");if("millisecond"===b)return this.valueOf()===a.valueOf();a=a.valueOf();return this.clone().startOf(b).valueOf()<=a&&a<=this.clone().endOf(b).valueOf()};S.isSameOrAfter=function(a,b){return this.isSame(a,b)||this.isAfter(a,b)};S.isSameOrBefore=function(a,b){return this.isSame(a,b)||this.isBefore(a,b)};S.isValid=function(){return r(this)};S.lang=ic;S.locale=ub;S.localeData=mb;S.max=Bc;S.min=Ac;S.parsingFlags=
function(){return d({},q(this))};S.set=function(a,b){if("object"===typeof a){a=aa(a);b=ga(a);for(var c=0;c<b.length;c++)this[b[c].unit](a[b[c].unit])}else if(a=H(a),C(this[a]))return this[a](b);return this};S.startOf=function(a){a=H(a);switch(a){case "year":this.month(0);case "quarter":case "month":this.date(1);case "week":case "isoWeek":case "day":case "date":this.hours(0);case "hour":this.minutes(0);case "minute":this.seconds(0);case "second":this.milliseconds(0)}"week"===a&&this.weekday(0);"isoWeek"===
a&&this.isoWeekday(1);"quarter"===a&&this.month(3*Math.floor(this.month()/3));return this};S.subtract=Dc;S.toArray=function(){return[this.year(),this.month(),this.date(),this.hour(),this.minute(),this.second(),this.millisecond()]};S.toObject=function(){return{years:this.year(),months:this.month(),date:this.date(),hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()}};S.toDate=function(){return new Date(this.valueOf())};S.toISOString=function(a){if(!this.isValid())return null;
var b=(a=!0!==a)?this.clone().utc():this;return 0>b.year()||9999<b.year()?X(b,a?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):C(Date.prototype.toISOString)?a?this.toDate().toISOString():(new Date(this.valueOf()+6E4*this.utcOffset())).toISOString().replace("Z",X(b,"Z")):X(b,a?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")};S.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var a="moment",b="";this.isLocal()||(a=0===this.utcOffset()?"moment.utc":
"moment.parseZone",b="Z");var a="["+a+'("]',c=0<=this.year()&&9999>=this.year()?"YYYY":"YYYYYY";return this.format(a+c+"-MM-DD[T]HH:mm:ss.SSS"+(b+'[")]'))};S.toJSON=function(){return this.isValid()?this.toISOString():null};S.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")};S.unix=function(){return Math.floor(this.valueOf()/1E3)};S.valueOf=function(){return this._d.valueOf()-6E4*(this._offset||0)};S.creationData=function(){return{input:this._i,format:this._f,
locale:this._locale,isUTC:this._isUTC,strict:this._strict}};S.year=gc;S.isLeapYear=function(){return N(this.year())};S.weekYear=function(a){return Qb.call(this,a,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)};S.isoWeekYear=function(a){return Qb.call(this,a,this.isoWeek(),this.isoWeekday(),1,4)};S.quarter=S.quarters=function(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)};S.month=ha;S.daysInMonth=function(){return la(this.year(),
this.month())};S.week=S.weeks=function(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),"d")};S.isoWeek=S.isoWeeks=function(a){var b=Da(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")};S.weeksInYear=function(){var a=this.localeData()._week;return Ga(this.year(),a.dow,a.doy)};S.isoWeeksInYear=function(){return Ga(this.year(),1,4)};S.date=jc;S.day=S.days=function(a){if(!this.isValid())return null!=a?this:NaN;var b=this._isUTC?this._d.getUTCDay():this._d.getDay();if(null!=
a){var c=this.localeData();"string"===typeof a&&(isNaN(a)?(a=c.weekdaysParse(a),a="number"===typeof a?a:null):a=parseInt(a,10));return this.add(a-b,"d")}return b};S.weekday=function(a){if(!this.isValid())return null!=a?this:NaN;var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")};S.isoWeekday=function(a){if(!this.isValid())return null!=a?this:NaN;if(null!=a){var b=this.localeData();a="string"===typeof a?b.weekdaysParse(a)%7||7:isNaN(a)?null:a;return this.day(this.day()%
7?a:a-7)}return this.day()||7};S.dayOfYear=function(a){var b=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864E5)+1;return null==a?b:this.add(a-b,"d")};S.hour=S.hours=zc;S.minute=S.minutes=Ec;S.second=S.seconds=Fc;S.millisecond=S.milliseconds=Gc;S.utcOffset=function(a,c,d){var g=this._offset||0,f;if(!this.isValid())return null!=a?this:NaN;if(null!=a){if("string"===typeof a){if(a=Z(Fb,a),null===a)return this}else 16>Math.abs(a)&&!d&&(a*=60);!this._isUTC&&c&&(f=15*-Math.round(this._d.getTimezoneOffset()/
15));this._offset=a;this._isUTC=!0;null!=f&&this.add(f,"m");g!==a&&(!c||this._changeInProgress?yb(this,Oa(a-g,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,b.updateOffset(this,!0),this._changeInProgress=null));return this}return this._isUTC?g:15*-Math.round(this._d.getTimezoneOffset()/15)};S.utc=function(a){return this.utcOffset(0,a)};S.local=function(a){this._isUTC&&(this.utcOffset(0,a),this._isUTC=!1,a&&this.subtract(15*-Math.round(this._d.getTimezoneOffset()/15),"m"));return this};
S.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"===typeof this._i){var a=Z(yc,this._i);null!=a?this.utcOffset(a):this.utcOffset(0,!0)}return this};S.hasAlignedHourOffset=function(a){if(!this.isValid())return!1;a=a?I(a).utcOffset():0;return 0===(this.utcOffset()-a)%60};S.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()};S.isLocal=function(){return this.isValid()?!this._isUTC:!1};
S.isUtcOffset=function(){return this.isValid()?this._isUTC:!1};S.isUtc=nb;S.isUTC=nb;S.zoneAbbr=function(){return this._isUTC?"UTC":""};S.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""};S.dates=t("dates accessor is deprecated. Use date instead.",jc);S.months=t("months accessor is deprecated. Use month instead",ha);S.years=t("years accessor is deprecated. Use year instead",gc);S.zone=t("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",
function(a,b){return null!=a?("string"!==typeof a&&(a=-a),this.utcOffset(a,b),this):-this.utcOffset()});S.isDSTShifted=t("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!l(this._isDSTShifted))return this._isDSTShifted;var a={};z(a,this);a=Na(a);if(a._a){var b=a._isUTC?c(a._a):I(a._a);this._isDSTShifted=this.isValid()&&0<g(a._a,b.toArray())}else this._isDSTShifted=!1;return this._isDSTShifted});var ta=F.prototype;ta.calendar=function(a,
b,c){a=this._calendar[a]||this._calendar.sameElse;return C(a)?a.call(b,c):a};ta.longDateFormat=function(a){var b=this._longDateFormat[a],c=this._longDateFormat[a.toUpperCase()];if(b||!c)return b;this._longDateFormat[a]=c.replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)});return this._longDateFormat[a]};ta.invalidDate=function(){return this._invalidDate};ta.ordinal=function(a){return this._ordinal.replace("%d",a)};ta.preparse=Rb;ta.postformat=Rb;ta.relativeTime=function(a,b,c,d){var g=this._relativeTime[c];
return C(g)?g(a,b,c,d):g.replace(/%d/i,a)};ta.pastFuture=function(a,b){a=this._relativeTime[0<a?"future":"past"];return C(a)?a(b):a.replace(/%s/i,b)};ta.set=function(a){var b,c;for(c in a)b=a[c],C(b)?this[c]=b:this["_"+c]=b;this._config=a;this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)};ta.months=function(a,b){return a?e(this._months)?this._months[a.month()]:this._months[(this._months.isFormat||hc).test(b)?"format":
"standalone"][a.month()]:e(this._months)?this._months:this._months.standalone};ta.monthsShort=function(a,b){return a?e(this._monthsShort)?this._monthsShort[a.month()]:this._monthsShort[hc.test(b)?"format":"standalone"][a.month()]:e(this._monthsShort)?this._monthsShort:this._monthsShort.standalone};ta.monthsParse=function(a,b,d){var g,f;if(this._monthsParseExact){a:{a=a.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],g=0;12>g;++g)f=
c([2E3,g]),this._shortMonthsParse[g]=this.monthsShort(f,"").toLocaleLowerCase(),this._longMonthsParse[g]=this.months(f,"").toLocaleLowerCase();if(d)b="MMM"===b?xa.call(this._shortMonthsParse,a):xa.call(this._longMonthsParse,a);else if("MMM"===b){b=xa.call(this._shortMonthsParse,a);if(-1!==b)break a;b=xa.call(this._longMonthsParse,a)}else{b=xa.call(this._longMonthsParse,a);if(-1!==b)break a;b=xa.call(this._shortMonthsParse,a)}b=-1!==b?b:null}return b}this._monthsParse||(this._monthsParse=[],this._longMonthsParse=
[],this._shortMonthsParse=[]);for(g=0;12>g;g++)if(f=c([2E3,g]),d&&!this._longMonthsParse[g]&&(this._longMonthsParse[g]=new RegExp("^"+this.months(f,"").replace(".","")+"$","i"),this._shortMonthsParse[g]=new RegExp("^"+this.monthsShort(f,"").replace(".","")+"$","i")),d||this._monthsParse[g]||(f="^"+this.months(f,"")+"|^"+this.monthsShort(f,""),this._monthsParse[g]=new RegExp(f.replace(".",""),"i")),d&&"MMMM"===b&&this._longMonthsParse[g].test(a)||d&&"MMM"===b&&this._shortMonthsParse[g].test(a)||!d&&
this._monthsParse[g].test(a))return g};ta.monthsRegex=function(a){if(this._monthsParseExact)return f(this,"_monthsRegex")||qa.call(this),a?this._monthsStrictRegex:this._monthsRegex;f(this,"_monthsRegex")||(this._monthsRegex=sb);return this._monthsStrictRegex&&a?this._monthsStrictRegex:this._monthsRegex};ta.monthsShortRegex=function(a){if(this._monthsParseExact)return f(this,"_monthsRegex")||qa.call(this),a?this._monthsShortStrictRegex:this._monthsShortRegex;f(this,"_monthsShortRegex")||(this._monthsShortRegex=
sb);return this._monthsShortStrictRegex&&a?this._monthsShortStrictRegex:this._monthsShortRegex};ta.week=function(a){return Da(a,this._week.dow,this._week.doy).week};ta.firstDayOfYear=function(){return this._week.doy};ta.firstDayOfWeek=function(){return this._week.dow};ta.weekdays=function(a,b){return a?e(this._weekdays)?this._weekdays[a.day()]:this._weekdays[this._weekdays.isFormat.test(b)?"format":"standalone"][a.day()]:e(this._weekdays)?this._weekdays:this._weekdays.standalone};ta.weekdaysMin=function(a){return a?
this._weekdaysMin[a.day()]:this._weekdaysMin};ta.weekdaysShort=function(a){return a?this._weekdaysShort[a.day()]:this._weekdaysShort};ta.weekdaysParse=function(a,b,d){var g,f;if(this._weekdaysParseExact)return Sa.call(this,a,b,d);this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]);for(g=0;7>g;g++)if(f=c([2E3,1]).day(g),d&&!this._fullWeekdaysParse[g]&&(this._fullWeekdaysParse[g]=new RegExp("^"+this.weekdays(f,"").replace(".",
".?")+"$","i"),this._shortWeekdaysParse[g]=new RegExp("^"+this.weekdaysShort(f,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[g]=new RegExp("^"+this.weekdaysMin(f,"").replace(".",".?")+"$","i")),this._weekdaysParse[g]||(f="^"+this.weekdays(f,"")+"|^"+this.weekdaysShort(f,"")+"|^"+this.weekdaysMin(f,""),this._weekdaysParse[g]=new RegExp(f.replace(".",""),"i")),d&&"dddd"===b&&this._fullWeekdaysParse[g].test(a)||d&&"ddd"===b&&this._shortWeekdaysParse[g].test(a)||d&&"dd"===b&&this._minWeekdaysParse[g].test(a)||
!d&&this._weekdaysParse[g].test(a))return g};ta.weekdaysRegex=function(a){if(this._weekdaysParseExact)return f(this,"_weekdaysRegex")||ra.call(this),a?this._weekdaysStrictRegex:this._weekdaysRegex;f(this,"_weekdaysRegex")||(this._weekdaysRegex=sb);return this._weekdaysStrictRegex&&a?this._weekdaysStrictRegex:this._weekdaysRegex};ta.weekdaysShortRegex=function(a){if(this._weekdaysParseExact)return f(this,"_weekdaysRegex")||ra.call(this),a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex;f(this,
"_weekdaysShortRegex")||(this._weekdaysShortRegex=sb);return this._weekdaysShortStrictRegex&&a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex};ta.weekdaysMinRegex=function(a){if(this._weekdaysParseExact)return f(this,"_weekdaysRegex")||ra.call(this),a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex;f(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=sb);return this._weekdaysMinStrictRegex&&a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex};ta.isPM=function(a){return"p"===(a+"").toLowerCase().charAt(0)};
ta.meridiem=function(a,b,c){return 11<a?c?"pm":"PM":c?"am":"AM"};La("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10,b=1===y(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+b}});b.lang=t("moment.lang is deprecated. Use moment.locale instead.",La);b.langData=t("moment.langData is deprecated. Use moment.localeData instead.",Fa);var cb=Math.abs,Hc=db("ms"),Ic=db("s"),Jc=db("m"),Kc=db("h"),Lc=db("d"),Mc=db("w"),Nc=db("M"),Oc=db("y"),Pc=hb("milliseconds"),
Qc=hb("seconds"),Rc=hb("minutes"),Sc=hb("hours"),Tc=hb("days"),Uc=hb("months"),Vc=hb("years"),gb=Math.round,Ya={ss:44,s:45,m:45,h:22,d:26,M:11},Nb=Math.abs,oa=ca.prototype;oa.isValid=function(){return this._isValid};oa.abs=function(){var a=this._data;this._milliseconds=cb(this._milliseconds);this._days=cb(this._days);this._months=cb(this._months);a.milliseconds=cb(a.milliseconds);a.seconds=cb(a.seconds);a.minutes=cb(a.minutes);a.hours=cb(a.hours);a.months=cb(a.months);a.years=cb(a.years);return this};
oa.add=function(a,b){return Tb(this,a,b,1)};oa.subtract=function(a,b){return Tb(this,a,b,-1)};oa.as=function(a){if(!this.isValid())return NaN;var b,c=this._milliseconds;a=H(a);if("month"===a||"year"===a)return b=this._days+c/864E5,b=this._months+4800*b/146097,"month"===a?b:b/12;b=this._days+Math.round(146097*this._months/4800);switch(a){case "week":return b/7+c/6048E5;case "day":return b+c/864E5;case "hour":return 24*b+c/36E5;case "minute":return 1440*b+c/6E4;case "second":return 86400*b+c/1E3;case "millisecond":return Math.floor(864E5*
b)+c;default:throw Error("Unknown unit "+a);}};oa.asMilliseconds=Hc;oa.asSeconds=Ic;oa.asMinutes=Jc;oa.asHours=Kc;oa.asDays=Lc;oa.asWeeks=Mc;oa.asMonths=Nc;oa.asYears=Oc;oa.valueOf=function(){return this.isValid()?this._milliseconds+864E5*this._days+this._months%12*2592E6+31536E6*y(this._months/12):NaN};oa._bubble=function(){var a=this._milliseconds,b=this._days,c=this._months,d=this._data;0<=a&&0<=b&&0<=c||0>=a&&0>=b&&0>=c||(a+=864E5*Ub(146097*c/4800+b),c=b=0);d.milliseconds=a%1E3;a=p(a/1E3);d.seconds=
a%60;a=p(a/60);d.minutes=a%60;a=p(a/60);d.hours=a%24;b+=p(a/24);a=p(4800*b/146097);c+=a;b-=Ub(146097*a/4800);a=p(c/12);d.days=b;d.months=c%12;d.years=a;return this};oa.clone=function(){return Oa(this)};oa.get=function(a){a=H(a);return this.isValid()?this[a+"s"]():NaN};oa.milliseconds=Pc;oa.seconds=Qc;oa.minutes=Rc;oa.hours=Sc;oa.days=Tc;oa.weeks=function(){return p(this.days()/7)};oa.months=Uc;oa.years=Vc;oa.humanize=function(a){if(!this.isValid())return this.localeData().invalidDate();var b=this.localeData(),
c;c=!a;var d=Oa(this).abs(),g=gb(d.as("s")),f=gb(d.as("m")),e=gb(d.as("h")),h=gb(d.as("d")),k=gb(d.as("M")),d=gb(d.as("y")),g=g<=Ya.ss&&["s",g]||g<Ya.s&&["ss",g]||1>=f&&["m"]||f<Ya.m&&["mm",f]||1>=e&&["h"]||e<Ya.h&&["hh",e]||1>=h&&["d"]||h<Ya.d&&["dd",h]||1>=k&&["M"]||k<Ya.M&&["MM",k]||1>=d&&["y"]||["yy",d];g[2]=c;g[3]=0<+this;g[4]=b;c=lc.apply(null,g);a&&(c=b.pastFuture(+this,c));return b.postformat(c)};oa.toISOString=xb;oa.toString=xb;oa.toJSON=xb;oa.locale=ub;oa.localeData=mb;oa.toIsoString=t("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",
xb);oa.lang=ic;K("X",0,0,"unix");K("x",0,0,"valueOf");L("x",Eb);L("X",/[+-]?\d+(\.\d{1,3})?/);U("X",function(a,b,c){c._d=new Date(1E3*parseFloat(a,10))});U("x",function(a,b,c){c._d=new Date(y(a))});b.version="2.22.1";Vb=I;b.fn=S;b.min=function(){var a=[].slice.call(arguments,0);return ma("isBefore",a)};b.max=function(){var a=[].slice.call(arguments,0);return ma("isAfter",a)};b.now=function(){return Date.now?Date.now():+new Date};b.utc=c;b.unix=function(a){return I(1E3*a)};b.months=function(a,b){return Sb(a,
b,"months")};b.isDate=k;b.locale=La;b.invalid=x;b.duration=Oa;b.isMoment=w;b.weekdays=function(a,b,c){return Gb(a,b,c,"weekdays")};b.parseZone=function(){return I.apply(null,arguments).parseZone()};b.localeData=Fa;b.isDuration=ia;b.monthsShort=function(a,b){return Sb(a,b,"monthsShort")};b.weekdaysMin=function(a,b,c){return Gb(a,b,c,"weekdaysMin")};b.defineLocale=Ia;b.updateLocale=function(a,b){if(null!=b){var c,d=Zb;c=Ka(a);null!=c&&(d=c._config);b=B(d,b);b=new F(b);b.parentLocale=ya[a];ya[a]=b;La(a)}else null!=
ya[a]&&(null!=ya[a].parentLocale?ya[a]=ya[a].parentLocale:null!=ya[a]&&delete ya[a]);return ya[a]};b.locales=function(){return bc(ya)};b.weekdaysShort=function(a,b,c){return Gb(a,b,c,"weekdaysShort")};b.normalizeUnits=H;b.relativeTimeRounding=function(a){return void 0===a?gb:"function"===typeof a?(gb=a,!0):!1};b.relativeTimeThreshold=function(a,b){if(void 0===Ya[a])return!1;if(void 0===b)return Ya[a];Ya[a]=b;"s"===a&&(Ya.ss=b-1);return!0};b.calendarFormat=function(a,b){a=a.diff(b,"days",!0);return-6>
a?"sameElse":-1>a?"lastWeek":0>a?"lastDay":1>a?"sameDay":2>a?"nextDay":7>a?"nextWeek":"sameElse"};b.prototype=S;b.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"YYYY-[W]WW",MONTH:"YYYY-MM"};return b})},"esri/arcade/FunctionWrapper":function(){define(["require","exports"],function(b,e){return function(){return function(b,e){this.context=
this.definition=null;this.definition=b;this.context=e}}()})},"esri/arcade/ImmutablePathArray":function(){define(["require","exports","../core/tsSupport/extendsHelper","./ImmutableArray","./ImmutablePointArray"],function(b,e,n,h,l){return function(b){function e(a,f,d,c,e){a=b.call(this,a)||this;a._lazyPath=[];a._hasZ=!1;a._hasM=!1;a._hasZ=d;a._hasM=c;a._spRef=f;a._cacheId=e;return a}n(e,b);e.prototype.get=function(a){if(void 0===this._lazyPath[a]){var b=this._elements[a];if(void 0===b)return;this._lazyPath[a]=
new l(b,this._spRef,this._hasZ,this._hasM,this._cacheId,a)}return this._lazyPath[a]};e.prototype.equalityTest=function(a){return a===this?!0:null===a||!1===a instanceof e?!1:a.getUniqueHash()===this.getUniqueHash()};e.prototype.getUniqueHash=function(){return this._cacheId.toString()};return e}(h)})},"esri/arcade/ImmutablePointArray":function(){define("require exports ../core/tsSupport/extendsHelper ../kernel ./ImmutableArray ../geometry/Point".split(" "),function(b,e,n,h,l,m){var k=0===h.version.indexOf("4.");
return function(a){function b(b,c,f,e,h,k){b=a.call(this,b)||this;b._lazyPt=[];b._hasZ=!1;b._hasM=!1;b._spRef=c;b._hasZ=f;b._hasM=e;b._cacheId=h;b._partId=k;return b}n(b,a);b.prototype.get=function(a){if(void 0===this._lazyPt[a]){var b=this._elements[a];if(void 0===b)return;var d=this._hasZ,f=this._hasM,e=null,e=d&&!f?new m(b[0],b[1],b[2],void 0,this._spRef):f&&d?new m(b[0],b[1],void 0,b[2],this._spRef):d&&f?new m(b[0],b[1],b[2],b[3],this._spRef):new m(b[0],b[1],this._spRef);k?e.cache._arcadeCacheId=
this._cacheId.toString()+"-"+this._partId.toString()+"-"+a.toString():e.setCacheValue("_arcadeCacheId",this._cacheId.toString()+"-"+this._partId.toString()+"-"+a.toString());this._lazyPt[a]=e}return this._lazyPt[a]};b.prototype.equalityTest=function(a){return a===this?!0:null===a||!1===a instanceof b?!1:a.getUniqueHash()===this.getUniqueHash()};b.prototype.getUniqueHash=function(){return this._cacheId.toString()+"-"+this._partId.toString()};return b}(l)})},"esri/arcade/Feature":function(){define("require exports ../core/tsSupport/assignHelper ./Dictionary ./ImmutableArray ./languageUtils ../geometry/Geometry ../geometry/Point ../geometry/support/jsonUtils".split(" "),
function(b,e,n,h,l,m,k,a,f){return function(){function b(){this.declaredClass="esri.arcade.Feature";this._layer=this.attributes=this._geometry=null;this.immutable=this.immutable=this._datesfixed=!0}b.createFromGraphic=function(a){var c=new b;c._geometry=a.geometry;c.attributes=void 0===a.attributes?{}:null===a.attributes?{}:a.attributes;a._sourceLayer?(c._layer=a._sourceLayer,c._datesfixed=!1):a._layer?(c._layer=a._layer,c._datesfixed=!1):a.layer&&(c._layer=a.layer,c._datesfixed=!1);return c};b.createFromArcadeFeature=
function(a){var c=new b;c._datesfixed=a._datesfixed;c.attributes=a.attributes;c._geometry=a._geometry;a._layer&&(c._layer=a._layer);return c};b.createFromArcadeDictionary=function(a){var c=new b;c.attributes=a.field("attributes");null!==c.attributes?c.attributes instanceof h?(c.attributes=c.attributes.attributes,null===c.attributes&&(c.attributes={})):c.attributes={}:c.attributes={};c._geometry=a.field("geometry");null!==c._geometry&&(c._geometry instanceof h?c._geometry=b.parseGeometryFromDictionary(c._geometry):
c._geometry instanceof k||(c._geometry=null));return c};b.createFromGraphicLikeObject=function(a,d,f){void 0===f&&(f=null);var c=new b;null===d&&(d={});c.attributes=d;c._geometry=a;c._layer=f;c._layer&&(c._datesfixed=!1);return c};b.prototype.repurposeFromGraphicLikeObject=function(a,b,d){void 0===d&&(d=null);null===b&&(b={});this.attributes=b;this._geometry=a;this._datesfixed=(this._layer=d)?!1:!0};b.prototype.castToText=function(){var a="",b;for(b in this.attributes){""!==a&&(a+=",");var d=this.attributes[b];
null==d?a+=JSON.stringify(b)+":null":m.isBoolean(d)||m.isNumber(d)||m.isString(d)?a+=JSON.stringify(b)+":"+JSON.stringify(d):d instanceof k?a+=JSON.stringify(b)+":"+m.toStringExplicit(d):d instanceof l?a+=JSON.stringify(b)+":"+m.toStringExplicit(d):d instanceof Array?a+=JSON.stringify(b)+":"+m.toStringExplicit(d):d instanceof Date?a+=JSON.stringify(b)+":"+JSON.stringify(d):null!==d&&"object"===typeof d&&void 0!==d.castToText&&(a+=JSON.stringify(b)+":"+d.castToText())}return'{"geometry":'+(null===
this.geometry()?"null":m.toStringExplicit(this.geometry()))+',"attributes":{'+a+"}}"};b.prototype._fixDates=function(){for(var a=[],b=0;b<this._layer.fields.length;b++){var d=this._layer.fields[b];"date"!==d.type&&"esriFieldTypeDate"!==d.type||a.push(d.name)}0<a.length&&this._fixDateFields(a);this._datesfixed=!0};b.prototype._fixDateFields=function(a){this.attributes=n({},this.attributes);for(var b=0;b<a.length;b++){var c=this.attributes[a[b]];if(null!==c)if(void 0===c)for(var d in this.attributes){if(d.toLowerCase()===
a[b]){c=this.attributes[d];null===c||c instanceof Date||(this.attributes[d]=new Date(c));break}}else c instanceof Date||(this.attributes[a[b]]=new Date(c))}};b.prototype.geometry=function(){return null===this._geometry||this._geometry instanceof k?this._geometry:this._geometry=f.fromJSON(this._geometry)};b.prototype.field=function(a){!1===this._datesfixed&&this._fixDates();var b=a.toLowerCase();a=this.attributes[a];if(void 0!==a)return a;for(var c in this.attributes)if(c.toLowerCase()===b)return this.attributes[c];
if(this._hasFieldDefinition(b))return null;throw Error("Field not Found");};b.prototype._hasFieldDefinition=function(a){if(null===this._layer)return!1;for(var b=0;b<this._layer.fields.length;b++)if(this._layer.fields[b].name.toLowerCase()===a)return!0;return!1};b.prototype._field=function(a){!1===this._datesfixed&&this._fixDates();var b=a.toLowerCase();a=this.attributes[a];if(void 0!==a)return a;for(var c in this.attributes)if(c.toLowerCase()===b)return this.attributes[c];return null};b.prototype.setField=
function(a,b){if(this.immutable)throw Error("Feature is Immutable");if(!1===m.isSimpleType(b))throw Error("Illegal Value Assignment to Feature");var c=a.toLowerCase();if(void 0===this.attributes[a])for(var d in this.attributes)if(d.toLowerCase()===c){this.attributes[d]=b;return}this.attributes[a]=b};b.prototype.hasField=function(a){var b=a.toLowerCase();if(void 0!==this.attributes[a])return!0;for(var c in this.attributes)if(c.toLowerCase()===b)return!0;return this._hasFieldDefinition(b)?!0:!1};b.prototype.keys=
function(){var a=[],b={},d;for(d in this.attributes)a.push(d),b[d.toLowerCase()]=1;if(null!==this._layer)for(d=0;d<this._layer.fields.length;d++){var f=this._layer.fields[d];1!==b[f.name.toLowerCase()]&&a.push(f.name)}return a=a.sort()};b.parseGeometryFromDictionary=function(a){a=b.convertDictionaryToJson(a,!0);void 0!==a.spatialreference&&(a.spatialReference=a.spatialreference,delete a.spatialreference);void 0!==a.rings&&(a.rings=this.fixPathArrays(a.rings,!0===a.hasZ,!0===a.hasM));void 0!==a.paths&&
(a.paths=this.fixPathArrays(a.paths,!0===a.hasZ,!0===a.hasM));void 0!==a.points&&(a.points=this.fixPointArrays(a.points,!0===a.hasZ,!0===a.hasM));return f.fromJSON(a)};b.fixPathArrays=function(a,b,d){var c=[];if(a instanceof Array)for(var f=0;f<a.length;f++)c.push(this.fixPointArrays(a[f],b,d));else if(a instanceof l)for(f=0;f<a.length();f++)c.push(this.fixPointArrays(a.get(f),b,d));return c};b.fixPointArrays=function(b,d,f){var c=[];if(b instanceof Array)for(var e=0;e<b.length;e++){var h=b[e];h instanceof
a?d&&f?c.push([h.x,h.y,h.z,h.m]):d?c.push([h.x,h.y,h.z]):f?c.push([h.x,h.y,h.m]):c.push([h.x,h.y]):c.push(h)}else if(b instanceof l)for(e=0;e<b.length();e++)h=b.get(e),h instanceof a?d&&f?c.push([h.x,h.y,h.z,h.m]):d?c.push([h.x,h.y,h.z]):f?c.push([h.x,h.y,h.m]):c.push([h.x,h.y]):c.push(h);return c};b.convertDictionaryToJson=function(a,d){void 0===d&&(d=!1);var c={},f;for(f in a.attributes){var e=a.attributes[f];e instanceof h&&(e=b.convertDictionaryToJson(e));d?c[f.toLowerCase()]=e:c[f]=e}return c};
b.parseAttributesFromDictionary=function(a){var b={},c;for(c in a.attributes){var d=a.attributes[c];if(m.isSimpleType(d))b[c]=d;else throw Error("Illegal Argument");}return b};b.fromJson=function(a){var c=null;null!==a.geometry&&void 0!==a.geometry&&(c=f.fromJSON(a.geometry));var d={};if(null!==a.attributes&&void 0!==a.attributes)for(var e in a.attributes){var h=a.attributes[e];if(m.isString(h)||m.isNumber(h)||m.isBoolean(h)||m.isDate(h))d[e]=h;else throw Error("Illegal Argument");}return b.createFromGraphicLikeObject(c,
d,null)};b.prototype.domainValueLookup=function(a,b,d){if(null===this._layer||!this._layer.fields)return null;d=m.getDomain(a,this._layer,this,d);if(void 0===b)try{b=this.field(a)}catch(x){return null}return m.getDomainValue(d,b)};b.prototype.domainCodeLookup=function(a,b,d){if(null===this._layer||!this._layer.fields)return null;a=m.getDomain(a,this._layer,this,d);return m.getDomainCode(a,b)};return b}()})},"esri/arcade/treeAnalysis":function(){define(["require","exports"],function(b,e){function n(a,
b,c,d){return"0"!==a.min&&c.length<Number(a.min)||"*"!==a.max&&c.length>Number(a.max)?-2:1}function h(a,b,c){if(null!==c.localScope&&void 0!==c.localScope[a.toLowerCase()]){var d=c.localScope[a.toLowerCase()];if("FormulaFunction"===d.type||"any"===d.type)return void 0===d.signature&&(d.signature={min:"0",max:"*"}),n(d.signature,a,b,c)}return void 0!==c.globalScope[a.toLowerCase()]&&(d=c.globalScope[a.toLowerCase()],"FormulaFunction"===d.type||"any"===d.type)?(void 0===d.signature&&(d.signature={min:"0",
max:"*"}),n(d.signature,a,b,c)):-1}function l(a,b){void 0===b&&(b=!0);var c=r(a,"SYNTAX","UNREOGNISED");try{switch(a.type){case "VariableDeclarator":return null!==a.init&&"FunctionExpression"===a.init.type?r(a,"SYNTAX","FUNCTIONVARIABLEDECLARATOR"):"Identifier"!==a.id.type?r(a,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER"):null!==a.init?l(a.init,!1):"";case "VariableDeclaration":for(var d=0;d<a.declarations.length;d++)if(c=l(a.declarations[d],b),""!==c)return c;return"";case "ForInStatement":c=l(a.left,b);
if(""!==c)break;if("VariableDeclaration"===a.left.type){if(1<a.left.declarations.length)return r(a,"SYNTAX","ONLY1VAR");if(null!==a.left.declarations[0].init)return r(a,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==a.left.type)return r(a,"SYNTAX","LEFTNOTVAR");c=l(a.right,b);if(""!==c)break;c=l(a.body,b);if(""!==c)break;return"";case "ForStatement":if(null!==a.test&&(c=l(a.test,b),""!==c))break;if(null!==a.init&&(c=l(a.init,b),""!==c))break;if(null!==a.update&&(c=l(a.update,b),""!==c))break;
if(null!==a.body&&(c=l(a.body,b),""!==c))break;return"";case "ContinueStatement":return"";case "EmptyStatement":return"";case "BreakStatement":return"";case "IfStatement":c=l(a.test,b);if(""!==c)break;if(null!==a.consequent&&(c=l(a.consequent,!1),""!==c))break;if(null!==a.alternate&&(c=l(a.alternate,!1),""!==c))break;return"";case "BlockStatement":for(var f=[],d=0;d<a.body.length;d++)"EmptyStatement"!==a.body[d].type&&f.push(a.body[d]);a.body=f;for(d=0;d<a.body.length;d++)if(c=l(a.body[d],b),""!==
c)return c;return"";case "FunctionDeclaration":return!1===b?r(a,"SYNTAX","GLOBALFUNCTIONSONLY"):"Identifier"!==a.id.type?r(a,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"):l(a.body,!1);case "ReturnStatement":return null!==a.argument?l(a.argument,b):"";case "UpdateExpression":return"Identifier"!==a.argument.type&&"MemberExpression"!==a.argument.type?r(a,"SYNTAX","ASSIGNMENTTOVARSONLY"):l(a.argument,b);case "AssignmentExpression":if("Identifier"!==a.left.type&&"MemberExpression"!==a.left.type)return r(a,"SYNTAX",
"ASSIGNMENTTOVARSONLY");c=l(a.left,b);if(""!==c)break;switch(a.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;default:return r(a,"SYNTAX","OPERATORNOTRECOGNISED")}return l(a.right,!1);case "ExpressionStatement":return l(a.expression,!1);case "Identifier":c="";break;case "MemberExpression":c=l(a.object,b);if(""!==c)break;return!0===a.computed?l(a.property,b):"";case "Literal":return"";case "ThisExpression":return r(a,"SYNTAX","NOTSUPPORTED");case "CallExpression":if("Identifier"!==
a.callee.type)return r(a,"SYNTAX","ONLYNODESSUPPORTED");c="";for(d=0;d<a.arguments.length;d++)if(c=l(a.arguments[d],b),""!==c)return c;return"";case "UnaryExpression":c=l(a.argument,b);break;case "BinaryExpression":c=l(a.left,b);if(""!==c)break;c=l(a.right,b);if(""!==c)break;switch(a.operator){case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":break;default:return r(a,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "LogicalExpression":c=
l(a.left,b);if(""!==c)break;c=l(a.right);if(""!==c)break;switch(a.operator){case "\x26\x26":case "||":break;default:return r(a,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "ConditionalExpression":return r(a,"SYNTAX","NOTSUPPORTED");case "ArrayExpression":c="";for(d=0;d<a.elements.length&&(c=l(a.elements[d],b),""===c);d++);break;case "Array":return r(a,"SYNTAX","NOTSUPPORTED");case "ObjectExpression":c="";for(d=0;d<a.properties.length&&(c="",null!==a.properties[d].key&&("Literal"!==a.properties[d].key.type&&
"Identifier"!==a.properties[d].key.type&&(c=r(a,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===a.properties[d].key.type&&(f=a.properties[d].key.value,"string"===typeof f||f instanceof String||(c=r(a,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")))),""===c&&(c=l(a.properties[d],b)),""===c);d++);break;case "Property":if("Literal"!==a.key.type&&"Identifier"!==a.key.type)return r(a,"SYNTAX","ONLYLITERAL");if("Identifier"!==a.key.type&&(c=l(a.key,b),""!==c))break;c=l(a.value,b)}return c}catch(A){throw A;
}}function m(a,b){var g=r(a,"SYNTAX","UNREOGNISED"),f=null,e="";try{switch(a.type){case "VariableDeclarator":if(null!==a.init&&"FunctionExpression"===a.init.type)return r(a,"SYNTAX","FUNCTIONVARIABLEDECLARATOR");a.id.name.toLowerCase();var k=null===a.init?"":m(a.init,b);if(""!==k)return k;null===b.localScope?b.globalScope[a.id.name.toLowerCase()]={type:"any"}:b.localScope[a.id.name.toLowerCase()]={type:"any"};return"";case "FunctionDeclaration":f=d(a.id.name.toLowerCase(),a,b);e=c(a,b);if(""!==e)return e;
if(null!==b.localScope)return r(a,"SYNTAX","GLOBALFUNCTIONSONLY");f.isnative=!1;b.globalScope[a.id.name.toLowerCase()]={type:"FormulaFunction",signature:[f]};return"";case "VariableDeclaration":for(var g="",l=0;l<a.declarations.length&&(g=m(a.declarations[l],b),""===g);l++);break;case "IfStatement":g=m(a.test,b);if(""!==g)break;if("AssignmentExpression"===a.test.type||"UpdateExpression"===a.test.type)return r(a.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");if(null!==a.consequent&&(g=m(a.consequent,
b),""!==g))break;if(null!==a.alternate&&(g=m(a.alternate,b),""!==g))break;return"";case "EmptyStatement":return"";case "BlockStatement":for(l=0;l<a.body.length;l++)if(g=m(a.body[l],b),""!==g)return g;return"";case "ReturnStatement":return null!==a.argument?m(a.argument,b):"";case "ForInStatement":if("VariableDeclaration"===a.left.type){if(1<a.left.declarations.length)return r(a,"SYNTAX","ONLY1VAR");if(null!==a.left.declarations[0].init)return r(a,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==
a.left.type)return r(a,"SYNTAX","LEFTNOTVAR");g=m(a.left,b);if(""!==g)break;g=m(a.right,b);if(""!==g)break;g=m(a.body,b);if(""!==g)break;return"";case "ForStatement":if(null!==a.init&&(g=m(a.init,b),""!==g))break;if(null!==a.test&&(g=m(a.test,b),""!==g))break;if(null!==a.body&&(g=m(a.body,b),""!==g))break;if(null!==a.update&&(g=m(a.update,b),""!==g))break;return"";case "BreakStatement":return"";case "ContinueStatement":return"";case "UpdateExpression":if("Identifier"!==a.argument.type&&"MemberExpression"!==
a.argument.type)return r(a,"SYNTAX","ASSIGNMENTTOVARSONLY");var p=!1;if("MemberExpression"===a.argument.type)return m(a.argument,b);null!==b.localScope&&void 0!==b.localScope[a.argument.name.toLowerCase()]&&(p=!0);void 0!==b.globalScope[a.argument.name.toLowerCase()]&&(p=!0);return!1===p?"Identifier "+a.argument.name+" has not been declared.":"";case "AssignmentExpression":if("Identifier"!==a.left.type&&"MemberExpression"!==a.left.type)return r(a,"SYNTAX","ASSIGNMENTTOVARSONLY");var q=m(a.right,b);
if(""!==q)return q;p=!1;if("MemberExpression"===a.left.type)return q=m(a.left,b),""!==q?q:"";null!==b.localScope&&void 0!==b.localScope[a.left.name.toLowerCase()]&&(p=!0);void 0!==b.globalScope[a.left.name.toLowerCase()]&&(p=!0);return!1===p?"Identifier "+a.left.name+" has not been declared.":"";case "ExpressionStatement":return m(a.expression,b);case "Identifier":var y=a.name.toLowerCase();if(null!==b.localScope&&void 0!==b.localScope[y])return"";g=void 0!==b.globalScope[y]?"":r(a,"SYNTAX","VARIABLENOTFOUND");
break;case "MemberExpression":g=m(a.object,b);if(""!==g)break;return!0===a.computed?m(a.property,b):"";case "Literal":return"";case "ThisExpression":g=r(a,"SYNTAX","NOTSUPPORTED");break;case "CallExpression":if("Identifier"!==a.callee.type)return r(a,"SYNTAX","ONLYNODESSUPPORTED");g="";for(l=0;l<a.arguments.length;l++)if(g=m(a.arguments[l],b),""!==g)return g;var n=h(a.callee.name,a.arguments,b);-1===n&&(g=r(a,"SYNTAX","NOTFOUND"));-2===n&&(g=r(a,"SYNTAX","WRONGSIGNATURE"));break;case "UnaryExpression":g=
m(a.argument,b);break;case "BinaryExpression":g=m(a.left,b);if(""!==g)break;g=m(a.right,b);if(""!==g)break;return"";case "LogicalExpression":g=m(a.left,b);if(""!==g)break;if("AssignmentExpression"===a.left.type||"UpdateExpression"===a.left.type)return r(a.left,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");g=m(a.right,b);if(""!==g)break;return"AssignmentExpression"===a.right.type||"UpdateExpression"===a.right.type?r(a.right,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"):"";case "ConditionalExpression":return r(a,
"SYNTAX","NOTSUPPORTED");case "ArrayExpression":g="";for(l=0;l<a.elements.length&&(g=m(a.elements[l],b),""===g);l++);break;case "ObjectExpression":g="";for(l=0;l<a.properties.length;l++){g="";if(null!==a.properties[l].key&&("Literal"!==a.properties[l].key.type&&"Identifier"!==a.properties[l].key.type&&(g=r(a,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===a.properties[l].key.type)){var v=a.properties[l].key.value;"string"===typeof v||v instanceof String||(g=r(a,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"))}""===
g&&(g=m(a.properties[l],b));if(""!==g)break}break;case "Property":if("Literal"!==a.key.type&&"Identifier"!==a.key.type)return r(a,"SYNTAX","ONLYLITERAL");if("Identifier"!==a.key.type&&(g=m(a.key,b),""!==g))break;g=m(a.value,b);break;case "Array":return r(a,"SYNTAX","NOTSUPPORTED")}return g}catch(ga){throw ga;}}function k(a,b){var c=!1;try{switch(a.type){case "VariableDeclarator":return null!==a.init?k(a.init,b):c;case "FunctionDeclaration":return k(a.body,b);case "VariableDeclaration":for(var d=0;d<
a.declarations.length;d++)if(k(a.declarations[d],b))return!0;return c;case "IfStatement":return k(a.test,b)||null!==a.consequent&&k(a.consequent,b)||null!==a.alternate&&k(a.alternate,b)?!0:c;case "EmptyStatement":return c;case "BlockStatement":for(d=0;d<a.body.length;d++)if(k(a.body[d],b))return!0;return c;case "ReturnStatement":return null!==a.argument?k(a.argument,b):c;case "UpdateExpression":return k(a.argument,b);case "AssignmentExpression":return(c=k(a.right,b))?c:k(a.left,b);case "ExpressionStatement":return k(a.expression,
b);case "ForInStatement":return(c=k(a.left,b))||(c=k(a.right,b))?c:c=k(a.body,b);case "ForStatement":if(null!==a.init&&(c=k(a.init,b))||null!==a.test&&(c=k(a.test,b))||null!==a.body&&(c=k(a.body,b)))return c;null!==a.update&&(c=k(a.update,b));return c;case "BreakStatement":return c;case "ContinueStatement":return c;case "Compound":return c;case "Identifier":return b.toLowerCase()===a.name.toLowerCase();case "MemberExpression":if(c=k(a.object,b))return c;!0===a.computed&&(c=k(a.property,b));return c;
case "Literal":return c;case "ThisExpression":return c;case "CallExpression":for(d=0;d<a.arguments.length;d++)k(a.arguments[d],b)&&(c=!0);return c;case "ArrayExpression":for(d=0;d<a.elements.length;d++)k(a.elements[d],b)&&(c=!0);return c;case "UnaryExpression":return k(a.argument,b);case "BinaryExpression":return(c=k(a.left,b))?c:c=k(a.right,b);case "LogicalExpression":return(c=k(a.left,b))?c:c=k(a.right,b);case "ObjectExpression":for(d=0;d<a.properties.length;d++)k(a.properties[d],b)&&(c=!0);return c;
case "Property":return c=k(a.value,b);case "ConditionalExpression":return c;case "Array":return c;default:return c}}catch(t){throw t;}}function a(b,c){var d=!1;try{switch(b.type){case "VariableDeclarator":return null!==b.init?a(b.init,c):d;case "FunctionDeclaration":return a(b.body,c);case "VariableDeclaration":for(var f=0;f<b.declarations.length;f++)if(a(b.declarations[f],c))return!0;return d;case "IfStatement":return a(b.test,c)||null!==b.consequent&&a(b.consequent,c)||null!==b.alternate&&a(b.alternate,
c)?!0:d;case "EmptyStatement":return d;case "BlockStatement":for(f=0;f<b.body.length;f++)if(a(b.body[f],c))return!0;return d;case "ReturnStatement":return null!==b.argument?a(b.argument,c):d;case "UpdateExpression":return a(b.argument,c);case "AssignmentExpression":return a(b.left,c)?!0:a(b.right,c);case "ExpressionStatement":return a(b.expression,c);case "ForInStatement":return(d=a(b.left,c))||(d=a(b.right,c))?d:d=a(b.body,c);case "ForStatement":if(null!==b.init&&(d=a(b.init,c))||null!==b.test&&
(d=a(b.test,c))||null!==b.body&&(d=a(b.body,c)))return d;null!==b.update&&(d=a(b.update,c));return d;case "BreakStatement":return d;case "ContinueStatement":return d;case "Compound":return d;case "Identifier":return d;case "MemberExpression":if(d=a(b.object,c))return d;!0===b.computed&&(d=a(b.property,c));return d;case "Literal":return d;case "ThisExpression":return d;case "CallExpression":if(b.callee.name.toLowerCase()===c.toLowerCase())return!0;for(f=0;f<b.arguments.length;f++)a(b.arguments[f],
c)&&(d=!0);return d;case "ArrayExpression":for(f=0;f<b.elements.length;f++)a(b.elements[f],c)&&(d=!0);return d;case "UnaryExpression":return a(b.argument,c);case "BinaryExpression":return(d=a(b.left,c))?d:d=a(b.right,c);case "LogicalExpression":return(d=a(b.left,c))?d:d=a(b.right,c);case "ConditionalExpression":return d;case "ObjectExpression":for(f=0;f<b.properties.length;f++)a(b.properties[f],c)&&(d=!0);return d;case "Property":return d=a(b.value,c);case "Array":return d;default:return d}}catch(t){throw t;
}}function f(a,b){var c=[],d;try{switch(a.type){case "VariableDeclarator":return null!==a.init?f(a.init,b):c;case "FunctionDeclaration":return f(a.body,b);case "VariableDeclaration":for(var e=0;e<a.declarations.length;e++)d=f(a.declarations[e],b),c=c.concat(d);return c;case "ForInStatement":return d=f(a.left,b),c=c.concat(d),d=f(a.right,b),c=c.concat(d),d=f(a.body,b),c=c.concat(d);case "ForStatement":return null!==a.init&&(d=f(a.init,b),c=c.concat(d)),null!==a.test&&(d=f(a.test,b),c=c.concat(d)),
null!==a.body&&(d=f(a.body,b),c=c.concat(d)),null!==a.update&&(d=f(a.update,b),c=c.concat(d)),c;case "IfStatement":return d=f(a.test,b),c=c.concat(d),null!==a.consequent&&(d=f(a.consequent,b),c=c.concat(d)),null!==a.alternate&&(d=f(a.alternate,b),c=c.concat(d)),c;case "EmptyStatement":return c;case "BlockStatement":for(e=0;e<a.body.length;e++)d=f(a.body[e],b),c=c.concat(d);return c;case "ReturnStatement":return null!==a.argument?f(a.argument,b):c;case "UpdateExpression":return f(a.argument,b);case "AssignmentExpression":return c=
f(a.left,b),c=c.concat(f(a.right,b));case "ExpressionStatement":return f(a.expression,b);case "BreakStatement":return c;case "ContinueStatement":return c;case "Compound":return c;case "Identifier":return c;case "MemberExpression":if("Identifier"!==a.object.type)return c;if(!1===a.computed)c.push(a.object.name.toLowerCase()+"."+a.property.name.toLowerCase());else try{"Literal"===a.property.type&&"string"===typeof a.property.value&&c.push(a.object.name.toLowerCase()+"."+a.property.value.toString().toLowerCase())}catch(A){}return c;
case "Literal":return c;case "ThisExpression":return c;case "CallExpression":for(e=0;e<a.arguments.length;e++)d=f(a.arguments[e],b),c=c.concat(d);return c;case "ArrayExpression":for(e=0;e<a.elements.length;e++)d=f(a.elements[e],b),c=c.concat(d);return c;case "UnaryExpression":return f(a.argument,b);case "ObjectExpression":for(e=0;e<a.properties.length;e++)d=f(a.properties[e],b),c=c.concat(d);return c;case "Property":return f(a.value,b);case "BinaryExpression":return d=f(a.left,b),c=c.concat(d),d=
f(a.right,b),c=c.concat(d);case "LogicalExpression":return d=f(a.left,b),c=c.concat(d),d=f(a.right,b),c=c.concat(d);case "ConditionalExpression":return c;case "Array":return c;default:return c}}catch(A){throw A;}}function d(a,b,c){c=[];if(void 0!==b.params&&null!==b.params)for(var d=0;d<b.params.length;d++)c.push("any");return{name:a,return:"any",params:c}}function c(a,b){b={globalScope:b.globalScope,localScope:{}};for(var c=0;c<a.params.length;c++)b.localScope[a.params[c].name.toLowerCase()]={type:"any"};
return m(a.body,b)}function q(a,b,c,d){var f={};if(void 0===a||null===a)a={};if(void 0===c||null===c)c={};f.infinity={type:"any"};f.textformatting={type:"any"};f.pi={type:"any"};for(var g in b)if("simple"!==d||"simple"===d&&"a"===b[g].av)f[g]={type:"FormulaFunction",signature:{min:b[g].min,max:b[g].max}},"simple"!==d&&(void 0!==b[g].fmin&&(f[g].signature.min=b[g].fmin),void 0!==b[g].fmax&&(f[g].signature.max=b[g].fmax));for(b=0;b<c.length;b++)g=c[b],f[g.name]={type:"FormulaFunction",signature:g};
for(g in a)f[g]=a[g],f[g].type="any";return f}function r(a,b,c){var d="";switch(b){case "SYNTAX":d="Syntax Error: ";break;case "RUNTIME":d="Runtime Error: ";break;default:d="Syntax Error: "}try{switch(a.type){case "IfStatement":switch(c){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":d+=" Assignments not be made in logical tests";break;case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":d+=" Non Boolean used as Condition"}break;case "UpdateExpression":case "AssignmentExpression":switch(c){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":d+=
" Assignments not be made in logical tests";break;case "ASSIGNMENTTOVARSONLY":d+=" Assignments can only be made to identifiers"}break;case "ExpressionStatement":d+=" Assignments can only be made to identifiers";break;case "FunctionDeclaration":switch(c){case "GLOBALFUNCTIONSONLY":d+=" Functions cannot be declared as variables";break;case "FUNCTIONMUSTHAVEIDENTIFIER":d+=" Function Definition must have an identifier"}break;case "VariableDeclaration":d+=" Only 1 variable can be declared at a time";break;
case "VariableDeclarator":switch(c){case "FUNCTIONVARIABLEDECLARATOR":d+=" Functions cannot be declared as variables";break;case "VARIABLEMUSTHAVEIDENTIFIER":d+=" Variable Definition must have an identifier"}break;case "Identifier":d+=" Identifier Not Found. ";d+=a.name;break;case "ObjectExpression":switch(c){case "OBJECTPROPERTYMUSTBESTRING":d+=" Property name must be a string"}break;case "ForStatement":switch(c){case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":d+=" Non Boolean used as Condition"}break;
case "ForInStatement":switch(c){case "ONLY1VAR":d+=" Can only declare 1 var for use with IN";break;case "CANNOTDECLAREVAL":d+=" Can only declare value for use with IN";break;case "LEFTNOVAR":d+="Must provide a variable to iterate with.";break;case "VARIABLENOTDECLARED":d+="Variable must be declared before it is used..";break;case "CANNOTITERATETHISTYPE":d+="This type cannot be used in an IN loop"}break;case "MemberExpression":switch(c){case "PROPERTYNOTFOUND":d+="Cannot find member property. ";d+=
!1===a.computed?a.property.name:"";break;case "OUTOFBOUNDS":d+="Out of Bounds. ";d+=!1===a.computed?a.property.name:"";break;case "NOTFOUND":d+="Cannot call member method on null. ";d+=!1===a.computed?a.property.name:"";break;case "INVALIDTYPE":d+="Cannot call member property on object of this type. ",d+=!1===a.computed?a.property.name:""}break;case "Property":switch(c){case "ONLYLITERAL":d+="Property names must be literals or identifiers"}break;case "Literal":break;case "ThisExpression":d+="THIS construct is not supported.";
case "CallExpression":switch(c){case "WRONGSIGNATURE":d+="Function signature does not match: ";d+=a.callee.name;break;case "ONLYNODESUPPORTED":d+="Functions must be declared.";d+=a.callee.name;break;case "NOTAFUNCTION":d+="Not a Function: ";d+=a.callee.name;break;case "NOTFOUND":d+="Function Not Found: "+a.callee.name}break;case "UnaryExpression":switch(c){case "NOTSUPPORTEDUNARYOPERATOR":d+="Operator "+a.operator+" not allowed in this context. Only ! can be used with boolean, and - with a number";
break;case "NOTSUPPORTEDTYPE":d+="Unary operator "+a.operator+" cannot be used with this argument."}case "BinaryExpression":switch(c){case "OPERATORNOTRECOGNISED":d+="Binary Operator not recognised "+a.operator}break;case "LogicalExpression":switch(c){case "ONLYBOOLEAN":d+="Operator "+a.operator+" cannot be used. Only || or \x26\x26 are allowed values";break;case "ONLYORORAND":d+="Logical Expression "+a.operator+" being applied to parameters that are not boolean."}break;case "ConditionalExpression":d+=
"Conditional statements not supported.";break;case "ArrayExpression":switch(c){case "FUNCTIONCONTEXTILLEGAL":d+=" Cannot Put Function inside Array."}break;case "Array":d+="Expression contains unrecognised array structure.";break;default:d+="Expression contains unrecognised code structures."}}catch(t){throw t;}return d}function x(a,b,c){return{line:a.loc.start.line,character:a.loc.start.column,reason:r(a,b,c)}}function z(a,b,c,d,f){void 0===f&&(f=!0);b={globalScope:b.globalScope,localScope:{}};for(f=
0;f<a.params.length;f++)b.localScope[a.params[f].name.toLowerCase()]={type:"any"};v(a.body,b,c,d,!1)}function v(a,b,c,f,e){void 0===e&&(e=!0);if(null===a)throw Error("Unnexpexted Expression Syntax");var g=null;try{switch(a.type){case "VariableDeclarator":if(null!==a.init&&"FunctionExpression"===a.init.type){f.push(x(a,"SYNTAX","FUNCTIONVARIABLEDECLARATOR"));break}"Identifier"!==a.id.type?f.push(x(a,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER")):(a.id.name.toLowerCase(),null===b.localScope?b.globalScope[a.id.name.toLowerCase()]=
{type:"any"}:b.localScope[a.id.name.toLowerCase()]={type:"any"});null===a.init?"":v(a.init,b,c,f,e);break;case "FunctionDeclaration":!1===e&&f.push(x(a,"SYNTAX","GLOBALFUNCTIONSONLY"));"Identifier"!==a.id.type&&f.push(x(a,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"));g=d("",a,b);z(a,b,c,f,e);null!==b.localScope&&f.push(x(a,"SYNTAX","GLOBALFUNCTIONSONLY"));g.isnative=!1;"Identifier"===a.id.type&&(b.globalScope[a.id.name.toLowerCase()]={type:"FormulaFunction",signature:[g]});break;case "VariableDeclaration":for(var k=
0;k<a.declarations.length;k++)v(a.declarations[k],b,c,f,e);break;case "IfStatement":null!==a.test&&(v(a.test,b,c,f,e),"AssignmentExpression"!==a.test.type&&"UpdateExpression"!==a.test.type||f.push(x(a.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION")));null!==a.consequent&&v(a.consequent,b,c,f,e);null!==a.alternate&&v(a.alternate,b,c,f,e);break;case "EmptyStatement":break;case "BlockStatement":if(null!==a.body)for(k=0;k<a.body.length;k++)v(a.body[k],b,c,f,e);break;case "ReturnStatement":null!==
a.argument&&v(a.argument,b,c,f,e);break;case "ForInStatement":"VariableDeclaration"===a.left.type?(1<a.left.declarations.length&&f.push(x(a,"SYNTAX","ONLY1VAR")),null!==a.left.declarations[0].init&&f.push(x(a,"SYNTAX","CANNOTDECLAREVAL"))):"Identifier"!==a.left.type&&f.push(x(a,"SYNTAX","LEFTNOTVAR"));v(a.left,b,c,f,e);v(a.right,b,c,f,e);v(a.body,b,c,f,e);break;case "ForStatement":null!==a.init&&v(a.init,b,c,f,e);null!==a.test&&v(a.test,b,c,f,e);null!==a.body&&v(a.body,b,c,f,e);null!==a.update&&v(a.update,
b,c,f,e);break;case "BreakStatement":break;case "ContinueStatement":break;case "UpdateExpression":"Identifier"!==a.argument.type&&"MemberExpression"!==a.argument.type?f.push(x(a,"SYNTAX","ASSIGNMENTTOVARSONLY")):("Identifier"===a.argument.type&&(g=!1,!1===c&&(null!==b.localScope&&void 0!==b.localScope[a.argument.name.toLowerCase()]&&(g=!0),void 0!==b.globalScope[a.argument.name.toLowerCase()]&&(g=!0),!1===g&&f.push({line:null===a?0:a.loc.start.line,character:null===a?0:a.loc.start.column,reason:"Identifier "+
a.argument.name+" has not been declared."}))),"MemberExpression"===a.argument.type&&v(a.argument,b,c,f,e));break;case "AssignmentExpression":"Identifier"!==a.left.type&&"MemberExpression"!==a.left.type&&f.push(x(a,"SYNTAX","ASSIGNMENTTOVARSONLY"));switch(a.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;default:f.push(x(a,"SYNTAX","OPERATORNOTRECOGNISED"))}v(a.right,b,c,f,e);g=!1;"Identifier"===a.left.type&&(null!==b.localScope&&void 0!==b.localScope[a.left.name.toLowerCase()]&&
(g=!0),void 0!==b.globalScope[a.left.name.toLowerCase()]&&(g=!0),!1===c&&!1===g&&f.push({line:null===a?0:a.loc.start.line,character:null===a?0:a.loc.start.column,reason:"Identifier "+a.argument.name+" has not been declared."}));"MemberExpression"===a.left.type&&v(a.left,b,c,f,e);break;case "ExpressionStatement":v(a.expression,b,c,f,e);break;case "Identifier":var l=a.name.toLowerCase();if(null!==b.localScope&&void 0!==b.localScope[l])break;void 0===b.globalScope[l]&&!1===c&&f.push(x(a,"SYNTAX","VARIABLENOTFOUND"));
break;case "MemberExpression":v(a.object,b,c,f,e);!0===a.computed&&v(a.property,b,c,f,e);break;case "Literal":return"";case "ThisExpression":f.push(x(a,"SYNTAX","NOTSUPPORTED"));break;case "CallExpression":"Identifier"!==a.callee.type&&f.push(x(a,"SYNTAX","ONLYNODESSUPPORTED"));for(k=0;k<a.arguments.length;k++)v(a.arguments[k],b,c,f,e);var m=h(a.callee.name,a.arguments,b);!1===c&&-1===m&&f.push(x(a,"SYNTAX","NOTFOUND"));-2===m&&f.push(x(a,"SYNTAX","WRONGSIGNATURE"));break;case "UnaryExpression":v(a.argument,
b,c,f,e);break;case "BinaryExpression":v(a.left,b,c,f,e);v(a.right,b,c,f,e);switch(a.operator){case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":break;default:f.push(x(a,"SYNTAX","OPERATORNOTRECOGNISED"))}break;case "LogicalExpression":switch(a.operator){case "\x26\x26":case "||":break;default:f.push(x(a,"SYNTAX","OPERATORNOTRECOGNISED"))}v(a.left,b,c,f,e);"AssignmentExpression"!==a.left.type&&"UpdateExpression"!==a.left.type||
f.push(x(a,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));v(a.right,b,c,f,e);"AssignmentExpression"!==a.right.type&&"UpdateExpression"!==a.right.type||f.push(x(a,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));break;case "ConditionalExpression":f.push(x(a,"SYNTAX","NOTSUPPORTED"));break;case "ArrayExpression":for(k=0;k<a.elements.length;k++)v(a.elements[k],b,c,f,e);break;case "Array":f.push(x(a,"SYNTAX","NOTSUPPORTED"));case "ObjectExpression":for(k=0;k<a.properties.length;k++)v(a.properties[k],
b,c,f,e);break;case "Property":"Literal"!==a.key.type&&"Identifier"!==a.key.type&&f.push(x(a,"SYNTAX","ONLYLITERAL"));"Literal"===a.key.type&&v(a.key,b,c,f,e);v(a.value,b,c,f,e);break;default:f.push(x(a,"SYNTAX","UNRECOGNISED"))}}catch(D){f.push({line:null===a?0:a.loc.start.line,character:null===a?0:a.loc.start.column,reason:"Unnexpected Syntax"})}}function w(a,b){var c=[],d;try{switch(a.type){case "VariableDeclarator":return null!==a.init?w(a.init,b):c;case "FunctionDeclaration":return w(a.body,
b);case "VariableDeclaration":for(var f=0;f<a.declarations.length;f++)d=w(a.declarations[f],b),c=c.concat(d);return c;case "ForInStatement":return d=w(a.left,b),c=c.concat(d),d=w(a.right,b),c=c.concat(d),d=w(a.body,b),c=c.concat(d);case "ForStatement":return null!==a.init&&(d=w(a.init,b),c=c.concat(d)),null!==a.test&&(d=w(a.test,b),c=c.concat(d)),null!==a.body&&(d=w(a.body,b),c=c.concat(d)),null!==a.update&&(d=w(a.update,b),c=c.concat(d)),c;case "IfStatement":return d=w(a.test,b),c=c.concat(d),null!==
a.consequent&&(d=w(a.consequent,b),c=c.concat(d)),null!==a.alternate&&(d=w(a.alternate,b),c=c.concat(d)),c;case "EmptyStatement":return c;case "BlockStatement":for(f=0;f<a.body.length;f++)d=w(a.body[f],b),c=c.concat(d);return c;case "ReturnStatement":return null!==a.argument?w(a.argument,b):c;case "UpdateExpression":return w(a.argument,b);case "AssignmentExpression":return c=w(a.left,b),c=c.concat(w(a.right,b));case "ExpressionStatement":return w(a.expression,b);case "BreakStatement":return c;case "ContinueStatement":return c;
case "Compound":return c;case "Identifier":return c;case "MemberExpression":return c;case "Literal":return c;case "ThisExpression":return c;case "CallExpression":for(f=0;f<a.arguments.length;f++)d=w(a.arguments[f],b),c=c.concat(d);c.push(a.callee.name.toLowerCase());return c;case "ArrayExpression":for(f=0;f<a.elements.length;f++)d=w(a.elements[f],b),c=c.concat(d);return c;case "UnaryExpression":return w(a.argument,b);case "ObjectExpression":for(f=0;f<a.properties.length;f++)d=w(a.properties[f],b),
c=c.concat(d);return c;case "Property":return w(a.value,b);case "BinaryExpression":return d=w(a.left,b),c=c.concat(d),d=w(a.right,b),c=c.concat(d);case "LogicalExpression":return d=w(a.left,b),c=c.concat(d),d=w(a.right,b),c=c.concat(d);case "ConditionalExpression":return c;case "Array":return c;default:return c}}catch(A){throw A;}}Object.defineProperty(e,"__esModule",{value:!0});e.functionDecls={concatenate:{min:"0",max:"*",av:"a"},split:{min:"2",max:"4",av:"a"},guid:{min:"0",max:"1",av:"a"},today:{min:"0",
max:"0",av:"a"},now:{min:"0",max:"0",av:"a"},timestamp:{min:"0",max:"0",av:"a"},day:{min:"1",max:"1",av:"a"},month:{min:"1",max:"1",av:"a"},year:{min:"1",max:"1",av:"a"},hour:{min:"1",max:"1",av:"a"},second:{min:"1",max:"1",av:"a"},millisecond:{min:"1",max:"1",av:"a"},minute:{min:"1",max:"1",av:"a"},weekday:{min:"1",max:"1",av:"a"},toutc:{min:"1",max:"1",av:"a"},tolocal:{min:"1",max:"1",av:"a"},date:{min:"0",max:"7",av:"a"},datediff:{min:"2",max:"3",av:"a"},dateadd:{min:"2",max:"3",av:"a"},trim:{min:"1",
max:"1",av:"a"},text:{min:"1",max:"2",av:"a"},left:{min:"2",max:"2",av:"a"},right:{min:"2",max:"2",av:"a"},mid:{min:"2",max:"3",av:"a"},upper:{min:"1",max:"1",av:"a"},proper:{min:"1",max:"2",av:"a"},lower:{min:"1",max:"1",av:"a"},find:{min:"2",max:"3",av:"a"},iif:{min:"3",max:"3",av:"a"},decode:{min:"2",max:"*",av:"a"},when:{min:"2",max:"*",av:"a"},defaultvalue:{min:"2",max:"2",av:"a"},isempty:{min:"1",max:"1",av:"a"},domaincode:{min:"3",max:"4",av:"a"},domainname:{min:"2",max:"4",av:"a"},polygon:{min:"1",
max:"1",av:"a"},point:{min:"1",max:"1",av:"a"},polyline:{min:"1",max:"1",av:"a"},extent:{min:"1",max:"1",av:"a"},multipoint:{min:"1",max:"1",av:"a"},geometry:{min:"1",max:"1",av:"a"},count:{min:"0",max:"*",av:"a"},number:{min:"1",max:"2",av:"a"},acos:{min:"1",max:"1",av:"a"},asin:{min:"1",max:"1",av:"a"},atan:{min:"1",max:"1",av:"a"},atan2:{min:"2",max:"2",av:"a"},ceil:{min:"1",max:"2",av:"a"},floor:{min:"1",max:"2",av:"a"},round:{min:"1",max:"2",av:"a"},cos:{min:"1",max:"1",av:"a"},exp:{min:"1",
max:"1",av:"a"},log:{min:"1",max:"1",av:"a"},min:{min:"0",max:"*",av:"a"},constrain:{min:"3",max:"3",av:"a"},console:{min:"0",max:"*",av:"a"},max:{min:"0",max:"*",av:"a"},pow:{min:"2",max:"2",av:"a"},random:{min:"0",max:"0",av:"a"},sqrt:{min:"1",max:"1",av:"a"},sin:{min:"1",max:"1",av:"a"},tan:{min:"1",max:"1",av:"a"},abs:{min:"1",max:"1",av:"a"},isnan:{min:"1",max:"1",av:"a"},stdev:{min:"0",max:"*",av:"a"},average:{min:"0",max:"*",av:"a"},mean:{min:"0",max:"*",av:"a"},sum:{min:"0",max:"*",av:"a"},
variance:{min:"0",max:"*",av:"a"},distinct:{min:"0",max:"*",av:"a"},first:{min:"1",max:"1",av:"a"},top:{min:"2",max:"2",av:"a"},boolean:{min:"1",max:"1",av:"a"},dictionary:{min:"0",max:"*",av:"a"},typeof:{min:"1",max:"1",av:"a"},reverse:{min:"1",max:"1",av:"a"},replace:{min:"3",max:"4",av:"a"},sort:{min:"1",max:"2",av:"a"},feature:{min:"1",max:"*",av:"a"},haskey:{min:"2",max:"2",av:"a"},indexof:{min:"2",max:"2",av:"a"},disjoint:{min:"2",max:"2",av:"a"},intersects:{min:"2",max:"2",av:"a"},touches:{min:"2",
max:"2",av:"a"},crosses:{min:"2",max:"2",av:"a"},within:{min:"2",max:"2",av:"a"},contains:{min:"2",max:"2",av:"a"},overlaps:{min:"2",max:"2",av:"a"},equals:{min:"2",max:"2",av:"a"},relate:{min:"3",max:"3",av:"a"},intersection:{min:"2",max:"2",av:"a"},union:{min:"1",max:"2",av:"a"},difference:{min:"2",max:"2",av:"a"},symmetricdifference:{min:"2",max:"2",av:"a"},clip:{min:"2",max:"2",av:"a"},cut:{min:"2",max:"2",av:"a"},area:{min:"1",max:"2",av:"a"},areageodetic:{min:"1",max:"2",av:"a"},length:{min:"1",
max:"2",av:"a"},lengthgeodetic:{min:"1",max:"2",av:"a"},distance:{min:"2",max:"3",av:"a"},densify:{min:"2",max:"3",av:"a"},densifygeodetic:{min:"2",max:"3",av:"a"},generalize:{min:"2",max:"4",av:"a"},buffer:{min:"2",max:"3",av:"a"},buffergeodetic:{min:"2",max:"3",av:"a"},offset:{min:"2",max:"6",av:"a"},rotate:{min:"2",max:"3",av:"a"},issimple:{min:"1",max:"1",av:"a"},simplify:{min:"1",max:"1",av:"a"},centroid:{min:"1",max:"1",av:"a"},multiparttosinglepart:{min:"1",max:"1",av:"a"},setgeometry:{min:"2",
max:"2",av:"a"}};e.addFunctionDeclaration=function(a,b){var c=e.functionDecls[a.name.toLowerCase()];void 0===c?e.functionDecls[a.name.toLowerCase()]={min:a.min,max:a.max,av:b}:"a"===c.av&&"f"===b?(void 0!==c.fmin&&delete c.fmin,void 0!==c.fmax&&delete c.fmax,c.fmin=a.min,c.fmax=a.max):"f"===c.av&&"a"===b?(void 0===c.fmin&&(c.fmin=c.min),void 0===c.fmax&&(c.fmax=c.max),c.min=a.min,c.max=a.max,c.av="a"):"f"===b?(c.fmin=a.min,c.fmax=a.max):"a"===b&&(c.min=a.min,c.max=a.max)};e.checkFunctionSignature=
n;e.findFunction=h;e.validateLanguageNode=l;e.testValidityOfExpression=m;e.referencesMemberImpl=k;e.referencesMember=function(a,b){return!0===k(a.body[0].body,b.toLowerCase())?!0:!1};e.referencesFunctionImpl=a;e.referencesFunction=function(b,c){return!0===a(b.body[0].body,c)?!0:!1};e.findFieldLiteralsImpl=f;e.findFieldLiterals=function(a,b){return f(a.body[0].body,b)};e.extractFunctionDeclaration=d;e.validateFunction=c;e.constructGlobalScope=q;e.validateScript=function(a,b,c){void 0===c&&(c="full");
b={globalScope:q(b.vars,e.functionDecls,b.customFunctions,c),localScope:null};return m(a.body[0].body,b)};e.validateLanguage=function(a){return"BlockStatement"!==a.body[0].body.type?"Invalid formula content.":l(a.body[0].body)};e.nodeErrorMessage=r;e.makeError=x;e.extractAllIssuesInFunction=z;e.extractAllIssues=v;e.checkScript=function(a,b,c,d){void 0===d&&(d="full");var f=[];if("BlockStatement"!==a.body[0].body.type)return[{line:0,character:0,reason:"Invalid Body"}];if(null===b||void 0===b)b={vars:{},
customFunctions:[]};b={globalScope:q(b.vars,e.functionDecls,b.customFunctions,d),localScope:null};try{v(a.body[0].body,b,c,f)}catch(A){}return f};e.findFunctionCallsImpl=w;e.findFunctionCalls=function(a,b){return w(a.body[0].body,b)}})},"esri/arcade/functions/date":function(){define(["require","exports","../../moment","../languageUtils"],function(b,e,n,h){function l(b){return null===b?b:isNaN(b.getTime())?null:b}Object.defineProperty(e,"__esModule",{value:!0});e.registerFunctions=function(b,e){b.today=
function(a,b){return e(a,b,function(a,b,f){h.pcCheck(f,0,0);a=new Date;a.setHours(0,0,0,0);return a})};b.now=function(a,b){return e(a,b,function(a,b,f){h.pcCheck(f,0,0);return new Date})};b.timestamp=function(a,b){return e(a,b,function(a,b,f){h.pcCheck(f,0,0);a=new Date;return a=new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds())})};b.toutc=function(a,b){return e(a,b,function(a,b,f){h.pcCheck(f,1,1);a=h.toDate(f[0]);
return null===a?null:new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds())})};b.tolocal=function(a,b){return e(a,b,function(a,b,f){h.pcCheck(f,1,1);a=h.toDate(f[0]);return null===a?null:n.utc([a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()]).toDate()})};b.day=function(a,b){return e(a,b,function(a,b,f){h.pcCheck(f,1,1);a=h.toDate(f[0]);return null===a?NaN:a.getDate()})};
b.month=function(a,b){return e(a,b,function(a,b,f){h.pcCheck(f,1,1);a=h.toDate(f[0]);return null===a?NaN:a.getMonth()})};b.year=function(a,b){return e(a,b,function(a,b,f){h.pcCheck(f,1,1);a=h.toDate(f[0]);return null===a?NaN:a.getFullYear()})};b.hour=function(a,b){return e(a,b,function(a,b,f){h.pcCheck(f,1,1);a=h.toDate(f[0]);return null===a?NaN:a.getHours()})};b.second=function(a,b){return e(a,b,function(a,b,f){h.pcCheck(f,1,1);a=h.toDate(f[0]);return null===a?NaN:a.getSeconds()})};b.millisecond=
function(a,b){return e(a,b,function(a,b,f){h.pcCheck(f,1,1);a=h.toDate(f[0]);return null===a?NaN:a.getMilliseconds()})};b.minute=function(a,b){return e(a,b,function(a,b,f){h.pcCheck(f,1,1);a=h.toDate(f[0]);return null===a?NaN:a.getMinutes()})};b.weekday=function(a,b){return e(a,b,function(a,b,f){h.pcCheck(f,1,1);a=h.toDate(f[0]);return null===a?NaN:a.getDay()})};b.date=function(a,b){return e(a,b,function(a,b,f){h.pcCheck(f,0,7);if(3===f.length)return l(new Date(h.toNumber(f[0]),h.toNumber(f[1]),h.toNumber(f[2]),
0,0,0,0));if(4===f.length)return l(new Date(h.toNumber(f[0]),h.toNumber(f[1]),h.toNumber(f[2]),h.toNumber(f[3]),0,0,0));if(5===f.length)return l(new Date(h.toNumber(f[0]),h.toNumber(f[1]),h.toNumber(f[2]),h.toNumber(f[3]),h.toNumber(f[4]),0,0));if(6===f.length)return l(new Date(h.toNumber(f[0]),h.toNumber(f[1]),h.toNumber(f[2]),h.toNumber(f[3]),h.toNumber(f[4]),h.toNumber(f[5]),0));if(7===f.length)return l(new Date(h.toNumber(f[0]),h.toNumber(f[1]),h.toNumber(f[2]),h.toNumber(f[3]),h.toNumber(f[4]),
h.toNumber(f[5]),h.toNumber(f[6])));if(2===f.length){a=h.toString(f[1]);if(""===a)return null;a=h.standardiseDateFormat(a);f=n(h.toString(f[0]),a,!0);return!0===f.isValid()?f.toDate():null}if(1===f.length){if(h.isString(f[0])&&""===f[0].replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))return null;a=h.toNumber(f[0]);return!1===isNaN(a)?l(new Date(a)):h.toDate(f[0])}if(0===f.length)return new Date})};b.datediff=function(a,b){return e(a,b,function(a,b,f){h.pcCheck(f,2,3);a=h.toDateM(f[0]);b=h.toDateM(f[1]);
if(null===a||null===b)return NaN;switch(h.toString(f[2]).toLowerCase()){case "days":case "day":case "d":return a.diff(b,"days",!0);case "months":case "month":return a.diff(b,"months",!0);case "minutes":case "minute":case "m":return"M"===f[2]?a.diff(b,"months",!0):a.diff(b,"minutes",!0);case "seconds":case "second":case "s":return a.diff(b,"seconds",!0);case "milliseconds":case "millisecond":case "ms":return a.diff(b);case "hours":case "hour":case "h":return a.diff(b,"hours",!0);case "years":case "year":case "y":return a.diff(b,
"years",!0);default:return a.diff(b)}})};b.dateadd=function(a,b){return e(a,b,function(a,b,f){h.pcCheck(f,2,3);a=h.toDateM(f[0]);if(null===a)return null;b="milliseconds";switch(h.toString(f[2]).toLowerCase()){case "days":case "day":case "d":b="days";break;case "months":case "month":b="months";break;case "minutes":case "minute":case "m":b="M"===f[2]?"months":"minutes";break;case "seconds":case "second":case "s":b="seconds";break;case "milliseconds":case "millisecond":case "ms":b="milliseconds";break;
case "hours":case "hour":case "h":b="hours";break;case "years":case "year":case "y":b="years"}a.add(h.toNumber(f[1]),b);return a.toDate()})}}})},"esri/arcade/functions/geometry":function(){define("require exports ../Dictionary ../Feature ../languageUtils ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/support/jsonUtils".split(" "),function(b,e,n,h,l,m,k,a,f,d,c,q){Object.defineProperty(e,"__esModule",
{value:!0});e.registerFunctions=function(b,e){b.polygon=function(a,b){return e(a,b,function(b,c,f){l.pcCheck(f,1,1);b=null;if(f[0]instanceof n){if(b=l.fixSpatialReference(h.parseGeometryFromDictionary(f[0]),a.spatialReference),!1===b instanceof d)throw Error("Illegal Parameter");}else b=f[0]instanceof d?q.fromJSON(f[0].toJSON()):l.fixSpatialReference(new d(JSON.parse(f[0])),a.spatialReference);if(null!==b&&!1===b.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");
return l.fixNullGeometry(b)})};b.polyline=function(a,b){return e(a,b,function(b,d,f){l.pcCheck(f,1,1);b=null;if(f[0]instanceof n){if(b=l.fixSpatialReference(h.parseGeometryFromDictionary(f[0]),a.spatialReference),!1===b instanceof c)throw Error("Illegal Parameter");}else b=f[0]instanceof c?q.fromJSON(f[0].toJSON()):l.fixSpatialReference(new c(JSON.parse(f[0])),a.spatialReference);if(null!==b&&!1===b.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");
return l.fixNullGeometry(b)})};b.point=function(a,b){return e(a,b,function(b,c,d){l.pcCheck(d,1,1);b=null;if(d[0]instanceof n){if(b=l.fixSpatialReference(h.parseGeometryFromDictionary(d[0]),a.spatialReference),!1===b instanceof f)throw Error("Illegal Parameter");}else b=d[0]instanceof f?q.fromJSON(d[0].toJSON()):l.fixSpatialReference(new f(JSON.parse(d[0])),a.spatialReference);if(null!==b&&!1===b.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");
return l.fixNullGeometry(b)})};b.multipoint=function(b,c){return e(b,c,function(c,d,f){l.pcCheck(f,1,1);c=null;if(f[0]instanceof n){if(c=l.fixSpatialReference(h.parseGeometryFromDictionary(f[0]),b.spatialReference),!1===c instanceof a)throw Error("Illegal Parameter");}else c=f[0]instanceof a?q.fromJSON(f[0].toJSON()):l.fixSpatialReference(new a(JSON.parse(f[0])),b.spatialReference);if(null!==c&&!1===c.spatialReference.equals(b.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");
return l.fixNullGeometry(c)})};b.extent=function(b,k){return e(b,k,function(e,k,r){r=l.autoCastFeatureToGeometry(r);l.pcCheck(r,1,1);e=null;r[0]instanceof n?e=l.fixSpatialReference(h.parseGeometryFromDictionary(r[0]),b.spatialReference):r[0]instanceof f?(e={xmin:r[0].x,ymin:r[0].y,xmax:r[0].x,ymax:r[0].y,spatialReference:r[0].spatialReference.toJSON()},r[0].hasZ?(e.zmin=r[0].z,e.zmax=r[0].z):r[0].hasM&&(e.mmin=r[0].m,e.mmax=r[0].m),e=q.fromJSON(e)):e=r[0]instanceof d?q.fromJSON(r[0].extent.toJSON()):
r[0]instanceof c?q.fromJSON(r[0].extent.toJSON()):r[0]instanceof a?q.fromJSON(r[0].extent.toJSON()):r[0]instanceof m?q.fromJSON(r[0].toJSON()):l.fixSpatialReference(new m(JSON.parse(r[0])),b.spatialReference);if(null!==e&&!1===e.spatialReference.equals(b.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return l.fixNullGeometry(e)})};b.geometry=function(a,b){return e(a,b,function(b,c,d){l.pcCheck(d,1,1);b=null;b=d[0]instanceof
h?l.fixSpatialReference(d[0].geometry(),a.spatialReference):d[0]instanceof n?l.fixSpatialReference(h.parseGeometryFromDictionary(d[0]),a.spatialReference):l.fixSpatialReference(q.fromJSON(JSON.parse(d[0])),a.spatialReference);if(null!==b&&!1===b.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return l.fixNullGeometry(b)})};b.setgeometry=function(a,b){return e(a,b,function(a,b,c){l.pcCheck(c,
2,2);if(c[0]instanceof h){if(!0===c[0].immutable)throw Error("Feature is Immutable");if(c[1]instanceof k||null===c[1])c[0]._geometry=c[1];else throw Error("Illegal Argument");}else throw Error("Illegal Argument");return l.voidOperation})};b.feature=function(a,b){return e(a,b,function(b,c,d){if(0===d.length)throw Error("Missing Parameters");b=null;if(1===d.length)if(l.isString(d[0]))b=h.fromJson(JSON.parse(d[0]));else if(d[0]instanceof h)b=h.createFromArcadeFeature(d[0]);else if(d[0]instanceof k)b=
h.createFromGraphicLikeObject(d[0],null,null);else if(d[0]instanceof n)b=d[0].hasField("geometry")?d[0].field("geometry"):null,c=d[0].hasField("attributes")?d[0].field("attributes"):null,null!==b&&b instanceof n&&(b=h.parseGeometryFromDictionary(b)),null!==c&&(c=h.parseAttributesFromDictionary(c)),b=h.createFromGraphicLikeObject(b,c,null);else throw Error("Illegal Argument");else{if(2===d.length){c=b=null;if(null!==d[0])if(d[0]instanceof k)b=d[0];else if(b instanceof n)b=h.parseGeometryFromDictionary(d[0]);
else throw Error("Illegal Argument");if(null!==d[1])if(d[1]instanceof n)c=h.parseAttributesFromDictionary(d[1]);else throw Error("Illegal Argument");}else{b=null;c={};if(null!==d[0])if(d[0]instanceof k)b=d[0];else if(b instanceof n)b=h.parseGeometryFromDictionary(d[0]);else throw Error("Illegal Argument");for(var f=1;f<d.length;f+=2){var e=l.toString(d[f]),m=d[f+1];if(null===m||void 0===m||l.isString(m)||isNaN(m)||l.isDate(m)||l.isNumber(m)||l.isBoolean(m)){if(l.isFunctionParameter(m)||!1===l.isSimpleType(m))throw Error("Illegal Argument");
c[e]=m===l.voidOperation?null:m}else throw Error("Illegal Argument");}}b=h.createFromGraphicLikeObject(b,c,null)}b._geometry=l.fixSpatialReference(b.geometry(),a.spatialReference);b.immutable=!1;return b})};b.dictionary=function(a,b){return e(a,b,function(a,b,c){if(0===c.length)throw Error("Missing Parameters");if(0!==c.length%2)throw Error("Missing Parameters");a={};for(b=0;b<c.length;b+=2){var d=l.toString(c[b]),f=c[b+1];if(null===f||void 0===f||l.isString(f)||isNaN(f)||l.isDate(f)||l.isNumber(f)||
l.isBoolean(f)||l.isArray(f)||l.isImmutableArray(f)){if(l.isFunctionParameter(f))throw Error("Illegal Argument");a[d]=f===l.voidOperation?null:f}else throw Error("Illegal Argument");}c=new n(a);c.immutable=!1;return c})};b.haskey=function(a,b){return e(a,b,function(a,b,c){l.pcCheck(c,2,2);a=l.toString(c[1]);if(c[0]instanceof h||c[0]instanceof n)return c[0].hasField(a);throw Error("Illegal Argument");})};b.indexof=function(a,b){return e(a,b,function(a,b,c){l.pcCheck(c,2,2);a=c[1];if(l.isArray(c[0])){for(b=
0;b<c[0].length;b++)if(l.equalityTest(a,c[0][b]))return b;return-1}if(l.isImmutableArray(c[0])){var d=c[0].length();for(b=0;b<d;b++)if(l.equalityTest(a,c[0].get(b)))return b;return-1}throw Error("Illegal Argument");})}}})},"esri/arcade/functions/geomsync":function(){define("require exports ../../kernel ../kernel ../languageUtils ./centroid ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/support/jsonUtils".split(" "),
function(b,e,n,h,l,m,k,a,f,d,c,q,r){function x(a){return w?a.clone():r.fromJSON(a.toJSON())}function z(a){return 0===n.version.indexOf("4.")?c.fromExtent(a):new c({spatialReference:a.spatialReference,rings:[[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]]]})}Object.defineProperty(e,"__esModule",{value:!0});var v=null,w=0===n.version.indexOf("4.");e.setGeometryEngine=function(a){v=a};e.registerFunctions=function(b,e){function g(b){l.pcCheck(b,2,2);if(!(b[0]instanceof
a&&b[1]instanceof a||b[0]instanceof a&&null===b[1]||b[1]instanceof a&&null===b[0]||null===b[0]&&null===b[1]))throw Error("Illegal Argument");}b.disjoint=function(a,b){return e(a,b,function(a,b,c){c=l.autoCastFeatureToGeometry(c);g(c);return null===c[0]||null===c[1]?!0:v.disjoint(c[0],c[1])})};b.intersects=function(a,b){return e(a,b,function(a,b,c){c=l.autoCastFeatureToGeometry(c);g(c);return null===c[0]||null===c[1]?!1:v.intersects(c[0],c[1])})};b.touches=function(a,b){return e(a,b,function(a,b,c){c=
l.autoCastFeatureToGeometry(c);g(c);return null===c[0]||null===c[1]?!1:v.touches(c[0],c[1])})};b.crosses=function(a,b){return e(a,b,function(a,b,c){c=l.autoCastFeatureToGeometry(c);g(c);return null===c[0]||null===c[1]?!1:v.crosses(c[0],c[1])})};b.within=function(a,b){return e(a,b,function(a,b,c){c=l.autoCastFeatureToGeometry(c);g(c);return null===c[0]||null===c[1]?!1:v.within(c[0],c[1])})};b.contains=function(a,b){return e(a,b,function(a,b,c){c=l.autoCastFeatureToGeometry(c);g(c);return null===c[0]||
null===c[1]?!1:v.contains(c[0],c[1])})};b.overlaps=function(a,b){return e(a,b,function(a,b,c){c=l.autoCastFeatureToGeometry(c);g(c);return null===c[0]||null===c[1]?!1:v.overlaps(c[0],c[1])})};b.equals=function(b,c){return e(b,c,function(b,c,d){l.pcCheck(d,2,2);return d[0]===d[1]?!0:d[0]instanceof a&&d[1]instanceof a?v.equals(d[0],d[1]):l.isDate(d[0])&&l.isDate(d[1])?d[0].getTime()===d[1].getTime():!1})};b.relate=function(b,c){return e(b,c,function(b,c,d){d=l.autoCastFeatureToGeometry(d);l.pcCheck(d,
3,3);if(d[0]instanceof a&&d[1]instanceof a)return v.relate(d[0],d[1],l.toString(d[2]));if(d[0]instanceof a&&null===d[1]||d[1]instanceof a&&null===d[0]||null===d[0]&&null===d[1])return!1;throw Error("Illegal Argument");})};b.intersection=function(a,b){return e(a,b,function(a,b,c){c=l.autoCastFeatureToGeometry(c);g(c);return null===c[0]||null===c[1]?null:v.intersect(c[0],c[1])})};b.union=function(b,c){return e(b,c,function(c,d,f){f=l.autoCastFeatureToGeometry(f);c=[];if(0===f.length)throw Error("Function called with wrong number of Parameters");
if(1===f.length)if(l.isArray(f[0]))for(f=l.autoCastFeatureToGeometry(f[0]),d=0;d<f.length;d++){if(null!==f[d])if(f[d]instanceof a)c.push(f[d]);else throw Error("Illegal Argument");}else if(l.isImmutableArray(f[0]))for(f=l.autoCastFeatureToGeometry(f[0].toArray()),d=0;d<f.length;d++){if(null!==f[d])if(f[d]instanceof a)c.push(f[d]);else throw Error("Illegal Argument");}else{if(f[0]instanceof a)return l.fixSpatialReference(x(f[0]),b.spatialReference);if(null===f[0])return null;throw Error("Illegal Argument");
}else for(d=0;d<f.length;d++)if(null!==f[d])if(f[d]instanceof a)c.push(f[d]);else throw Error("Illegal Argument");return 0===c.length?null:v.union(c)})};b.difference=function(a,b){return e(a,b,function(a,b,c){c=l.autoCastFeatureToGeometry(c);g(c);return null!==c[0]&&null===c[1]?x(c[0]):null===c[0]?null:v.difference(c[0],c[1])})};b.symmetricdifference=function(a,b){return e(a,b,function(a,b,c){c=l.autoCastFeatureToGeometry(c);g(c);return null===c[0]&&null===c[1]?null:null===c[0]?x(c[1]):null===c[1]?
x(c[0]):v.symmetricDifference(c[0],c[1])})};b.clip=function(b,c){return e(b,c,function(b,c,d){d=l.autoCastFeatureToGeometry(d);l.pcCheck(d,2,2);if(!(d[1]instanceof k)&&null!==d[1])throw Error("Illegal Argument");if(null===d[0])return null;if(!(d[0]instanceof a))throw Error("Illegal Argument");return null===d[1]?null:v.clip(d[0],d[1])})};b.cut=function(b,c){return e(b,c,function(b,c,d){d=l.autoCastFeatureToGeometry(d);l.pcCheck(d,2,2);if(!(d[1]instanceof q)&&null!==d[1])throw Error("Illegal Argument");
if(null===d[0])return[];if(!(d[0]instanceof a))throw Error("Illegal Argument");return null===d[1]?[x(d[0])]:v.cut(d[0],d[1])})};b.area=function(b,c){return e(b,c,function(b,c,d){d=l.autoCastFeatureToGeometry(d);l.pcCheck(d,1,2);if(null===d[0])return 0;if(!(d[0]instanceof a))throw Error("Illegal Argument");return v.planarArea(d[0],h.convertSquareUnitsToCode(l.defaultUndefined(d[1],-1)))})};b.areageodetic=function(b,c){return e(b,c,function(b,c,d){d=l.autoCastFeatureToGeometry(d);l.pcCheck(d,1,2);if(null===
d[0])return 0;if(!(d[0]instanceof a))throw Error("Illegal Argument");return v.geodesicArea(d[0],h.convertSquareUnitsToCode(l.defaultUndefined(d[1],-1)))})};b.length=function(b,c){return e(b,c,function(b,c,d){d=l.autoCastFeatureToGeometry(d);l.pcCheck(d,1,2);if(null===d[0])return 0;if(!(d[0]instanceof a))throw Error("Illegal Argument");return v.planarLength(d[0],h.convertLinearUnitsToCode(l.defaultUndefined(d[1],-1)))})};b.lengthgeodetic=function(b,c){return e(b,c,function(b,c,d){d=l.autoCastFeatureToGeometry(d);
l.pcCheck(d,1,2);if(null===d[0])return 0;if(!(d[0]instanceof a))throw Error("Illegal Argument");return v.geodesicLength(d[0],h.convertLinearUnitsToCode(l.defaultUndefined(d[1],-1)))})};b.distance=function(b,c){return e(b,c,function(b,c,d){d=l.autoCastFeatureToGeometry(d);l.pcCheck(d,2,3);if(!(d[0]instanceof a))throw Error("Illegal Argument");if(!(d[1]instanceof a))throw Error("Illegal Argument");return v.distance(d[0],d[1],h.convertLinearUnitsToCode(l.defaultUndefined(d[2],-1)))})};b.densify=function(b,
d){return e(b,d,function(b,d,f){f=l.autoCastFeatureToGeometry(f);l.pcCheck(f,2,3);if(null===f[0])return null;if(!(f[0]instanceof a))throw Error("Illegal Argument");b=l.toNumber(f[1]);if(isNaN(b))throw Error("Illegal Argument");if(0>=b)throw Error("Illegal Argument");return f[0]instanceof c||f[0]instanceof q?v.densify(f[0],b,h.convertLinearUnitsToCode(l.defaultUndefined(f[2],-1))):f[0]instanceof k?v.densify(z(f[0]),b,h.convertLinearUnitsToCode(l.defaultUndefined(f[2],-1))):f[0]})};b.densifygeodetic=
function(b,d){return e(b,d,function(b,d,f){f=l.autoCastFeatureToGeometry(f);l.pcCheck(f,2,3);if(null===f[0])return null;if(!(f[0]instanceof a))throw Error("Illegal Argument");b=l.toNumber(f[1]);if(isNaN(b))throw Error("Illegal Argument");if(0>=b)throw Error("Illegal Argument");return f[0]instanceof c||f[0]instanceof q?v.geodesicDensify(f[0],b,h.convertLinearUnitsToCode(l.defaultUndefined(f[2],-1))):f[0]instanceof k?v.geodesicDensify(z(f[0]),b,h.convertLinearUnitsToCode(l.defaultUndefined(f[2],-1))):
f[0]})};b.generalize=function(b,c){return e(b,c,function(b,c,d){d=l.autoCastFeatureToGeometry(d);l.pcCheck(d,2,4);if(null===d[0])return null;if(!(d[0]instanceof a))throw Error("Illegal Argument");b=l.toNumber(d[1]);if(isNaN(b))throw Error("Illegal Argument");return v.generalize(d[0],b,l.toBoolean(l.defaultUndefined(d[2],!0)),h.convertLinearUnitsToCode(l.defaultUndefined(d[3],-1)))})};b.buffer=function(b,c){return e(b,c,function(b,c,d){d=l.autoCastFeatureToGeometry(d);l.pcCheck(d,2,3);if(null===d[0])return null;
if(!(d[0]instanceof a))throw Error("Illegal Argument");b=l.toNumber(d[1]);if(isNaN(b))throw Error("Illegal Argument");return 0===b?x(d[0]):v.buffer(d[0],b,h.convertLinearUnitsToCode(l.defaultUndefined(d[2],-1)))})};b.buffergeodetic=function(b,c){return e(b,c,function(b,c,d){d=l.autoCastFeatureToGeometry(d);l.pcCheck(d,2,3);if(null===d[0])return null;if(!(d[0]instanceof a))throw Error("Illegal Argument");b=l.toNumber(d[1]);if(isNaN(b))throw Error("Illegal Argument");return 0===b?x(d[0]):v.geodesicBuffer(d[0],
b,h.convertLinearUnitsToCode(l.defaultUndefined(d[2],-1)))})};b.offset=function(a,b){return e(a,b,function(a,b,d){d=l.autoCastFeatureToGeometry(d);l.pcCheck(d,2,6);if(null===d[0])return null;if(!(d[0]instanceof c||d[0]instanceof q))throw Error("Illegal Argument");a=l.toNumber(d[1]);if(isNaN(a))throw Error("Illegal Argument");b=l.toNumber(l.defaultUndefined(d[4],10));if(isNaN(b))throw Error("Illegal Argument");var f=l.toNumber(l.defaultUndefined(d[5],0));if(isNaN(f))throw Error("Illegal Argument");
return v.offset(d[0],a,h.convertLinearUnitsToCode(l.defaultUndefined(d[2],-1)),l.toString(l.defaultUndefined(d[3],"round")).toLowerCase(),b,f)})};b.rotate=function(b,f){return e(b,f,function(b,f,e){e=l.autoCastFeatureToGeometry(e);l.pcCheck(e,2,3);b=e[0];if(null===b)return null;if(!(b instanceof a))throw Error("Illegal Argument");b instanceof k&&(b=c.fromExtent(b));f=l.toNumber(e[1]);if(isNaN(f))throw Error("Illegal Argument");e=l.defaultUndefined(e[2],null);if(null===e)return v.rotate(b,f);if(e instanceof
d)return v.rotate(b,f,e);throw Error("Illegal Argument");})};b.centroid=function(b,g){return e(b,g,function(e,g,h){h=l.autoCastFeatureToGeometry(h);l.pcCheck(h,1,1);if(null===h[0])return null;if(!(h[0]instanceof a))throw Error("Illegal Argument");return h[0]instanceof d?l.fixSpatialReference(x(h[0]),b.spatialReference):h[0]instanceof c?w?h[0].centroid:h[0].getCentroid():h[0]instanceof q?m.centroidPolyline(h[0]):h[0]instanceof f?m.centroidMultiPoint(h[0]):h[0]instanceof k?w?h[0].center:h[0].getExtent().getCenter():
null})};b.multiparttosinglepart=function(b,g){return e(b,g,function(e,g,h){h=l.autoCastFeatureToGeometry(h);l.pcCheck(h,1,1);g=[];if(null===h[0])return null;if(!(h[0]instanceof a))throw Error("Illegal Argument");if(h[0]instanceof d||h[0]instanceof k)return[l.fixSpatialReference(x(h[0]),b.spatialReference)];e=v.simplify(h[0]);if(e instanceof c){g=[];var m=[];for(h=0;h<e.rings.length;h++)if(e.isClockwise(e.rings[h])){var p=r.fromJSON({rings:[e.rings[h]],hasZ:w?e.hasZ:!1,hasM:w?e.hasM:!1,spatialReference:w?
e.spatialReference.toJSON():e.spatialReference.toJson()});g.push(p)}else m.push({ring:e.rings[h],pt:e.getPoint(h,0)});for(e=0;e<m.length;e++)for(h=0;h<g.length;h++)if(g[h].contains(m[e].pt)){g[h].addRing(m[e].ring);break}return g}if(e instanceof q){g=[];for(h=0;h<e.paths.length;h++)m=r.fromJSON({paths:[e.paths[h]],hasZ:w?e.hasZ:!1,hasM:w?e.hasM:!1,spatialReference:w?e.spatialReference.toJSON():e.spatialReference.toJson()}),g.push(m);return g}if(h[0]instanceof f){e=l.fixSpatialReference(x(h[0]),b.spatialReference);
for(h=0;h<e.points.length;h++)g.push(e.getPoint(h));return g}return null})};b.issimple=function(b,c){return e(b,c,function(b,c,d){d=l.autoCastFeatureToGeometry(d);l.pcCheck(d,1,1);if(null===d[0])return!0;if(d[0]instanceof a)return v.isSimple(d[0]);throw Error("Illegal Argument");})};b.simplify=function(b,c){return e(b,c,function(b,c,d){d=l.autoCastFeatureToGeometry(d);l.pcCheck(d,1,1);if(null===d[0])return null;if(d[0]instanceof a)return v.simplify(d[0]);throw Error("Illegal Argument");})}}})},"esri/arcade/kernel":function(){define(["require",
"exports","../geometry/Extent"],function(b,e,n){Object.defineProperty(e,"__esModule",{value:!0});e.errback=function(b){return function(e){b.reject(e)}};e.callback=function(b,e){return function(){try{b.apply(null,arguments)}catch(m){e.reject(m)}}};e.convertSquareUnitsToCode=function(b){if(void 0===b)return null;if("number"===typeof b)return b;switch(b.toLowerCase()){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":case "square-meter":case "square_meters":return 109404;case "miles":case "mile":case "squaremile":case "squaremiles":case "square-miles":case "square-mile":return 109413;
case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "square-kilometers":case "square-kilometer":case "km":return 109414;case "acres":case "acre":case "ac":return 109402;case "hectares":case "hectare":case "ha":return 109401;case "yard":case "yd":case "yards":case "square-yards":case "square-yard":case "squareyards":case "squareyard":return 109442;case "feet":case "ft":case "foot":case "square-feet":case "square-foot":case "squarefeet":case "squarefoot":return 109405}return null};
e.shapeExtent=function(b){if(null===b)return null;switch(b.type){case "polygon":case "multipoint":case "polyline":return b.extent;case "point":return new n({xmin:b.x,ymin:b.y,xmax:b.x,ymax:b.y,spatialReference:b.spatialReference});case "extent":return b}return null};e.convertLinearUnitsToCode=function(b){if(void 0===b)return null;if("number"===typeof b||"number"===typeof b)return b;switch(b.toLowerCase()){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":case "square-meter":case "square-meters":return 9001;
case "miles":case "mile":case "squaremile":case "squaremiles":case "square-miles":case "square-mile":return 9035;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "square-kilometers":case "square-kilometer":case "km":return 9036;case "yard":case "yd":case "yards":case "square-yards":case "square-yard":case "squareyards":case "squareyard":return 9096;case "feet":case "ft":case "foot":case "square-feet":case "square-foot":case "squarefeet":case "squarefoot":return 9002}return null};
e.sameGeomType=function(b,e){return b===e||"point"===b&&"esriGeometryPoint"===e||"polyline"===b&&"esriGeometryPolyline"===e||"polygon"===b&&"esriGeometryPolygon"===e||"extent"===b&&"esriGeometryEnvelope"===e||"multipoint"===b&&"esriGeometryMultipoint"===e||"point"===e&&"esriGeometryPoint"===b||"polyline"===e&&"esriGeometryPolyline"===b||"polygon"===e&&"esriGeometryPolygon"===b||"extent"===e&&"esriGeometryEnvelope"===b||"multipoint"===e&&"esriGeometryMultipoint"===b?!0:!1}})},"esri/arcade/functions/centroid":function(){define(["require",
"exports","../../kernel","../../geometry/Point"],function(b,e,n,h){function l(a,b,d){var c={x:0,y:0};b&&(c.z=0);d&&(c.m=0);for(var f=0,e=a[0],h=0;h<a.length;h++){var k=a[h],l;a:if(k.length!==e.length)l=!1;else{for(l=0;l<k.length;l++)if(k[l]!==e[l]){l=!1;break a}l=!0}if(!1===l){l=m(e,k,b);var n=k,p=b,y=d,g={x:(e[0]+n[0])/2,y:(e[1]+n[1])/2};p&&(g.z=(e[2]+n[2])/2);p&&y?g.m=(e[3]+n[3])/2:y&&(g.m=(e[2]+n[2])/2);e=g;e.x*=l;e.y*=l;c.x+=e.x;c.y+=e.y;b&&(e.z*=l,c.z+=e.z);d&&(e.m*=l,c.m+=e.m);f+=l;e=k}}0<f?
(c.x/=f,c.y/=f,b&&(c.z/=f),d&&(c.m/=f)):(c.x=a[0][0],c.y=a[0][1],b&&(c.z=a[0][2]),d&&b?c.m=a[0][3]:d&&(c.m=a[0][2]));return c}function m(a,b,d){var c=b[0]-a[0];a=b[1]-a[1];return d?(b=b[2]-b[2],Math.sqrt(c*c+a*a+b*b)):Math.sqrt(c*c+a*a)}Object.defineProperty(e,"__esModule",{value:!0});var k=0===n.version.indexOf("4.");e.centroidPolyline=function(a){for(var b={x:0,y:0,spatialReference:k?a.spatialReference.toJSON():a.spatialReference.toJson()},d={x:0,y:0,spatialReference:k?a.spatialReference.toJSON():
a.spatialReference.toJson()},c=0,e=0,n=0;n<a.paths.length;n++)if(0!==a.paths[n].length){var x;x=a.paths[n];var z=!0===a.hasZ;if(1>=x.length)x=0;else{for(var v=0,w=1;w<x.length;w++)v+=m(x[w-1],x[w],z);x=v}0===x?(z=l(a.paths[n],!0===a.hasZ,!0===a.hasM),b.x+=z.x,b.y+=z.y,!0===a.hasZ&&(b.z+=z.z),!0===a.hasM&&(b.m+=z.m),++c):(z=l(a.paths[n],!0===a.hasZ,!0===a.hasM),d.x+=z.x*x,d.y+=z.y*x,!0===a.hasZ&&(d.z+=z.z*x),!0===a.hasM&&(d.m+=z.m*x),e+=x)}return 0<e?(d.x/=e,d.y/=e,!0===a.hasZ&&(d.z/=e),!0===a.hasM&&
(d.m/=e),new h(d)):0<c?(b.x/=c,b.y/=c,!0===a.hasZ&&(d.z/=c),!0===a.hasM&&(b.m/=c),new h(b)):null};e.centroidMultiPoint=function(a){if(0===a.points.length)return null;for(var b=0,d=0,c=0,e=0,l=0;l<a.points.length;l++){var m=a.getPoint(l);!0===m.hasZ&&(c+=m.z);!0===m.hasM&&(e+=m.m);b+=m.x;d+=m.y;e+=m.m}b={x:b/a.points.length,y:d/a.points.length,spatialReference:null};b.spatialReference=k?a.spatialReference.toJSON():a.spatialReference.toJson();!0===a.hasZ&&(b.z=c/a.points.length);!0===a.hasM&&(b.m=e/
a.points.length);return new h(b)}})},"esri/arcade/functions/maths":function(){define(["require","exports","dojo/number","../languageUtils"],function(b,e,n,h){function l(b,e,a){if("undefined"===typeof a||0===+a)return Math[b](e);e=+e;a=+a;if(isNaN(e)||"number"!==typeof a||0!==a%1)return NaN;e=e.toString().split("e");e=Math[b](+(e[0]+"e"+(e[1]?+e[1]-a:-a)));e=e.toString().split("e");return+(e[0]+"e"+(e[1]?+e[1]+a:a))}Object.defineProperty(e,"__esModule",{value:!0});e.registerFunctions=function(b,e){function a(a,
b,c){a=h.toNumber(a);return isNaN(a)?a:isNaN(b)||isNaN(c)||b>c?NaN:a<b?b:a>c?c:a}b.number=function(a,b){return e(a,b,function(a,b,d){h.pcCheck(d,1,2);a=d[0];return h.isNumber(a)?a:null===a?0:h.isDate(a)||h.isBoolean(a)?Number(a):h.isArray(a)?NaN:""===a||void 0===a?Number(a):h.isString(a)?void 0!==d[1]?(d=h.multiReplace(d[1],"\u2030",""),d=h.multiReplace(d,"\u00a4",""),n.parse(a,{pattern:d})):Number(a.trim()):Number(a)})};b.abs=function(a,b){return e(a,b,function(a,b,d){h.pcCheck(d,1,1);return Math.abs(h.toNumber(d[0]))})};
b.acos=function(a,b){return e(a,b,function(a,b,d){h.pcCheck(d,1,1);return Math.acos(h.toNumber(d[0]))})};b.asin=function(a,b){return e(a,b,function(a,b,d){h.pcCheck(d,1,1);return Math.asin(h.toNumber(d[0]))})};b.atan=function(a,b){return e(a,b,function(a,b,d){h.pcCheck(d,1,1);return Math.atan(h.toNumber(d[0]))})};b.atan2=function(a,b){return e(a,b,function(a,b,d){h.pcCheck(d,2,2);return Math.atan2(h.toNumber(d[0]),h.toNumber(d[1]))})};b.ceil=function(a,b){return e(a,b,function(a,b,d){h.pcCheck(d,
1,2);return 2===d.length?(a=h.toNumber(d[1]),isNaN(a)&&(a=0),l("ceil",h.toNumber(d[0]),-1*a)):Math.ceil(h.toNumber(d[0]))})};b.round=function(a,b){return e(a,b,function(a,b,d){h.pcCheck(d,1,2);return 2===d.length?(a=h.toNumber(d[1]),isNaN(a)&&(a=0),l("round",h.toNumber(d[0]),-1*a)):Math.round(h.toNumber(d[0]))})};b.floor=function(a,b){return e(a,b,function(a,b,d){h.pcCheck(d,1,2);return 2===d.length?(a=h.toNumber(d[1]),isNaN(a)&&(a=0),l("floor",h.toNumber(d[0]),-1*a)):Math.floor(h.toNumber(d[0]))})};
b.cos=function(a,b){return e(a,b,function(a,b,d){h.pcCheck(d,1,1);return Math.cos(h.toNumber(d[0]))})};b.isnan=function(a,b){return e(a,b,function(a,b,d){h.pcCheck(d,1,1);return"number"===typeof d[0]&&isNaN(d[0])})};b.exp=function(a,b){return e(a,b,function(a,b,d){h.pcCheck(d,1,1);return Math.exp(h.toNumber(d[0]))})};b.log=function(a,b){return e(a,b,function(a,b,d){h.pcCheck(d,1,1);return Math.log(h.toNumber(d[0]))})};b.pow=function(a,b){return e(a,b,function(a,b,d){h.pcCheck(d,2,2);return Math.pow(h.toNumber(d[0]),
h.toNumber(d[1]))})};b.random=function(a,b){return e(a,b,function(a,b,d){h.pcCheck(d,0,0);return Math.random()})};b.sin=function(a,b){return e(a,b,function(a,b,d){h.pcCheck(d,1,1);return Math.sin(h.toNumber(d[0]))})};b.sqrt=function(a,b){return e(a,b,function(a,b,d){h.pcCheck(d,1,1);return Math.sqrt(h.toNumber(d[0]))})};b.tan=function(a,b){return e(a,b,function(a,b,d){h.pcCheck(d,1,1);return Math.tan(h.toNumber(d[0]))})};b.defaultvalue=function(a,b){return e(a,b,function(a,b,d){h.pcCheck(d,2,2);return null===
d[0]||""===d[0]||void 0===d[0]?d[1]:d[0]})};b.isempty=function(a,b){return e(a,b,function(a,b,d){h.pcCheck(d,1,1);return null===d[0]||""===d[0]||void 0===d[0]?!0:!1})};b["boolean"]=function(a,b){return e(a,b,function(a,b,d){h.pcCheck(d,1,1);return h.toBoolean(d[0])})};b.constrain=function(b,d){return e(b,d,function(b,d,f){h.pcCheck(f,3,3);b=h.toNumber(f[1]);d=h.toNumber(f[2]);if(h.isArray(f[0])){var c=[],e=0;for(f=f[0];e<f.length;e++)c.push(a(f[e],b,d));return c}if(h.isImmutableArray(f[0])){c=[];
for(e=0;e<f[0].length();e++)c.push(a(f[0].get(e),b,d));return c}return a(f[0],b,d)})}}})},"esri/arcade/functions/stats":function(){define(["require","exports","../languageUtils","./fieldStats"],function(b,e,n,h){function l(b,e,a,f){if(1===f.length){if(n.isArray(f[0]))return h.calculateStat(b,f[0],-1);if(n.isImmutableArray(f[0]))return h.calculateStat(b,f[0].toArray(),-1)}return h.calculateStat(b,f,-1)}Object.defineProperty(e,"__esModule",{value:!0});e.registerFunctions=function(b,e){b.stdev=function(a,
b){return e(a,b,function(a,b,f){return l("stdev",a,b,f)})};b.variance=function(a,b){return e(a,b,function(a,b,f){return l("variance",a,b,f)})};b.average=function(a,b){return e(a,b,function(a,b,f){return l("mean",a,b,f)})};b.mean=function(a,b){return e(a,b,function(a,b,f){return l("mean",a,b,f)})};b.sum=function(a,b){return e(a,b,function(a,b,f){return l("sum",a,b,f)})};b.min=function(a,b){return e(a,b,function(a,b,f){return l("min",a,b,f)})};b.max=function(a,b){return e(a,b,function(a,b,f){return l("max",
a,b,f)})};b.distinct=function(a,b){return e(a,b,function(a,b,f){return l("distinct",a,b,f)})};b.count=function(a,b){return e(a,b,function(a,b,f){n.pcCheck(f,1,1);if(n.isArray(f[0])||n.isString(f[0]))return f[0].length;if(n.isImmutableArray(f[0]))return f[0].length();throw Error("Invalid Parameters for Count");})}}})},"esri/arcade/functions/fieldStats":function(){define(["require","exports","../languageUtils"],function(b,e,n){function h(b){for(var e=0,a=0;a<b.length;a++)e+=b[a];return e/b.length}function l(b){for(var e=
h(b),a=0,f=0;f<b.length;f++)a+=Math.pow(e-b[f],2);return a/b.length}Object.defineProperty(e,"__esModule",{value:!0});e.decodeStatType=function(b){switch(b.toLowerCase()){case "distinct":return"distinct";case "avg":case "mean":return"avg";case "min":return"min";case "sum":return"sum";case "max":return"max";case "stdev":case "stddev":return"stddev";case "var":case "variance":return"var";case "count":return"count"}return""};e.calculateStat=function(b,e,a){void 0===a&&(a=1E3);switch(b.toLowerCase()){case "distinct":a:{b=
a;a=[];for(var f={},d=[],c=0;c<e.length;c++){if(void 0!==e[c]&&null!==e[c]&&e[c]!==n.voidOperation){var k=e[c];if(n.isNumber(k)||n.isString(k))void 0===f[k]&&(a.push(k),f[k]=1);else{for(var m=!1,x=0;x<d.length;x++)!0===n.equalityTest(d[x],k)&&(m=!0);!1===m&&(d.push(k),a.push(k))}}if(a.length>=b&&-1!==b){e=a;break a}}e=a}return e;case "avg":case "mean":return h(n.toNumberArray(e));case "min":return Math.min.apply(Math,n.toNumberArray(e));case "sum":e=n.toNumberArray(e);for(a=b=0;a<e.length;a++)b+=
e[a];return b;case "max":return Math.max.apply(Math,n.toNumberArray(e));case "stdev":case "stddev":return Math.sqrt(l(n.toNumberArray(e)));case "var":case "variance":return l(n.toNumberArray(e));case "count":return e.length}return 0}})},"esri/arcade/functions/string":function(){define(["require","exports","../Feature","../languageUtils"],function(b,e,n,h){Object.defineProperty(e,"__esModule",{value:!0});e.registerFunctions=function(b,e){b.trim=function(b,a){return e(b,a,function(a,b,c){h.pcCheck(c,
1,1);return h.toString(c[0]).trim()})};b.upper=function(b,a){return e(b,a,function(a,b,c){h.pcCheck(c,1,1);return h.toString(c[0]).toUpperCase()})};b.proper=function(b,a){return e(b,a,function(a,b,c){h.pcCheck(c,1,2);a=1;2===c.length&&"firstword"===h.toString(c[1]).toLowerCase()&&(a=2);b=/\s/;c=h.toString(c[0]);for(var d="",f=!0,e=0;e<c.length;e++){var k=c[e];b.test(k)?1===a&&(f=!0):k.toUpperCase()!==k.toLowerCase()&&(f?(k=k.toUpperCase(),f=!1):k=k.toLowerCase());d+=k}return d})};b.lower=function(b,
a){return e(b,a,function(a,b,c){h.pcCheck(c,1,1);return h.toString(c[0]).toLowerCase()})};b.guid=function(b,a){return e(b,a,function(a,b,c){h.pcCheck(c,0,1);if(0<c.length)switch(h.toString(c[0]).toLowerCase()){case "digits":return h.generateUUID().replace("-","").replace("-","").replace("-","").replace("-","");case "digits-hyphen":return h.generateUUID();case "digits-hyphen-parentheses":return"("+h.generateUUID()+")"}return"{"+h.generateUUID()+"}"})};b.console=function(b,a){return e(b,a,function(a,
d,c){0!==c.length&&(1===c.length?b.console(h.toString(c[0])):b.console(h.toString(c)));return h.voidOperation})};b.mid=function(b,a){return e(b,a,function(a,b,c){h.pcCheck(c,2,3);a=h.toNumber(c[1]);if(isNaN(a))return"";0>a&&(a=0);if(2===c.length)return h.toString(c[0]).substr(a);b=h.toNumber(c[2]);if(isNaN(b))return"";0>b&&(b=0);return h.toString(c[0]).substr(a,b)})};b.find=function(b,a){return e(b,a,function(a,b,c){h.pcCheck(c,2,3);a=0;if(2<c.length){a=h.toNumber(h.defaultUndefined(c[2],0));if(isNaN(a))return-1;
0>a&&(a=0)}return h.toString(c[1]).indexOf(h.toString(c[0]),a)})};b.left=function(b,a){return e(b,a,function(a,b,c){h.pcCheck(c,2,2);a=h.toNumber(c[1]);if(isNaN(a))return"";0>a&&(a=0);return h.toString(c[0]).substr(0,a)})};b.right=function(b,a){return e(b,a,function(a,b,c){h.pcCheck(c,2,2);a=h.toNumber(c[1]);if(isNaN(a))return"";0>a&&(a=0);return h.toString(c[0]).substr(-1*a,a)})};b.split=function(b,a){return e(b,a,function(a,b,c){h.pcCheck(c,2,4);a=h.toNumber(h.defaultUndefined(c[2],-1));b=h.toBoolean(h.defaultUndefined(c[3],
!1));-1===a||null===a||!0===b?c=h.toString(c[0]).split(h.toString(c[1])):(isNaN(a)&&(a=-1),-1>a&&(a=-1),c=h.toString(c[0]).split(h.toString(c[1]),a));if(!1===b)return c;b=[];for(var d=0;d<c.length&&!(-1!==a&&b.length>=a);d++)""!==c[d]&&void 0!==c[d]&&b.push(c[d]);return b})};b.text=function(b,a){return e(b,a,function(a,b,c){h.pcCheck(c,1,2);return h.toStringExplicit(c[0],c[1])})};b.concatenate=function(b,a){return e(b,a,function(a,b,c){a=[];if(1>c.length)return"";if(h.isArray(c[0])){b=h.defaultUndefined(c[2],
"");for(var d=0;d<c[0].length;d++)a[d]=h.toStringExplicit(c[0][d],b);return 1<c.length?a.join(c[1]):a.join("")}if(h.isImmutableArray(c[0])){b=h.defaultUndefined(c[2],"");for(d=0;d<c[0].length();d++)a[d]=h.toStringExplicit(c[0].get(d),b);return 1<c.length?a.join(c[1]):a.join("")}for(d=0;d<c.length;d++)a[d]=h.toStringExplicit(c[d]);return a.join("")})};b.reverse=function(b,a){return e(b,a,function(a,b,c){h.pcCheck(c,1,1);if(h.isArray(c[0]))return a=c[0].slice(0),a.reverse(),a;if(h.isImmutableArray(c[0]))return a=
c[0].toArray().slice(0),a.reverse(),a;throw Error("Invalid Parameter");})};b.replace=function(b,a){return e(b,a,function(a,b,c){h.pcCheck(c,3,4);a=h.toString(c[0]);b=h.toString(c[1]);var d=h.toString(c[2]);return(4===c.length?h.toBoolean(c[3]):1)?h.multiReplace(a,b,d):a.replace(b,d)})};b.domainname=function(b,a){return e(b,a,function(a,b,c){h.pcCheck(c,2,4);if(c[0]instanceof n)return c[0].domainValueLookup(h.toString(c[1]),c[2],void 0===c[3]?void 0:h.toNumber(c[3]));throw Error("Invalid Parameter");
})};b.domaincode=function(b,a){return e(b,a,function(a,b,c){h.pcCheck(c,3,4);if(c[0]instanceof n)return c[0].domainCodeLookup(h.toString(c[1]),c[2],void 0===c[3]?void 0:h.toNumber(c[3]));throw Error("Invalid Parameter");})}}})},"esri/arcade/arcadeRuntime":function(){define("require exports ./Dictionary ./Feature ./FunctionWrapper ./ImmutablePathArray ./ImmutablePointArray ./languageUtils ./treeAnalysis ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../geometry/SpatialReference".split(" "),
function(b,e,n,h,l,m,k,a,f,d,c,q,r,x,z,v,w,p,y,g,u,t){function A(a,b){for(var c=[],d=0;d<b.arguments.length;d++)c.push(B(a,b.arguments[d]));return c}function C(a,b,c){try{return c(a,b,A(a,b))}catch(qa){throw qa;}}function B(b,c){try{switch(c.type){case "EmptyStatement":return a.voidOperation;case "VariableDeclarator":var d=null===c.init?null:B(b,c.init);d===a.voidOperation&&(d=null);var e=c.id.name.toLowerCase();null!==b.localScope?b.localScope[e]={value:d,valueset:!0,node:c.init}:b.globalScope[e]=
{value:d,valueset:!0,node:c.init};return a.voidOperation;case "VariableDeclaration":for(var g=0;g<c.declarations.length;g++)B(b,c.declarations[g]);return a.voidOperation;case "BlockStatement":var k;a:{for(var m=a.voidOperation,g=0;g<c.body.length;g++)if(m=B(b,c.body[g]),m instanceof a.ReturnResult||m===a.breakResult||m===a.continueResult){k=m;break a}k=m}return k;case "FunctionDeclaration":var q=c.id.name.toLowerCase();b.globalScope[q]={valueset:!0,node:null,value:new l(c,b)};return a.voidOperation;
case "ReturnStatement":var p;if(null===c.argument)p=new a.ReturnResult(a.voidOperation);else{var t=B(b,c.argument);p=new a.ReturnResult(t)}return p;case "IfStatement":var r;if("AssignmentExpression"===c.test.type||"UpdateExpression"===c.test.type)throw Error(f.nodeErrorMessage(c.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var y=B(b,c.test);if(!0===y)r=B(b,c.consequent);else if(!1===y)r=null!==c.alternate?B(b,c.alternate):a.voidOperation;else throw Error(f.nodeErrorMessage(c,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));
return r;case "ExpressionStatement":var u;if("AssignmentExpression"===c.expression.type||"UpdateExpression"===c.expression.type)u=B(b,c.expression);else{var v=B(b,c.expression);u=v===a.voidOperation?a.voidOperation:new a.ImplicitResult(v)}return u;case "AssignmentExpression":var z;var x=B(b,c.right),g=null,w="";if("MemberExpression"===c.left.type){g=B(b,c.left.object);w=!0===c.left.computed?B(b,c.left.property):c.left.property.name;if(a.isArray(g))if(a.isNumber(w)){0>w&&(w=g.length+w);if(0>w||w>g.length)throw Error("Assignment outside of array bounds");
if(w===g.length&&"\x3d"!==c.operator)throw Error("Invalid Parameter");g[w]=D(x,c.operator,g[w],c)}else throw Error("Invalid Parameter");else if(g instanceof n){if(!1===a.isString(w))throw Error("Dictionary accessor must be a string");if(!0===g.hasField(w))g.setField(w,D(x,c.operator,g.field(w),c));else{if("\x3d"!==c.operator)throw Error("Invalid Parameter");g.setField(w,D(x,c.operator,null,c))}}else if(g instanceof h){if(!1===a.isString(w))throw Error("Feature accessor must be a string");if(!0===
g.hasField(w))g.setField(w,D(x,c.operator,g.field(w),c));else{if("\x3d"!==c.operator)throw Error("Invalid Parameter");g.setField(w,D(x,c.operator,null,c))}}else{if(a.isImmutableArray(g))throw Error("Array is Immutable");throw Error("Invalid Parameter");}z=a.voidOperation}else if(g=c.left.name.toLowerCase(),null!==b.localScope&&void 0!==b.localScope[g])b.localScope[g]={value:D(x,c.operator,b.localScope[g].value,c),valueset:!0,node:c.right},z=a.voidOperation;else if(void 0!==b.globalScope[g])b.globalScope[g]=
{value:D(x,c.operator,b.globalScope[g].value,c),valueset:!0,node:c.right},z=a.voidOperation;else throw Error("Variable not recognised");return z;case "UpdateExpression":var A;var C,g=null,w="";if("MemberExpression"===c.argument.type){g=B(b,c.argument.object);w=!0===c.argument.computed?B(b,c.argument.property):c.argument.property.name;if(a.isArray(g))if(a.isNumber(w)){0>w&&(w=g.length+w);if(0>w||w>=g.length)throw Error("Assignment outside of array bounds");C=a.toNumber(g[w]);g[w]="++"===c.operator?
C+1:C-1}else throw Error("Invalid Parameter");else if(g instanceof n){if(!1===a.isString(w))throw Error("Dictionary accessor must be a string");if(!0===g.hasField(w))C=a.toNumber(g.field(w)),g.setField(w,"++"===c.operator?C+1:C-1);else throw Error("Invalid Parameter");}else if(g instanceof h){if(!1===a.isString(w))throw Error("Feature accessor must be a string");if(!0===g.hasField(w))C=a.toNumber(g.field(w)),g.setField(w,"++"===c.operator?C+1:C-1);else throw Error("Invalid Parameter");}else{if(a.isImmutableArray(g))throw Error("Array is Immutable");
throw Error("Invalid Parameter");}A=!1===c.prefix?C:"++"===c.operator?C+1:C-1}else if(g=c.argument.name.toLowerCase(),null!==b.localScope&&void 0!==b.localScope[g])C=a.toNumber(b.localScope[g].value),b.localScope[g]={value:"++"===c.operator?C+1:C-1,valueset:!0,node:c},A=!1===c.prefix?C:"++"===c.operator?C+1:C-1;else if(void 0!==b.globalScope[g])C=a.toNumber(b.globalScope[g].value),b.globalScope[g]={value:"++"===c.operator?C+1:C-1,valueset:!0,node:c},A=!1===c.prefix?C:"++"===c.operator?C+1:C-1;else throw Error("Variable not recognised");
return A;case "BreakStatement":return a.breakResult;case "ContinueStatement":return a.continueResult;case "ForStatement":null!==c.init&&B(b,c.init);w={testResult:!0,lastAction:a.voidOperation};do b:{z=b;x=c;A=w;if(null!==x.test){A.testResult=B(z,x.test);if(!1===A.testResult)break b;if(!0!==A.testResult)throw Error(f.nodeErrorMessage(x,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));}A.lastAction=B(z,x.body);A.lastAction===a.breakResult?A.testResult=!1:A.lastAction instanceof a.ReturnResult?A.testResult=
!1:null!==x.update&&B(z,x.update)}while(!0===w.testResult);g=w.lastAction instanceof a.ReturnResult?w.lastAction:a.voidOperation;return g;case "ForInStatement":return F(b,c);case "Identifier":return ja(b,c);case "MemberExpression":return aa(b,c);case "Literal":return c.value;case "ThisExpression":throw Error(f.nodeErrorMessage(c,"RUNTIME","NOTSUPPORTED"));case "CallExpression":return M(b,c);case "UnaryExpression":return ga(b,c);case "BinaryExpression":return P(b,c);case "LogicalExpression":return K(b,
c);case "ConditionalExpression":throw Error(f.nodeErrorMessage(c,"RUNTIME","NOTSUPPORTED"));case "ArrayExpression":try{for(g=[],w=0;w<c.elements.length;w++){var H=B(b,c.elements[w]);if(a.isFunctionParameter(H))throw Error(f.nodeErrorMessage(c,"RUNTIME","FUNCTIONCONTEXTILLEGAL"));H===a.voidOperation?g.push(null):g.push(H)}}catch(Ra){throw Ra;}return g;case "ObjectExpression":g={};for(w=0;w<c.properties.length;w++){var la=B(b,c.properties[w]);if(a.isFunctionParameter(la.value))throw Error("Illegal Argument");
if(!1===a.isString(la.key))throw Error("Illegal Argument");g[la.key.toString()]=la.value===a.voidOperation?null:la.value}var pa=new n(g);pa.immutable=!1;return pa;case "Property":return{key:"Identifier"===c.key.type?c.key.name:B(b,c.key),value:B(b,c.value)};case "Array":throw Error(f.nodeErrorMessage(c,"RUNTIME","NOTSUPPORTED"));default:throw Error(f.nodeErrorMessage(c,"RUNTIME","UNREOGNISED"));}}catch(Ra){throw Ra;}}function F(b,c){var d=B(b,c.right);"VariableDeclaration"===c.left.type&&B(b,c.left);
var e=null,g="VariableDeclaration"===c.left.type?c.left.declarations[0].id.name:c.left.name;null!==b.localScope&&void 0!==b.localScope[g]&&(e=b.localScope[g]);null===e&&void 0!==b.globalScope[g]&&(e=b.globalScope[g]);if(null===e)throw Error(f.nodeErrorMessage(c,"RUNTIME","VARIABLENOTDECLARED"));if(a.isArray(d)||a.isString(d)){for(var d=d.length,k=0;k<d&&(e.value=k,g=B(b,c.body),g!==a.breakResult);k++)if(g instanceof a.ReturnResult)return g;return a.voidOperation}if(a.isImmutableArray(d)){for(k=0;k<
d.length()&&(e.value=k,g=B(b,c.body),g!==a.breakResult);k++)if(g instanceof a.ReturnResult)return g;return a.voidOperation}if(d instanceof n||d instanceof h)for(d=d.keys(),k=0;k<d.length&&(e.value=d[k],g=B(b,c.body),g!==a.breakResult);k++){if(g instanceof a.ReturnResult)return g}else return a.voidOperation}function D(b,c,d,e){switch(c){case "\x3d":return b===a.voidOperation?null:b;case "/\x3d":return a.toNumber(d)/a.toNumber(b);case "*\x3d":return a.toNumber(d)*a.toNumber(b);case "-\x3d":return a.toNumber(d)-
a.toNumber(b);case "+\x3d":return a.isString(d)||a.isString(b)?a.toString(d)+a.toString(b):a.toNumber(d)+a.toNumber(b);case "%\x3d":return a.toNumber(d)%a.toNumber(b);default:throw Error(f.nodeErrorMessage(e,"RUNTIME","OPERATORNOTRECOGNISED"));}}function H(b,c,d,e){c=c.toLowerCase();switch(c){case "hasz":return b=b.hasZ,void 0===b?!1:b;case "hasm":return b=b.hasM,void 0===b?!1:b;case "spatialreference":return c=b.spatialReference._arcadeCacheId,void 0===c&&(d=!0,Object.freeze&&Object.isFrozen(b.spatialReference)&&
(d=!1),d&&(N++,c=b.spatialReference._arcadeCacheId=N)),b=new n({wkt:b.spatialReference.wkt,wkid:b.spatialReference.wkid}),void 0!==c&&(b._arcadeCacheId="SPREF"+c.toString()),b}switch(b.type){case "extent":switch(c){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return b=b[c],void 0!==b?b:null;case "type":return"Extent"}break;case "polygon":switch(c){case "rings":return c=a.isVersion4?b.cache._arcadeCacheId:b.getCacheValue("_arcadeCacheId"),void 0===
c&&(N++,c=N,a.isVersion4?b.cache._arcadeCacheId=c:b.setCacheValue("_arcadeCacheId",c)),b=new m(b.rings,b.spatialReference,!0===b.hasZ,!0===b.hasM,c);case "type":return"Polygon"}break;case "point":switch(c){case "x":case "y":case "z":case "m":return void 0!==b[c]?b[c]:null;case "type":return"Point"}break;case "polyline":switch(c){case "paths":return c=a.isVersion4?b.cache._arcadeCacheId:b.getCacheValue("_arcadeCacheId"),void 0===c&&(N++,c=N,a.isVersion4?b.cache._arcadeCacheId=c:b.setCacheValue("_arcadeCacheId",
c)),b=new m(b.paths,b.spatialReference,!0===b.hasZ,!0===b.hasM,c);case "type":return"Polyline"}break;case "multipoint":switch(c){case "points":return c=a.isVersion4?b.cache._arcadeCacheId:b.getCacheValue("_arcadeCacheId"),void 0===c&&(N++,c=N,a.isVersion4?b.cache._arcadeCacheId=c:b.setCacheValue("_arcadeCacheId",c)),b=new k(b.points,b.spatialReference,!0===b.hasZ,!0===b.hasM,c,1);case "type":return"Multipoint"}}throw Error(f.nodeErrorMessage(e,"RUNTIME","PROPERTYNOTFOUND"));}function aa(b,c){try{var d=
B(b,c.object);if(null===d)throw Error(f.nodeErrorMessage(c,"RUNTIME","NOTFOUND"));if(!1===c.computed){if(d instanceof n||d instanceof h)return d.field(c.property.name);if(d instanceof w)return H(d,c.property.name,b,c);throw Error(f.nodeErrorMessage(c,"RUNTIME","INVALIDTYPE"));}var e=B(b,c.property);if(d instanceof n||d instanceof h){if(a.isString(e))return d.field(e)}else if(d instanceof w){if(a.isString(e))return H(d,e,b,c)}else if(a.isArray(d)){if(a.isNumber(e)&&isFinite(e)&&Math.floor(e)===e){0>
e&&(e=d.length+e);if(e>=d.length||0>e)throw Error(f.nodeErrorMessage(c,"RUNTIME","OUTOFBOUNDS"));return d[e]}}else if(a.isString(d)){if(a.isNumber(e)&&isFinite(e)&&Math.floor(e)===e){0>e&&(e=d.length+e);if(e>=d.length||0>e)throw Error(f.nodeErrorMessage(c,"RUNTIME","OUTOFBOUNDS"));return d[e]}}else if(a.isImmutableArray(d)&&a.isNumber(e)&&isFinite(e)&&Math.floor(e)===e){0>e&&(e=d.length()+e);if(e>=d.length()||0>e)throw Error(f.nodeErrorMessage(c,"RUNTIME","OUTOFBOUNDS"));return d.get(e)}throw Error(f.nodeErrorMessage(c,
"RUNTIME","INVALIDTYPE"));}catch(Ca){throw Ca;}}function ga(b,c){try{var d=B(b,c.argument);if(a.isBoolean(d)){if("!"===c.operator)return!d;if("-"===c.operator)return-1*a.toNumber(d);if("+"===c.operator)return 1*a.toNumber(d);throw Error(f.nodeErrorMessage(c,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}if("-"===c.operator)return-1*a.toNumber(d);if("+"===c.operator)return 1*a.toNumber(d);throw Error(f.nodeErrorMessage(c,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}catch(qa){throw qa;}}function P(b,c){try{var d=
[B(b,c.left),B(b,c.right)],e=d[0],g=d[1];switch(c.operator){case "\x3d\x3d":return a.equalityTest(e,g);case "\x3d":return a.equalityTest(e,g);case "!\x3d":return!a.equalityTest(e,g);case "\x3c":return a.greaterThanLessThan(e,g,c.operator);case "\x3e":return a.greaterThanLessThan(e,g,c.operator);case "\x3c\x3d":return a.greaterThanLessThan(e,g,c.operator);case "\x3e\x3d":return a.greaterThanLessThan(e,g,c.operator);case "+":return a.isString(e)||a.isString(g)?a.toString(e)+a.toString(g):a.toNumber(e)+
a.toNumber(g);case "-":return a.toNumber(e)-a.toNumber(g);case "*":return a.toNumber(e)*a.toNumber(g);case "/":return a.toNumber(e)/a.toNumber(g);case "%":return a.toNumber(e)%a.toNumber(g);default:throw Error(f.nodeErrorMessage(c,"RUNTIME","OPERATORNOTRECOGNISED"));}}catch(sa){throw sa;}}function K(b,c){try{if("AssignmentExpression"===c.left.type||"UpdateExpression"===c.left.type)throw Error(f.nodeErrorMessage(c.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===c.right.type||
"UpdateExpression"===c.right.type)throw Error(f.nodeErrorMessage(c.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var d=B(b,c.left);if(a.isBoolean(d))switch(c.operator){case "||":if(!0===d)return d;var e=B(b,c.right);if(a.isBoolean(e))return e;throw Error(f.nodeErrorMessage(c,"RUNTIME","ONLYORORAND"));case "\x26\x26":if(!1===d)return d;e=B(b,c.right);if(a.isBoolean(e))return e;throw Error(f.nodeErrorMessage(c,"RUNTIME","ONLYORORAND"));default:throw Error(f.nodeErrorMessage(c,"RUNTIME","ONLYORORAND"));
}else throw Error(f.nodeErrorMessage(c,"RUNTIME","ONLYBOOLEAN"));}catch(Ca){throw Ca;}}function ja(a,b){var c;try{var d=b.name.toLowerCase();if(null!==a.localScope&&void 0!==a.localScope[d])return c=a.localScope[d],!0!==c.valueset&&(c.value=B(a,c.node),c.valueset=!0),c.value;if(void 0!==a.globalScope[d])return c=a.globalScope[d],!0!==c.valueset&&(c.value=B(a,c.node),c.valueset=!0),c.value;throw Error(f.nodeErrorMessage(b,"RUNTIME","VARIABLENOTFOUND"));}catch(Ca){throw Ca;}}function M(b,c){try{if("Identifier"!==
c.callee.type)throw Error(f.nodeErrorMessage(c,"RUNTIME","ONLYNODESSUPPORTED"));if(null!==b.localScope&&void 0!==b.localScope[c.callee.name.toLowerCase()]){var d=b.localScope[c.callee.name.toLowerCase()];if(d.value instanceof a.NativeFunction)return d.value.fn(b,c);if(d.value instanceof l)return V(b,c,d.value.definition);throw Error(f.nodeErrorMessage(c,"RUNTIME","NOTAFUNCTION"));}if(void 0!==b.globalScope[c.callee.name.toLowerCase()]){d=b.globalScope[c.callee.name.toLowerCase()];if(d.value instanceof
a.NativeFunction)return d.value.fn(b,c);if(d.value instanceof l)return V(b,c,d.value.definition);throw Error(f.nodeErrorMessage(c,"RUNTIME","NOTAFUNCTION"));}throw Error(f.nodeErrorMessage(c,"RUNTIME","NOTFOUND"));}catch(qa){throw qa;}}function X(b){return null==b?"":a.isArray(b)||a.isImmutableArray(b)?"Array":a.isDate(b)?"Date":a.isString(b)?"String":a.isBoolean(b)?"Boolean":a.isNumber(b)?"Number":b instanceof n?"Dictionary":b instanceof h?"Feature":b instanceof y?"Point":b instanceof g?"Polygon":
b instanceof u?"Polyline":b instanceof p?"Multipoint":b instanceof v?"Extent":a.isFunctionParameter(b)?"Function":b===a.voidOperation?"":"number"===typeof b&&isNaN(b)?"Number":"Unrecognised Type"}function O(b,c,d,e){try{var f=B(b,c.arguments[d]);if(a.equalityTest(f,e))return B(b,c.arguments[d+1]);var g=c.arguments.length-d;return 1===g?B(b,c.arguments[d]):2===g?null:3===g?B(b,c.arguments[d+2]):O(b,c,d+2,e)}catch(Ba){throw Ba;}}function L(b,c,d,e){try{if(!0===e)return B(b,c.arguments[d+1]);if(3===
c.arguments.length-d)return B(b,c.arguments[d+2]);var f=B(b,c.arguments[d+2]);if(!1===a.isBoolean(f))throw Error("WHEN needs boolean test conditions");return L(b,c,d+2,f)}catch(sa){throw sa;}}function Q(a,b){var c=a.length,d=Math.floor(c/2);if(0===c)return[];if(1===c)return[a[0]];var e=Q(a.slice(0,d),b);a=Q(a.slice(d,c),b);for(c=[];0<e.length||0<a.length;)0<e.length&&0<a.length?(d=b(e[0],a[0]),isNaN(d)&&(d=0),0>=d?(c.push(e[0]),e=e.slice(1)):(c.push(a[0]),a=a.slice(1))):0<e.length?(c.push(e[0]),e=
e.slice(1)):0<a.length&&(c.push(a[0]),a=a.slice(1));return c}function G(b,c,d){try{var e=b.body;if(d.length!==b.params.length)throw Error("Invalid Parameter calls to function.");for(var f=0;f<d.length;f++)c.localScope[b.params[f].name.toLowerCase()]={value:d[f],valueset:!0,node:null};var g=B(c,e);if(g instanceof a.ReturnResult)return g.value;if(g===a.breakResult)throw Error("Cannot Break from a Function");if(g===a.continueResult)throw Error("Cannot Continue from a Function");return g instanceof a.ImplicitResult?
g.value:g}catch(Ba){throw Ba;}}function V(a,b,c){return C(a,b,function(b,d,e){b={spatialReference:a.spatialReference,applicationCache:void 0===a.applicationCache?null:a.applicationCache,globalScope:a.globalScope,depthCounter:a.depthCounter+1,console:a.console,localScope:{}};if(64<b.depthCounter)throw Error("Exceeded maximum function depth");return G(c,b,e)})}function U(a){return function(){var b={applicationCache:void 0===a.context.applicationCache?null:a.context.applicationCache,spatialReference:a.context.spatialReference,
console:a.context.console,localScope:{},depthCounter:a.context.depthCounter+1,globalScope:a.context.globalScope};if(64<b.depthCounter)throw Error("Exceeded maximum function depth");return G(a.definition,b,arguments)}}function Y(a){console.log(a)}Object.defineProperty(e,"__esModule",{value:!0});var N=0,T={};d.registerFunctions(T,C);z.registerFunctions(T,C);r.registerFunctions(T,C);c.registerFunctions(T,C);x.registerFunctions(T,C);q.registerFunctions(T,C);T["typeof"]=function(b,c){return C(b,c,function(b,
c,d){a.pcCheck(d,1,1);b=X(d[0]);if("Unrecognised Type"===b)throw Error("Unrecognised Type");return b})};T.iif=function(b,c){try{a.pcCheck(null===c.arguments?[]:c.arguments,3,3);var d=B(b,c.arguments[0]);if(!1===a.isBoolean(d))throw Error("IF Function must have a boolean test condition");return!0===d?B(b,c.arguments[1]):B(b,c.arguments[2])}catch(qa){throw qa;}};T.decode=function(a,b){try{if(2>b.arguments.length)throw Error("Missing Parameters");if(2===b.arguments.length)return B(a,b.arguments[1]);
if(0===(b.arguments.length-1)%2)throw Error("Must have a default value result.");var c=B(a,b.arguments[0]);return O(a,b,1,c)}catch(qa){throw qa;}};T.when=function(b,c){try{if(3>c.arguments.length)throw Error("Missing Parameters");if(0===c.arguments.length%2)throw Error("Must have a default value result.");var d=B(b,c.arguments[0]);if(!1===a.isBoolean(d))throw Error("WHEN needs boolean test conditions");return L(b,c,0,d)}catch(qa){throw qa;}};T.top=function(b,c){return C(b,c,function(b,c,d){a.pcCheck(d,
2,2);if(a.isArray(d[0]))return a.toNumber(d[1])>=d[0].length?d[0].slice(0):d[0].slice(0,a.toNumber(d[1]));if(a.isImmutableArray(d[0]))return a.toNumber(d[1])>=d[0].length()?d[0].slice(0):d[0].slice(0,a.toNumber(d[1]));throw Error("Top cannot accept this parameter type");})};T.first=function(b,c){return C(b,c,function(b,c,d){a.pcCheck(d,1,1);return a.isArray(d[0])?0===d[0].length?null:d[0][0]:a.isImmutableArray(d[0])?0===d[0].length()?null:d[0].get(0):null})};T.sort=function(b,c){return C(b,c,function(b,
c,d){a.pcCheck(d,1,2);b=d[0];a.isImmutableArray(b)&&(b=b.toArray());if(!1===a.isArray(b))throw Error("Illegal Argument");if(1<d.length){if(!1===a.isFunctionParameter(d[1]))throw Error("Illegal Argument");var e=U(d[1]);b=Q(b,function(a,b){return e(a,b)})}else{if(0===b.length)return[];d={};for(c=0;c<b.length;c++){var f=X(b[c]);""!==f&&(d[f]=!0)}if(!0===d.Array||!0===d.Dictionary||!0===d.Feature||!0===d.Point||!0===d.Polygon||!0===d.Polyline||!0===d.Multipoint||!0===d.Extent||!0===d.Function)return b.slice(0);
c=0;var f="",g;for(g in d)c++,f=g;b=1<c||"String"===f?Q(b,function(b,c){if(null===b||void 0===b||b===a.voidOperation)return null===c||void 0===c||c===a.voidOperation?0:1;if(null===c||void 0===c||c===a.voidOperation)return-1;b=a.toString(b);c=a.toString(c);return b<c?-1:b===c?0:1}):"Number"===f?Q(b,function(a,b){return a-b}):"Boolean"===f?Q(b,function(a,b){return a===b?0:b?-1:1}):"Date"===f?Q(b,function(a,b){return b-a}):b.slice(0)}return b})};for(var ba in T)T[ba]={value:new a.NativeFunction(T[ba]),
valueset:!0,node:null};var fa=function(){};fa.prototype=T;fa.prototype.infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null};fa.prototype.pi={value:Math.PI,valueset:!0,node:null};e.functionHelper={fixSpatialReference:a.fixSpatialReference,parseArguments:A,standardFunction:C};e.extend=function(b){for(var c={mode:"sync",compiled:!1,functions:{},signatures:[],standardFunction:C,evaluateIdentifier:ja,arcadeCustomFunctionHandler:U},d=0;d<b.length;d++)b[d].registerFunctions(c);for(var e in c.functions)T[e]=
{value:new a.NativeFunction(c.functions[e]),valueset:!0,node:null},fa.prototype[e]=T[e];for(d=0;d<c.signatures.length;d++)f.addFunctionDeclaration(c.signatures[d],"f")};e.executeScript=function(b,c,d){d||(d=new t(102100));var e=c.vars,f=c.customfunctions,g=new fa;e||(e={});f||(f={});var k=new n({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});k.immutable=!1;g.textformatting={value:k,valueset:!0,node:null};for(var m in f)g[m]={value:new a.NativeFunction(f[m]),
native:!0,valueset:!0,node:null};for(m in e)g[m]=e[m]&&"esri.Graphic"===e[m].declaredClass?{value:h.createFromGraphic(e[m]),valueset:!0,node:null}:{value:e[m],valueset:!0,node:null};b=B({spatialReference:d,globalScope:g,localScope:null,console:c.console?c.console:Y,depthCounter:1,applicationCache:void 0===c.applicationCache?null:c.applicationCache},b.body[0].body);b instanceof a.ReturnResult&&(b=b.value);b instanceof a.ImplicitResult&&(b=b.value);b===a.voidOperation&&(b=null);if(b===a.breakResult)throw Error("Cannot return BREAK");
if(b===a.continueResult)throw Error("Cannot return CONTINUE");if(b instanceof l)throw Error("Cannot return FUNCTION");if(b instanceof a.NativeFunction)throw Error("Cannot return FUNCTION");return b};e.extractFieldLiterals=function(a,b){void 0===b&&(b=!1);return f.findFieldLiterals(a,b)};e.validateScript=function(a,b){return f.validateScript(a,b,"simple")};e.referencesMember=function(a,b){return f.referencesMember(a,b)};e.referencesFunction=function(a,b){return f.referencesFunction(a,b)};e.findFunctionCalls=
function(a){return f.findFunctionCalls(a,!1)}})},"esri/arcade/parser":function(){define(["require","exports","./treeAnalysis","./lib/esprima"],function(b,e,n,h){Object.defineProperty(e,"__esModule",{value:!0});e.parseScript=function(b){b=h.parse("function _() { "+b+"\n}");if(null===b.body||void 0===b.body)throw Error("No formula provided.");if(0===b.body.length)throw Error("No formula provided.");if(0===b.body.length)throw Error("No formula provided.");if("BlockStatement"!==b.body[0].body.type)throw Error("Invalid formula content.");
var e=n.validateLanguage(b);if(""!==e)throw Error(e);return b};e.scriptCheck=function(b,e,k,a){var f=[];try{var d=h.parse("function _() { "+b+"\n}",{tolerant:!0,loc:!0}),c=d.errors;if(0<c.length)for(var l=0;l<c.length;l++)f.push({line:c[l].lineNumber,character:c[l].column,reason:c[l].description});var m=n.checkScript(d,e,k,a);for(e=0;e<m.length;e++)f.push(m[e])}catch(x){try{"Unexpected token }"===x.description?(x.index=("function _() { "+b+"\n}").length-1,f.push({line:x.lineNumber,character:x.column,
reason:"Unexpected end of script"})):f.push({line:x.lineNumber,character:x.column,reason:x.description})}catch(z){}}return f};e.extractFieldLiterals=function(b,e){void 0===e&&(e=!1);return n.findFieldLiterals(b,e)};e.validateScript=function(b,e,h){void 0===h&&(h="full");return n.validateScript(b,e,h)};e.referencesMember=function(b,e){return n.referencesMember(b,e)};e.referencesFunction=function(b,e){return n.referencesFunction(b,e)}})},"esri/arcade/lib/esprima":function(){(function(b,e){"function"===
typeof define&&define.amd?define(["exports"],e):"undefined"!==typeof exports?e(exports):e(b.esprima={})})(this,function(b){function e(a,b){if(!a)throw Error("ASSERT: "+b);}function n(a){return 48<=a&&57>=a}function h(a){return 0<="0123456789abcdefABCDEF".indexOf(a)}function l(a){return 0<="01234567".indexOf(a)}function m(a){return 10===a||13===a||8232===a||8233===a}function k(a){return 36===a||95===a||65<=a&&90>=a||97<=a&&122>=a||92===a||128<=a&&eb.NonAsciiIdentifierStart.test(String.fromCharCode(a))}
function a(a){return 36===a||95===a||65<=a&&90>=a||97<=a&&122>=a||48<=a&&57>=a||92===a||128<=a&&eb.NonAsciiIdentifierPart.test(String.fromCharCode(a))}function f(a){a=a.toLowerCase();switch(a.length){case 2:return"if"===a||"in"===a;case 3:return"var"===a||"for"===a;case 4:return"else"===a;case 5:return"break"===a;case 6:return"return"===a;case 8:return"function"===a.toLowerCase()||"continue"===a;default:return!1}}function d(a,b,c,d,f){e("number"===typeof c,"Comment must have valid position");Z.lastCommentStart>=
c||(Z.lastCommentStart=c,a={type:a,value:b},J.range&&(a.range=[c,d]),J.loc&&(a.loc=f),J.comments.push(a),J.attachComment&&(J.leadingComments.push(a),J.trailingComments.push(a)))}function c(a){var b,c,e;b=E-a;for(c={start:{line:ca,column:E-ia-a}};E<na;)if(e=I.charCodeAt(E),++E,m(e)){J.comments&&(a=I.slice(b+a,E-1),c.end={line:ca,column:E-ia-1},d("Line",a,b,E-1,c));13===e&&10===I.charCodeAt(E)&&++E;++ca;ia=E;return}J.comments&&(a=I.slice(b+a,E),c.end={line:ca,column:E-ia},d("Line",a,b,E,c))}function q(){var a,
b;for(b=0===E;E<na;)if(a=I.charCodeAt(E),32===a||9===a||11===a||12===a||160===a||5760<=a&&0<=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(a))++E;else if(m(a))++E,13===a&&10===I.charCodeAt(E)&&++E,++ca,ia=E,b=!0;else if(47===a)if(a=I.charCodeAt(E+1),47===a)++E,++E,c(2),b=!0;else if(42===a){++E;++E;a:{var e=a=void 0,f=void 0,f=void 0;J.comments&&(a=E-2,e={start:{line:ca,column:E-ia-2}});for(;E<na;)if(f=I.charCodeAt(E),m(f))13===f&&10===I.charCodeAt(E+
1)&&++E,++ca,++E,ia=E,E>=na&&M();else{if(42===f&&47===I.charCodeAt(E+1)){++E;++E;J.comments&&(f=I.slice(a+2,E-2),e.end={line:ca,column:E-ia},d("Block",f,a,E,e));break a}++E}M()}}else break;else if(b&&45===a)if(45===I.charCodeAt(E+1)&&62===I.charCodeAt(E+2))E+=3,c(3);else break;else if(60===a)if("!--"===I.slice(E+1,E+4))++E,++E,++E,++E,c(4);else break;else break}function r(a){var b,c,d=0;b="u"===a?4:2;for(a=0;a<b;++a)if(E<na&&h(I[E]))c=I[E++],d=16*d+"0123456789abcdef".indexOf(c.toLowerCase());else return"";
return String.fromCharCode(d)}function x(){var b,c;b=I.charCodeAt(E++);c=String.fromCharCode(b);92===b&&(117!==I.charCodeAt(E)&&M(),++E,(b=r("u"))&&"\\"!==b&&k(b.charCodeAt(0))||M(),c=b);for(;E<na;){b=I.charCodeAt(E);if(!a(b))break;++E;c+=String.fromCharCode(b);92===b&&(c=c.substr(0,c.length-1),117!==I.charCodeAt(E)&&M(),++E,(b=r("u"))&&"\\"!==b&&a(b.charCodeAt(0))||M(),c+=b)}return c}function z(){var a=E,b=I.charCodeAt(E),c,d=I[E];switch(b){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++E,
J.tokenize&&(40===b?J.openParenToken=J.tokens.length:123===b&&(J.openCurlyToken=J.tokens.length)),{type:R.Punctuator,value:String.fromCharCode(b),lineNumber:ca,lineStart:ia,start:a,end:E};default:if(c=I.charCodeAt(E+1),61===c)switch(b){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return E+=2,{type:R.Punctuator,value:String.fromCharCode(b)+String.fromCharCode(c),lineNumber:ca,lineStart:ia,start:a,end:E};case 33:case 61:return E+=2,61===I.charCodeAt(E)&&++E,{type:R.Punctuator,
value:I.slice(a,E),lineNumber:ca,lineStart:ia,start:a,end:E}}}b=I.substr(E,4);if("\x3e\x3e\x3e\x3d"===b)return E+=4,{type:R.Punctuator,value:b,lineNumber:ca,lineStart:ia,start:a,end:E};b=b.substr(0,3);if("\x3e\x3e\x3e"===b||"\x3c\x3c\x3d"===b||"\x3e\x3e\x3d"===b)return E+=3,{type:R.Punctuator,value:b,lineNumber:ca,lineStart:ia,start:a,end:E};b=b.substr(0,2);if(d===b[1]&&0<="+-\x3c\x3e\x26|".indexOf(d)||"\x3d\x3e"===b)return E+=2,{type:R.Punctuator,value:b,lineNumber:ca,lineStart:ia,start:a,end:E};
if(0<="\x3c\x3e\x3d!+-*%\x26|^/".indexOf(d))return++E,{type:R.Punctuator,value:d,lineNumber:ca,lineStart:ia,start:a,end:E};M()}function v(){var a,b,c;c=I[E];e(n(c.charCodeAt(0))||"."===c,"Numeric literal must start with a decimal digit or a decimal point");b=E;a="";if("."!==c){a=I[E++];c=I[E];if("0"===a){if("x"===c||"X"===c){++E;for(a="";E<na&&h(I[E]);)a+=I[E++];0===a.length&&M();k(I.charCodeAt(E))&&M();return{type:R.NumericLiteral,value:parseInt("0x"+a,16),lineNumber:ca,lineStart:ia,start:b,end:E}}if("b"===
c||"B"===c){++E;for(c="";E<na;){a=I[E];if("0"!==a&&"1"!==a)break;c+=I[E++]}0===c.length&&M();E<na&&(a=I.charCodeAt(E),(k(a)||n(a))&&M());return{type:R.NumericLiteral,value:parseInt(c,2),lineNumber:ca,lineStart:ia,start:b,end:E}}if("o"===c||"O"===c){l(c)?(c=!0,a="0"+I[E++]):(c=!1,++E,a="");for(;E<na&&l(I[E]);)a+=I[E++];c||0!==a.length||M();(k(I.charCodeAt(E))||n(I.charCodeAt(E)))&&M();return{type:R.NumericLiteral,value:parseInt(a,8),octal:c,lineNumber:ca,lineStart:ia,start:b,end:E}}}for(;n(I.charCodeAt(E));)a+=
I[E++];c=I[E]}if("."===c){for(a+=I[E++];n(I.charCodeAt(E));)a+=I[E++];c=I[E]}if("e"===c||"E"===c){a+=I[E++];c=I[E];if("+"===c||"-"===c)a+=I[E++];if(n(I.charCodeAt(E)))for(;n(I.charCodeAt(E));)a+=I[E++];else M()}k(I.charCodeAt(E))&&M();return{type:R.NumericLiteral,value:parseFloat(a),lineNumber:ca,lineStart:ia,start:b,end:E}}function w(){W=null;q();P("Regular Expression language structures not supported")}function p(){q();w()}function y(){var a;a=J.tokens[J.tokens.length-1];if(!a)return p();if("Punctuator"===
a.type){if("]"===a.value)return z();if(")"===a.value)return a=J.tokens[J.openParenToken-1],!a||"Keyword"!==a.type||"if"!==a.value.toLowerCase()&&"while"!==a.value.toLowerCase()&&"for"!==a.value.toLowerCase()&&"with"!==a.value.toLowerCase()?z():p();if("}"===a.value){if(J.tokens[J.openCurlyToken-3]&&"Keyword"===J.tokens[J.openCurlyToken-3].type){if(a=J.tokens[J.openCurlyToken-4],!a)return z()}else if(J.tokens[J.openCurlyToken-4]&&"Keyword"===J.tokens[J.openCurlyToken-4].type){if(a=J.tokens[J.openCurlyToken-
5],!a)return p()}else return z();if(0<=va.indexOf(a.value))return z()}return p()}return"Keyword"===a.type&&"this"!==a.value?p():z()}function g(){var b;q();if(E>=na)return{type:R.EOF,lineNumber:ca,lineStart:ia,start:E,end:E};b=I.charCodeAt(E);if(k(b)){var c;b=E;if(92===I.charCodeAt(E))c=x();else a:{var d;for(c=E++;E<na;){d=I.charCodeAt(E);if(92===d){E=c;c=x();break a}if(a(d))++E;else break}c=I.slice(c,E)}return{type:1===c.length?R.Identifier:f(c)?R.Keyword:"null"===c.toLowerCase()?R.NullLiteral:"true"===
c.toLowerCase()||"false"===c.toLowerCase()?R.BooleanLiteral:R.Identifier,value:c,lineNumber:ca,lineStart:ia,start:b,end:E}}if(40===b||41===b||59===b)return z();if(39===b||34===b){var g="",p,t,u;d=!1;var w,A;w=ca;A=ia;b=I[E];e("'"===b||'"'===b,"String literal must starts with a quote");c=E;for(++E;E<na;)if(p=I[E++],p===b){b="";break}else if("\\"===p)if((p=I[E++])&&m(p.charCodeAt(0)))++ca,"\r"===p&&"\n"===I[E]&&++E,ia=E;else switch(p){case "u":case "x":if("{"===I[E]){++E;t=p=void 0;p=I[E];t=0;for("}"===
p&&M();E<na;){p=I[E++];if(!h(p))break;t=16*t+"0123456789abcdef".indexOf(p.toLowerCase())}(1114111<t||"}"!==p)&&M();p=65535>=t?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320);g+=p}else u=E,(t=r(p))?g+=t:(E=u,g+=p);break;case "n":g+="\n";break;case "r":g+="\r";break;case "t":g+="\t";break;case "b":g+="\b";break;case "f":g+="\f";break;case "v":g+="\x0B";break;default:l(p)?(t="01234567".indexOf(p),0!==t&&(d=!0),E<na&&l(I[E])&&(d=!0,t=8*t+"01234567".indexOf(I[E++]),
0<="0123".indexOf(p)&&E<na&&l(I[E])&&(t=8*t+"01234567".indexOf(I[E++]))),g+=String.fromCharCode(t)):g+=p}else if(m(p.charCodeAt(0)))break;else g+=p;""!==b&&M();return{type:R.StringLiteral,value:g,octal:d,startLineNumber:w,startLineStart:A,lineNumber:ca,lineStart:ia,start:c,end:E}}return 46===b?n(I.charCodeAt(E+1))?v():z():n(b)?v():J.tokenize&&47===b?y():z()}function u(){var a,b,c;q();a={start:{line:ca,column:E-ia}};b=g();a.end={line:ca,column:E-ia};b.type!==R.EOF&&(c=I.slice(b.start,b.end),a={type:Ha[b.type],
value:c,range:[b.start,b.end],loc:a},b.regex&&(a.regex={pattern:b.regex.pattern,flags:b.regex.flags}),J.tokens.push(a));return b}function t(){var a;a=W;E=a.end;ca=a.lineNumber;ia=a.lineStart;W="undefined"!==typeof J.tokens?u():g();E=a.end;ca=a.lineNumber;ia=a.lineStart;return a}function A(){var a,b,c;a=E;b=ca;c=ia;W="undefined"!==typeof J.tokens?u():g();E=a;ca=b;ia=c}function C(){this.line=ca;this.column=E-ia}function B(){this.start=new C;this.end=null}function F(a){this.start=a.type===R.StringLiteral?
{line:a.startLineNumber,column:a.start-a.startLineStart}:{line:a.lineNumber,column:a.start-a.lineStart};this.end=null}function D(){E=W.start;W.type===R.StringLiteral?(ca=W.startLineNumber,ia=W.startLineStart):(ca=W.lineNumber,ia=W.lineStart);J.range&&(this.range=[E,0]);J.loc&&(this.loc=new B)}function H(a){J.range&&(this.range=[a.start,0]);J.loc&&(this.loc=new F(a))}function aa(){var a,b,c,d;a=E;b=ca;c=ia;q();d=ca!==b;E=a;ca=b;ia=c;return d}function ga(a,b,c){var d=Error("Line "+a+": "+c);d.index=
b;d.lineNumber=a;d.column=b-ia+1;d.description=c;return d}function P(a){var b,c;b=Array.prototype.slice.call(arguments,1);c=a.replace(/%(\d)/g,function(a,c){e(c<b.length,"Message reference must be in range");return b[c]});throw ga(ca,E,c);}function K(a){var b,c;b=Array.prototype.slice.call(arguments,1);c=a.replace(/%(\d)/g,function(a,c){e(c<b.length,"Message reference must be in range");return b[c]});c=ga(ca,E,c);if(J.errors)J.errors.push(c);else throw c;}function ja(a,b){var c=ka.UnexpectedToken;
a&&(c=b?b:a.type===R.EOF?ka.UnexpectedEOS:a.type===R.Identifier?ka.UnexpectedIdentifier:a.type===R.NumericLiteral?ka.UnexpectedNumber:a.type===R.StringLiteral?ka.UnexpectedString:ka.UnexpectedToken);c=c.replace("%0",a?a.value:"ILLEGAL");return a&&"number"===typeof a.lineNumber?ga(a.lineNumber,a.start,c):ga(ca,E,c)}function M(a,b){throw ja(a,b);}function X(a,b){a=ja(a,b);if(J.errors)J.errors.push(a);else throw a;}function O(a){var b=t();b.type===R.Punctuator&&b.value===a||M(b)}function L(){var a;J.errors?
(a=W,a.type===R.Punctuator&&","===a.value?t():a.type===R.Punctuator&&";"===a.value?(t(),X(a)):X(a,ka.UnexpectedToken)):O(",")}function Q(a){var b=t();b.type===R.Keyword&&b.value.toLowerCase()===a.toLowerCase()||M(b)}function G(a){return W.type===R.Punctuator&&W.value===a}function V(a){return W.type===R.Keyword&&W.value.toLowerCase()===a.toLowerCase()}function U(){var a;59===I.charCodeAt(E)||G(";")?t():(a=ca,q(),ca===a&&(W.type===R.EOF||G("}")||M(W)))}function Y(a){return a.type===ea.Identifier||a.type===
ea.MemberExpression}function N(a,b){var c,d=new D;b=ma;c=La();ma=b;return d.finishFunctionExpression(null,a,[],c)}function T(){var a,b;a=ma;ma=!0;b=Fa();b=N(b.params);ma=a;return b}function ba(){var a,b=new D;a=t();return a.type===R.StringLiteral||a.type===R.NumericLiteral?(ma&&a.octal&&X(a,ka.StrictOctalLiteral),b.finishLiteral(a)):b.finishIdentifier(a.value)}function fa(){var a,b,c,d=new D;a=W;if(a.type===R.Identifier)return b=ba(),"get"!==a.value||G(":")||G("(")?"set"!==a.value||G(":")||G("(")?
G(":")?(t(),a=ra(),d.finishProperty("init",b,a,!1,!1)):G("(")?(a=T(),d.finishProperty("init",b,a,!0,!1)):d.finishProperty("init",b,b,!1,!0):(b=ba(),O("("),a=W,a.type!==R.Identifier?(O(")"),X(a),a=N([])):(c=[Aa()],O(")"),a=N(c,a)),d.finishProperty("set",b,a,!1,!1)):(b=ba(),O("("),O(")"),a=N([]),d.finishProperty("get",b,a,!1,!1));if(a.type===R.EOF||a.type===R.Punctuator)M(a);else{b=ba();if(G(":"))return t(),a=ra(),d.finishProperty("init",b,a,!1,!1);if(G("("))return a=T(),d.finishProperty("init",b,a,
!0,!1);M(t())}}function la(a){var b=[],c,d,e={},f=String,g=new D;for(!0!==a&&O("{");!G("}");)a=fa(),c=a.key.type===ea.Identifier?a.key.name:f(a.key.value),d="init"===a.kind?Na.Data:"get"===a.kind?Na.Get:Na.Set,c="$"+c,Object.prototype.hasOwnProperty.call(e,c)?(e[c]===Na.Data?ma&&d===Na.Data?K(ka.StrictDuplicateProperty):d!==Na.Data&&K(ka.AccessorDataProperty):d===Na.Data?K(ka.AccessorDataProperty):e[c]&d&&K(ka.AccessorGetSet),e[c]|=d):e[c]=d,b.push(a),G("}")||L();O("}");return g.finishObjectExpression(b)}
function pa(){var a,b,c,d;if(G("("))return O("("),G(")")?(t(),b=Qa.ArrowParameterPlaceHolder):(++Z.parenthesisCount,b=da(),O(")")),b;if(G("[")){b=[];var e=new D;for(O("[");!G("]");)G(",")?(t(),b.push(null)):(b.push(ra()),G("]")||O(","));t();return e.finishArrayExpression(b)}if(G("{"))return la();a=W.type;d=new D;if(a===R.Identifier)c=d.finishIdentifier(t().value);else if(a===R.StringLiteral||a===R.NumericLiteral)ma&&W.octal&&X(W,ka.StrictOctalLiteral),c=d.finishLiteral(t());else if(a===R.Keyword){if(V("function")){d=
null;var f;c=[];var g=[],h,k=new D;Q("function");G("(")||(d=Aa());f=Fa(b);c=f.params;g=f.defaults;a=f.stricted;b=f.firstRestricted;f.message&&(e=f.message);h=ma;f=La();ma&&b&&M(b,e);ma&&a&&X(a,e);ma=h;return k.finishFunctionExpression(d,c,g,f)}V("this")?(t(),c=d.finishThisExpression()):M(t())}else a===R.BooleanLiteral?(b=t(),b.value="true"===b.value.toLowerCase(),c=d.finishLiteral(b)):a===R.NullLiteral?(b=t(),b.value=null,c=d.finishLiteral(b)):G("/")||G("/\x3d")?(c="undefined"!==typeof J.tokens?d.finishLiteral(p()):
d.finishLiteral(w()),A()):M(t());return c}function ha(){var a=[];O("(");if(!G(")"))for(;E<na;){a.push(ra());if(G(")"))break;L()}O(")");return a}function qa(){O(".");var a,b=new D;a=t();a.type===R.Identifier||a.type===R.Keyword||a.type===R.BooleanLiteral||a.type===R.NullLiteral||M(a);return b.finishIdentifier(a.value)}function Ca(){var a;O("[");a=da();O("]");return a}function sa(){var a,b,c=new D;Q("new");var d;e(Z.allowIn,"callee of new expression always allow in keyword.");d=W;for(a=V("new")?sa():
pa();;)if(G("["))b=Ca(),a=(new H(d)).finishMemberExpression("[",a,b);else if(G("."))b=qa(),a=(new H(d)).finishMemberExpression(".",a,b);else break;b=G("(")?ha():[];return c.finishNewExpression(a,b)}function Ba(){var a,b,c=W,d,e=Z.allowIn;b=W;Z.allowIn=!0;for(a=V("new")?sa():pa();;)if(G("."))d=qa(),a=(new H(b)).finishMemberExpression(".",a,d);else if(G("("))d=ha(),a=(new H(b)).finishCallExpression(a,d);else if(G("["))d=Ca(),a=(new H(b)).finishMemberExpression("[",a,d);else break;Z.allowIn=e;W.type!==
R.Punctuator||!G("++")&&!G("--")||aa()||(Y(a)||K(ka.InvalidLHSInAssignment),b=t(),a=(new H(c)).finishPostfixExpression(b.value,a));return a}function wa(){var a,b,c;W.type!==R.Punctuator&&W.type!==R.Keyword?b=Ba():G("++")||G("--")?(c=W,a=t(),b=wa(),Y(b)||K(ka.InvalidLHSInAssignment),b=(new H(c)).finishUnaryExpression(a.value,b)):G("+")||G("-")||G("~")||G("!")?(c=W,a=t(),b=wa(),b=(new H(c)).finishUnaryExpression(a.value,b)):V("delete")||V("void")||V("typeof")?(c=W,a=t(),b=wa(),b=(new H(c)).finishUnaryExpression(a.value,
b),ma&&"delete"===b.operator&&b.argument.type===ea.Identifier&&K(ka.StrictDelete)):b=Ba();return b}function Da(a,b){var c=0;if(a.type!==R.Punctuator&&a.type!==R.Keyword)return 0;switch(a.value){case "||":c=1;break;case "\x26\x26":c=2;break;case "|":c=3;break;case "^":c=4;break;case "\x26":c=5;break;case "\x3d\x3d":case "!\x3d":case "\x3d\x3d\x3d":case "!\x3d\x3d":c=6;break;case "\x3c":case "\x3e":case "\x3c\x3d":case "\x3e\x3d":case "instanceof":c=7;break;case "in":c=b?7:0;break;case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":c=
8;break;case "+":case "-":c=9;break;case "*":case "/":case "%":c=11}return c}function Ga(){var a,b,c,d,e,f;a=W;b=wa();if(b===Qa.ArrowParameterPlaceHolder)return b;c=W;d=Da(c,Z.allowIn);if(0===d)return b;c.prec=d;t();a=[a,W];f=wa();for(e=[b,c,f];0<(d=Da(W,Z.allowIn));){for(;2<e.length&&d<=e[e.length-2].prec;)f=e.pop(),c=e.pop().value,b=e.pop(),a.pop(),b=(new H(a[a.length-1])).finishBinaryExpression(c,b,f),e.push(b);c=t();c.prec=d;e.push(c);a.push(W);b=wa();e.push(b)}d=e.length-1;b=e[d];for(a.pop();1<
d;)b=(new H(a.pop())).finishBinaryExpression(e[d-1].value,e[d-2],b),d-=2;return b}function Sa(a){var b,c,d,e,f,g,h;e=[];f=[];g=0;h={paramSet:{}};b=0;for(c=a.length;b<c;b+=1)if(d=a[b],d.type===ea.Identifier)e.push(d),f.push(null),Ia(h,d,d.name);else if(d.type===ea.AssignmentExpression)e.push(d.left),f.push(d.right),++g,Ia(h,d.left,d.left.name);else return null;h.message===ka.StrictParamDupe&&(a=ma?h.stricted:h.firstRestricted,M(a,h.message));0===g&&(f=[]);return{params:e,defaults:f,rest:null,stricted:h.stricted,
firstRestricted:h.firstRestricted,message:h.message}}function ra(){var a,b,c,d,e;a=Z.parenthesisCount;b=e=W;var f,g;g=W;c=Ga();c!==Qa.ArrowParameterPlaceHolder&&G("?")&&(t(),f=Z.allowIn,Z.allowIn=!0,b=ra(),Z.allowIn=f,O(":"),f=ra(),c=(new H(g)).finishConditionalExpression(c,b,f));if(c===Qa.ArrowParameterPlaceHolder||G("\x3d\x3e"))if(Z.parenthesisCount===a||Z.parenthesisCount===a+1)if(c.type===ea.Identifier?d=Sa([c]):c.type===ea.AssignmentExpression?d=Sa([c]):c.type===ea.SequenceExpression?d=Sa(c.expressions):
c===Qa.ArrowParameterPlaceHolder&&(d=Sa([])),d)return a=d,e=new H(e),O("\x3d\x3e"),d=ma,c=G("{")?La():ra(),ma&&a.firstRestricted&&M(a.firstRestricted,a.message),ma&&a.stricted&&X(a.stricted,a.message),ma=d,e.finishArrowFunctionExpression(a.params,a.defaults,c,c.type!==ea.BlockStatement);W.type!==R.Punctuator?a=!1:(a=W.value,a="\x3d"===a||"*\x3d"===a||"/\x3d"===a||"%\x3d"===a||"+\x3d"===a||"-\x3d"===a||"\x3c\x3c\x3d"===a||"\x3e\x3e\x3d"===a||"\x3e\x3e\x3e\x3d"===a||"\x26\x3d"===a||"^\x3d"===a||"|\x3d"===
a);a&&(Y(c)||K(ka.InvalidLHSInAssignment),b=t(),a=ra(),c=(new H(e)).finishAssignmentExpression(b.value,c,a));return c}function da(){var a,b=W;a=ra();if(G(",")){for(a=[a];E<na&&G(",");)t(),a.push(ra());a=(new H(b)).finishSequenceExpression(a)}return a}function Aa(){var a,b=new D;a=t();a.type!==R.Identifier&&M(a);return b.finishIdentifier(a.value)}function Ma(a){var b=null,c,d=new D;c=Aa();"const"===a?(O("\x3d"),b=ra()):G("\x3d")&&(t(),b=ra());return d.finishVariableDeclarator(c,b)}function Wa(a){var b=
[];do{b.push(Ma(a));if(!G(","))break;t()}while(E<na);return b}function Ka(a){var b=W.type,c,d;b===R.EOF&&M(W);if(b===R.Punctuator&&"{"===W.value){if(a){O("{");var e=W;a=E;c=ca;d=ia;t();b=G(":");W=e;E=a;ca=c;ia=d;if((W.type===R.Identifier||W.type===R.StringLiteral)&&b)return la(!0);a=new D;for(c=[];E<na&&!G("}");){d=Ja();if("undefined"===typeof d)break;c.push(d)}O("}");return a.finishBlockStatement(c)}return la()}a=new D;if(b===R.Punctuator)switch(W.value){case ";":return a=new D,O(";"),a.finishEmptyStatement();
case "(":return c=da(),U(),a.finishExpressionStatement(c)}else if(b===R.Keyword)switch(W.value.toLowerCase()){case "break":return c=null,Q("break"),59===I.charCodeAt(E)?(t(),Z.inIteration||Z.inSwitch||P(ka.IllegalBreak),a=a.finishBreakStatement(null)):aa()?(Z.inIteration||Z.inSwitch||P(ka.IllegalBreak),a=a.finishBreakStatement(null)):(W.type===R.Identifier&&(c=Aa(),d="$"+c.name,Object.prototype.hasOwnProperty.call(Z.labelSet,d)||P(ka.UnknownLabel,c.name)),U(),null!==c||Z.inIteration||Z.inSwitch||
P(ka.IllegalBreak),a=a.finishBreakStatement(c)),a;case "continue":return c=null,Q("continue"),59===I.charCodeAt(E)?(t(),Z.inIteration||P(ka.IllegalContinue),a=a.finishContinueStatement(null)):aa()?(Z.inIteration||P(ka.IllegalContinue),a=a.finishContinueStatement(null)):(W.type===R.Identifier&&(c=Aa(),d="$"+c.name,Object.prototype.hasOwnProperty.call(Z.labelSet,d)||P(ka.UnknownLabel,c.name)),U(),null!==c||Z.inIteration||P(ka.IllegalContinue),a=a.finishContinueStatement(c)),a;case "for":var f,g,h;g=
Z.allowIn;f=b=e=null;Q("for");O("(");if(G(";"))t();else{if(V("var")){Z.allowIn=!1;var l=new D;f=t();h=Wa();f=l.finishVariableDeclaration(h,f.value);Z.allowIn=g;1===f.declarations.length&&V("in")&&(t(),c=f,d=da(),f=null)}else Z.allowIn=!1,f=da(),Z.allowIn=g,V("in")&&(Y(f)||K(ka.InvalidLHSInForIn),t(),c=f,d=da(),f=null);"undefined"===typeof c&&O(";")}"undefined"===typeof c&&(G(";")||(b=da()),O(";"),G(")")||(e=da()));O(")");h=Z.inIteration;Z.inIteration=!0;g=Ka(!0);Z.inIteration=h;return"undefined"===
typeof c?a.finishForStatement(f,b,e,g):a.finishForInStatement(c,d,g);case "function":return Za(a);case "if":return Q("if"),O("("),c=da(),O(")"),d=Ka(!0),V("else")?(t(),b=Ka(!0)):b=null,a.finishIfStatement(c,d,b);case "return":return c=null,Q("return"),Z.inFunctionBody||K(ka.IllegalReturn),32===I.charCodeAt(E)&&k(I.charCodeAt(E+1))?(c=da(),U(),a=a.finishReturnStatement(c)):aa()?a=a.finishReturnStatement(null):(G(";")||G("}")||W.type===R.EOF||(c=da()),U(),a=a.finishReturnStatement(c)),a;case "var":return Q("var"),
c=Wa(),U(),a.finishVariableDeclaration(c,"var")}c=da();if(c.type===ea.Identifier&&G(":"))return t(),b="$"+c.name,Object.prototype.hasOwnProperty.call(Z.labelSet,b)&&P(ka.Redeclaration,"Label",c.name),Z.labelSet[b]=!0,d=Ka(!1),delete Z.labelSet[b],a.finishLabeledStatement(c,d);U();return a.finishExpressionStatement(c)}function La(){var a,b=[],c,d,e,f,g,h=new D;for(O("{");E<na&&W.type===R.StringLiteral;){c=W;a=Ja();b.push(a);if(a.expression.type!==ea.Literal)break;a=I.slice(c.start+1,c.end-1);"use strict"===
a?(ma=!0,d&&X(d,ka.StrictOctalLiteral)):!d&&c.octal&&(d=c)}c=Z.labelSet;d=Z.inIteration;e=Z.inSwitch;f=Z.inFunctionBody;g=Z.parenthesizedCount;Z.labelSet={};Z.inIteration=!1;Z.inSwitch=!1;Z.inFunctionBody=!0;for(Z.parenthesizedCount=0;E<na&&!G("}");){a=Ja();if("undefined"===typeof a)break;b.push(a)}O("}");Z.labelSet=c;Z.inIteration=d;Z.inSwitch=e;Z.inFunctionBody=f;Z.parenthesizedCount=g;return h.finishBlockStatement(b)}function Ia(a,b,c){c="$"+c;ma?Object.prototype.hasOwnProperty.call(a.paramSet,
c)&&(a.stricted=b,a.message=ka.StrictParamDupe):!a.firstRestricted&&Object.prototype.hasOwnProperty.call(a.paramSet,c)&&(a.firstRestricted=b,a.message=ka.StrictParamDupe);a.paramSet[c]=!0}function Fa(a){a={params:[],defaultCount:0,defaults:[],firstRestricted:a};O("(");if(!G(")"))for(a.paramSet={};E<na;){var b=a,c=void 0,d=void 0,e=void 0,c=W,d=Aa();Ia(b,c,c.value);G("\x3d")&&(t(),e=ra(),++b.defaultCount);b.params.push(d);b.defaults.push(e);if(G(")"))break;O(",")}O(")");0===a.defaultCount&&(a.defaults=
[]);return{params:a.params,defaults:a.defaults,stricted:a.stricted,firstRestricted:a.firstRestricted,message:a.message}}function Za(){var a,b=[],c=[],d,e,f,g,h,k=new D;Q("function");a=Aa();d=Fa(f);b=d.params;c=d.defaults;e=d.stricted;f=d.firstRestricted;d.message&&(g=d.message);h=ma;d=La();ma&&f&&M(f,g);ma&&e&&X(e,g);ma=h;return k.finishFunctionDeclaration(a,b,c,d)}function Ja(){if(W.type===R.Keyword)return"function"===W.value.toLowerCase()?Za():Ka(!1);if(W.type!==R.EOF)return Ka(!1)}function Ra(){var a,
b,c,d=[];for(a=0;a<J.tokens.length;++a)b=J.tokens[a],c={type:b.type,value:b.value},b.regex&&(c.regex={pattern:b.regex.pattern,flags:b.regex.flags}),J.range&&(c.range=b.range),J.loc&&(c.loc=b.loc),d.push(c);J.tokens=d}var R,Ha,va,ea,Qa,Na,ka,eb,I,ma,E,ca,ia,na,W,Z,J;R={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9};Ha={};Ha[R.BooleanLiteral]="Boolean";Ha[R.EOF]="\x3cend\x3e";Ha[R.Identifier]="Identifier";Ha[R.Keyword]=
"Keyword";Ha[R.NullLiteral]="Null";Ha[R.NumericLiteral]="Numeric";Ha[R.Punctuator]="Punctuator";Ha[R.StringLiteral]="String";Ha[R.RegularExpression]="RegularExpression";va="( { [ in typeof instanceof new return case delete throw void \x3d +\x3d -\x3d *\x3d /\x3d %\x3d \x3c\x3c\x3d \x3e\x3e\x3d \x3e\x3e\x3e\x3d \x26\x3d |\x3d ^\x3d , + - * / % ++ -- \x3c\x3c \x3e\x3e \x3e\x3e\x3e \x26 | ^ ! ~ \x26\x26 || ? : \x3d\x3d\x3d \x3d\x3d \x3e\x3d \x3c\x3d \x3c \x3e !\x3d !\x3d\x3d".split(" ");ea={AssignmentExpression:"AssignmentExpression",
ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",
Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator"};Qa={ArrowParameterPlaceHolder:{type:"ArrowParameterPlaceHolder"}};Na={Data:1,Get:2,Set:4};ka={UnexpectedToken:"Unexpected token %0",
UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",
NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",
StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",
StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"};eb={NonAsciiIdentifierStart:/[\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0-\u08b2\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab5f\uab64\uab65\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]/,
NonAsciiIdentifierPart:/[\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0300-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u0483-\u0487\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u05d0-\u05ea\u05f0-\u05f2\u0610-\u061a\u0620-\u0669\u066e-\u06d3\u06d5-\u06dc\u06df-\u06e8\u06ea-\u06fc\u06ff\u0710-\u074a\u074d-\u07b1\u07c0-\u07f5\u07fa\u0800-\u082d\u0840-\u085b\u08a0-\u08b2\u08e4-\u0963\u0966-\u096f\u0971-\u0983\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bc-\u09c4\u09c7\u09c8\u09cb-\u09ce\u09d7\u09dc\u09dd\u09df-\u09e3\u09e6-\u09f1\u0a01-\u0a03\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a59-\u0a5c\u0a5e\u0a66-\u0a75\u0a81-\u0a83\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abc-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ad0\u0ae0-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3c-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5c\u0b5d\u0b5f-\u0b63\u0b66-\u0b6f\u0b71\u0b82\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd0\u0bd7\u0be6-\u0bef\u0c00-\u0c03\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c58\u0c59\u0c60-\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbc-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0cde\u0ce0-\u0ce3\u0ce6-\u0cef\u0cf1\u0cf2\u0d01-\u0d03\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d-\u0d44\u0d46-\u0d48\u0d4a-\u0d4e\u0d57\u0d60-\u0d63\u0d66-\u0d6f\u0d7a-\u0d7f\u0d82\u0d83\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e01-\u0e3a\u0e40-\u0e4e\u0e50-\u0e59\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb9\u0ebb-\u0ebd\u0ec0-\u0ec4\u0ec6\u0ec8-\u0ecd\u0ed0-\u0ed9\u0edc-\u0edf\u0f00\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e-\u0f47\u0f49-\u0f6c\u0f71-\u0f84\u0f86-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1049\u1050-\u109d\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u135d-\u135f\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176c\u176e-\u1770\u1772\u1773\u1780-\u17d3\u17d7\u17dc\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1820-\u1877\u1880-\u18aa\u18b0-\u18f5\u1900-\u191e\u1920-\u192b\u1930-\u193b\u1946-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u19d0-\u19d9\u1a00-\u1a1b\u1a20-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1aa7\u1ab0-\u1abd\u1b00-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1bf3\u1c00-\u1c37\u1c40-\u1c49\u1c4d-\u1c7d\u1cd0-\u1cd2\u1cd4-\u1cf6\u1cf8\u1cf9\u1d00-\u1df5\u1dfc-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u200c\u200d\u203f\u2040\u2054\u2071\u207f\u2090-\u209c\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d7f-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2de0-\u2dff\u2e2f\u3005-\u3007\u3021-\u302f\u3031-\u3035\u3038-\u303c\u3041-\u3096\u3099\u309a\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua62b\ua640-\ua66f\ua674-\ua67d\ua67f-\ua69d\ua69f-\ua6f1\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua827\ua840-\ua873\ua880-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f7\ua8fb\ua900-\ua92d\ua930-\ua953\ua960-\ua97c\ua980-\ua9c0\ua9cf-\ua9d9\ua9e0-\ua9fe\uaa00-\uaa36\uaa40-\uaa4d\uaa50-\uaa59\uaa60-\uaa76\uaa7a-\uaac2\uaadb-\uaadd\uaae0-\uaaef\uaaf2-\uaaf6\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab5f\uab64\uab65\uabc0-\uabea\uabec\uabed\uabf0-\uabf9\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe00-\ufe0f\ufe20-\ufe2d\ufe33\ufe34\ufe4d-\ufe4f\ufe70-\ufe74\ufe76-\ufefc\uff10-\uff19\uff21-\uff3a\uff3f\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]/};
H.prototype=D.prototype={processComment:function(){var a,b,c,d=J.bottomRightStack,e,f,g=d[d.length-1];if(!(this.type===ea.Program&&0<this.body.length)){if(0<J.trailingComments.length){c=[];for(e=J.trailingComments.length-1;0<=e;--e)f=J.trailingComments[e],f.range[0]>=this.range[1]&&(c.unshift(f),J.trailingComments.splice(e,1));J.trailingComments=[]}else g&&g.trailingComments&&g.trailingComments[0].range[0]>=this.range[1]&&(c=g.trailingComments,delete g.trailingComments);if(g)for(;g&&g.range[0]>=this.range[0];)a=
g,g=d.pop();if(a)a.leadingComments&&a.leadingComments[a.leadingComments.length-1].range[1]<=this.range[0]&&(this.leadingComments=a.leadingComments,a.leadingComments=void 0);else if(0<J.leadingComments.length)for(b=[],e=J.leadingComments.length-1;0<=e;--e)f=J.leadingComments[e],f.range[1]<=this.range[0]&&(b.unshift(f),J.leadingComments.splice(e,1));b&&0<b.length&&(this.leadingComments=b);c&&0<c.length&&(this.trailingComments=c);d.push(this)}},finish:function(){J.range&&(this.range[1]=E);J.loc&&(this.loc.end=
new C,J.source&&(this.loc.source=J.source));J.attachComment&&this.processComment()},finishArrayExpression:function(a){this.type=ea.ArrayExpression;this.elements=a;this.finish();return this},finishAssignmentExpression:function(a,b,c){this.type=ea.AssignmentExpression;this.operator=a;this.left=b;this.right=c;this.finish();return this},finishBinaryExpression:function(a,b,c){this.type="||"===a||"\x26\x26"===a?ea.LogicalExpression:ea.BinaryExpression;this.operator=a;this.left=b;this.right=c;this.finish();
return this},finishBlockStatement:function(a){this.type=ea.BlockStatement;this.body=a;this.finish();return this},finishBreakStatement:function(a){this.type=ea.BreakStatement;this.label=a;this.finish();return this},finishCallExpression:function(a,b){this.type=ea.CallExpression;this.callee=a;this.arguments=b;this.finish();return this},finishConditionalExpression:function(a,b,c){this.type=ea.ConditionalExpression;this.test=a;this.consequent=b;this.alternate=c;this.finish();return this},finishContinueStatement:function(a){this.type=
ea.ContinueStatement;this.label=a;this.finish();return this},finishEmptyStatement:function(){this.type=ea.EmptyStatement;this.finish();return this},finishExpressionStatement:function(a){this.type=ea.ExpressionStatement;this.expression=a;this.finish();return this},finishForStatement:function(a,b,c,d){this.type=ea.ForStatement;this.init=a;this.test=b;this.update=c;this.body=d;this.finish();return this},finishForInStatement:function(a,b,c){this.type=ea.ForInStatement;this.left=a;this.right=b;this.body=
c;this.each=!1;this.finish();return this},finishFunctionDeclaration:function(a,b,c,d){this.type=ea.FunctionDeclaration;this.id=a;this.params=b;this.defaults=c;this.body=d;this.rest=null;this.expression=this.generator=!1;this.finish();return this},finishFunctionExpression:function(a,b,c,d){this.type=ea.FunctionExpression;this.id=a;this.params=b;this.defaults=c;this.body=d;this.rest=null;this.expression=this.generator=!1;this.finish();return this},finishIdentifier:function(a){this.type=ea.Identifier;
this.name=a;this.finish();return this},finishIfStatement:function(a,b,c){this.type=ea.IfStatement;this.test=a;this.consequent=b;this.alternate=c;this.finish();return this},finishLiteral:function(a){this.type=ea.Literal;this.value=a.value;this.raw=I.slice(a.start,a.end);a.regex&&(this.regex=a.regex);this.finish();return this},finishMemberExpression:function(a,b,c){this.type=ea.MemberExpression;this.computed="["===a;this.object=b;this.property=c;this.finish();return this},finishObjectExpression:function(a){this.type=
ea.ObjectExpression;this.properties=a;this.finish();return this},finishPostfixExpression:function(a,b){this.type=ea.UpdateExpression;this.operator=a;this.argument=b;this.prefix=!1;this.finish();return this},finishProgram:function(a){this.type=ea.Program;this.body=a;this.finish();return this},finishProperty:function(a,b,c,d,e){this.type=ea.Property;this.key=b;this.value=c;this.kind=a;this.method=d;this.shorthand=e;this.finish();return this},finishReturnStatement:function(a){this.type=ea.ReturnStatement;
this.argument=a;this.finish();return this},finishUnaryExpression:function(a,b){this.type="++"===a||"--"===a?ea.UpdateExpression:ea.UnaryExpression;this.operator=a;this.argument=b;this.prefix=!0;this.finish();return this},finishVariableDeclaration:function(a,b){this.type=ea.VariableDeclaration;this.declarations=a;this.kind=b;this.finish();return this},finishVariableDeclarator:function(a,b){this.type=ea.VariableDeclarator;this.id=a;this.init=b;this.finish();return this}};b.version="2.0.0-dev";b.tokenize=
function(a,b){var c,d;c=String;"string"===typeof a||a instanceof String||(a=c(a));I=a;E=0;ca=0<I.length?1:0;ia=0;na=I.length;W=null;Z={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1};J={};b=b||{};b.tokens=!0;J.tokens=[];J.tokenize=!0;J.openParenToken=-1;J.openCurlyToken=-1;J.range="boolean"===typeof b.range&&b.range;J.loc="boolean"===typeof b.loc&&b.loc;"boolean"===typeof b.comment&&b.comment&&(J.comments=[]);"boolean"===typeof b.tolerant&&b.tolerant&&(J.errors=
[]);try{A();if(W.type===R.EOF)return J.tokens;for(t();W.type!==R.EOF;)try{t()}catch(Ta){if(J.errors){J.errors.push(Ta);break}else throw Ta;}Ra();d=J.tokens;"undefined"!==typeof J.comments&&(d.comments=J.comments);"undefined"!==typeof J.errors&&(d.errors=J.errors)}catch(Ta){throw Ta;}finally{J={}}return d};b.parse=function(a,b){var c,d;d=String;"string"===typeof a||a instanceof String||(a=d(a));I=a;E=0;ca=0<I.length?1:0;ia=0;na=I.length;W=null;Z={allowIn:!0,labelSet:{},parenthesisCount:0,inFunctionBody:!1,
inIteration:!1,inSwitch:!1,lastCommentStart:-1};J={};"undefined"!==typeof b&&(J.range="boolean"===typeof b.range&&b.range,J.loc="boolean"===typeof b.loc&&b.loc,J.attachComment="boolean"===typeof b.attachComment&&b.attachComment,J.loc&&null!==b.source&&void 0!==b.source&&(J.source=d(b.source)),"boolean"===typeof b.tokens&&b.tokens&&(J.tokens=[]),"boolean"===typeof b.comment&&b.comment&&(J.comments=[]),"boolean"===typeof b.tolerant&&b.tolerant&&(J.errors=[]),J.attachComment&&(J.range=!0,J.comments=
[],J.bottomRightStack=[],J.trailingComments=[],J.leadingComments=[]));try{var e;q();A();e=new D;ma=!1;var f;a=[];for(var g,h,k;E<na;){g=W;if(g.type!==R.StringLiteral)break;f=Ja();a.push(f);if(f.expression.type!==ea.Literal)break;h=I.slice(g.start+1,g.end-1);"use strict"===h?(ma=!0,k&&X(k,ka.StrictOctalLiteral)):!k&&g.octal&&(k=g)}for(;E<na;){f=Ja();if("undefined"===typeof f)break;a.push(f)}c=e.finishProgram(a);"undefined"!==typeof J.comments&&(c.comments=J.comments);"undefined"!==typeof J.tokens&&
(Ra(),c.tokens=J.tokens);"undefined"!==typeof J.errors&&(c.errors=J.errors)}catch(jb){throw jb;}finally{J={}}return c};b.Syntax=function(){var a,b={};"function"===typeof Object.create&&(b=Object.create(null));for(a in ea)ea.hasOwnProperty(a)&&(b[a]=ea[a]);"function"===typeof Object.freeze&&Object.freeze(b);return b}()})},"esri/support/actions/ActionBase":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Identifiable ../../core/accessorSupport/decorators".split(" "),
function(b,e,n,h,l,m,k){return function(a){function b(b){b=a.call(this)||this;b.active=!1;b.className=null;b.disabled=!1;b.id=null;b.indicator=!1;b.title=null;b.type=null;b.visible=!0;return b}n(b,a);d=b;b.prototype.clone=function(){return new d({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})};var d;h([k.property()],b.prototype,"active",void 0);h([k.property()],b.prototype,"className",void 0);h([k.property()],
b.prototype,"disabled",void 0);h([k.property()],b.prototype,"id",void 0);h([k.property()],b.prototype,"title",void 0);h([k.property()],b.prototype,"type",void 0);h([k.property()],b.prototype,"visible",void 0);return b=d=h([k.subclass("esri.support.actions.ActionBase")],b)}(k.declared(l,m))})},"esri/support/actions/ActionButton":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./ActionBase".split(" "),
function(b,e,n,h,l,m){return function(b){function a(a){a=b.call(this)||this;a.image=null;a.type="button";return a}n(a,b);e=a;a.prototype.clone=function(){return new e({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})};var e;h([l.property()],a.prototype,"image",void 0);return a=e=h([l.subclass("esri.support.Action.ActionButton")],a)}(l.declared(m))})},"esri/support/actions/ActionToggle":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./ActionBase".split(" "),
function(b,e,n,h,l,m){return function(b){function a(a){a=b.call(this)||this;a.image=null;a.type="toggle";a.value=!1;return a}n(a,b);e=a;a.prototype.clone=function(){return new e({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})};var e;h([l.property()],a.prototype,"image",void 0);h([l.property()],a.prototype,"value",void 0);return a=e=h([l.subclass("esri.support.Action.ActionToggle")],
a)}(l.declared(m))})},"esri/symbols/support/jsonUtils":function(){define("require exports ../../core/Error ../../core/Warning ../LabelSymbol3D ../LineSymbol3D ../MeshSymbol3D ../PictureFillSymbol ../PictureMarkerSymbol ../PointSymbol3D ../PolygonSymbol3D ../SimpleFillSymbol ../SimpleLineSymbol ../SimpleMarkerSymbol ../Symbol3D ../TextSymbol ../WebStyleSymbol ../callouts/LineCallout3D ./symbolConversion".split(" "),function(b,e,n,h,l,m,k,a,f,d,c,q,r,x,z,v,w,p,y){function g(a,b,c){b=a?t[a.type]||null:
null;if(b)return b=new b,b.read(a,c),b;c&&c.messages&&a&&c.messages.push(new h("symbol:unsupported","Symbols of type '"+(a.type||"unknown")+"' are not supported",{definition:a,context:c}));return null}function u(a,b,c){if(!a)return null;if(!c||"web-scene"!==c.origin||a.isInstanceOf(z)||a.isInstanceOf(w))return a.write(b,c);var d=y.to3D(a);if(d.symbol)return d.symbol.write(b,c);c.messages&&c.messages.push(new n("symbol:unsupported","Symbols of type '"+a.declaredClass+"' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView",
{symbol:a,context:c,error:d.error}));return null}Object.defineProperty(e,"__esModule",{value:!0});var t={esriSMS:x,esriPMS:f,esriTS:v,esriSLS:r,esriSFS:q,esriPFS:a,PointSymbol3D:d,LineSymbol3D:m,PolygonSymbol3D:c,MeshSymbol3D:k,LabelSymbol3D:l,styleSymbolReference:w};e.read=g;e.writeTarget=function(a,b,c,d){(a=u(a,{},d))&&(b[c]=a)};e.write=u;e.fromJSON=function(a,b){return g(a,null,b)};e.readCallout3D=function(a,b){if(!a||!a.type)return null;var c=null;switch(a.type){case "line":c=new p}c&&c.read(a,
b);return c}})},"esri/symbols/LabelSymbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Collection ../core/lang ../core/accessorSupport/decorators ./Symbol3D ./TextSymbol3DLayer ./callouts/calloutUtils ./support/Symbol3DVerticalOffset".split(" "),function(b,e,n,h,l,m,k,a,f,d,c){var q=l.ofType({base:null,key:"type",typeMap:{text:f}});return function(a){function b(b){b=a.call(this)||this;b.verticalOffset=null;b.callout=null;b.styleOrigin=
null;b.symbolLayers=new q;b.type="label-3d";return b}n(b,a);e=b;b.prototype.supportsCallout=function(){return!0};b.prototype.hasVisibleCallout=function(){return d.hasVisibleCallout(this)};b.prototype.hasVisibleVerticalOffset=function(){return d.hasVisibleVerticalOffset(this)};b.prototype.clone=function(){return new e({styleOrigin:m.clone(this.styleOrigin),symbolLayers:m.clone(this.symbolLayers),thumbnail:m.clone(this.thumbnail),callout:m.clone(this.callout),verticalOffset:m.clone(this.verticalOffset)})};
var e;h([k.property({type:c.default,json:{write:!0}})],b.prototype,"verticalOffset",void 0);h([k.property(d.calloutProperty)],b.prototype,"callout",void 0);h([k.property({json:{read:!1,write:!1}})],b.prototype,"styleOrigin",void 0);h([k.property({type:q})],b.prototype,"symbolLayers",void 0);h([k.enumeration.serializable()({LabelSymbol3D:"label-3d"})],b.prototype,"type",void 0);return b=e=h([k.subclass("esri.symbols.LabelSymbol3D")],b)}(k.declared(a))})},"esri/symbols/Symbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Collection ../core/collectionUtils ../core/kebabDictionary ../core/Logger ../core/urlUtils ../core/Warning ../core/accessorSupport/decorators ../portal/Portal ./ExtrudeSymbol3DLayer ./FillSymbol3DLayer ./IconSymbol3DLayer ./LineSymbol3DLayer ./ObjectSymbol3DLayer ./PathSymbol3DLayer ./Symbol ./Symbol3DLayer ./TextSymbol3DLayer ./support/StyleOrigin ./support/Thumbnail".split(" "),
function(b,e,n,h,l,m,k,a,f,d,c,q,r,x,z,v,w,p,y,g,u,t,A){var C={icon:z,object:w,line:v,path:p,fill:x,extrude:r,text:u},B=l.ofType({base:g,key:"type",typeMap:C}),F=k.strict()({PointSymbol3D:"point-3d",PolygonSymbol3D:"polygon-3d",LineSymbol3D:"line-3d",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d"}),D=a.getLogger("esri.symbols.Symbol3D");return function(a){function b(b){b=a.call(this)||this;b.styleOrigin=null;b.thumbnail=null;b.type=null;var c=b.__accessor__&&b.__accessor__.metadatas&&b.__accessor__.metadatas.symbolLayers;
b._set("symbolLayers",new (c&&c.type||l));return b}n(b,a);Object.defineProperty(b.prototype,"color",{get:function(){return null},set:function(a){D.error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"symbolLayers",{set:function(a){m.referenceSetter(a,this._get("symbolLayers"))},enumerable:!0,configurable:!0});b.prototype.readSymbolLayers=function(a,b,c){b=[];
for(var e=0;e<a.length;e++){var f=a[e],h=g.typeJSONDictionary.read(f.type),k=h&&C[h];k?(f=new k,f.read(a[e],c),b.push(f)):(D.warn("Unknown symbol layer type: "+h),c&&c.messages&&c.messages.push(new d("symbol-layer:unsupported","Symbol layers of type '"+(h||f.type||"unknown")+"' are not supported",{definition:f,context:c})))}return b};b.prototype.readStyleOrigin=function(a,b,c){if(a.styleUrl&&a.name)return b=f.read(a.styleUrl,c),new t({styleUrl:b,name:a.name});if(a.styleName&&a.name)return new t({portal:c&&
c.portal||q.getDefault(),styleName:a.styleName,name:a.name});c&&c.messages&&c.messages.push(new d("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:c,definition:a}))};b.prototype.writeStyleOrigin=function(a,b,c,e){a.styleUrl&&a.name?(c=f.write(a.styleUrl,e),f.isAbsolute(c)&&(c=f.normalize(c)),b.styleOrigin={styleUrl:c,name:a.name}):a.styleName&&a.name&&(a.portal&&e&&e.portal&&!f.hasSamePortal(a.portal.restUrl,e.portal.restUrl)?
e&&e.messages&&e.messages.push(new d("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):b.styleOrigin={styleName:a.styleName,name:a.name})};b.prototype.normalizeCtorArgs=function(a){return a instanceof g||a&&C[a.type]?{symbolLayers:[a]}:Array.isArray(a)?{symbolLayers:a}:a};h([c.property({json:{read:!1,write:!1}})],b.prototype,"color",null);h([c.property({type:B,nonNullable:!0,json:{write:!0}}),
c.cast(m.castForReferenceSetter)],b.prototype,"symbolLayers",null);h([c.reader("symbolLayers")],b.prototype,"readSymbolLayers",null);h([c.property({type:t})],b.prototype,"styleOrigin",void 0);h([c.reader("styleOrigin")],b.prototype,"readStyleOrigin",null);h([c.writer("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],b.prototype,"writeStyleOrigin",null);h([c.property({type:A.default,json:{read:!1}})],b.prototype,"thumbnail",
void 0);h([c.property({type:F.apiValues,readOnly:!0,json:{type:F.jsonValues,read:!1}})],b.prototype,"type",void 0);return b=h([c.subclass("esri.symbols.Symbol3D")],b)}(c.declared(y))})},"esri/symbols/ExtrudeSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ./Symbol3DLayer ./edges/utils".split(" "),function(b,e,n,h,l,m,k){return function(a){function b(b){b=a.call(this)||this;b.type="extrude";
b.size=void 0;b.material=null;b.edges=null;return b}n(b,a);d=b;b.prototype.clone=function(){return new d({edges:this.edges&&this.edges.clone(),enabled:this.enabled,elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),material:this.material&&this.material.clone(),size:this.size})};var d;h([l.enumeration.serializable()({Extrude:"extrude"})],b.prototype,"type",void 0);h([l.property({type:Number,json:{write:!0}})],b.prototype,"size",void 0);h([l.property()],b.prototype,"material",void 0);h([l.property(k.symbol3dEdgesProperty)],
b.prototype,"edges",void 0);return b=d=h([l.subclass("esri.symbols.ExtrudeSymbol3DLayer")],b)}(l.declared(m))})},"esri/symbols/Symbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/kebabDictionary ../core/accessorSupport/decorators ./support/ElevationInfo ./support/Symbol3DMaterial".split(" "),function(b,e,n,h,l,m,k,a,f){var d=m.strict()({Icon:"icon",Object:"object",Line:"line",Path:"path",Fill:"fill",
Extrude:"extrude",Text:"text"});b=function(b){function c(a){a=b.call(this)||this;a.enabled=!0;a.material=null;a.type=null;return a}n(c,b);c.prototype.writeEnabled=function(a,b,c){a||(b[c]=a)};h([k.property({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],c.prototype,"enabled",void 0);h([k.writer("enabled")],c.prototype,"writeEnabled",null);h([k.property({type:a,json:{read:!1,write:!1}})],c.prototype,"elevationInfo",void 0);h([k.property({type:f.default,json:{write:!0}})],c.prototype,
"material",void 0);h([k.property({type:d.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:d.write}}})],c.prototype,"type",void 0);return c=h([k.subclass("esri.symbols.Symbol3DLayer")],c)}(k.declared(l));(b||(b={})).typeJSONDictionary=d;return b})},"esri/symbols/support/ElevationInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/kebabDictionary ../../core/accessorSupport/decorators ../../support/arcadeUtils ./unitConversionUtils".split(" "),
function(b,e,n,h,l,m,k,a,f){var d=m.strict()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),c=m({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"}),q=function(b){function c(){return null!==b&&b.apply(this,arguments)||this}n(c,b);d=c;Object.defineProperty(c.prototype,"requiredFields",{get:function(){return a.extractFieldNames(this.expression)},enumerable:!0,configurable:!0});
c.prototype.clone=function(){return new d({expression:this.expression,title:this.title})};var d;h([k.property({type:String,json:{write:!0}})],c.prototype,"expression",void 0);h([k.property({readOnly:!0,dependsOn:["expression"]})],c.prototype,"requiredFields",null);h([k.property({type:String,json:{write:!0}})],c.prototype,"title",void 0);return c=d=h([k.subclass("esri.layers.support.FeatureExpressionInfo")],c)}(k.declared(l));return function(a){function b(){return null!==a&&a.apply(this,arguments)||
this}n(b,a);e=b;b.prototype.readFeatureExpressionInfo=function(a,b){if(null!=a)return a;if(b.featureExpression&&0===b.featureExpression.value)return{expression:"0"}};b.prototype.writeFeatureExpressionInfo=function(a,b,c,d){b[c]=a.write(null,d);"0"===a.expression&&(b.featureExpression={value:0})};Object.defineProperty(b.prototype,"mode",{get:function(){return this._isOverridden("mode")?this._get("mode"):null!=this.offset||this.featureExpressionInfo?"relative-to-ground":"on-the-ground"},set:function(a){this._override("mode",
a)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"unit",{set:function(a){this._set("unit",a)},enumerable:!0,configurable:!0});b.prototype.write=function(a,b){return this.offset||this.mode||this.featureExpressionInfo||this.unit?this.inherited(arguments):null};b.prototype.clone=function(){return new e({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})};var e;h([k.property({type:q,json:{write:!0}})],
b.prototype,"featureExpressionInfo",void 0);h([k.reader("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],b.prototype,"readFeatureExpressionInfo",null);h([k.writer("featureExpressionInfo",{featureExpressionInfo:{type:q},"featureExpression.value":{type:Number}})],b.prototype,"writeFeatureExpressionInfo",null);h([k.property({type:d.apiValues,dependsOn:["offset","featureExpressionInfo"],nonNullable:!0,json:{read:d.read,write:{writer:d.write,isRequired:!0}}})],b.prototype,"mode",
null);h([k.property({type:Number,json:{write:!0}})],b.prototype,"offset",void 0);h([k.property({type:f.supportedUnits,json:{read:c.read,write:c.write}})],b.prototype,"unit",null);return b=e=h([k.subclass("esri.layers.support.ElevationInfo")],b)}(k.declared(l))})},"esri/symbols/support/unitConversionUtils":function(){define(["require","exports","../../renderers/support/utils"],function(b,e,n){Object.defineProperty(e,"__esModule",{value:!0});e.supportsUnit=function(b){return null!=n.meterIn[b]};e.getMetersPerUnit=
function(b){return 1/(n.meterIn[b]||1)};e.supportedUnits=function(){var b=Object.keys(n.meterIn);b.sort();return b}()})},"esri/renderers/support/utils":function(){define("dojo/date/locale ../../Color ../../core/lang ../../core/numberUtils ../../core/unitUtils dojo/i18n!dojo/cldr/nls/gregorian".split(" "),function(b,e,n,h,l,m){function k(a){return a&&a.map(function(a){return new e(a)})}function a(a,b,c){var e="";0===b?e=d.lt+" ":b===c&&(e=d.gt+" ");return e+a}var f={},d={lte:"\x3c\x3d",gte:"\x3e\x3d",
lt:"\x3c",gt:"\x3e",pct:"%",ld:"\u2013"},c={millisecond:0,second:1,minute:2,hour:3,day:4,month:5,year:6},q={millisecond:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"medium"}},second:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"medium"}},minute:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"short"}},hour:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"short"}},day:{selector:"date",dateOptions:{formatLength:"long"}},month:{selector:"date",
dateOptions:{formatLength:"long"}},year:{selector:"date",dateOptions:{selector:"year"}}},r={formatLength:"short",fullYear:!0},x={formatLength:"short"};n.mixin(f,{meterIn:{inches:l.convertUnit(1,"meters","inches"),feet:l.convertUnit(1,"meters","feet"),"us-feet":l.convertUnit(1,"meters","us-feet"),yards:l.convertUnit(1,"meters","yards"),miles:l.convertUnit(1,"meters","miles"),"nautical-miles":l.convertUnit(1,"meters","nautical-miles"),millimeters:l.convertUnit(1,"meters","millimeters"),centimeters:l.convertUnit(1,
"meters","centimeters"),decimeters:l.convertUnit(1,"meters","decimeters"),meters:l.convertUnit(1,"meters","meters"),kilometers:l.convertUnit(1,"meters","kilometers"),"decimal-degrees":1/l.lengthToDegrees(1,"meters")},timelineDateFormatOptions:{selector:"date",dateOptions:{formatLength:"short",fullYear:!0}},formatDate:function(a,c){var d=[];null==a||a instanceof Date||(a=new Date(a));c=c||{};c=n.mixin({},c);var e=c.selector?c.selector.toLowerCase():null,f=!e||-1<e.indexOf("time"),e=!e||-1<e.indexOf("date");
f&&(c.timeOptions=c.timeOptions||x,c.timeOptions&&(c.timeOptions=n.mixin({},c.timeOptions),c.timeOptions.selector=c.timeOptions.selector||"time",d.push(c.timeOptions)));e&&(c.dateOptions=c.dateOptions||r,c.dateOptions&&(c.dateOptions=n.mixin({},c.dateOptions),c.dateOptions.selector=c.dateOptions.selector||"date",d.push(c.dateOptions)));d&&d.length?(d=d.map(function(c){return b.format(a,c)}),c=1==d.length?d[0]:m["dateTimeFormat-medium"].replace(/\'/g,"").replace(/\{(\d+)\}/g,function(a,b){return d[b]})):
c=b.format(a);return c},createColorStops:function(b){var c=b.values,d=b.colors,e=b.labelIndexes,k=b.isDate,g=b.dateFormatOptions;b=[];return b=c.map(function(b,l){var m=null;if(!e||-1<e.indexOf(l)){var q;(q=k?f.formatDate(b,g):h.format(b))&&(m=a(q,l,c.length-1))}return{value:b,color:d[l],label:m}})},updateColorStops:function(b){var c=b.stops,d=b.changes,e=b.isDate,k=b.dateFormatOptions,g=[],l,m=c.map(function(a){return a.value});d.forEach(function(a){g.push(a.index);m[a.index]=a.value});l=h.round(m,
{indexes:g});c.forEach(function(b,d){b.value=m[d];if(null!=b.label){var g,q=null;(g=e?f.formatDate(l[d],k):h.format(l[d]))&&(q=a(g,d,c.length-1));b.label=q}})},createClassBreakLabel:function(a){var b=a.minValue,c=a.maxValue,e=a.isFirstBreak?"":d.gt+" ";a="percent-of-total"===a.normalizationType?d.pct:"";b=null==b?"":h.format(b);c=null==c?"":h.format(c);return e+b+a+" "+d.ld+" "+c+a},setLabelsForClassBreaks:function(a){var b=a.classBreakInfos,c=a.classificationMethod,d=a.normalizationType,e=[];b&&
b.length&&("standard-deviation"===c?console.log("setLabelsForClassBreaks: cannot set labels for class breaks generated using 'standard-deviation' method."):a.round?(e.push(b[0].minValue),b.forEach(function(a){e.push(a.maxValue)}),e=h.round(e),b.forEach(function(a,b){a.label=f.createClassBreakLabel({minValue:0===b?e[0]:e[b],maxValue:e[b+1],isFirstBreak:0===b,normalizationType:d})})):b.forEach(function(a,b){a.label=f.createClassBreakLabel({minValue:a.minValue,maxValue:a.maxValue,isFirstBreak:0===b,
normalizationType:d})}))},updateClassBreak:function(a){var b=a.classBreaks,c=a.normalizationType,d=a.change,e=d.index,d=d.value,g=-1,h=-1,k=b.length;"standard-deviation"===a.classificationMethod?console.log("updateClassBreak: cannot update labels for class breaks generated using 'standard-deviation' method."):(0===e?g=e:e===k?h=e-1:(h=e-1,g=e),-1<g&&g<k&&(a=b[g],a.minValue=d,a.label=f.createClassBreakLabel({minValue:a.minValue,maxValue:a.maxValue,isFirstBreak:0===g,normalizationType:c})),-1<h&&h<
k&&(a=b[h],a.maxValue=d,a.label=f.createClassBreakLabel({minValue:a.minValue,maxValue:a.maxValue,isFirstBreak:0===h,normalizationType:c})))},calculateDateFormatInterval:function(a){var b,d,e=a.length,f,g,h,k,l,m,q=Infinity,n;a=a.map(function(a){return new Date(a)});for(b=0;b<e-1;b++){f=a[b];h=[];l=Infinity;m="";for(d=b+1;d<e;d++)g=a[d],g=f.getFullYear()!==g.getFullYear()&&"year"||f.getMonth()!==g.getMonth()&&"month"||f.getDate()!==g.getDate()&&"day"||f.getHours()!==g.getHours()&&"hour"||f.getMinutes()!==
g.getMinutes()&&"minute"||f.getSeconds()!==g.getSeconds()&&"second"||"millisecond",k=c[g],k<l&&(l=k,m=g),h.push(g);l<q&&(q=l,n=m)}return n},createUniqueValueLabel:function(a){var b=a.value,c=a.fieldInfo,d=a.domain;a=a.dateFormatInterval;var e=String(b);(d=d&&d.codedValues?d.getName(b):null)?e=d:"number"===typeof b&&(e=c&&"date"===c.type?f.formatDate(b,a&&q[a]):h.format(b));return e},cloneColorVariable:function(a){var b;a&&(b=n.mixin({},a),b.colors=k(b.colors),b.stops=b.stops&&b.stops.map(function(a){a=
n.mixin({},a);a.color&&(a.color=new e(a.color));return a}),b.legendOptions&&(b.legendOptions=n.mixin({},b.legendOptions)));return b},cloneOpacityVariable:function(a){var b;if(a){b=n.mixin({},a);if(a=b.opacityValues)b.opacityValues=a.slice(0);if(a=b.stops)b.stops=a.map(function(a){return n.mixin({},a)});if(a=b.legendOptions)b.legendOptions=n.mixin({},a)}return b},cloneSizeVariable:function(a){var b;a&&(b=n.mixin({},a),b.stops&&(b.stops=b.stops.map(function(a){return n.mixin({},a)})),(a=b.minSize)&&
"object"===typeof a&&(b.minSize=f.cloneSizeVariable(a)),(a=b.maxSize)&&"object"===typeof a&&(b.maxSize=f.cloneSizeVariable(a)),a=b.legendOptions)&&(b.legendOptions=n.mixin({},a),a=a.customValues)&&(b.legendOptions.customValues=a.slice(0));return b}});return f})},"esri/core/numberUtils":function(){define(["dojo/number","dojo/i18n!dojo/cldr/nls/number"],function(b,e){function n(a,b){return a-b}var h=/^-?(\d+)(\.(\d+))?$/i,l=new RegExp("\\"+e.decimal+"0+$","g"),m=/(\d)0*$/g,k={numDigits:function(a){var b=
String(a),d=b.match(h);a={integer:0,fractional:0};d&&d[1]?(a.integer=d[1].split("").length,a.fractional=d[3]?d[3].split("").length:0):-1<b.toLowerCase().indexOf("e")&&(d=b.split("e"),b=d[0],d=d[1],b&&d&&(b=Number(b),d=Number(d),(a=0<d)||(d=Math.abs(d)),b=k.numDigits(b),a?(b.integer+=d,b.fractional=d>b.fractional?0:b.fractional-d):(b.fractional+=d,b.integer=d>b.integer?1:b.integer-d),a=b));return a},percentChange:function(a,b,d,c){var e={previous:null,next:null},f;null!=d&&(f=a-d,e.previous=Math.floor(Math.abs(100*
(b-d-f)/f)));null!=c&&(f=c-a,e.next=Math.floor(Math.abs(100*(c-b-f)/f)));return e},round:function(a,b){a=a.slice(0);var d,c,e,f,h,l,m,w,p=b&&null!=b.tolerance?b.tolerance:2,y=b&&b.indexes,g=b&&null!=b.strictBounds?b.strictBounds:!1;if(y)y.sort(n);else for(y=[],h=0;h<a.length;h++)y.push(h);for(h=0;h<y.length;h++)if(w=y[h],b=a[w],d=0===w?null:a[w-1],c=w===a.length-1?null:a[w+1],e=k.numDigits(b),e=e.fractional){l=0;for(m=!1;l<=e&&!m;){f=b;m=l;var u=void 0,t=void 0,u=Number(f.toFixed(m));u<f?t=u+1/Math.pow(10,
m):(t=u,u-=1/Math.pow(10,m));u=Number(u.toFixed(m));t=Number(t.toFixed(m));f=[u,t];f=g&&0===h?f[1]:f[0];m=p;var u=k.percentChange(b,f,d,c),A=t=void 0,t=void 0,t=null==u.previous||u.previous<=m,A=null==u.next||u.next<=m;m=t=t&&A||u.previous+u.next<=2*m;l++}m&&(a[w]=f)}return a},format:function(a,e){e=e||{places:20,round:-1};(a=b.format(a,e))&&(a=a.replace(m,"$1").replace(l,""));return a}};return k})},"esri/core/unitUtils":function(){define(["require","exports","dojo/i18n!./nls/Units","dojo/number",
"./wgs84Constants"],function(b,e,n,h,l){b={millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1E3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}};e={"square-millimeters":{inBaseUnits:1E-6},"square-centimeters":{inBaseUnits:1E-4},"square-decimeters":{inBaseUnits:.1*.1},"square-meters":{inBaseUnits:1},
"square-kilometers":{inBaseUnits:1E6},"square-inches":{inBaseUnits:6.4516E-4},"square-feet":{inBaseUnits:.09290304},"square-yards":{inBaseUnits:.83612736},"square-miles":{inBaseUnits:2589988.110336},"square-us-feet":{inBaseUnits:function(a){return a*a}(1200/3937)},acres:{inBaseUnits:4046.8564224},ares:{inBaseUnits:100},hectares:{inBaseUnits:1E4}};var m={length:{baseUnit:"meters",units:b},area:{baseUnit:"square-meters",units:e},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1E3*
1E-9},"cubic-centimeters":{inBaseUnits:.001},"cubic-decimeters":{inBaseUnits:1},"cubic-meters":{inBaseUnits:1E3},"cubic-kilometers":{inBaseUnits:1E12},"cubic-inches":{inBaseUnits:.016387064},"cubic-feet":{inBaseUnits:.09290304*304.8},"cubic-yards":{inBaseUnits:764.554857984},"cubic-miles":{inBaseUnits:4.16818182544058E12}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},k=function(){var a={},b;for(b in m)for(var c in m[b].units)a[c]=b;return a}(),a;(function(a){function b(a){if(a=
k[a])return a;throw Error("unknown measure");}function c(a){return m[a].baseUnit}function e(a,c){void 0===c&&(c=null);c=c||b(a);return m[c].baseUnit===a}function f(a,c,d){if(c===d)return a;var f=b(c);if(f!==b(d))throw Error("incompatible units");a=e(c,f)?a:a*m[f].units[c].inBaseUnits;return e(d,f)?a:a/m[f].units[d].inBaseUnits}function x(a,b){return n.units[a][b]}function z(a,b,c,d){void 0===c&&(c=2);void 0===d&&(d="abbr");return h.format(a,{places:c})+" "+x(b,d)}function v(a,b){return 3E3>f(a,b,
"meters")?"meters":"kilometers"}function w(a,b){return 1E5>f(a,b,"meters")?"meters":"kilometers"}function p(a,b){return 1E3>f(a,b,"feet")?"feet":"miles"}function y(a,b){return 1E5>f(a,b,"feet")?"feet":"miles"}function g(a,b){return 3E6>f(a,b,"square-meters")?"square-meters":"square-kilometers"}function u(a,b){return 1E6>f(a,b,"square-feet")?"square-feet":"square-miles"}a.measureForUnit=b;a.baseUnitForMeasure=c;a.baseUnitForUnit=function(a){return c(b(a))};a.isBaseUnit=e;a.convertUnit=f;a.unitName=
x;a.formatDecimal=z;a.preferredMetricLengthUnit=v;a.preferredMetricVerticalLengthUnit=w;a.formatMetricLength=function(a,b,c,d){void 0===c&&(c=2);void 0===d&&(d="abbr");var e=v(a,b);return z(f(a,b,e),e,c,d)};a.formatMetricVerticalLength=function(a,b,c,d){void 0===c&&(c=2);void 0===d&&(d="abbr");var e=w(a,b);return z(f(a,b,e),e,c,d)};a.preferredImperialLengthUnit=p;a.preferredImperialVerticalLengthUnit=y;a.formatImperialLength=function(a,b,c,d){void 0===c&&(c=2);void 0===d&&(d="abbr");var e=p(a,b);
return z(f(a,b,e),e,c,d)};a.formatImperialVerticalLength=function(a,b,c,d){void 0===c&&(c=2);void 0===d&&(d="abbr");var e=y(a,b);return z(f(a,b,e),e,c,d)};a.preferredMetricAreaUnit=g;a.formatMetricArea=function(a,b,c,d){void 0===c&&(c=2);void 0===d&&(d="abbr");var e=g(a,b);return z(f(a,b,e),e,c,d)};a.preferredImperialAreaUnit=u;a.formatImperialArea=function(a,b,c,d){void 0===c&&(c=2);void 0===d&&(d="abbr");var e=u(a,b);return z(f(a,b,e),e,c,d)};a.lengthToDegrees=function(a,b,c){void 0===c&&(c=l.wgs84Radius);
return f(a,b,"meters")/(c*Math.PI/180)};a.formatDMS=function(b,c,d){void 0===d&&(d=2);b=a.convertUnit(b,c,"degrees");c=b-Math.floor(b);b-=c;c*=60;var e=c-Math.floor(c);c-=e;e*=60;return b.toFixed()+"\u00b0 "+c.toFixed()+"' "+e.toFixed(d)+'"'}})(a||(a={}));return a})},"esri/symbols/support/Symbol3DMaterial":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ./materialUtils".split(" "),
function(b,e,n,h,l,m,k){Object.defineProperty(e,"__esModule",{value:!0});b=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}n(b,a);d=b;b.prototype.clone=function(){return new d({color:this.color?this.color.clone():null})};var d;h([m.property(k.colorAndTransparencyProperty)],b.prototype,"color",void 0);return b=d=h([m.subclass("esri.symbols.support.Symbol3DMaterial")],b)}(m.declared(l));e.Symbol3DMaterial=b;e.default=b})},"esri/symbols/support/materialUtils":function(){define("require exports ../../Color ../../core/screenUtils ../../core/accessorSupport/ensureType ../../webdoc/support/opacityUtils".split(" "),
function(b,e,n,h,l,m){function k(a,b){a=null!=b.transparency?m.transparencyToOpacity(b.transparency):1;if((b=b.color)&&Array.isArray(b))return new n([b[0]||0,b[1]||0,b[2]||0,a])}function a(a,b){b.color=a.toJSON().slice(0,3);a=m.opacityToTransparency(a.a);0!==a&&(b.transparency=a)}Object.defineProperty(e,"__esModule",{value:!0});e.readColorAndTransparency=k;e.writeColorAndTransparency=a;e.colorAndTransparencyProperty={type:n,json:{type:[l.Integer],read:{source:["color","transparency"],reader:k},write:{target:{color:{type:[l.Integer]},
transparency:{type:l.Integer}},writer:a}}};e.screenSizeProperty={type:Number,cast:h.toPt,json:{write:!0}}})},"esri/core/screenUtils":function(){define(["require","exports"],function(b,e){function n(b){return b?72*b/e.DPI:0}Object.defineProperty(e,"__esModule",{value:!0});var h=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i;e.DPI=96;e.pt2px=function(b){return b?b/72*e.DPI:0};e.px2pt=n;e.toPt=function(b){if("string"===typeof b){if(h.test(b)){var e=b.match(h),k=Number(e[1]),e=e[3]&&e[3].toLowerCase();b="-"===b.charAt(0);
k="px"===e?n(k):k;return b?-k:k}console.warn("screenUtils.toPt: input not recognized!");return null}return b}})},"esri/symbols/edges/utils":function(){define(["require","exports","./Edges3D","./SketchEdges3D","./SolidEdges3D"],function(b,e,n,h,l){function m(b,a,e){if(!b)return b;switch(b.type){case "solid":return a=new l,a.read(b,e),a;case "sketch":return a=new h,a.read(b,e),a}}Object.defineProperty(e,"__esModule",{value:!0});e.read=m;e.symbol3dEdgesProperty={types:{key:"type",base:n,typeMap:{solid:l,
sketch:h}},json:{read:m,write:!0}}})},"esri/symbols/edges/Edges3D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/assignHelper ../../Color ../../core/JSONSupport ../../core/lang ../../core/screenUtils ../../core/accessorSupport/decorators ../support/materialUtils".split(" "),function(b,e,n,h,l,m,k,a,f,d,c){return function(b){function e(a){a=b.call(this)||this;a.color=new m([0,0,0,1]);a.extensionLength=0;a.size=
f.px2pt(1);return a}n(e,b);e.prototype.normalizeCtorArgs=function(a){a&&a.type&&(a=l({},a),delete a.type);return a};e.prototype.clone=function(){};e.prototype.cloneProperties=function(){return{color:a.clone(this.color),size:this.size,extensionLength:this.extensionLength}};h([d.property({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],e.prototype,"type",void 0);h([d.property(c.colorAndTransparencyProperty)],e.prototype,"color",void 0);h([d.property(l({},c.screenSizeProperty,
{json:{write:{overridePolicy:function(a){return{enabled:!!a}}}}}))],e.prototype,"extensionLength",void 0);h([d.property(c.screenSizeProperty)],e.prototype,"size",void 0);return e=h([d.subclass("esri.symbols.edges.Edges3D")],e)}(d.declared(k))})},"esri/symbols/edges/SketchEdges3D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./Edges3D".split(" "),function(b,e,n,h,l,m){return function(b){function a(a){a=
b.call(this)||this;a.type="sketch";return a}n(a,b);e=a;a.prototype.clone=function(){return new e(this.cloneProperties())};var e;h([l.property({type:["sketch"]})],a.prototype,"type",void 0);return a=e=h([l.subclass("esri.symbols.edges.SketchEdges3D")],a)}(l.declared(m))})},"esri/symbols/edges/SolidEdges3D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./Edges3D".split(" "),function(b,e,n,h,l,m){return function(b){function a(a){a=
b.call(this)||this;a.type="solid";return a}n(a,b);e=a;a.prototype.clone=function(){return new e(this.cloneProperties())};var e;h([l.property({type:["solid"]})],a.prototype,"type",void 0);return a=e=h([l.subclass("esri.symbols.support.SolidEdges3D")],a)}(l.declared(m))})},"esri/symbols/FillSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ./Symbol3DLayer ./edges/utils ./support/Symbol3DFillMaterial ./support/Symbol3DOutline".split(" "),
function(b,e,n,h,l,m,k,a,f){return function(b){function c(a){a=b.call(this)||this;a.type="fill";a.material=null;a.outline=null;a.edges=null;return a}n(c,b);d=c;c.prototype.clone=function(){return new d({edges:this.edges&&this.edges.clone(),enabled:this.enabled,elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),material:this.material&&this.material.clone(),outline:this.outline&&this.outline.clone()})};var d;h([l.enumeration.serializable()({Fill:"fill"})],c.prototype,"type",void 0);h([l.property({type:a.default})],
c.prototype,"material",void 0);h([l.property({type:f.default,json:{write:!0}})],c.prototype,"outline",void 0);h([l.property(k.symbol3dEdgesProperty)],c.prototype,"edges",void 0);return c=d=h([l.subclass("esri.symbols.FillSymbol3DLayer")],c)}(l.declared(m))})},"esri/symbols/support/Symbol3DFillMaterial":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./Symbol3DMaterial".split(" "),function(b,e,n,
h,l,m){Object.defineProperty(e,"__esModule",{value:!0});b=function(b){function a(){return null!==b&&b.apply(this,arguments)||this}n(a,b);e=a;a.prototype.clone=function(){return new e({color:this.color?this.color.clone():null,colorMixMode:this.colorMixMode})};var e;h([l.enumeration.serializable()({multiply:"multiply",replace:"replace",tint:"tint"})],a.prototype,"colorMixMode",void 0);return a=e=h([l.subclass("esri.symbols.support.Symbol3DFillMaterial")],a)}(l.declared(m.default));e.Symbol3DFillMaterial=
b;e.default=b})},"esri/symbols/support/Symbol3DOutline":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/JSONSupport ../../core/screenUtils ../../core/accessorSupport/decorators ./materialUtils".split(" "),function(b,e,n,h,l,m,k,a,f){Object.defineProperty(e,"__esModule",{value:!0});b=function(b){function c(){var a=null!==b&&b.apply(this,arguments)||this;a.color=new l([0,0,0,1]);a.size=k.px2pt(1);return a}n(c,b);
d=c;c.prototype.clone=function(){return new d({color:this.color?this.color.clone():null,size:this.size})};var d;h([a.property(f.colorAndTransparencyProperty)],c.prototype,"color",void 0);h([a.property(f.screenSizeProperty)],c.prototype,"size",void 0);return c=d=h([a.subclass("esri.symbols.support.Symbol3DOutline")],c)}(a.declared(m));e.Symbol3DOutline=b;e.default=b})},"esri/symbols/IconSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ./Symbol3DLayer ./support/IconSymbol3DLayerResource ./support/materialUtils ./support/Symbol3DOutline".split(" "),
function(b,e,n,h,l,m,k,a,f){return function(b){function c(a){a=b.call(this)||this;a.material=null;a.resource=null;a.type="icon";a.size=12;a.anchor=void 0;a.outline=void 0;return a}n(c,b);d=c;c.prototype.clone=function(){return new d({anchor:this.anchor,enabled:this.enabled,elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),material:this.material&&this.material.clone(),outline:this.outline&&this.outline.clone(),resource:this.resource&&this.resource.clone(),size:this.size})};var d;h([l.property()],
c.prototype,"material",void 0);h([l.property({type:k.default,json:{write:!0}})],c.prototype,"resource",void 0);h([l.enumeration.serializable()({Icon:"icon"})],c.prototype,"type",void 0);h([l.property(a.screenSizeProperty)],c.prototype,"size",void 0);h([l.enumeration.serializable()({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right"})],c.prototype,"anchor",void 0);h([l.property({type:f.default,
json:{write:!0}})],c.prototype,"outline",void 0);return c=d=h([l.subclass("esri.symbols.IconSymbol3DLayer")],c)}(l.declared(m))})},"esri/symbols/support/IconSymbol3DLayerResource":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/kebabDictionary ../../core/urlUtils ../../core/accessorSupport/decorators".split(" "),function(b,e,n,h,l,m,k,a){Object.defineProperty(e,"__esModule",{value:!0});var f=m.strict()({circle:"circle",
square:"square",cross:"cross",x:"x",kite:"kite"});b=function(b){function c(){return null!==b&&b.apply(this,arguments)||this}n(c,b);d=c;c.prototype.readHref=function(a,b,c){return a?k.read(a,c):b.dataURI};c.prototype.writeHref=function(a,b,c,d){a&&(k.isDataProtocol(a)?b.dataURI=a:(b.href=k.write(a,d),k.isAbsolute(b.href)&&(b.href=k.normalize(b.href))))};c.prototype.clone=function(){return new d({href:this.href,primitive:this.primitive})};var d;h([a.property({type:String,json:{write:!0,read:{source:["href",
"dataURI"]}}})],c.prototype,"href",void 0);h([a.reader("href")],c.prototype,"readHref",null);h([a.writer("href",{href:{type:String},dataURI:{type:String}})],c.prototype,"writeHref",null);h([a.enumeration.serializable()(f)],c.prototype,"primitive",void 0);return c=d=h([a.subclass("esri.symbols.support.IconSymbol3DLayerResource")],c)}(a.declared(l));e.IconSymbol3DLayerResource=b;e.default=b})},"esri/symbols/LineSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/screenUtils ../core/accessorSupport/decorators ./Symbol3DLayer ./support/materialUtils".split(" "),
function(b,e,n,h,l,m,k,a){return function(b){function d(a){a=b.call(this)||this;a.material=null;a.type="line";a.size=l.px2pt(1);return a}n(d,b);c=d;d.prototype.clone=function(){return new c({enabled:this.enabled,elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),material:this.material&&this.material.clone(),size:this.size})};var c;h([m.property()],d.prototype,"material",void 0);h([m.enumeration.serializable()({Line:"line"})],d.prototype,"type",void 0);h([m.property(a.screenSizeProperty)],
d.prototype,"size",void 0);return d=c=h([m.subclass("esri.symbols.LineSymbol3DLayer")],d)}(m.declared(k))})},"esri/symbols/ObjectSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ./Symbol3DLayer ./support/ObjectSymbol3DLayerResource ./support/Symbol3DMaterial".split(" "),function(b,e,n,h,l,m,k,a){return function(b){function d(a){a=b.call(this)||this;a.material=null;a.resource=null;a.type="object";
a.width=void 0;a.height=void 0;a.depth=void 0;a.anchor=void 0;a.heading=void 0;a.tilt=void 0;a.roll=void 0;return a}n(d,b);c=d;d.prototype.clone=function(){return new c({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,depth:this.depth,enabled:this.enabled,elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),height:this.height,material:this.material&&this.material.clone(),resource:this.resource&&this.resource.clone(),width:this.width})};Object.defineProperty(d.prototype,
"isPrimitive",{get:function(){return!this.resource||"string"!==typeof this.resource.href},enumerable:!0,configurable:!0});var c;h([l.property({type:a.default})],d.prototype,"material",void 0);h([l.property({type:k.default,json:{write:!0}})],d.prototype,"resource",void 0);h([l.enumeration.serializable()({Object:"object"})],d.prototype,"type",void 0);h([l.property({type:Number,json:{write:!0}})],d.prototype,"width",void 0);h([l.property({type:Number,json:{write:!0}})],d.prototype,"height",void 0);h([l.property({type:Number,
json:{write:!0}})],d.prototype,"depth",void 0);h([l.enumeration.serializable()({center:"center",top:"top",bottom:"bottom",origin:"origin"})],d.prototype,"anchor",void 0);h([l.property({type:Number,json:{write:!0}})],d.prototype,"heading",void 0);h([l.property({type:Number,json:{write:!0}})],d.prototype,"tilt",void 0);h([l.property({type:Number,json:{write:!0}})],d.prototype,"roll",void 0);h([l.property({readOnly:!0,dependsOn:["resource","resource.href"]})],d.prototype,"isPrimitive",null);return d=
c=h([l.subclass("esri.symbols.ObjectSymbol3DLayer")],d)}(l.declared(m))})},"esri/symbols/support/ObjectSymbol3DLayerResource":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/kebabDictionary ../../core/urlUtils ../../core/accessorSupport/decorators".split(" "),function(b,e,n,h,l,m,k,a){Object.defineProperty(e,"__esModule",{value:!0});var f=m.strict()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",
diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});b=function(b){function c(){return null!==b&&b.apply(this,arguments)||this}n(c,b);d=c;c.prototype.readHref=function(a,b,c){return k.read(a,c)};c.prototype.writeHref=function(a,b,c,d){a&&(b.href=k.write(a,d),k.isAbsolute(b.href)&&(b.href=k.normalize(b.href)))};c.prototype.clone=function(){return new d({href:this.href,primitive:this.primitive})};var d;h([a.property({type:String,json:{write:!0}})],c.prototype,"href",void 0);h([a.reader("href")],
c.prototype,"readHref",null);h([a.writer("href")],c.prototype,"writeHref",null);h([a.enumeration.serializable()(f)],c.prototype,"primitive",void 0);return c=d=h([a.subclass("esri.symbols.support.ObjectSymbol3DLayerResource")],c)}(a.declared(l));e.ObjectSymbol3DLayerResource=b;e.default=b})},"esri/symbols/PathSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ./Symbol3DLayer".split(" "),function(b,
e,n,h,l,m){return function(b){function a(a){a=b.call(this)||this;a.material=null;a.type="path";a.size=void 0;return a}n(a,b);e=a;a.prototype.readSize=function(a,b){return a||b.width||0};a.prototype.clone=function(){return new e({enabled:this.enabled,elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),material:this.material&&this.material.clone(),size:this.size})};var e;h([l.property()],a.prototype,"material",void 0);h([l.enumeration.serializable()({Path:"path"})],a.prototype,"type",void 0);
h([l.property({type:Number,json:{write:{enabled:!0,target:{size:{type:Number},width:{type:Number}}}}})],a.prototype,"size",void 0);h([l.reader("size",["size","width"])],a.prototype,"readSize",null);return a=e=h([l.subclass("esri.symbols.PathSymbol3DLayer")],a)}(l.declared(m))})},"esri/symbols/Symbol":function(){define(["../core/kebabDictionary","../core/JSONSupport","../Color"],function(b,e,n){b=b({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",
esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d"});var h=0;return e.createSubclass({declaredClass:"esri.symbols.Symbol",constructor:function(){this.id="sym"+h++},properties:{type:{type:String,value:null,json:{read:b.read,write:{ignoreOrigin:!0,writer:b.write}}},color:{type:n,value:new n([0,0,0,1]),json:{read:function(b){return b&&null!=b[0]?[b[0],b[1],b[2],b[3]/255]:b},write:{allowNull:!0}}}}})})},
"esri/symbols/TextSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/assignHelper ../core/lang ../core/accessorSupport/decorators ./Font ./Symbol3DLayer ./support/materialUtils ./support/Symbol3DHalo".split(" "),function(b,e,n,h,l,m,k,a,f,d,c){return function(b){function e(a){a=b.call(this)||this;a.font=null;a.halo=null;a.material=null;a.size=9;a.text=void 0;a.type="text";return a}n(e,b);f=e;e.prototype.writeFont=
function(a,b,c,d){c=l({},d,{textSymbol3D:!0});b.font=a.write({},c)};e.prototype.clone=function(){return new f({enabled:this.enabled,elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),font:this.font&&m.clone(this.font),halo:this.halo&&m.clone(this.halo),material:this.material&&this.material.clone(),size:this.size,text:this.text})};var f;h([k.property({type:a,json:{write:!0}})],e.prototype,"font",void 0);h([k.writer("font")],e.prototype,"writeFont",null);h([k.property({type:c.default,json:{write:!0}})],
e.prototype,"halo",void 0);h([k.property()],e.prototype,"material",void 0);h([k.property(d.screenSizeProperty)],e.prototype,"size",void 0);h([k.property({type:String,json:{write:!0}})],e.prototype,"text",void 0);h([k.enumeration.serializable()({Text:"text"})],e.prototype,"type",void 0);return e=f=h([k.subclass("esri.symbols.TextSymbol3DLayer")],e)}(k.declared(f))})},"esri/symbols/Font":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/screenUtils ../core/accessorSupport/decorators ../core/accessorSupport/write".split(" "),
function(b,e,n,h,l,m,k,a){return function(b){function d(a){a=b.call(this)||this;a.decoration="none";a.family="sans-serif";a.size=9;a.style="normal";a.weight="normal";return a}n(d,b);c=d;d.prototype.castSize=function(a){return m.toPt(a)};d.prototype.clone=function(){return new c({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})};var c;h([k.property({type:["underline","line-through","none"],json:{write:{overridePolicy:a.disableWriteDefaultPolicy("none")}}})],
d.prototype,"decoration",void 0);h([k.property({type:String,json:{write:!0}})],d.prototype,"family",void 0);h([k.property({type:Number,json:{write:{overridePolicy:function(a,b,c){return{enabled:!c||!c.textSymbol3D}}}}})],d.prototype,"size",void 0);h([k.cast("size")],d.prototype,"castSize",null);h([k.property({type:["normal","italic","oblique"],json:{write:{overridePolicy:a.disableWriteDefaultPolicy("normal")}}})],d.prototype,"style",void 0);h([k.property({type:["normal","bold","bolder","lighter"],
json:{write:{overridePolicy:a.disableWriteDefaultPolicy("normal")}}})],d.prototype,"weight",void 0);return d=c=h([k.subclass("esri.symbols.Font")],d)}(k.declared(l))})},"esri/symbols/support/Symbol3DHalo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators ./materialUtils".split(" "),function(b,e,n,h,l,m,k,a,f){Object.defineProperty(e,"__esModule",{value:!0});
b=function(b){function c(){var a=null!==b&&b.apply(this,arguments)||this;a.color=new l([0,0,0,1]);a.size=0;return a}n(c,b);d=c;c.prototype.clone=function(){return new d({color:k.clone(this.color),size:this.size})};var d;h([a.property(f.colorAndTransparencyProperty)],c.prototype,"color",void 0);h([a.property(f.screenSizeProperty)],c.prototype,"size",void 0);return c=d=h([a.subclass("esri.symbols.support.Symbol3DHalo")],c)}(a.declared(m));e.Symbol3DHalo=b;e.default=b})},"esri/symbols/support/StyleOrigin":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators ../../portal/Portal".split(" "),
function(b,e,n,h,l,m,k){return function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.portal=null;return b}n(b,a);d=b;b.prototype.clone=function(){return new d({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})};var d;h([m.property({type:String})],b.prototype,"name",void 0);h([m.property({type:String})],b.prototype,"styleUrl",void 0);h([m.property({type:String})],b.prototype,"styleName",void 0);h([m.property({type:k})],b.prototype,"portal",void 0);
return b=d=h([m.subclass("esri.symbols.support.StyleOrigin")],b)}(m.declared(l))})},"esri/symbols/support/Thumbnail":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators".split(" "),function(b,e,n,h,l,m){Object.defineProperty(e,"__esModule",{value:!0});b=function(b){function a(){return null!==b&&b.apply(this,arguments)||this}n(a,b);e=a;a.prototype.clone=function(){return new e({url:this.url})};
var e;h([m.property({type:String})],a.prototype,"url",void 0);return a=e=h([m.subclass("esri.symbols.support.Thumbnail")],a)}(m.declared(l));e.Thumbnail=b;e.default=b})},"esri/symbols/callouts/calloutUtils":function(){define(["require","exports","./Callout3D","./LineCallout3D"],function(b,e,n,h){function l(b){if(!b)return!1;b=b.verticalOffset;return!b||0>=b.screenLength||0>=b.maxWorldLength?!1:!0}function m(b,a,e){if(!b)return b;switch(b.type){case "line":return a=new h,a.read(b,e),a}}Object.defineProperty(e,
"__esModule",{value:!0});e.hasVisibleVerticalOffset=l;e.hasVisibleCallout=function(b){if(!b||!b.supportsCallout||!b.supportsCallout())return!1;var a=b.callout;return a&&a.visible?l(b)?!0:!1:!1};e.isCalloutSupport=function(b){return"point-3d"===b.type||"label-3d"===b.type};e.read=m;e.calloutProperty={types:{key:"type",base:n,typeMap:{line:h}},json:{read:m,write:!0}}})},"esri/symbols/callouts/Callout3D":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),
function(b,e,n,h,l,m,k){return function(a){function b(b){b=a.call(this)||this;b.visible=!0;return b}h(b,a);b.prototype.normalizeCtorArgs=function(a){a&&a.type&&(a=n({},a),delete a.type);return a};b.prototype.clone=function(){};l([k.property({type:["line"],readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],b.prototype,"type",void 0);l([k.property({readOnly:!0})],b.prototype,"visible",void 0);return b=l([k.subclass("esri.symbols.callouts.Callout3D")],b)}(k.declared(m))})},"esri/symbols/callouts/LineCallout3D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/lang ../../core/screenUtils ../../core/accessorSupport/decorators ./Callout3D ./LineCallout3DBorder ../support/materialUtils".split(" "),
function(b,e,n,h,l,m,k,a,f,d,c){return function(b){function e(a){a=b.call(this)||this;a.type="line";a.color=new l([0,0,0,1]);a.size=k.px2pt(1);a.border=null;return a}n(e,b);f=e;Object.defineProperty(e.prototype,"visible",{get:function(){return 0<this.size&&0<this.color.a},enumerable:!0,configurable:!0});e.prototype.clone=function(){return new f({color:m.clone(this.color),size:this.size,border:m.clone(this.border)})};var f;h([a.property({type:["line"]})],e.prototype,"type",void 0);h([a.property(c.colorAndTransparencyProperty)],
e.prototype,"color",void 0);h([a.property(c.screenSizeProperty)],e.prototype,"size",void 0);h([a.property({type:d.default,json:{write:!0}})],e.prototype,"border",void 0);h([a.property({dependsOn:["size","color"],readOnly:!0})],e.prototype,"visible",null);return e=f=h([a.subclass("esri.symbols.callouts.LineCallout3D")],e)}(a.declared(f))})},"esri/symbols/callouts/LineCallout3DBorder":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators ../support/materialUtils".split(" "),
function(b,e,n,h,l,m,k,a,f){Object.defineProperty(e,"__esModule",{value:!0});b=function(b){function c(){var a=null!==b&&b.apply(this,arguments)||this;a.color=new l("white");return a}n(c,b);d=c;c.prototype.clone=function(){return new d({color:k.clone(this.color)})};var d;h([a.property(f.colorAndTransparencyProperty)],c.prototype,"color",void 0);return c=d=h([a.subclass("esri.symbols.callouts.LineCallout3DBorder")],c)}(a.declared(m));e.LineCallout3DBorder=b;e.default=b})},"esri/symbols/support/Symbol3DVerticalOffset":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ./materialUtils".split(" "),
function(b,e,n,h,l,m,k){Object.defineProperty(e,"__esModule",{value:!0});b=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.screenLength=0;b.minWorldLength=0;return b}n(b,a);d=b;b.prototype.writeMinWorldLength=function(a,b,d){a&&(b[d]=a)};b.prototype.clone=function(){return new d({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})};var d;h([m.property(k.screenSizeProperty)],b.prototype,"screenLength",void 0);h([m.property({type:Number,
json:{write:!0}})],b.prototype,"minWorldLength",void 0);h([m.writer("minWorldLength")],b.prototype,"writeMinWorldLength",null);h([m.property({type:Number,json:{write:!0}})],b.prototype,"maxWorldLength",void 0);return b=d=h([m.subclass("esri.symbols.support.Symbol3DVerticalOffset")],b)}(m.declared(l));e.Symbol3DVerticalOffset=b;e.default=b})},"esri/symbols/LineSymbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Collection ../core/lang ../core/accessorSupport/decorators ./LineSymbol3DLayer ./PathSymbol3DLayer ./Symbol3D ./TextSymbol3DLayer".split(" "),
function(b,e,n,h,l,m,k,a,f,d,c){var q=l.ofType({base:null,key:"type",typeMap:{line:a,text:c,path:f}});return function(a){function b(b){b=a.call(this)||this;b.symbolLayers=new q;b.type="line-3d";return b}n(b,a);c=b;b.prototype.clone=function(){return new c({styleOrigin:m.clone(this.styleOrigin),symbolLayers:m.clone(this.symbolLayers),thumbnail:m.clone(this.thumbnail)})};var c;h([k.property({type:q})],b.prototype,"symbolLayers",void 0);h([k.enumeration.serializable()({LineSymbol3D:"line-3d"})],b.prototype,
"type",void 0);return b=c=h([k.subclass("esri.symbols.LineSymbol3D")],b)}(k.declared(d))})},"esri/symbols/MeshSymbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Collection ../core/lang ../core/accessorSupport/decorators ./FillSymbol3DLayer ./Symbol3D".split(" "),function(b,e,n,h,l,m,k,a,f){var d=l.ofType({base:null,key:"type",typeMap:{fill:a}});return function(a){function b(b){b=a.call(this)||this;b.symbolLayers=new d;b.type=
"mesh-3d";return b}n(b,a);c=b;b.prototype.clone=function(){return new c({styleOrigin:m.clone(this.styleOrigin),symbolLayers:m.clone(this.symbolLayers),thumbnail:m.clone(this.thumbnail)})};var c;h([k.property({type:d})],b.prototype,"symbolLayers",void 0);h([k.enumeration.serializable()({MeshSymbol3D:"mesh-3d"})],b.prototype,"type",void 0);return b=c=h([k.subclass("esri.symbols.MeshSymbol3D")],b)}(k.declared(f))})},"esri/symbols/PictureFillSymbol":function(){define(["../core/declare","../core/lang",
"../core/screenUtils","./FillSymbol","./support/urlUtils"],function(b,e,n,h,l){var m={xscale:1,yscale:1,xoffset:0,yoffset:0,width:12,height:12},k=b(h,{declaredClass:"esri.symbols.PictureFillSymbol",properties:{type:"picture-fill",url:l.urlPropertyDefinition,xscale:{value:1,json:{write:!0}},yscale:{value:1,json:{write:!0}},width:{value:12,cast:n.toPt,json:{write:!0}},height:{value:12,cast:n.toPt,json:{write:!0}},xoffset:{value:0,cast:n.toPt,json:{write:!0}},yoffset:{value:0,cast:n.toPt,json:{write:!0}},
source:l.sourcePropertyDefinition},getDefaults:function(){return e.mixin(this.inherited(arguments),m)},normalizeCtorArgs:function(a,b,d,c){if(a&&"string"!==typeof a&&null==a.imageData)return a;var e={};a&&(e.url=a);b&&(e.outline=b);null!=d&&(e.width=n.toPt(d));null!=c&&(e.height=n.toPt(c));return e},clone:function(){var a=new k({color:e.clone(this.color),height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,
yscale:this.yscale});a._set("source",e.clone(this.source));return a}});k.defaultProps=m;return k})},"esri/symbols/FillSymbol":function(){define(["./Symbol","./SimpleLineSymbol"],function(b,e){return b.createSubclass({declaredClass:"esri.symbols.FillSymbol",properties:{outline:{type:e,json:{read:{default:null},write:!0}},type:null}})})},"esri/symbols/SimpleLineSymbol":function(){define(["../core/declare","../core/lang","../core/screenUtils","./LineSymbol"],function(b,e,n,h){var l={STYLE_SOLID:"solid",
STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dash-dot",STYLE_DASHDOTDOT:"long-dash-dot-dot",STYLE_NULL:"none",STYLE_SHORTDASH:"short-dash",STYLE_SHORTDOT:"short-dot",STYLE_SHORTDASHDOT:"short-dash-dot",STYLE_SHORTDASHDOTDOT:"short-dash-dot-dot",STYLE_LONGDASH:"long-dash",STYLE_LONGDASHDOT:"long-dash-dot",CAP_BUTT:"butt",CAP_ROUND:"round",CAP_SQUARE:"square",JOIN_MITER:"miter",JOIN_ROUND:"round",JOIN_BEVEL:"bevel"},m={color:[0,0,0,1],style:l.STYLE_SOLID,width:.75,cap:l.CAP_ROUND,join:l.JOIN_ROUND,
miterLimit:7.5},k=b(h,{declaredClass:"esri.symbols.SimpleLineSymbol",properties:{type:"simple-line",style:{value:l.STYLE_SOLID,json:{read:function(a,b){return e.valueOf(this._jsonStyles,a)||void 0},write:function(a,b){b.style=this._jsonStyles[a]}}},cap:{value:l.CAP_ROUND,json:{write:{overridePolicy:function(a,b,d){return{enabled:"round"!==a&&(null==d||null==d.origin)}}}}},join:{value:l.JOIN_ROUND,json:{write:{overridePolicy:function(a,b,d){return{enabled:"round"!==a&&(null==d||null==d.origin)}}}}},
miterLimit:{value:7.5,cast:n.toPt,json:{read:!1,write:!1}}},_jsonStyles:{solid:"esriSLSSolid",dash:"esriSLSDash",dot:"esriSLSDot","dash-dot":"esriSLSDashDot","long-dash-dot-dot":"esriSLSDashDotDot",none:"esriSLSNull","inside-frame":"esriSLSInsideFrame","short-dash":"esriSLSShortDash","short-dot":"esriSLSShortDot","short-dash-dot":"esriSLSShortDashDot","short-dash-dot-dot":"esriSLSShortDashDotDot","long-dash":"esriSLSLongDash","long-dash-dot":"esriSLSLongDashDot"},getDefaults:function(){return e.mixin(this.inherited(arguments),
m)},normalizeCtorArgs:function(a,b,d,c,e,h){if(a&&"string"!==typeof a)return a;var f={};null!=a&&(f.style=a);null!=b&&(f.color=b);null!=d&&(f.width=n.toPt(d));null!=c&&(f.cap=c);null!=e&&(f.join=e);null!=h&&(f.miterLimit=n.toPt(h));return f},clone:function(){return new k({color:e.clone(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit})}});e.mixin(k,l);k.defaultProps=m;return k})},"esri/symbols/LineSymbol":function(){define(["../core/declare","../core/screenUtils",
"./Symbol"],function(b,e,n){return b(n,{declaredClass:"esri.symbols.LineSymbol",properties:{color:{},type:"simple-line",width:{value:.75,cast:e.toPt,json:{write:!0}}}})})},"esri/symbols/support/urlUtils":function(){define(["require","exports","../../core/urlUtils"],function(b,e,n){function h(a,b,d){return b.imageData?n.makeData({mediaType:b.contentType||"image/png",isBase64:!0,data:b.imageData}):l(b.url,d)}function l(a,b){return!b||"service"!==b.origin&&"portal-item"!==b.origin||!b.layer||"feature"!==
b.layer.type&&"stream"!==b.layer.type||n.isAbsolute(a)||!b.layer.parsedUrl?n.read(a,b):n.join(b.layer.parsedUrl.path,"images",a)}function m(a,b,d,c){n.isDataProtocol(a)?(a=n.dataComponents(a),b.contentType=a.mediaType,b.imageData=a.data,d&&d.imageData===b.imageData&&d.url&&(b.url=k(d.url,c))):b.url=k(a,c)}function k(a,b){return n.write(a,b)}Object.defineProperty(e,"__esModule",{value:!0});e.readImageDataOrUrl=h;e.read=l;e.writeImageDataAndUrl=m;e.write=k;e.urlPropertyDefinition={json:{read:{source:["imageData",
"url"],reader:h},write:{writer:function(a,b,d,c){m(a,b,this.source,c)}}}};e.sourcePropertyDefinition={readOnly:!0,json:{read:{source:["imageData","url"],reader:function(a,b,d){a={};b.imageData&&(a.imageData=b.imageData);b.contentType&&(a.contentType=b.contentType);b.url&&(a.url=l(b.url,d));return a}}}}})},"esri/symbols/PictureMarkerSymbol":function(){define(["../core/declare","../core/lang","../core/screenUtils","./MarkerSymbol","./support/urlUtils"],function(b,e,n,h,l){var m={width:12,height:12,
angle:0,xoffset:0,yoffset:0},k=b(h,{declaredClass:"esri.symbols.PictureMarkerSymbol",properties:{color:{json:{write:!1}},type:"picture-marker",url:l.urlPropertyDefinition,source:l.sourcePropertyDefinition,height:{json:{read:{source:["height","size"],reader:function(a,b){return b.size||a}},write:!0},cast:n.toPt},width:{json:{read:{source:["width","size"],reader:function(a,b){return b.size||a}},write:!0},cast:n.toPt},size:{json:{write:!1}}},getDefaults:function(){return e.mixin(this.inherited(arguments),
m)},normalizeCtorArgs:function(a,b,d){if(a&&"string"!==typeof a&&null==a.imageData)return a;var c={};a&&(c.url=a);null!=b&&(c.width=n.toPt(b));null!=d&&(c.height=n.toPt(d));return c},clone:function(){var a=new k({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});a._set("source",e.clone(this.source));return a}});k.defaultProps=m;return k})},"esri/symbols/MarkerSymbol":function(){define(["../core/declare","../core/screenUtils","./Symbol"],
function(b,e,n){return b(n,{declaredClass:"esri.symbols.MarkerSymbol",properties:{angle:{value:0,json:{read:function(b){return b&&-1*b},write:function(b,e){e.angle=b&&-1*b}}},type:{},xoffset:{value:0,cast:e.toPt,json:{write:!0}},yoffset:{value:0,cast:e.toPt,json:{write:!0}},size:{value:9,cast:function(b){return"auto"===b?b:e.toPt(b)},json:{write:!0}}}})})},"esri/symbols/PointSymbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Collection ../core/Error ../core/lang ../core/accessorSupport/decorators ./IconSymbol3DLayer ./ObjectSymbol3DLayer ./Symbol3D ./TextSymbol3DLayer ./callouts/calloutUtils ./support/Symbol3DVerticalOffset".split(" "),
function(b,e,n,h,l,m,k,a,f,d,c,q,r,x){var z=l.ofType({base:null,key:"type",typeMap:{icon:f,object:d,text:q}});return function(b){function c(a){a=b.call(this)||this;a.verticalOffset=null;a.callout=null;a.symbolLayers=new z;a.type="point-3d";return a}n(c,b);d=c;c.prototype.writeSymbolLayers=function(a,b,c,d){var e=a.filter(function(a){return"text"!==a.type});d&&d.messages&&e.length<a.length&&(a=a.find(function(a){return"text"===a.type}),d.messages.push(new m("symbol-layer:unsupported","Symbol layers of type 'text' cannot be persisted in PointSymbol3D",
{symbolLayer:a})));b[c]=e.map(function(a){return a.write({},d)}).toArray()};c.prototype.supportsCallout=function(){if(1!==(this.symbolLayers?this.symbolLayers.length:0))return!1;switch(this.symbolLayers.getItemAt(0).type){case "icon":case "text":case "object":return!0}return!1};c.prototype.hasVisibleCallout=function(){return r.hasVisibleCallout(this)};c.prototype.hasVisibleVerticalOffset=function(){return r.hasVisibleVerticalOffset(this)};c.prototype.clone=function(){return new d({verticalOffset:k.clone(this.verticalOffset),
callout:k.clone(this.callout),styleOrigin:k.clone(this.styleOrigin),symbolLayers:k.clone(this.symbolLayers),thumbnail:k.clone(this.thumbnail)})};var d;h([a.property({type:x.default,json:{write:!0}})],c.prototype,"verticalOffset",void 0);h([a.property(r.calloutProperty)],c.prototype,"callout",void 0);h([a.property({type:z})],c.prototype,"symbolLayers",void 0);h([a.writer("web-scene","symbolLayers")],c.prototype,"writeSymbolLayers",null);h([a.enumeration.serializable()({PointSymbol3D:"point-3d"})],
c.prototype,"type",void 0);return c=d=h([a.subclass("esri.symbols.PointSymbol3D")],c)}(a.declared(c))})},"esri/symbols/PolygonSymbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Collection ../core/Error ../core/lang ../core/accessorSupport/decorators ./ExtrudeSymbol3DLayer ./FillSymbol3DLayer ./IconSymbol3DLayer ./LineSymbol3DLayer ./ObjectSymbol3DLayer ./Symbol3D ./TextSymbol3DLayer".split(" "),function(b,e,n,h,l,m,k,a,f,d,
c,q,r,x,z){var v=l.ofType({base:null,key:"type",typeMap:{extrude:f,fill:d,icon:c,line:q,object:r,text:z}});return function(b){function c(a){a=b.call(this)||this;a.type="polygon-3d";return a}n(c,b);d=c;c.prototype.writeSymbolLayers=function(a,b,c,d){var e=a.filter(function(a){return"text"!==a.type});d&&d.messages&&e.length<a.length&&(a=a.find(function(a){return"text"===a.type}),d.messages.push(new m("symbol-layer:unsupported","Symbol layers of type 'text' cannot be persisted in PolygonSymbol3D",{symbolLayer:a})));
b[c]=e.map(function(a){return a.write({},d)}).toArray()};c.prototype.clone=function(){return new d({styleOrigin:k.clone(this.styleOrigin),symbolLayers:k.clone(this.symbolLayers),thumbnail:k.clone(this.thumbnail)})};c.fromJSON=function(a){var b=new d;b.read(a);if(2===b.symbolLayers.length&&"fill"===b.symbolLayers.getItemAt(0).type&&"line"===b.symbolLayers.getItemAt(1).type){var c=b.symbolLayers.getItemAt(0),e=b.symbolLayers.getItemAt(1);!e.enabled||a.symbolLayers&&a.symbolLayers[1]&&!1===a.symbolLayers[1].enable||
(c.outline={size:e.size,color:e.material.color});b.symbolLayers.removeAt(1)}return b};var d;h([a.property({type:v})],c.prototype,"symbolLayers",void 0);h([a.writer("web-scene","symbolLayers")],c.prototype,"writeSymbolLayers",null);h([a.enumeration.serializable()({PolygonSymbol3D:"polygon-3d"})],c.prototype,"type",void 0);return c=d=h([a.subclass("esri.symbols.PolygonSymbol3D")],c)}(a.declared(x))})},"esri/symbols/SimpleFillSymbol":function(){define(["../core/declare","../core/lang","./FillSymbol",
"./SimpleLineSymbol"],function(b,e,n,h){var l={style:"solid",outline:new h,color:[0,0,0,.25]},m=b(n,{declaredClass:"esri.symbols.SimpleFillSymbol",properties:{color:{},type:"simple-fill",style:{value:"solid",type:String,json:{read:function(b){return e.valueOf(this._styles,b)||void 0},write:function(b,a){a.style=this._styles[b]}}}},_styles:{solid:"esriSFSSolid",none:"esriSFSNull",horizontal:"esriSFSHorizontal",vertical:"esriSFSVertical","forward-diagonal":"esriSFSForwardDiagonal","backward-diagonal":"esriSFSBackwardDiagonal",
cross:"esriSFSCross","diagonal-cross":"esriSFSDiagonalCross"},getDefaults:function(){return e.mixin(this.inherited(arguments),l)},normalizeCtorArgs:function(b,a,e){if(b&&"string"!==typeof b)return b;var d={};b&&(d.style=b);a&&(d.outline=a);e&&(d.color=e);return d},clone:function(){return new m({color:e.clone(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}});e.mixin(m,{STYLE_SOLID:"solid",STYLE_NULL:"none",STYLE_HORIZONTAL:"horizontal",STYLE_VERTICAL:"vertical",STYLE_FORWARD_DIAGONAL:"forward-diagonal",
STYLE_BACKWARD_DIAGONAL:"backward-diagonal",STYLE_CROSS:"cross",STYLE_DIAGONAL_CROSS:"diagonal-cross"});m.defaultProps=l;return m})},"esri/symbols/SimpleMarkerSymbol":function(){define("../core/declare ../core/lang ../core/screenUtils ./MarkerSymbol ./SimpleLineSymbol ./support/simpleMarkerStyles".split(" "),function(b,e,n,h,l,m){var k={style:"circle",color:[255,255,255,.25],outline:new l,size:12,angle:0,xoffset:0,yoffset:0},a=b(h,{declaredClass:"esri.symbols.SimpleMarkerSymbol",properties:{color:{json:{write:function(a,
b){a&&"x"!==this.style&&"cross"!==this.style&&(b.color=a.toJSON())}}},type:"simple-marker",size:{value:12},style:{type:String,value:"circle",json:{read:function(a){return e.valueOf(this._styles,a)},write:function(a,b){b.style=this._styles[a]}}},path:{type:String,value:null,set:function(a){this.style="path";this._set("path",a)},json:{write:!0}},outline:{type:l,json:{write:!0}}},_styles:{circle:"esriSMSCircle",square:"esriSMSSquare",cross:"esriSMSCross",x:"esriSMSX",diamond:"esriSMSDiamond",triangle:"esriSMSTriangle",
path:"esriSMSPath"},getDefaults:function(){return e.mixin(this.inherited(arguments),k)},normalizeCtorArgs:function(a,b,c,e){if(a&&"string"!==typeof a)return a;var d={};a&&(d.style=a);null!=b&&(d.size=n.toPt(b));c&&(d.outline=c);e&&(d.color=e);return d},clone:function(){return new a({angle:this.angle,color:e.clone(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})},read:function d(a,b){return this.getInherited(d,
arguments).call(this,e.mixin({outline:null},a),b)}});e.mixin(a,m);a.defaultProps=k;return a})},"esri/symbols/support/simpleMarkerStyles":function(){define(["require","exports"],function(b,e){Object.defineProperty(e,"__esModule",{value:!0});e.STYLE_CIRCLE="circle";e.STYLE_SQUARE="square";e.STYLE_CROSS="cross";e.STYLE_X="x";e.STYLE_DIAMOND="diamond";e.STYLE_PATH="path";e.STYLE_TARGET="target"})},"esri/symbols/TextSymbol":function(){define("../core/declare ../core/lang ../core/screenUtils ../Color ./Symbol ./Font".split(" "),
function(b,e,n,h,l,m){var k={text:"",rotated:!1,kerning:!0,color:[0,0,0,1],font:{},angle:0,xoffset:0,yoffset:0,horizontalAlignment:"center"},a=b(l,{declaredClass:"esri.symbols.TextSymbol",properties:{backgroundColor:{type:h,json:{write:!0}},borderLineColor:{type:h,json:{write:!0}},borderLineSize:{type:Number,json:{write:!0}},color:{},font:{type:m,json:{write:!0}},horizontalAlignment:{value:"center",json:{write:!0}},kerning:{value:!0,json:{write:!0}},haloColor:{type:h,json:{write:!0}},haloSize:{type:Number,
cast:n.toPt,json:{write:!0}},rightToLeft:{json:{write:!0}},rotated:{value:!1,json:{write:!0}},text:{type:String,json:{write:!0}},type:"text",verticalAlignment:{type:String,json:{write:!0}},xoffset:{value:0,type:Number,cast:n.toPt,json:{write:!0}},yoffset:{value:0,type:Number,cast:n.toPt,json:{write:!0}},angle:{type:Number,value:0,json:{read:function(a){return a&&-1*a},write:function(a,b){b.angle=a&&-1*a}}},width:{json:{write:!0}}},getDefaults:function(){return e.mixin(this.inherited(arguments),k)},
normalizeCtorArgs:function(a,b,c){if(a&&"string"!==typeof a)return a;var d={};a&&(d.text=a);b&&(d.font=b);c&&(d.color=c);return d},clone:function(){return new a({angle:this.angle,backgroundColor:e.clone(this.backgroundColor),borderLineColor:e.clone(this.borderLineColor),borderLineSize:this.borderLineSize,color:e.clone(this.color),font:this.font&&this.font.clone(),haloColor:e.clone(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,rightToLeft:this.rightToLeft,
rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}});e.mixin(a,{ALIGN_START:"start",ALIGN_MIDDLE:"middle",ALIGN_END:"end",DECORATION_NONE:"none",DECORATION_UNDERLINE:"underline",DECORATION_OVERLINE:"overline",DECORATION_LINETHROUGH:"line-through"});a.defaultProps=k;return a})},"esri/symbols/WebStyleSymbol":function(){define("require exports ../core/tsSupport/extendsHelper ../core/tsSupport/decorateHelper ../core/kebabDictionary ../core/Logger ../core/promiseUtils ../core/urlUtils ../core/accessorSupport/decorators ../portal/Portal ./Symbol ./support/Thumbnail".split(" "),
function(b,e,n,h,l,m,k,a,f,d,c,q){var r=m.getLogger("esri.symbols.WebStyleSymbol"),x=l.strict()({styleSymbolReference:"web-style"});return function(c){function e(a){a=c.call(this,a)||this;a.styleName=null;a.portal=null;a.styleUrl=null;a.thumbnail=null;a.name=null;a.type="web-style";return a}n(e,c);l=e;e.prototype._readStyleUrl=function(b,c,d){return a.read(b,d)};e.prototype._writeStyleUrl=function(b,c,d,e){c.styleUrl=a.write(b,e);a.isAbsolute(c.styleUrl)&&(c.styleUrl=a.normalize(c.styleUrl))};e.prototype.read=
function(a,b){this.portal=b?b.portal:void 0;this.inherited(arguments,[a,b]);return this};e.prototype.clone=function(){return new l({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})};e.prototype.fetchSymbol=function(){var a=this;return k.create(function(a){return b(["./support/styleUtils"],a)}).then(function(b){b=b.resolveWebStyleSymbol(a,{portal:a.portal});b.catch(function(a){r.error("#fetchSymbol()","Failed to create symbol from style",a)});return b})};var l;h([f.property({json:{write:!1}})],
e.prototype,"color",void 0);h([f.property({type:String,json:{write:!0}})],e.prototype,"styleName",void 0);h([f.property({type:d,json:{write:!1}})],e.prototype,"portal",void 0);h([f.property({type:String,json:{write:!0}})],e.prototype,"styleUrl",void 0);h([f.reader("styleUrl")],e.prototype,"_readStyleUrl",null);h([f.writer("styleUrl")],e.prototype,"_writeStyleUrl",null);h([f.property({type:q.default,json:{read:!1}})],e.prototype,"thumbnail",void 0);h([f.property({type:String,json:{write:!0}})],e.prototype,
"name",void 0);h([f.property({type:x.apiValues,readOnly:!0,json:{type:x.jsonValues,read:!1,write:x.write}})],e.prototype,"type",void 0);return e=l=h([f.subclass("esri.symbols.WebStyleSymbol")],e)}(f.declared(c))})},"esri/symbols/support/symbolConversion":function(){define("require exports ../../Color ../../symbols ../../core/Error ../../core/lang ../Font ./simpleMarkerStyles".split(" "),function(b,e,n,h,l,m,k,a){function f(a){var b=a.color?a.color.clone():new n([255,255,255]),c,e,f;a instanceof h.PictureMarkerSymbol?
(a.color&&0===a.color.r&&0===a.color.g&&0===a.color.b&&(b=new n([255,255,255])),c={href:a.url},e=a.width<=a.height?a.height:a.width):(c=a.style,c in d?c=d[c]:(console.log(c+' cannot be mapped to Icon symbol. Fallback to "circle"'),c="circle"),c={primitive:c},e=a.size,a.outline&&0<a.outline.width&&(f={size:a.outline.width,color:a.outline.color?a.outline.color.clone():[255,255,255]}));return new h.PointSymbol3D(new h.IconSymbol3DLayer({size:e,resource:c,material:{color:b},outline:f}))}Object.defineProperty(e,
"__esModule",{value:!0});var d={};d[a.STYLE_CIRCLE]="circle";d[a.STYLE_CROSS]="cross";d[a.STYLE_DIAMOND]="kite";d[a.STYLE_SQUARE]="square";d[a.STYLE_X]="x";e.to3D=function(a,b,d,e){void 0===b&&(b=!1);void 0===d&&(d=!1);void 0===e&&(e=!0);if(!a)return{symbol:null};if(h.isSymbol3D(a)||a instanceof h.WebStyleSymbol)e=a.clone();else if(a instanceof h.SimpleLineSymbol)e=new h.LineSymbol3D(new h.LineSymbol3DLayer({size:a.width||1,material:{color:a.color?a.color.clone():[255,255,255]}}));else if(a instanceof
h.SimpleMarkerSymbol)e=f(a);else if(a instanceof h.PictureMarkerSymbol)e=f(a);else if(a instanceof h.SimpleFillSymbol)e=new h.FillSymbol3DLayer({material:{color:a.color?a.color.clone():[255,255,255,0]}}),a.outline&&(e.outline={size:a.outline.width||0,color:a.outline.color?a.outline.color.clone():[255,255,255]}),e=new h.PolygonSymbol3D(e);else if(a instanceof h.TextSymbol){var c;c=a.haloColor;var q=a.haloSize;c=c&&0<q?{color:m.clone(c),size:q}:null;q=a.font?a.font.clone():new k;e=new (e?h.LabelSymbol3D:
h.PointSymbol3D)(new h.TextSymbol3DLayer({size:q.size,font:q,halo:c,material:{color:a.color.clone()},text:a.text}))}else return{error:new l("symbol-conversion:unsupported-2d-symbol","2D symbol of type '"+(a.type||a.declaredClass)+"' is unsupported in 3D",{symbol:a})};b&&(e.id=a.id);if(d&&h.isSymbol3D(e))for(a=0;a<e.symbolLayers.length;++a)e.symbolLayers.getItemAt(a)._ignoreDrivers=!0;return{symbol:e}}})},"esri/symbols":function(){define("require exports ./symbols/ExtrudeSymbol3DLayer ./symbols/FillSymbol ./symbols/FillSymbol3DLayer ./symbols/Font ./symbols/IconSymbol3DLayer ./symbols/LabelSymbol3D ./symbols/LineSymbol3D ./symbols/LineSymbol3DLayer ./symbols/MarkerSymbol ./symbols/MeshSymbol3D ./symbols/ObjectSymbol3DLayer ./symbols/PathSymbol3DLayer ./symbols/PictureFillSymbol ./symbols/PictureMarkerSymbol ./symbols/PointSymbol3D ./symbols/PolygonSymbol3D ./symbols/SimpleFillSymbol ./symbols/SimpleLineSymbol ./symbols/SimpleMarkerSymbol ./symbols/Symbol ./symbols/Symbol3D ./symbols/Symbol3DLayer ./symbols/TextSymbol ./symbols/TextSymbol3DLayer ./symbols/WebStyleSymbol ./symbols/callouts/LineCallout3D ./symbols/callouts/LineCallout3DBorder ./symbols/support/Symbol3DVerticalOffset ./symbols/support/jsonUtils".split(" "),
function(b,e,n,h,l,m,k,a,f,d,c,q,r,x,z,v,w,p,y,g,u,t,A,C,B,F,D,H,aa,ga,P){Object.defineProperty(e,"__esModule",{value:!0});e.ExtrudeSymbol3DLayer=n;e.BaseFillSymbol=h;e.FillSymbol3DLayer=l;e.Font=m;e.IconSymbol3DLayer=k;e.LabelSymbol3D=a;e.LineSymbol3D=f;e.LineSymbol3DLayer=d;e.BaseMarkerSymbol=c;e.MeshSymbol3D=q;e.ObjectSymbol3DLayer=r;e.PathSymbol3DLayer=x;e.PictureFillSymbol=z;e.PictureMarkerSymbol=v;e.PointSymbol3D=w;e.PolygonSymbol3D=p;e.SimpleFillSymbol=y;e.SimpleLineSymbol=g;e.SimpleMarkerSymbol=
u;e.BaseSymbol=t;e.BaseSymbol3D=A;e.BaseSymbol3DLayer=C;e.TextSymbol=B;e.TextSymbol3DLayer=F;e.WebStyleSymbol=D;e.LineCallout3D=H;e.LineCallout3DBorder=aa;e.Symbol3DVerticalOffset=ga.Symbol3DVerticalOffset;e.fromJSON=P.fromJSON;e.isSymbol=function(a){return a instanceof e.BaseSymbol};e.isSymbol2D=function(a){if(!a)return!1;switch(a.type){case "picture-fill":case "picture-marker":case "simple-fill":case "simple-line":case "simple-marker":case "text":return!0;default:return!1}};e.isSymbol3D=function(a){if(!a)return!1;
switch(a.type){case "label-3d":case "line-3d":case "mesh-3d":case "point-3d":case "polygon-3d":return!0;default:return!1}}})},"esri/symbols/support/typeUtils":function(){define("require exports ../../core/accessorSupport/ensureType ../LabelSymbol3D ../LineSymbol3D ../MeshSymbol3D ../PictureFillSymbol ../PictureMarkerSymbol ../PointSymbol3D ../PolygonSymbol3D ../SimpleFillSymbol ../SimpleLineSymbol ../SimpleMarkerSymbol ../Symbol ../TextSymbol ../WebStyleSymbol".split(" "),function(b,e,n,h,l,m,k,a,
f,d,c,q,r,x,z,v){Object.defineProperty(e,"__esModule",{value:!0});e.types={base:x,key:"type",typeMap:{"simple-fill":c,"picture-fill":k,"picture-marker":a,"simple-line":q,"simple-marker":r,text:z,"label-3d":h,"line-3d":l,"mesh-3d":m,"point-3d":f,"polygon-3d":d,"web-style":v}};e.rendererTypes={base:x,key:"type",typeMap:{"simple-fill":c,"picture-fill":k,"picture-marker":a,"simple-line":q,"simple-marker":r,text:z,"line-3d":l,"mesh-3d":m,"point-3d":f,"polygon-3d":d,"web-style":v}};e.labelTypes={base:x,
key:"type",typeMap:{text:z,"label-3d":h}};e.types3D={base:x,key:"type",typeMap:{"label-3d":h,"line-3d":l,"mesh-3d":m,"point-3d":f,"polygon-3d":d,"web-style":v}};e.rendererTypes3D={base:x,key:"type",typeMap:{"line-3d":l,"mesh-3d":m,"point-3d":f,"polygon-3d":d,"web-style":v}};e.labelTypes3D={base:x,key:"type",typeMap:{"label-3d":h}};e.ensureType=n.ensureOneOfType(e.types)})},"esri/layers/support/Field":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ./domains ./fieldType".split(" "),
function(b,e,n,h,l,m,k,a){return function(b){function d(a){a=b.call(this)||this;a.alias=null;a.defaultValue=void 0;a.domain=null;a.editable=!0;a.length=-1;a.name=null;a.nullable=!0;a.type=null;return a}n(d,b);c=d;d.prototype.clone=function(){return new c({alias:this.alias,defaultValue:this.defaultValue,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type})};var c;h([m.property({type:String,json:{write:!0}})],d.prototype,
"alias",void 0);h([m.property({json:{write:{allowNull:!0}}})],d.prototype,"defaultValue",void 0);h([m.property({types:k.types,json:{read:{reader:k.fromJSON},write:!0}})],d.prototype,"domain",void 0);h([m.property({type:Boolean,json:{write:!0}})],d.prototype,"editable",void 0);h([m.property({type:Number,json:{write:!0}})],d.prototype,"length",void 0);h([m.property({type:String,json:{write:!0}})],d.prototype,"name",void 0);h([m.property({type:Boolean,json:{write:!0}})],d.prototype,"nullable",void 0);
h([m.property({type:String,json:{read:a.kebabDict.read,write:a.kebabDict.write}})],d.prototype,"type",void 0);return d=c=h([m.subclass("esri.layers.support.Field")],d)}(m.declared(l))})},"esri/layers/support/domains":function(){define("require exports ./CodedValueDomain ./Domain ./InheritedDomain ./RangeDomain".split(" "),function(b,e,n,h,l,m){function k(b,d){switch(b.type){case "range":var c="range"in b?b.range[1]:b.maxValue;if(+d<("range"in b?b.range[0]:b.minValue)||+d>c)return a.VALUE_OUT_OF_RANGE;
break;case "coded-value":case "codedValue":if(null==b.codedValues||b.codedValues.every(function(a){return null==a||a.code!==d}))return a.INVALID_CODED_VALUE}return null}Object.defineProperty(e,"__esModule",{value:!0});e.CodedValueDomain=n;e.DomainBase=h;e.InheritedDomain=l;e.RangeDomain=m;var a;(function(a){a.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range";a.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(a=e.DomainValidationError||(e.DomainValidationError={}));
e.isValidDomainValue=function(a,b){return null===k(a,b)};e.validateDomainValue=k;e.types={key:"type",base:e.DomainBase,typeMap:{range:e.RangeDomain,"coded-value":e.CodedValueDomain}};e.getDomainRange=function(a){if(a&&"range"===a.type)return{min:"range"in a?a.range[0]:a.minValue,max:"range"in a?a.range[1]:a.maxValue}};e.fromJSON=function(a){if(a&&a.type){if("range"===a.type)return e.RangeDomain.fromJSON(a);if("codedValue"===a.type)return e.CodedValueDomain.fromJSON(a)}return null}})},"esri/layers/support/CodedValueDomain":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/lang ../../core/accessorSupport/decorators ./Domain".split(" "),
function(b,e,n,h,l,m,k){return function(a){function b(b){b=a.call(this,b)||this;b.codedValues=null;b.type="coded-value";return b}n(b,a);d=b;b.prototype.writeCodedValues=function(a,b){var c=null;a&&(c=a.map(function(a){return l.fixJson(l.clone(a))}));b.codedValues=c};b.prototype.getName=function(a){var b=null;if(this.codedValues){var c=String(a);this.codedValues.some(function(a){String(a.code)===c&&(b=a.name);return!!b})}return b};b.prototype.clone=function(){return new d({codedValues:l.clone(this.codedValues),
name:this.name})};var d;h([m.property({json:{write:!0}})],b.prototype,"codedValues",void 0);h([m.writer("codedValues")],b.prototype,"writeCodedValues",null);h([m.enumeration.serializable()({codedValue:"coded-value"})],b.prototype,"type",void 0);return b=d=h([m.subclass("esri.layers.support.CodedValueDomain")],b)}(m.declared(k))})},"esri/layers/support/Domain":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/kebabDictionary ../../core/accessorSupport/decorators".split(" "),
function(b,e,n,h,l,m,k){var a=m({inherited:"inherited",codedValue:"coded-value",range:"range"});return function(b){function d(a){a=b.call(this,a)||this;a.name=null;a.type=null;return a}n(d,b);h([k.property({json:{write:!0}})],d.prototype,"name",void 0);h([k.property({json:{read:a.read,write:a.write}})],d.prototype,"type",void 0);return d=h([k.subclass("esri.layers.support.Domain")],d)}(k.declared(l))})},"esri/layers/support/InheritedDomain":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./Domain".split(" "),
function(b,e,n,h,l,m){return function(b){function a(a){a=b.call(this,a)||this;a.type="inherited";return a}n(a,b);e=a;a.prototype.clone=function(){return new e};var e;h([l.enumeration.serializable()({inherited:"inherited"})],a.prototype,"type",void 0);return a=e=h([l.subclass("esri.layers.support.InheritedDomain")],a)}(l.declared(m))})},"esri/layers/support/RangeDomain":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./Domain".split(" "),
function(b,e,n,h,l,m){return function(b){function a(a){a=b.call(this,a)||this;a.maxValue=null;a.minValue=null;a.type="range";return a}n(a,b);e=a;a.prototype.clone=function(){return new e({maxValue:this.maxValue,minValue:this.minValue,name:this.name})};var e;h([l.property({json:{read:{source:"range",reader:function(a,b){return b.range&&b.range[1]}},write:{target:"range",writer:function(a,b,e){b[e]=[this.minValue,a]}}}})],a.prototype,"maxValue",void 0);h([l.property({json:{read:{source:"range",reader:function(a,
b){return b.range&&b.range[0]}},write:{target:"range",writer:function(a,b,e){b[e]=[a,this.maxValue]}}}})],a.prototype,"minValue",void 0);h([l.enumeration.serializable()({range:"range"})],a.prototype,"type",void 0);return a=e=h([l.subclass("esri.layers.support.RangeDomain")],a)}(l.declared(m))})},"esri/layers/support/fieldType":function(){define(["require","exports","../../core/kebabDictionary"],function(b,e,n){Object.defineProperty(e,"__esModule",{value:!0});e.kebabDict=n({esriFieldTypeSmallInteger:"small-integer",
esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"})})},"esri/geometry/support/graphicsUtils":function(){define(["require","exports","../../core/Collection","../Extent"],function(b,e,n,h){Object.defineProperty(e,
"__esModule",{value:!0});e.graphicsExtent=function(b){if(!b||!b.length)return null;var e=n.isCollection(b)?b.getItemAt(0).geometry:b[0].geometry,k=e.extent,a=e;null===k&&(k=new h(a.x,a.y,a.x,a.y,e.spatialReference));for(var f=1;f<b.length;f++){var a=e=n.isCollection(b)?b.getItemAt(f).geometry:b[f].geometry,d=e.extent;null===d&&(d=new h(a.x,a.y,a.x,a.y,e.spatialReference));k=k.clone().union(d)}return 0>k.width&&0>k.height?null:k};e.getGeometries=function(b){return b.map(function(b){return b.geometry})};
e._encodeGraphics=function(b,e){var h=[];b.forEach(function(a,b){a=a.toJSON();var d={};if(a.geometry){var c=e&&e[b];d.geometry=c&&c.toJSON()||a.geometry}a.attributes&&(d.attributes=a.attributes);h[b]=d});return h}})},"esri/tasks/support/Query":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../geometry ../../TimeExtent ../../core/JSONSupport ../../core/kebabDictionary ../../core/lang ../../core/accessorSupport/decorators ../../geometry/support/jsonUtils ../../geometry/support/typeUtils ../../symbols/support/jsonUtils ../../symbols/support/typeUtils ./QuantizationParameters ./StatisticDefinition".split(" "),
function(b,e,n,h,l,m,k,a,f,d,c,q,r,x,z,v){var w=a({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),p=a({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",
esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});return function(a){function b(b){b=a.call(this,b)||this;b.datumTransformation=null;b.distance=void 0;b.gdbVersion=null;b.geometry=null;b.geometryPrecision=void 0;b.groupByFieldsForStatistics=null;b.having=null;b.historicMoment=null;b.maxAllowableOffset=void 0;b.maxRecordCountFactor=1;b.multipatchOption=null;b.num=void 0;b.objectIds=null;b.orderByFields=null;b.outFields=null;b.outSpatialReference=null;b.outStatistics=
null;b.parameterValues=null;b.pixelSize=null;b.quantizationParameters=null;b.rangeValues=null;b.relationParameter=null;b.resultType=null;b.returnDistinctValues=!1;b.returnGeometry=!1;b.returnCentroid=!1;b.returnExceededLimitFeatures=!0;b.returnM=void 0;b.returnZ=void 0;b.source=null;b.spatialRelationship="intersects";b.start=void 0;b.sqlFormat=null;b.text=null;b.timeExtent=null;b.units="meters";b.where=null;return b}n(b,a);e=b;b.prototype.castDatumTransformation=function(a){return"number"===typeof a||
"object"===typeof a?a:null};b.prototype.writeHistoricMoment=function(a,b,c){b.historicMoment=a&&a.getTime()};b.prototype.writeParameterValues=function(a,b,c){if(a){c={};for(var d in a){var e=a[d];Array.isArray(e)?c[d]=e.map(function(a){return a instanceof Date?a.getTime():a}):c[d]=e instanceof Date?e.getTime():e}b.parameterValues=c}};b.prototype.writeStart=function(a,b,c){b.resultOffset=this.start;b.resultRecordCount=this.num||10;b.where="1\x3d1"};b.prototype.writeWhere=function(a,b,c){b.where=a||
"1\x3d1"};b.prototype.clone=function(){return new e(f.clone({datumTransformation:this.datumTransformation,distance:this.distance,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,
num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,
returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnM:this.returnM,returnZ:this.returnZ,source:this.source,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.text,text:this.text,timeExtent:this.timeExtent,units:this.units,where:this.where}))};var e;h([d.property({json:{write:!0}})],b.prototype,"datumTransformation",void 0);h([d.cast("datumTransformation")],b.prototype,"castDatumTransformation",null);h([d.property({type:Number,json:{write:!0}})],b.prototype,
"distance",void 0);h([d.property({type:String,json:{write:!0}})],b.prototype,"gdbVersion",void 0);h([d.property({types:q.types,json:{read:c.fromJSON,write:!0}})],b.prototype,"geometry",void 0);h([d.property({type:Number,json:{write:!0}})],b.prototype,"geometryPrecision",void 0);h([d.property({type:[String],json:{write:!0}})],b.prototype,"groupByFieldsForStatistics",void 0);h([d.property({type:String,json:{write:!0}})],b.prototype,"having",void 0);h([d.property({type:Date})],b.prototype,"historicMoment",
void 0);h([d.writer("historicMoment")],b.prototype,"writeHistoricMoment",null);h([d.property({type:Number,json:{write:!0}})],b.prototype,"maxAllowableOffset",void 0);h([d.property({type:Number,cast:function(a){return 1>a?1:5<a?5:a},json:{write:{overridePolicy:function(a){return{enabled:1<a}}}}})],b.prototype,"maxRecordCountFactor",void 0);h([d.property({type:String,json:{write:!0}})],b.prototype,"multipatchOption",void 0);h([d.property({type:Number,json:{read:{source:"resultRecordCount"}}})],b.prototype,
"num",void 0);h([d.property({type:[Number],json:{write:!0}})],b.prototype,"objectIds",void 0);h([d.property({type:[String],json:{write:!0}})],b.prototype,"orderByFields",void 0);h([d.property({type:[String],json:{write:!0}})],b.prototype,"outFields",void 0);h([d.property({type:l.SpatialReference,json:{read:{source:"outSR"},write:{target:"outSR"}}})],b.prototype,"outSpatialReference",void 0);h([d.property({type:[v],json:{write:!0}})],b.prototype,"outStatistics",void 0);h([d.property({json:{write:!0}})],
b.prototype,"parameterValues",void 0);h([d.writer("parameterValues")],b.prototype,"writeParameterValues",null);h([d.property({types:x.types,json:{read:r.read,write:!0}})],b.prototype,"pixelSize",void 0);h([d.property({type:z.default,json:{write:!0}})],b.prototype,"quantizationParameters",void 0);h([d.property({type:[Object],json:{write:!0}})],b.prototype,"rangeValues",void 0);h([d.property({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy:function(a){return{enabled:"relation"===
this.spatialRelationship}}}}})],b.prototype,"relationParameter",void 0);h([d.property({type:String,json:{write:!0}})],b.prototype,"resultType",void 0);h([d.property({type:Boolean,json:{write:{overridePolicy:function(a){return{enabled:a}}}}})],b.prototype,"returnDistinctValues",void 0);h([d.property({type:Boolean,json:{write:!0}})],b.prototype,"returnGeometry",void 0);h([d.property({type:Boolean,json:{write:{overridePolicy:function(a){return{enabled:a}}}}})],b.prototype,"returnCentroid",void 0);h([d.property({type:Boolean,
json:{write:{overridePolicy:function(a){return{enabled:!a}}}}})],b.prototype,"returnExceededLimitFeatures",void 0);h([d.property({type:Boolean,json:{write:{overridePolicy:function(a){return{enabled:a}}}}})],b.prototype,"returnM",void 0);h([d.property({type:Boolean,json:{write:{overridePolicy:function(a){return{enabled:a}}}}})],b.prototype,"returnZ",void 0);h([d.property({json:{write:!0}})],b.prototype,"source",void 0);h([d.property({type:String,json:{read:{source:"spatialRel",reader:w.read},write:{target:"spatialRel",
writer:w.write}}})],b.prototype,"spatialRelationship",void 0);h([d.property({type:Number,json:{read:{source:"resultOffset"}}})],b.prototype,"start",void 0);h([d.writer("start"),d.writer("num")],b.prototype,"writeStart",null);h([d.property({type:String,json:{write:!0}})],b.prototype,"sqlFormat",void 0);h([d.property({type:String,json:{write:!0}})],b.prototype,"text",void 0);h([d.property({type:m,json:{write:!0}})],b.prototype,"timeExtent",void 0);h([d.property({type:String,json:{read:p.read,write:{writer:p.write,
overridePolicy:function(a){return{enabled:0<this.distance}}}}})],b.prototype,"units",void 0);h([d.property({type:String,json:{write:{overridePolicy:function(a){return{enabled:null!=a||0<this.start}}}}})],b.prototype,"where",void 0);h([d.writer("where")],b.prototype,"writeWhere",null);return b=e=h([d.subclass("esri.tasks.support.Query")],b)}(d.declared(k))})},"esri/TimeExtent":function(){define("require exports ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./core/JSONSupport ./core/accessorSupport/decorators".split(" "),
function(b,e,n,h,l,m){var k={milliseconds:{getter:"getUTCMilliseconds",setter:"setUTCMilliseconds",multiplier:1},seconds:{getter:"getUTCSeconds",setter:"setUTCSeconds",multiplier:1},minutes:{getter:"getUTCMinutes",setter:"setUTCMinutes",multiplier:1},hours:{getter:"getUTCHours",setter:"setUTCHours",multiplier:1},days:{getter:"getUTCDate",setter:"setUTCDate",multiplier:1},weeks:{getter:"getUTCDate",setter:"setUTCDate",multiplier:7},months:{getter:"getUTCMonth",setter:"setUTCMonth",multiplier:1},years:{getter:"getUTCFullYear",
setter:"setUTCFullYear",multiplier:1},decades:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:10},centuries:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:100}};return function(a){function b(b,d){b=a.call(this)||this;b.endTime=null;b.startTime=null;return b}n(b,a);d=b;b.prototype.normalizeCtorArgs=function(a,b){return!a||a instanceof Date?{startTime:a,endTime:b}:a};b.prototype.readEndTime=function(a,b){return null!=b.endTime?new Date(b.endTime):null};b.prototype.writeEndTime=
function(a,b,d){b.endTime=a?a.getTime():null};b.prototype.readStartTime=function(a,b){return null!=b.startTime?new Date(b.startTime):null};b.prototype.writeStartTime=function(a,b,d){b.startTime=a?a.getTime():null};b.prototype.clone=function(){return new d({endTime:this.endTime,startTime:this.startTime})};b.prototype.intersection=function(a){if(!a)return null;var b=this.startTime?this.startTime.getTime():-Infinity,c=this.endTime?this.endTime.getTime():Infinity,e=a.startTime?a.startTime.getTime():-Infinity;
a=a.endTime?a.endTime.getTime():Infinity;var f,h;e>=b&&e<=c?f=e:b>=e&&b<=a&&(f=b);c>=e&&c<=a?h=c:a>=b&&a<=c&&(h=a);if(isNaN(f)||isNaN(h))return null;b=new d;b.startTime=-Infinity===f?null:new Date(f);b.endTime=Infinity===h?null:new Date(h);return b};b.prototype.offset=function(a,b){var c=new d,e=this.startTime,f=this.endTime;e&&(c.startTime=this._offsetDate(e,a,b));f&&(c.endTime=this._offsetDate(f,a,b));return c};b.prototype._offsetDate=function(a,b,d){a=new Date(a.getTime());b&&d&&(d=k[d],a[d.setter](a[d.getter]()+
b*d.multiplier));return a};var d;h([m.property({type:Date,json:{write:{allowNull:!0}}})],b.prototype,"endTime",void 0);h([m.reader("endTime")],b.prototype,"readEndTime",null);h([m.writer("endTime")],b.prototype,"writeEndTime",null);h([m.property({type:Date,json:{write:{allowNull:!0}}})],b.prototype,"startTime",void 0);h([m.reader("startTime")],b.prototype,"readStartTime",null);h([m.writer("startTime")],b.prototype,"writeStartTime",null);return b=d=h([m.subclass("esri.TimeExtent")],b)}(m.declared(l))})},
"esri/tasks/support/QuantizationParameters":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../geometry ../../core/JSONSupport ../../core/kebabDictionary ../../core/lang ../../core/accessorSupport/decorators".split(" "),function(b,e,n,h,l,m,k,a,f){Object.defineProperty(e,"__esModule",{value:!0});var d=k({upperLeft:"upper-left",lowerLeft:"lower-left"});b=function(b){function c(){var a=null!==b&&b.apply(this,arguments)||this;a.extent=
null;a.mode="view";a.originPosition="upper-left";return a}n(c,b);e=c;c.prototype.clone=function(){return new e(a.clone({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))};var e;h([f.property({type:l.Extent,json:{write:!0}})],c.prototype,"extent",void 0);h([f.property({type:String,json:{write:!0}})],c.prototype,"mode",void 0);h([f.property({type:String,json:{read:d.read,write:d.write}})],c.prototype,"originPosition",void 0);h([f.property({type:Number,
json:{write:!0}})],c.prototype,"tolerance",void 0);return c=e=h([f.subclass("esri.tasks.support.QuantizationParameters")],c)}(f.declared(m));e.default=b})},"esri/tasks/support/StatisticDefinition":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(b,e,n,h,l,m){return function(b){function a(a){a=b.call(this)||this;a.maxPointCount=void 0;a.maxRecordCount=void 0;
a.maxVertexCount=void 0;a.onStatisticField=null;a.outStatisticFieldName=null;a.statisticType=null;return a}n(a,b);e=a;a.prototype.clone=function(){return new e({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType})};var e;h([m.property({type:Number,json:{write:!0}})],a.prototype,"maxPointCount",void 0);h([m.property({type:Number,
json:{write:!0}})],a.prototype,"maxRecordCount",void 0);h([m.property({type:Number,json:{write:!0}})],a.prototype,"maxVertexCount",void 0);h([m.property({type:String,json:{write:!0}})],a.prototype,"onStatisticField",void 0);h([m.property({type:String,json:{write:!0}})],a.prototype,"outStatisticFieldName",void 0);h([m.property({type:String,json:{write:!0}})],a.prototype,"statisticType",void 0);return a=e=h([m.subclass("esri.tasks.support.StatisticDefinition")],a)}(m.declared(l))})},"esri/tasks/support/RelationshipQuery":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../geometry ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators".split(" "),
function(b,e,n,h,l,m,k,a){return function(b){function d(a){a=b.call(this,a)||this;a.definitionExpression=null;a.gdbVersion=null;a.geometryPrecision=void 0;a.historicMoment=null;a.maxAllowableOffset=void 0;a.objectIds=null;a.outFields=null;a.outSpatialReference=null;a.relationshipId=void 0;a.returnGeometry=!1;a.source=null;return a}n(d,b);c=d;d.prototype._writeHistoricMoment=function(a,b){b.historicMoment=a&&a.getTime()};d.prototype.clone=function(){return new c(k.clone({definitionExpression:this.definitionExpression,
gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&this.historicMoment.getTime(),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,returnGeometry:this.returnGeometry,source:this.source}))};var c;h([a.property({type:String,json:{write:!0}})],d.prototype,"definitionExpression",void 0);h([a.property({type:String,json:{write:!0}})],
d.prototype,"gdbVersion",void 0);h([a.property({type:Number,json:{write:!0}})],d.prototype,"geometryPrecision",void 0);h([a.property({type:Date})],d.prototype,"historicMoment",void 0);h([a.writer("historicMoment")],d.prototype,"_writeHistoricMoment",null);h([a.property({type:Number,json:{write:!0}})],d.prototype,"maxAllowableOffset",void 0);h([a.property({type:[Number],json:{write:!0}})],d.prototype,"objectIds",void 0);h([a.property({type:[String],json:{write:!0}})],d.prototype,"outFields",void 0);
h([a.property({type:l.SpatialReference,json:{read:{source:"outSR"},write:{target:"outSR"}}})],d.prototype,"outSpatialReference",void 0);h([a.property({json:{write:!0}})],d.prototype,"relationshipId",void 0);h([a.property({json:{write:!0}})],d.prototype,"returnGeometry",void 0);h([a.property({json:{write:!0}})],d.prototype,"source",void 0);return d=c=h([a.subclass("esri.tasks.support.RelationshipQuery")],d)}(a.declared(m))})},"esri/layers/graphics/sources/MemorySource":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../geometry ../../../Graphic ../../../core/Accessor ../../../core/Collection ../../../core/Error ../../../core/has ../../../core/kebabDictionary ../../../core/Loadable ../../../core/Logger ../../../core/requireUtils ../../../core/workers ../../../core/accessorSupport/decorators ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/typescript ../../../tasks/support/FeatureSet module".split(" "),
function(b,e,n,h,l,m,k,a,f,d,c,q,r,x,z,v,w,p,y,g){function u(a){var b=a.geometry;a=a.attributes;return{geometry:b&&"mesh"!==b.type?b&&b.toJSON():null,attributes:a}}Object.defineProperty(e,"__esModule",{value:!0});var t=c({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),A=r.getLogger("esri.layers.graphics.sources.MemorySource");k=function(a){function c(){return null!==a&&a.apply(this,arguments)||
this}n(c,a);c.prototype.load=function(){var a=this;this.addResolvingPromise(z.open(x.getAbsMid("./support/MemorySourceWorker",b,g),{client:this,strategy:d("esri-workers-for-memory-layers")?"dedicated":"local"}).then(function(b){a._connection=b;var c=a.layer,d=c.fields,e=c.spatialReference,f=c.geometryType,g=c.objectIdField,h=c.hasM,c=c.hasZ;return b.invoke("load",{features:a.items.map(u),fields:d&&d.map(function(a){return a.toJSON()}),geometryType:t.toJSON(f),hasM:h,hasZ:c,objectIdField:g,spatialReference:e&&
e.toJSON()}).then(function(b){b.featureErrors.length&&A.warn("Encountered "+b.featureErrors.length+" validation errors while loading features",b.featureErrors);a.layerDefinition=b.layerDefinition})}));return this.when()};c.prototype.applyEdits=function(a){var b=this;return this.load().then(function(){return b._applyEdits(a)})};c.prototype.openPorts=function(){var a=this;return this.load().then(function(){return a._connection.openPorts()})};c.prototype.queryFeatures=function(a){return this.queryFeaturesJSON(a).then(function(a){return y.fromJSON(a)})};
c.prototype.queryFeaturesJSON=function(a){var b=this;return this.load().then(function(){return b._connection.invoke("queryFeatures",a?a.toJSON():null)})};c.prototype.queryFeatureCount=function(a){var b=this;return this.load().then(function(){return b._connection.invoke("queryFeatureCount",a?a.toJSON():null)})};c.prototype.queryObjectIds=function(a){var b=this;return this.load().then(function(){return b._connection.invoke("queryObjectIds",a?a.toJSON():null)})};c.prototype.queryExtent=function(a){var b=
this;return this.load().then(function(){return b._connection.invoke("queryExtent",a?a.toJSON():null)}).then(function(a){return{count:a.count,extent:l.Extent.fromJSON(a.extent)}})};c.prototype._applyEdits=function(a){var b=this;if(!this._connection)throw new f("feature-layer-source:edit-failure","Memory source not loaded");var c=this.layer.objectIdField,d=[],e=[],g=[];if(a.addFeatures)for(var h=0,k=a.addFeatures;h<k.length;h++){var l=k[h];d.push(u(l))}if(a.deleteFeatures)for(l=0,h=a.deleteFeatures;l<
h.length;l++)k=h[l],"objectId"in k&&null!=k.objectId?e.push(k.objectId):"attributes"in k&&null!=k.attributes[c]&&e.push(k.attributes[c]);if(a.updateFeatures)for(c=0,a=a.updateFeatures;c<a.length;c++)l=a[c],g.push(u(l));return this._connection.invoke("applyEdits",{adds:d,updates:g,deletes:e}).then(function(a){var c=a.featureEditResults;b.fullExtent=a.fullExtent;return b._createEditsResult(c)})};c.prototype._createEditsResult=function(a){return{addFeatureResults:a.addResults?a.addResults.map(this._createFeatureEditResult,
this):[],updateFeatureResults:a.updateResults?a.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:a.deleteResults?a.deleteResults.map(this._createFeatureEditResult,this):[]}};c.prototype._createFeatureEditResult=function(a){var b=!0===a.success?null:a.error||{code:void 0,description:void 0};return{objectId:a.objectId,globalId:a.globalId,error:b?new f("feature-layer-source:edit-failure",b.description,{code:b.code}):null}};h([p.shared({Type:m,ensureType:w.ensureType(m)})],
c.prototype,"itemType",void 0);h([v.property({constructOnly:!0})],c.prototype,"layer",void 0);h([v.property()],c.prototype,"layerDefinition",void 0);return c=h([v.subclass("esri.layers.graphics.sources.MemorySource")],c)}(v.declared(k,a,q));e.MemorySource=k;e.default=k})},"esri/core/requireUtils":function(){define(["require","exports","./promiseUtils"],function(b,e,n){function h(b,e){return Array.isArray(e)?n.create(function(h){b(e,function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];
h(a)})}):h(b,[e]).then(function(b){return b[0]})}Object.defineProperty(e,"__esModule",{value:!0});e.when=h;e.getAbsMid=function(b,e,h){return e.toAbsMid?e.toAbsMid(b):h.id.replace(/\/[^\/]*$/gi,"/")+b}})},"esri/core/workers":function(){define(["require","exports","./workers/workers"],function(b,e,n){Object.defineProperty(e,"__esModule",{value:!0});for(var h in n)e.hasOwnProperty(h)||(e[h]=n[h])})},"esri/core/workers/workers":function(){define("require exports dojo/sniff dojo/promise/all ../Logger ../promiseUtils ./Connection ./RemoteClient ./WorkerOwner".split(" "),
function(b,e,n,h,l,m,k,a,f){function d(){if(v)return v;for(var a=c+q,b=[],d=function(a){var c=f.create(a).then(function(b){return z[a]=b});b.push(c)},e=0;e<a;e++)d(e);return v=h(b).then(function(){})}Object.defineProperty(e,"__esModule",{value:!0});e.Connection=k;e.RemoteClient=a;(k=n("host-browser")?navigator.hardwareConcurrency:0)||(k=n("safari")&&n("mac")||n("trident")?8:2);var c=n("esri-workers-debug")?1:Math.max(1,Math.ceil(k/2)),q=n("esri-workers-debug")?1:Math.max(1,Math.floor(k/2)),r=l.getLogger("esri.core.workers"),
x=0,z=[];e.initialize=function(){d()};e.open=function(a,f,h){void 0===f&&(f={});if(Array.isArray(a))return new e.Connection(a.map(function(a){return new e.RemoteClient(a,f.client)}));if("string"!==typeof a){r.warn("workers-open:signature-deprecated","DEPRECATED: workers.open() changed signature.");var g=a;a=f;f={client:g,strategy:h?"dedicated":"distributed"}}var k=f.strategy||"distributed";return"local"===k?m.create(function(c){b([a],function(a){c(e.RemoteClient.connect(a))})}).then(function(a){return new e.Connection([new e.RemoteClient(a,
f.client)])}):d().then(function(){if("dedicated"===k){var b=c+x++;x%=q;return z[b].open(a).then(function(a){return new e.Connection([new e.RemoteClient(a,f.client)])})}return m.all(z.map(function(b){return b.open(a)})).then(function(a){return new e.Connection(a.map(function(a){return new e.RemoteClient(a,f.client)}))})})};e.terminate=function(){v&&(v.cancel(),v=null);for(var a=0;a<z.length;a++)z[a]&&z[a].terminate();z.length=0};var v=null})},"esri/core/workers/Connection":function(){define(["require",
"exports","../promiseUtils"],function(b,e,n){return function(){function b(b){this._clientIdx=0;this._clients=b}b.prototype.broadcast=function(b,e){for(var h=[],a=0,f=this._clients;a<f.length;a++)h.push(f[a].invoke(b,e));return h};b.prototype.close=function(){for(var b=0,e=this._clients;b<e.length;b++)e[b].close();this._clients=[]};b.prototype.invoke=function(b,e,h,a){var f=a&&a.client;if(!this._clients||!this._clients.length)return n.reject(Error("Connection closed"));null!=f&&-1!==this._clients.indexOf(f)||
this._clients.some(function(a){return a.isBusy()?!1:(f=a,!0)})||(this._clientIdx=(this._clientIdx+1)%this._clients.length,f=this._clients[this._clientIdx]);b=f.invoke(b,e,h);a&&(a.client=f);return b};b.prototype.openPorts=function(){return n.all(this._clients.map(function(b){return b.openPort()}))};return b}()})},"esri/core/workers/RemoteClient":function(){define(["require","exports","../Error","../promiseUtils","./utils"],function(b,e,n,h,l){function m(a,b){a["delete"](b)}var k=l.MessageType.CLOSE,
a=l.MessageType.CANCEL,f=l.MessageType.INVOKE,d=l.MessageType.RESPONSE,c=l.MessageType.OPEN_PORT,q=function(){function a(a){this._timer=null;this._cancelledJobIds=new Set;this._invokeMessages=[];this._invoke=a;this._timer=null;this._process=this._process.bind(this)}a.prototype.push=function(a){a.type===l.MessageType.CANCEL?this._cancelledJobIds.add(a.jobId):(this._invokeMessages.push(a),null===this._timer&&(this._timer=setTimeout(this._process,0)))};a.prototype.clear=function(){this._invokeMessages.length=
0;this._cancelledJobIds.clear();this._timer=null};a.prototype._process=function(){this._timer=null;for(var a=0,b=this._invokeMessages;a<b.length;a++){var c=b[a];this._cancelledJobIds.has(c.jobId)||this._invoke(c)}this._cancelledJobIds.clear();this._invokeMessages.length=0};return a}();return function(){function b(a,b,c){this._outJobs=new Map;this._inJobs=new Map;this._queue=new q(this._onInvoke.bind(this));this._onMessage=this._onMessage.bind(this);this._client=b;this._port=a;this._port.addEventListener("message",
this._onMessage);this._port.start();this._channel=c}b.connect=function(a){var c=new MessageChannel;a="function"===typeof a?new a:"default"in a&&"function"===typeof a.default?new a.default:a;a.remoteClient=new b(c.port1,a,c);return c.port2};b.prototype.close=function(){this._post({type:k});this._close()};b.prototype.isBusy=function(){return 0<this._outJobs.size};b.prototype.invoke=function(b,c,d){var e=this;if(!this._port)return h.reject(new n("remote-client:port-closed","Can't invoke(), port is closed"));
var k=l.newJobId(),q=function(){m(e._outJobs,k);e._post({type:a,jobId:k})};return h.create(function(a,h){e._outJobs.set(k,{resolve:a,reject:h,cancel:q});e._post({type:f,jobId:k,methodName:b},c,d)},q)};b.prototype.openPort=function(){var b=this,d=l.newJobId(),e=function(){m(b._outJobs,d);b._post({type:a,jobId:d})};return h.create(function(a,f){b._outJobs.set(d,{resolve:a,reject:f,cancel:e});b._post({type:c,jobId:d})},e)};b.prototype._close=function(){this._channel&&(this._channel=null);this._port.removeEventListener("message",
this._onMessage);this._port.close();this._outJobs.forEach(function(a){a.cancel()});this._inJobs.clear();this._outJobs.clear();this._queue.clear();this._port=this._client=null};b.prototype._onMessage=function(b){if(b=l.receiveMessage(b))switch(b.type){case d:this._onResponse(b);break;case f:this._queue.push(b);break;case a:this._onCancel(b);break;case k:this._close();break;case c:this._onOpenPort(b)}};b.prototype._onCancel=function(a){var b=this._inJobs,c=a.jobId,d=b.get(c);this._queue.push(a);d&&
(m(b,c),d.cancel())};b.prototype._onInvoke=function(a){var b=this,c=a.methodName,e=a.jobId;a=a.data;var f=this._inJobs,k=this._client,g=k[c],q;try{if(!g&&c&&-1!==c.indexOf("."))for(var n=c.split("."),r=0;r<n.length-1;r++)k=k[n[r]],g=k[n[r+1]];if("function"!==typeof g)throw new TypeError(c+" is not a function");q=g.call(k,a,this)}catch(C){this._post({type:d,jobId:e,error:l.toInvokeError(C)});return}h.isThenable(q)?(f.set(e,q),q.then(function(a){f.has(e)&&(m(f,e),b._post({type:d,jobId:e},a))}).catch(function(a){f.has(e)&&
(m(f,e),a&&"cancel"===a.dojoType||b._post({type:d,jobId:e,error:l.toInvokeError(a||{message:"Error encountered at method "+c})}))})):this._post({type:d,jobId:e},q)};b.prototype._onOpenPort=function(a){var c=new MessageChannel;new b(c.port1,this._client);this._post({type:d,jobId:a.jobId},c.port2,[c.port2])};b.prototype._onResponse=function(a){var b=a.jobId,c=a.error;a=a.data;var d=this._outJobs;if(d.has(b)){var e=d.get(b);m(d,b);c?e.reject(n.fromJSON(JSON.parse(c))):e.resolve(a)}};b.prototype._post=
function(a,b,c){return l.postMessage(this._port,a,b,c)};return b}()})},"esri/core/workers/utils":function(){define(["require","exports","dojo/has"],function(b,e,n){function h(b){return b&&"object"===typeof b&&("result"in b||"transferList"in b)}function l(b){return b instanceof ArrayBuffer||b&&b.constructor&&"ArrayBuffer"===b.constructor.name}Object.defineProperty(e,"__esModule",{value:!0});(function(b){b[b.HANDSHAKE=0]="HANDSHAKE";b[b.CONFIGURE=1]="CONFIGURE";b[b.CONFIGURED=2]="CONFIGURED";b[b.OPEN=
3]="OPEN";b[b.OPENED=4]="OPENED";b[b.RESPONSE=5]="RESPONSE";b[b.INVOKE=6]="INVOKE";b[b.CANCEL=7]="CANCEL";b[b.CLOSE=8]="CLOSE";b[b.OPEN_PORT=9]="OPEN_PORT"})(e.MessageType||(e.MessageType={}));var m=0;e.newJobId=function(){return m++};e.isTranferableResult=h;e.toInvokeError=function(b){return b?b.toJSON?JSON.stringify(b):JSON.stringify({name:b.name,message:b.message,details:b.details,stack:b.stack}):null};e.postMessage=function(b,a,e,d){2===arguments.length||void 0===e&&void 0===d?b.postMessage(a):
(n("esri-workers-arraybuffer-transfer")||(d?(d=d.filter(function(a){return!l(a)}),d.length||(d=null)):h(e)&&e.transferList&&(e.transferList=e.transferList.filter(function(a){return!l(a)}),e.transferList.length||(e.transferList=null))),d?(a.data=e,b.postMessage(a,d)):h(e)?(a.data=e.result,e.transferList?b.postMessage(a,e.transferList):b.postMessage(a)):(a.data=e,b.postMessage(a)))};e.receiveMessage=function(b){return b?(b=b.data)?"string"===typeof b?JSON.parse(b):b:null:null}})},"esri/core/workers/WorkerOwner":function(){define("require exports ../../kernel ../Error ../Logger ../promiseUtils ./utils ./workerFactory".split(" "),
function(b,e,n,h,l,m,k,a){var f=l.getLogger("esri.core.workers"),d=k.MessageType.CANCEL,c=k.MessageType.INVOKE,q=k.MessageType.OPEN,r=k.MessageType.OPENED,x=k.MessageType.RESPONSE;return function(){function b(a,b){this._outJobs=new Map;this._inJobs=new Map;this.worker=a;this.id=b;a.addEventListener("message",this._onMessage.bind(this));a.addEventListener("error",function(a){a.preventDefault();f.error(a)})}b.create=function(c){return a.createWorker().then(function(a){return new b(a,c)})};b.prototype.terminate=
function(){this.worker.terminate()};b.prototype.open=function(a){var b=this,c=k.newJobId(),e=function(){b._outJobs["delete"](c);b._post({type:d,jobId:c})};return m.create(function(d,f){b._outJobs.set(c,{resolve:d,reject:f,cancel:e});b._post({type:q,jobId:c,modulePath:a})},e)};b.prototype._onMessage=function(a){if(a=k.receiveMessage(a))switch(a.type){case r:case x:this._onResponse(a);break;case d:this._onCancel(a);break;case c:this._onInvoke(a)}};b.prototype._onCancel=function(a){(a=this._inJobs.get(a.jobId))&&
a.cancel()};b.prototype._onInvoke=function(a){var b=this,c=a.methodName,d=a.jobId;a=a.data;var e=this._inJobs,f=n.workerMessages[c],h;try{if("function"!==typeof f)throw new TypeError(c+" is not a function");h=f.call(null,a)}catch(A){this._post({type:x,jobId:d,error:k.toInvokeError(A)});return}m.isThenable(h)?(e.set(d,h),h.then(function(a){e["delete"](d);b._post({type:x,jobId:d},a)}).catch(function(a){e["delete"](d);a||(a={message:"Error encountered at method"+c});a.dojoType&&"cancel"===a.dojoType||
b._post({type:x,jobId:d,error:k.toInvokeError(a)})})):this._post({type:x,jobId:d},h)};b.prototype._onResponse=function(a){var b=a.jobId,c=a.error;a=a.data;var d=this._outJobs.get(b);d&&(this._outJobs["delete"](b),c?d.reject(h.fromJSON(JSON.parse(c))):d.resolve(a))};b.prototype._post=function(a,b,c){return k.postMessage(this.worker,a,b,c)};return b}()})},"esri/core/workers/workerFactory":function(){define("require exports ../tsSupport/assignHelper dojo/_base/kernel ../../config ../../request ../has ../Logger ../promiseUtils ../urlUtils ./loaderConfig ./utils ./WorkerFallback".split(" "),
function(b,e,n,h,l,m,k,a,f,d,c,q,r){function x(a){return f.create(function(b){function d(f){if(f=q.receiveMessage(f))switch(f.type){case u:f=a;var m=l.workers.loaderUrl||c.DEFAULT_LOADER_URL,p;null!=l["default"]?(p=n({},l),delete p["default"],p=JSON.parse(JSON.stringify(p))):p=JSON.parse(JSON.stringify(l));var t=l.workers.loaderConfig,t=c.default({baseUrl:t.baseUrl,locale:h.locale,has:n({"config-deferredInstrumentation":0,"dojo-test-sniff":0,"esri-secure-context":k("esri-secure-context"),"esri-workers-arraybuffer-transfer":k("esri-workers-arraybuffer-transfer"),
"events-keypress-typed":0,"host-webworker":1},t.has),map:n({},t.map),paths:n({},t.paths),packages:t.packages||[]});f.postMessage({type:g,configure:{esriConfig:p,loaderUrl:m,loaderConfig:t}});break;case y:a.removeEventListener("message",d),a.removeEventListener("error",e),b(a)}}function e(b){b.preventDefault();a.removeEventListener("message",d);a.removeEventListener("error",e);w.warn("Failed to create Worker. Fallback to execute module in main thread",b);a=new r;a.addEventListener("message",d);a.addEventListener("error",
e)}a.addEventListener("message",d);a.addEventListener("error",e)})}Object.defineProperty(e,"__esModule",{value:!0});var z=d.normalize(b.toUrl("./worker.js")),v=!d.hasSameOrigin(z,location.href),w=a.getLogger("esri.core.workers"),p=null;k.add("esri-workers-arraybuffer-transfer",!k("safari")||12<=k("safari"));var y=q.MessageType.CONFIGURED,g=q.MessageType.CONFIGURE,u=q.MessageType.HANDSHAKE;e.createWorker=function(){if(!k("esri-workers"))return x(new r);if(!v){var a=void 0;try{a=new Worker(z)}catch(A){w.warn("Failed to create Worker. Fallback to execute module in main thread",
event),a=new r}return x(a)}p||(p=m(z,{responseType:"text"}));return p.then(function(a){return new Worker(URL.createObjectURL(new Blob([a.data],{type:"text/javascript"})))}).catch(function(a){w.warn("Failed to create Worker. Fallback to execute module in main thread",a);return new r}).then(function(a){return x(a)})}})},"esri/core/workers/loaderConfig":function(){define(["require","exports","../tsSupport/assignHelper","dojo/has","../urlUtils"],function(b,e,n,h,l){Object.defineProperty(e,"__esModule",
{value:!0});h=h("esri-built")?"dojo/dojo-lite.js":"dojo/dojo.js";e.DEFAULT_LOADER_URL=l.makeAbsolute(l.removeQueryParameters(b.toUrl(h)));e.DEFAULT_CONFIG={baseUrl:function(){var e=l.removeQueryParameters(b.toUrl("dojo/x.js"));return l.makeAbsolute(e.slice(0,e.length-5))}(),packages:[{name:"esri"},{name:"dojo"},{name:"dojox"},{name:"dstore"},{name:"moment",main:"moment"},{name:"@dojo"},{name:"cldrjs",main:"dist/cldr"},{name:"globalize",main:"dist/globalize"},{name:"maquette",main:"dist/maquette.umd"},
{name:"maquette-css-transitions",main:"dist/maquette-css-transitions.umd"},{name:"maquette-jsx",main:"dist/maquette-jsx.umd"},{name:"tslib",main:"tslib"}],map:{globalize:{cldr:"cldrjs/dist/cldr","cldr/event":"cldrjs/dist/cldr/event","cldr/supplemental":"cldrjs/dist/cldr/supplemental","cldr/unresolved":"cldrjs/dist/cldr/unresolved"}}};e.default=function(h){var k={async:h.async,isDebug:h.isDebug,locale:h.locale,baseUrl:h.baseUrl,has:n({},h.has),map:n({},h.map),packages:h.packages&&h.packages.concat()||
[],paths:n({},h.paths)};h.hasOwnProperty("async")||(k.async=!0);h.hasOwnProperty("isDebug")||(k.isDebug=!1);h.baseUrl||(k.baseUrl=e.DEFAULT_CONFIG.baseUrl);e.DEFAULT_CONFIG.packages.forEach(function(a){a:{for(var c=k.packages,d=0;d<c.length;d++)if(c[d].name===a.name)break a;a=n({},a);d=l.removeQueryParameters(b.toUrl(a.name+"/x.js"));d=d.slice(0,d.length-5);a.location=l.makeAbsolute(d);c.push(a)}});h=k.map=k.map||{};for(var a=0,f=Object.keys(e.DEFAULT_CONFIG.map);a<f.length;a++){var d=f[a];h[d]||
(h[d]=e.DEFAULT_CONFIG.map[d])}return k}})},"esri/core/workers/WorkerFallback":function(){define(["require","exports","dojo/has","../global","./utils"],function(b,e,n,h,l){var m=function(){return function(){var a=this,b=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(function(c){a[c]=function(){for(var a=[],d=0;d<arguments.length;d++)a[d]=arguments[d];return b[c].apply(b,a)}})}}(),k=h.MutationObserver||h.WebKitMutationObserver,a=function(){var a;
if(h.process&&h.process.nextTick)a=function(a){h.process.nextTick(a)};else if(h.Promise)a=function(a){h.Promise.resolve().then(a)};else if(k){var b=[],c=document.createElement("div");(new k(function(){for(;0<b.length;)b.shift()()})).observe(c,{attributes:!0});a=function(a){b.push(a);c.setAttribute("queueStatus","1")}}return a}();return function(){function e(){this._dispatcher=new m;this._isInitialized=!1;this._workerPostMessage({type:l.MessageType.HANDSHAKE})}e.prototype.terminate=function(){};Object.defineProperty(e.prototype,
"onmessage",{get:function(){return this._onmessageHandler},set:function(a){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler);(this._onmessageHandler=a)&&this.addEventListener("message",a)},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"onerror",{get:function(){return this._onerrorHandler},set:function(a){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler);(this._onerrorHandler=a)&&this.addEventListener("error",a)},enumerable:!0,
configurable:!0});e.prototype.postMessage=function(b,c){var d=this;a(function(){d._workerMessageHandler(new MessageEvent("message",{data:b}))})};e.prototype.dispatchEvent=function(a){return this._dispatcher.dispatchEvent(a)};e.prototype.addEventListener=function(a,b,e){this._dispatcher.addEventListener(a,b,e)};e.prototype.removeEventListener=function(a,b,e){this._dispatcher.removeEventListener(a,b,e)};e.prototype._workerPostMessage=function(b,c){var d=this;a(function(){d.dispatchEvent(new MessageEvent("message",
{data:b}))})};e.prototype._workerMessageHandler=function(a){var c=this;if(a=l.receiveMessage(a)){var d=a.jobId;switch(a.type){case l.MessageType.CONFIGURE:this._isInitialized||this._workerPostMessage({type:l.MessageType.CONFIGURED});break;case l.MessageType.OPEN:b(["esri/core/workers/RemoteClient",a.modulePath],function(a,b){a=a.connect(b);c._workerPostMessage({type:l.MessageType.OPENED,jobId:d,data:a})})}}};return e}()})},"esri/core/accessorSupport/typescript":function(){define(["../declare","../typescript",
"../JSONSupport","../lang"],function(b,e,n,h){function l(b,e){if(!b)return e;if(!e)return b;for(var a in e){var f=b[a],d=e[a];Array.isArray(d)&&Array.isArray(f)?b[a]=f.concat(d):b[a]="object"===typeof d&&"object"===typeof f?l(f,d):d}return b}return{subclass:function(m,k){return function(a){a=e.declareDefinition(a,m);f&&(a.instanceMembers.properties=l(f,a.instanceMembers.properties));var f=a.instanceMembers.properties;if(f)for(var d in f){var c=f[d];c&&!c.reader&&c.type&&(c.type===Date?c.reader=function(a){return null!=
a?new Date(a):null}:-1!==c.type._meta.bases.indexOf(n)&&(c.reader=function(a){return function(b){return a.fromJSON(b)}}(c.type)))}return h.mixin(b(a.bases,a.instanceMembers),a.classMembers)}},shared:e.shared,property:function(b){return function(e,a){var f=Object.getPrototypeOf(e),f=f&&f.properties;e.properties&&e.properties!==f||(e.properties={});e.properties=e.properties||{};e.properties[a]=b||{}}}}})},"esri/core/typescript":function(){define(["./declare","./lang"],function(b,e){var n={declareDefinition:function(b,
e){var h=[],k=Object.getPrototypeOf(b.prototype),a;if(k!==Object.prototype){var f=k.constructor;a=f.prototype;h.push(f)}e&&(h=h.concat(e));e={};for(var f=Object.getOwnPropertyNames(b.prototype),d=0;d<f.length;d++){var c=f[d];if("constructor"!==c){var l=c;"dojoConstructor"===c&&(l="constructor");a&&b.prototype[c]===a[c]||(e[l]=b.prototype[c])}}f=Object.getOwnPropertyNames(b);k=Object.getOwnPropertyNames(k.constructor);a={};for(d=0;d<f.length;d++)c=f[d],-1===k.indexOf(c)&&(a[c]=b[c]);return{bases:h,
instanceMembers:e,classMembers:a}},subclass:function(h){return function(l){l=n.declareDefinition(l,h);return e.mixin(b(l.bases,l.instanceMembers),l.classMembers)}},shared:function(b){return function(e,h){e[h]=b}}};return n})},"esri/layers/TileLayer":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/io-query ../geometry ../request ../core/promiseUtils ../core/urlUtils ../core/accessorSupport/decorators ./Layer ./mixins/ArcGISCachedService ./mixins/ArcGISMapService ./mixins/OperationalLayer ./mixins/PortalLayer ./mixins/RefreshableLayer ./mixins/ScaleRangeLayer ./mixins/SublayersOwner ./support/arcgisLayers ./support/arcgisLayerUrl".split(" "),
function(b,e,n,h,l,m,k,a,f,d,c,q,r,x,z,v,w,p,y,g,u){var t="Canvas/World_Dark_Gray_Base Canvas/World_Dark_Gray_Reference Canvas/World_Light_Gray_Base Canvas/World_Light_Gray_Reference Elevation/World_Hillshade Ocean/World_Ocean_Base Ocean/World_Ocean_Reference Ocean_Basemap Reference/World_Boundaries_and_Places Reference/World_Boundaries_and_Places_Alternate Reference/World_Transportation World_Imagery World_Street_Map World_Topo_Map".split(" ");return function(e){function q(a,b){a=e.call(this)||this;
a.spatialReference=null;a.sublayers=null;a.type="tile";a.url=null;return a}h(q,e);q.prototype.normalizeCtorArgs=function(a,b){return"string"===typeof a?n({url:a},b):a};q.prototype.load=function(){var a=this;this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service","Map Service"]}).always(function(){return a._fetchService()}));return this.when()};Object.defineProperty(q.prototype,"attributionDataUrl",{get:function(){return this._getDefaultAttribution(this._getMapName(this.parsedUrl.path.toLowerCase()))},
enumerable:!0,configurable:!0});Object.defineProperty(q.prototype,"operationalLayerType",{get:function(){if(this.capabilities)return this.capabilities.operations.supportsExportMap?"ArcGISTiledMapServiceLayer":"ArcGISTiledImageServiceLayer";var a=this.url||this.portalItem&&this.portalItem.url;return a&&/\/ImageServer(\/|\/?$)/i.test(a)?"ArcGISTiledImageServiceLayer":"ArcGISTiledMapServiceLayer"},enumerable:!0,configurable:!0});q.prototype.readSpatialReference=function(a,b){return(a=a||b.tileInfo&&
b.tileInfo.spatialReference)&&k.SpatialReference.fromJSON(a)};Object.defineProperty(q.prototype,"tileServers",{get:function(){return this._getDefaultTileServers(this.parsedUrl.path)},enumerable:!0,configurable:!0});q.prototype.castTileServers=function(a){return Array.isArray(a)?a.map(function(a){return d.urlToObject(a).path}):null};q.prototype.fetchTile=function(b,c,d,e){b=this.getTileUrl(b,c,d);c={responseType:"image"};e&&e.timestamp&&(c.query={_ts:e.timestamp});return a(b,c).then(function(a){return a.data})};
q.prototype.getTileUrl=function(a,b,c){var d=m.objectToQuery(n({},this.parsedUrl.query,{blankTile:!this.tilemapCache&&this.supportsBlankTile?!1:null,token:this.token?encodeURIComponent(this.token):null})),e=this.tileServers;return(e&&e.length?e[b%e.length]:this.parsedUrl.path)+"/tile/"+a+"/"+b+"/"+c+(d?"?"+d:"")};q.prototype.importLayerViewModule=function(a){switch(a.type){case "2d":return f.create(function(a){return b(["../views/2d/layers/TileLayerView2D"],a)});case "3d":return f.create(function(a){return b(["../views/3d/layers/TileLayerView3D"],
a)})}};q.prototype._fetchService=function(){var b=this;return f.create(function(c,d){b.resourceInfo?c({data:b.resourceInfo}):a(b.parsedUrl.path,{query:n({f:"json"},b.parsedUrl.query),responseType:"json"}).then(c,d)}).then(function(a){a.ssl&&(b.url=b.url.replace(/^http:/i,"https:"));b.read(a.data,{origin:"service",url:b.parsedUrl});if(10.1===b.version&&!u.isHostedAgolService(b.url))return g.fetchServerVersion(b.url).then(function(a){b.read({currentVersion:a})}).catch(function(){})})};q.prototype._getMapName=
function(a){return(a=a.match(/^(?:https?:)?\/\/(server|services)\.arcgisonline\.com\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/mapserver/i))&&a[2]};q.prototype._getDefaultAttribution=function(a){if(a){var b;a=a.toLowerCase();for(var c=0,e=t.length;c<e;c++)if(b=t[c],-1<b.toLowerCase().indexOf(a))return d.makeAbsolute("//static.arcgis.com/attribution/"+b)}};q.prototype._getDefaultTileServers=function(a){var b=-1!==a.search(/^(?:https?:)?\/\/server\.arcgisonline\.com/i),c=-1!==a.search(/^(?:https?:)?\/\/services\.arcgisonline\.com/i);
return b||c?[a,a.replace(b?/server\.arcgisonline/i:/services\.arcgisonline/i,b?"services.arcgisonline":"server.arcgisonline")]:[]};l([c.property({readOnly:!0,dependsOn:["parsedUrl"]})],q.prototype,"attributionDataUrl",null);l([c.property({readOnly:!0})],q.prototype,"operationalLayerType",null);l([c.property()],q.prototype,"popupTemplates",void 0);l([c.property({type:k.SpatialReference})],q.prototype,"spatialReference",void 0);l([c.reader("spatialReference",["spatialReference","tileInfo"])],q.prototype,
"readSpatialReference",null);l([c.property()],q.prototype,"resourceInfo",void 0);l([c.property({readOnly:!0})],q.prototype,"sublayers",void 0);l([c.property({dependsOn:["parsedUrl"],readOnly:!0})],q.prototype,"tileServers",null);l([c.cast("tileServers")],q.prototype,"castTileServers",null);l([c.property({readOnly:!0,json:{read:!1}})],q.prototype,"type",void 0);l([c.property({json:{origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writer:d.writeOperationalLayerUrl}}}}})],q.prototype,"url",
void 0);return q=l([c.subclass("esri.layers.TileLayer")],q)}(c.declared(q,y.default,x,r,p,z,v,w))})},"esri/layers/mixins/ArcGISMapService":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../geometry/Extent ../../geometry/SpatialReference ./ArcGISService ../support/commonProperties".split(" "),function(b,e,n,h,l,m,k,a,f){return function(a){function b(){var b=null!==a&&a.apply(this,arguments)||
this;b.capabilities=void 0;b.copyright=null;b.fullExtent=null;b.legendEnabled=!0;b.spatialReference=null;b.version=null;return b}n(b,a);b.prototype.readCapabilities=function(a,b){var c=b.capabilities&&b.capabilities.split(",").map(function(a){return a.toLowerCase().trim()});if(!c)return{operations:{supportsQuery:!1,supportsExportMap:!1,supportsExportTiles:!1,supportsTileMap:!1},exportMap:null,exportTiles:null};a=this.type;var d=-1!==c.indexOf("query"),e=-1!==c.indexOf("map"),f=!!b.exportTilesAllowed,
c=-1!==c.indexOf("tilemap"),h="tile"!==a&&!!b.supportsDynamicLayers,k="tile"!==a&&(!b.tileInfo||h),g="tile"!==a&&(!b.tileInfo||h);return{operations:{supportsQuery:d,supportsExportMap:e,supportsExportTiles:f,supportsTileMap:c},exportMap:e?{supportsSublayersChanges:"tile"!==a,supportsDynamicLayers:h,supportsSublayerVisibility:k,supportsSublayerDefinitionExpression:g}:null,exportTiles:f?{maxExportTilesCount:+b.maxExportTilesCount}:null}};b.prototype.readVersion=function(a,b){(a=b.currentVersion)||(a=
b.hasOwnProperty("capabilities")||b.hasOwnProperty("tables")?10:b.hasOwnProperty("supportedImageFormatTypes")?9.31:9.3);return a};h([l.property({readOnly:!0})],b.prototype,"capabilities",void 0);h([l.reader("service","capabilities",["capabilities","exportTilesAllowed","maxExportTilesCount","supportsDynamicLayers","tileInfo"])],b.prototype,"readCapabilities",null);h([l.property({json:{read:{source:"copyrightText"}}})],b.prototype,"copyright",void 0);h([l.property({type:m})],b.prototype,"fullExtent",
void 0);h([l.property({json:{origins:{service:{read:!1},"portal-item":{read:!1}}}})],b.prototype,"id",void 0);h([l.property({type:Boolean,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend"}}})],b.prototype,"legendEnabled",void 0);h([l.property(f.popupEnabled)],b.prototype,"popupEnabled",void 0);h([l.property({type:k})],b.prototype,"spatialReference",void 0);h([l.property()],b.prototype,"version",void 0);h([l.reader("version",["currentVersion","capabilities",
"tables","supportedImageFormatTypes"])],b.prototype,"readVersion",null);return b=h([l.subclass("esri.layers.mixins.ArcGISMapService")],b)}(l.declared(a))})},"esri/layers/support/commonProperties":function(){define(["require","exports","../../core/accessorSupport/PropertyOrigin","../../core/accessorSupport/utils","../../core/accessorSupport/write"],function(b,e,n,h,l){Object.defineProperty(e,"__esModule",{value:!0});e.screenSizePerspectiveEnabled={type:Boolean,value:!0,json:{origins:{"web-scene":{read:{source:["id",
"url","layerType"],reader:function(b,e){if(null==e.screenSizePerspective&&"defaults"===this.originOf("screenSizePerspectiveEnabled"))h.getProperties(this).store.set("screenSizePerspectiveEnabled",!1,n.OriginId.DEFAULTS);else return e.screenSizePerspective}},write:{ignoreOrigin:!0,target:"screenSizePerspective",writer:function(b,e,a,f){"defaults"===this.originOf("screenSizePerspectiveEnabled")&&b?e[a]=b:l.willPropertyWrite(this,"screenSizePerspectiveEnabled",{},f)&&(e[a]=b)}}}}}};e.popupEnabled={type:Boolean,
value:!0,json:{read:{source:"disablePopup",reader:function(b,e){return!e.disablePopup}},write:{target:"disablePopup",writer:function(b,e,a){e[a]=!b}}}};e.labelsVisible={type:Boolean,json:{read:{source:"showLabels"},write:{target:"showLabels"}}}})},"esri/layers/mixins/RefreshableLayer":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators".split(" "),function(b,e,n,h,l,m){return function(b){function a(){var a=
null!==b&&b.apply(this,arguments)||this;a.refreshInterval=0;return a}n(a,b);a.prototype.refresh=function(){this.emit("refresh")};h([m.property({type:Number,cast:function(a){return.1<=a?a:0>=a?0:.1},json:{write:!0}})],a.prototype,"refreshInterval",void 0);return a=h([m.subclass("esri.layers.mixins.RefreshableLayer")],a)}(m.declared(l))})},"esri/layers/mixins/ScaleRangeLayer":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators".split(" "),
function(b,e,n,h,l,m){return function(b){function a(){var a=null!==b&&b.apply(this,arguments)||this;a.minScale=0;a.maxScale=0;return a}n(a,b);h([m.property({type:Number,json:{write:!0}})],a.prototype,"minScale",void 0);h([m.property({type:Number,json:{write:!0}})],a.prototype,"maxScale",void 0);return a=h([m.subclass("esri.layers.mixins.ScaleRangeLayer")],a)}(m.declared(l))})},"esri/layers/mixins/SublayersOwner":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Collection ../../core/CollectionFlattener ../../core/Error ../../core/lang ../../core/Logger ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ../../core/accessorSupport/PropertyOrigin ../support/Sublayer ../support/sublayerUtils".split(" "),
function(b,e,n,h,l,m,k,a,f,d,c,q,r,x,z,v){function w(a,b,c){var d=[],e={};a.forEach(function(a){var f=new z;f.read(a,b);c&&(-1===c.indexOf(f.id)?f.visible=!1:f.visible=!0);e[f.id]=f;null!=a.parentLayerId&&-1!==a.parentLayerId?(a=e[a.parentLayerId],a.sublayers||(a.sublayers=[]),a.sublayers.unshift(f)):d.unshift(f)});return d}function p(a,b){var c=b.get(a.id);c?(d.mixin(a.__accessor__.store._values,c.__accessor__.store._values),c.__accessor__.overridden&&(a.__accessor__.overridden=d.mixin(a.__accessor__.overridden||
{},c.__accessor__.overridden)),c.sublayers&&(a.sublayers=c.sublayers.map(function(a){return p(a,b)}))):a.sublayers&&a.sublayers.forEach(function(a){return p(a,b)});return a}Object.defineProperty(e,"__esModule",{value:!0});var y=c.getLogger("esri.layers.TileLayer");b=function(b){function c(){var c=b.call(this)||this;c.allSublayers=new a({root:c,rootCollectionNames:["sublayers"],getChildrenFunction:function(a){return a.sublayers}});c.watch("sublayers",function(a,b){return c._handleSublayersChange(a,
b)},!0);return c}h(c,b);c.prototype.readServiceSublayers=function(a,b,c){return w(b.layers,c)};c.prototype.readSublayersFromItemOrWebMap=function(a,b,c){return!b.layers&&b.visibleLayers?b.visibleLayers.map(function(a){return{id:a}}):w(b.layers,c,b.visibleLayers)};c.prototype.readSublayers=function(a,b,c){a=w(b.layers,c);this._updateSublayersForOrigin(x.OriginId.PORTAL_ITEM,a);this._updateSublayersForOrigin(x.OriginId.WEB_MAP,a);this._updateSublayersForOrigin(x.OriginId.WEB_SCENE,a);return a};c.prototype.writeSublayers=
function(a,b,c,d){a=a.flatten(function(a){return(a=a.sublayers)&&a.toArray().reverse()}).toArray().reverse();var e=this.serviceSublayers.flatten(function(a){return(a=a.sublayers)&&a.toArray().reverse()}).toArray().reduce(function(a,b){a.set(b.id,b);return a},new Map),f=!1,g=!0;this.capabilities&&this.capabilities.operations.supportsExportMap&&this.capabilities.exportMap.supportsDynamicLayers?(f=v.isExportDynamic(a,this.serviceSublayers,this),g=!f&&v.sameStructureAsService(a,this.serviceSublayers)):
g=v.sameStructureAsService(a,this.serviceSublayers);b.layers=[];a.forEach(function(a){var c=e.get(a.id),c=n({writeAsDynamic:f,writeOverridesOnly:g,serviceSublayer:c},d);a=a.write({},c);(!g||g&&1<Object.keys(a).length)&&b.layers.push(a)});b.visibleLayers=a.filter(function(a){return a.visible}).map(function(a){return a.id})};c.prototype.findSublayerById=function(a){return this.allSublayers.find(function(b){return b.id===a})};c.prototype.createServiceSublayers=function(){return this.serviceSublayers.map(function(a){return a.clone()})};
c.prototype._updateSublayersForOrigin=function(a,b){var c=this.__accessor__.store;if(c.has("sublayers",a)){var d=c.get("sublayers",a).flatten(function(a){return a.sublayers});if(d.every(function(a){return!a.__accessor__.store._values.hasOwnProperty("minScale")})){var e=d.reduce(function(a,b){a.set(b.id,b);return a},new Map);b=b.map(function(a){return p(a.clone(),e)});c.set("sublayers",new (k.ofType(z))(b),a)}}};c.prototype._handleSublayersChange=function(a,b){var c=this;b&&(b.forEach(function(a){a.parent=
null;a.layer=null}),this._sublayersHandles.forEach(function(a){return a.remove()}),this._sublayersHandles=null);a&&(a.forEach(function(a){a.parent=c;a.layer=c}),this._sublayersHandles=[a.on("after-add",function(a){a=a.item;a.parent=c;a.layer=c}),a.on("after-remove",function(a){a=a.item;a.parent=null;a.layer=null})],"tile"===this.type&&this._sublayersHandles.push(a.on("before-changes",function(a){y.error(new f("tilelayer:sublayers-non-modifiable","Sublayer can't be added, moved, or removed from the layer's sublayers",
{layer:c}));a.preventDefault()})))};l([q.property({readOnly:!0})],c.prototype,"allSublayers",void 0);l([q.property({readOnly:!0,type:k.ofType(z)})],c.prototype,"serviceSublayers",void 0);l([q.reader("service","serviceSublayers",["layers"])],c.prototype,"readServiceSublayers",null);l([q.property({value:null,type:k.ofType(z),json:{type:[Number],write:{target:"subLayerIds",allowNull:!0}}})],c.prototype,"sublayers",void 0);l([q.reader(["web-map","web-scene","portal-item"],"sublayers",["layers","visibleLayers"])],
c.prototype,"readSublayersFromItemOrWebMap",null);l([q.reader("service","sublayers",["layers"])],c.prototype,"readSublayers",null);l([q.writer(["web-map","web-scene","portal-item"],"sublayers",{layers:{type:[z]},visibleLayers:{type:[r.Integer]}})],c.prototype,"writeSublayers",null);return c=l([q.subclass("esri.layers.mixins.SublayersOwner")],c)}(q.declared(m));e.default=b})},"esri/layers/support/Sublayer":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/paramHelper dojo/io-query ../../PopupTemplate ../../core/Collection ../../core/Error ../../core/JSONSupport ../../core/lang ../../core/Logger ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ../../core/accessorSupport/write ../FeatureLayer ./commonProperties ./LabelClass ./layerSourceUtils ../../renderers/support/jsonUtils ../../renderers/support/typeUtils ../../symbols/Symbol3D ../../tasks/QueryTask ../../tasks/support/Query".split(" "),
function(b,e,n,h,l,m,k,a,f,d,c,q,r,x,z,v,w,p,y,g,u,t,A,C){var B=q.getLogger("esri.layers.support.Sublayer"),F=0;return function(b){function d(){var a=null!==b&&b.apply(this,arguments)||this;a._sublayersHandles=null;return a}n(d,b);e=d;Object.defineProperty(d.prototype,"definitionExpression",{get:function(){return this._get("definitionExpression")},set:function(a){this._setAndNotifyLayer("definitionExpression",a)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"id",{get:function(){var a=
this._get("id");return null==a?F++:a},set:function(a){this._get("id")!==a&&(!1===this.get("layer.capabilities.exportMap.supportsDynamicLayers")?this._logLockedError("id"):this._set("id",a))},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"labelingInfo",{get:function(){return this._get("labelingInfo")},set:function(a){this._setAndNotifyLayer("labelingInfo",a)},enumerable:!0,configurable:!0});d.prototype.writeLabelingInfo=function(a,b,c,d){(!d||d.writeAsDynamic)&&a&&a.length&&(b.layerDefinition=
{drawingInfo:{labelingInfo:a.map(function(a){return a.write({},d)})}})};Object.defineProperty(d.prototype,"labelsVisible",{get:function(){return this._get("labelsVisible")},set:function(a){this._setAndNotifyLayer("labelsVisible",a)},enumerable:!0,configurable:!0});d.prototype.writeLabelsVisible=function(a,b,c,d){if(!d||d.writeAsDynamic)b.showLabels=a};Object.defineProperty(d.prototype,"layer",{set:function(a){this._set("layer",a);this.sublayers&&this.sublayers.forEach(function(b){return b.layer=a})},
enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"legendEnabled",{get:function(){return this._get("legendEnabled")},set:function(a){this._set("legendEnabled",a)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"minScale",{get:function(){return this._get("minScale")},set:function(a){this._setAndNotifyLayer("minScale",a)},enumerable:!0,configurable:!0});d.prototype.readMinScale=function(a,b){return b.minScale||b.layerDefinition&&b.layerDefinition.minScale||0};d.prototype.writeMinScale=
function(a,b,c,d){if(d&&d.writeOverridesOnly&&(c=d&&d.serviceSublayer)&&c.minScale===a&&c.maxScale===this.maxScale)return;b.minScale=a};Object.defineProperty(d.prototype,"maxScale",{get:function(){return this._get("maxScale")},set:function(a){this._setAndNotifyLayer("maxScale",a)},enumerable:!0,configurable:!0});d.prototype.readMaxScale=function(a,b){return b.maxScale||b.layerDefinition&&b.layerDefinition.maxScale||0};d.prototype.writeMaxScale=function(a,b,c,d){if(d&&d.writeOverridesOnly&&(c=d&&d.serviceSublayer)&&
c.maxScale===a&&c.minScale===this.minScale)return;b.maxScale=a};Object.defineProperty(d.prototype,"opacity",{get:function(){return this._get("opacity")},set:function(a){this._setAndNotifyLayer("opacity",a)},enumerable:!0,configurable:!0});d.prototype.readOpacity=function(a,b){a=b.layerDefinition;return 1-.01*(null!=a.transparency?a.transparency:a.drawingInfo.transparency)};d.prototype.writeOpacity=function(a,b,c,d){if(!d||d.writeAsDynamic)b.layerDefinition={drawingInfo:{transparency:100-100*a}}};
d.prototype.writeParent=function(a,b,c,d){d&&d.writeOverridesOnly||(b.parentLayerId=this.parent&&this.parent!==this.layer?this.parent.id:-1)};Object.defineProperty(d.prototype,"popupEnabled",{get:function(){return this._get("popupEnabled")},set:function(a){this._set("popupEnabled",a)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"popupTemplate",{get:function(){return this._get("popupTemplate")},set:function(a){this._set("popupTemplate",a)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,
"renderer",{get:function(){return this._get("renderer")},set:function(a){if(a)for(var b=0,c=a.getSymbols();b<c.length;b++)if(c[b].isInstanceOf(t)){B.warn("Sublayer renderer should use 2D symbols");break}this._setAndNotifyLayer("renderer",a)},enumerable:!0,configurable:!0});d.prototype.readRenderer=function(a,b,c){if(a=b.layerDefinition.drawingInfo.renderer||void 0)(a=g.read(a,b,c)||void 0)||B.error("Failed to create renderer",{rendererDefinition:b.drawingInfo.renderer,layer:this,context:c});return a};
d.prototype.writeRenderer=function(a,b,c,d){if(!d||d.writeAsDynamic)b.layerDefinition={drawingInfo:{renderer:a.toJSON()}}};Object.defineProperty(d.prototype,"source",{get:function(){return this._get("source")||{mapLayerId:this.id,type:y.MAPLAYER}},set:function(a){this._setAndNotifyLayer("source",a)},enumerable:!0,configurable:!0});d.prototype.writeSource=function(a,b,c,d){d&&!d.writeAsDynamic&&d.writeOverridesOnly||(b.layerDefinition={source:y.sourceToJSON(a)})};Object.defineProperty(d.prototype,
"sublayers",{set:function(a){this._handleSublayersChange(a,this._get("sublayers"));this._set("sublayers",a)},enumerable:!0,configurable:!0});d.prototype.castSublayers=function(b){return x.default(a.ofType(e),b)};d.prototype.writeSublayers=function(a,b,c,d){d&&d.writeOverridesOnly||(b[c]=this.get("sublayers.length")?this.sublayers.map(function(a){return a.id}).toArray().reverse():null)};Object.defineProperty(d.prototype,"title",{get:function(){return this._get("title")},set:function(a){this._set("title",
a)},enumerable:!0,configurable:!0});d.prototype.writeTitle=function(a,b,c,d){if(d&&d.writeOverridesOnly&&(d=d&&d.serviceSublayer)&&d.title===a)return;b[c]=a};Object.defineProperty(d.prototype,"url",{get:function(){var a=this.layer,b=this.source;if(!a)return null;if(y.isMapLayerSource(b))return a.parsedUrl.path+"/"+b.mapLayerId;b={layer:JSON.stringify({source:y.sourceToJSON(this.source)})};return a.parsedUrl.path+"/dynamicLayer?"+m.objectToQuery(b)},set:function(a){a?this._override("url",a):this._clearOverride("url")},
enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"visible",{get:function(){return this._get("visible")},set:function(a){this._setAndNotifyLayer("visible",a)},enumerable:!0,configurable:!0});d.prototype.writeVisible=function(a,b,c,d){if(d&&d.writeOverridesOnly&&(d=d&&d.serviceSublayer)&&d.visible===a)return;b[c]=a};d.prototype.clone=function(){var a=new e;this.hasOwnProperty("definitionExpression")&&(a.definitionExpression=this.definitionExpression);this.hasOwnProperty("id")&&(a.id=
this.id);this.hasOwnProperty("labelingInfo")&&(a.labelingInfo=c.clone(this.labelingInfo));this.hasOwnProperty("labelsVisible")&&(a.labelsVisible=this.labelsVisible);this.hasOwnProperty("legendEnabled")&&(a.legendEnabled=this.legendEnabled);this.hasOwnProperty("visible")&&(a.visible=this.visible);this.hasOwnProperty("layer")&&(a.layer=this.layer);this.hasOwnProperty("minScale")&&(a.minScale=this.minScale);this.hasOwnProperty("maxScale")&&(a.maxScale=this.maxScale);this.hasOwnProperty("opacity")&&(a.opacity=
this.opacity);this.hasOwnProperty("parent")&&(a.parent=this.parent);this.hasOwnProperty("popupEnabled")&&(a.popupEnabled=this.popupEnabled);this.hasOwnProperty("popupTemplate")&&(a.popupTemplate=this.popupTemplate?this.popupTemplate.clone():this.popupTemplate);this.hasOwnProperty("renderer")&&(a.renderer=this.renderer?this.renderer.clone():this.renderer);this.hasOwnProperty("source")&&(a.source=c.clone(this.source));this.hasOwnProperty("sublayers")&&(a.sublayers=this.sublayers?this.sublayers.clone():
this.sublayers);this.hasOwnProperty("title")&&(a.title=this.title);return a};d.prototype.createQuery=function(){return new C({returnGeometry:!0,where:this.definitionExpression||"1\x3d1"})};d.prototype.createFeatureLayer=function(){if(this.hasOwnProperty("sublayers"))return null;var a=this.layer&&this.layer.parsedUrl,b=this.source,d=null;a&&(d=y.isMapLayerSource(b)?a.path+"/"+b.mapLayerId:a.path+"/dynamicLayer");a=new v({url:d});this.hasOwnProperty("definitionExpression")&&(a.definitionExpression=
this.definitionExpression);this.hasOwnProperty("labelingInfo")&&(a.labelingInfo=c.clone(this.labelingInfo));this.hasOwnProperty("labelsVisible")&&(a.labelsVisible=this.labelsVisible);this.hasOwnProperty("legendEnabled")&&(a.legendEnabled=this.legendEnabled);this.hasOwnProperty("visible")&&(a.visible=this.visible);this.hasOwnProperty("minScale")&&(a.minScale=this.minScale);this.hasOwnProperty("maxScale")&&(a.maxScale=this.maxScale);this.hasOwnProperty("opacity")&&(a.opacity=this.opacity);this.hasOwnProperty("popupTemplate")&&
(a.popupTemplate=this.popupTemplate?this.popupTemplate.clone():this.popupTemplate);this.hasOwnProperty("renderer")&&(a.renderer=this.renderer?this.renderer.clone():this.renderer);this.hasOwnProperty("source")&&y.isDataLayerSource(this.source)&&(a.dynamicDataSource=c.clone(this.source));this.hasOwnProperty("title")&&(a.title=this.title);return a};d.prototype.queryFeatures=function(a){var b=this;void 0===a&&(a=this.createQuery());return(new A({url:this.url})).execute(a).then(function(a){a&&a.features&&
a.features.forEach(function(a){a.sourceLayer=b});return a})};d.prototype.toExportImageJSON=function(){var a={id:this.id,source:y.sourceToJSON(this.source)};this.definitionExpression&&(a.definitionExpression=this.definitionExpression);if(this.renderer||this.labelingInfo||null!=this.opacity||null!=this.labelsVisible){var b=a.drawingInfo={};this.renderer&&(b.renderer=this.renderer.toJSON());null!=this.labelsVisible&&(b.showLabels=this.labelsVisible);!1!==this.labelsVisible&&this.labelingInfo&&(b.labelingInfo=
this.labelingInfo.map(function(a){return a.write({},{origin:"service"})}),b.showLabels=!0);null!=this.opacity&&(b.transparency=100-100*this.opacity)}return a};d.prototype._setAndNotifyLayer=function(a,b){var c=this.layer,d=this._get(a),e;switch(a){case "definitionExpression":e="supportsSublayerDefinitionExpression";case "minScale":case "maxScale":case "visible":e="supportsSublayerVisibility";break;case "labelingInfo":case "labelsVisible":case "opacity":case "renderer":case "source":e="supportsDynamicLayers"}e&&
!1===this.get("layer.capabilities.exportMap."+e)?this._logLockedError(a):(this._set(a,b),d!==b&&c&&c.emit&&c.emit("sublayer-update",{propertyName:a}))};d.prototype._handleSublayersChange=function(a,b){var c=this;b&&(b.forEach(function(a){a.parent=null;a.layer=null}),this._sublayersHandles.forEach(function(a){return a.remove()}),this._sublayersHandles=null);a&&(a.forEach(function(a){a.parent=c;a.layer=c.layer}),this._sublayersHandles=[a.on("after-add",function(a){a=a.item;a.parent=c;a.layer=c.layer}),
a.on("after-remove",function(a){a=a.item;a.parent=null;a.layer=null}),a.on("before-changes",function(a){var b=c.get("layer.capabilities.exportMap.supportsSublayersChanges");null==b||b||(B.error(new f("sublayer:sublayers-non-modifiable","Sublayer can't be added, moved, or removed from the layer's sublayers",{layer:c})),a.preventDefault())})])};d.prototype._logLockedError=function(a){B.error(new f("sublayer:locked","Property '"+a+"' can't be changed on Sublayer from the layer '"+this.layer.id+"'",{sublayer:this,
layer:this.layer}))};var e;h([r.property({type:String,value:null,json:{read:{source:"layerDefinition.definitionExpression"},write:{target:"layerDefinition.definitionExpression"}}})],d.prototype,"definitionExpression",null);h([r.property({type:Number,json:{write:{ignoreOrigin:!0}}})],d.prototype,"id",null);h([r.property({value:null,type:[p],json:{read:{source:"layerDefinition.drawingInfo.labelingInfo"},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],d.prototype,"labelingInfo",null);h([r.writer("labelingInfo")],
d.prototype,"writeLabelingInfo",null);h([r.property({type:Boolean,json:{read:{source:"showLabels"},write:{target:"showLabels"}}})],d.prototype,"labelsVisible",null);h([r.writer("labelsVisible")],d.prototype,"writeLabelsVisible",null);h([r.property({value:null})],d.prototype,"layer",null);h([r.property({type:Boolean,value:!0,json:{read:{source:"showLegend"},write:{target:"showLegend"}}})],d.prototype,"legendEnabled",null);h([r.property({type:Number,value:0,json:{write:{overridePolicy:function(a,b,
c){if(z.willPropertyWrite(this,"maxScale",{},c))return{ignoreOrigin:!0}}}}})],d.prototype,"minScale",null);h([r.reader("portal-item","minScale",["minScale","layerDefinition.minScale"])],d.prototype,"readMinScale",null);h([r.writer("minScale")],d.prototype,"writeMinScale",null);h([r.property({type:Number,value:0,json:{write:{overridePolicy:function(a,b,c){if(z.willPropertyWrite(this,"minScale",{},c))return{ignoreOrigin:!0}}}}})],d.prototype,"maxScale",null);h([r.reader("portal-item","maxScale",["maxScale",
"layerDefinition.maxScale"])],d.prototype,"readMaxScale",null);h([r.writer("maxScale")],d.prototype,"writeMaxScale",null);h([r.property({type:Number,json:{write:{target:"layerDefinition.drawingInfo.transparency"}}})],d.prototype,"opacity",null);h([r.reader("opacity",["layerDefinition.drawingInfo.transparency","layerDefinition.transparency"])],d.prototype,"readOpacity",null);h([r.writer("opacity")],d.prototype,"writeOpacity",null);h([r.property({json:{type:Number,write:{target:"parentLayerId",allowNull:!0}}})],
d.prototype,"parent",void 0);h([r.writer("parent")],d.prototype,"writeParent",null);h([r.property(w.popupEnabled)],d.prototype,"popupEnabled",null);h([r.property({value:null,type:k,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],d.prototype,"popupTemplate",null);h([r.property({types:u.types,value:null,json:{write:{target:"layerDefinition.drawingInfo.renderer"}}})],d.prototype,"renderer",null);h([r.reader("renderer",["layerDefinition.drawingInfo.renderer"])],d.prototype,"readRenderer",
null);h([r.writer("renderer")],d.prototype,"writeRenderer",null);h([r.property({cast:y.castSource,json:{read:{source:"layerDefinition.source",reader:y.sourceFromJSON},write:{target:"layerDefinition.source"}}})],d.prototype,"source",null);h([r.writer("source")],d.prototype,"writeSource",null);h([r.property({value:null,json:{type:[x.Integer],write:{target:"subLayerIds",allowNull:!0}}})],d.prototype,"sublayers",null);h([r.cast("sublayers")],d.prototype,"castSublayers",null);h([r.writer("sublayers")],
d.prototype,"writeSublayers",null);h([r.property({type:String,value:null,json:{read:{source:"name"},write:{target:"name",allowNull:!0,ignoreOrigin:!0}}})],d.prototype,"title",null);h([r.writer("title")],d.prototype,"writeTitle",null);h([r.property({type:String,dependsOn:["layer","source"],json:{read:{source:"layerUrl"},write:{target:"layerUrl",overridePolicy:function(){return{enabled:this._isOverridden("url")}}}}})],d.prototype,"url",null);h([r.property({type:Boolean,value:!0,json:{read:{source:"defaultVisibility"},
write:{target:"defaultVisibility"}}})],d.prototype,"visible",null);h([r.writer("visible")],d.prototype,"writeVisible",null);h([l(0,r.cast(C))],d.prototype,"queryFeatures",null);return d=e=h([r.subclass("esri.layers.support.Sublayer")],d)}(r.declared(d))})},"esri/layers/FeatureLayer":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../Graphic ../PopupTemplate ../renderers ../request ../symbols ../core/Collection ../core/Error ../core/Handles ../core/has ../core/kebabDictionary ../core/lang ../core/Logger ../core/MultiOriginJSONSupport ../core/promiseUtils ../core/urlUtils ../core/accessorSupport/decorators ../geometry/Extent ../geometry/HeightModelInfo ../geometry/SpatialReference ../geometry/support/normalizeUtils ./Layer ./graphics/sources/MemorySource ./mixins/ArcGISService ./mixins/OperationalLayer ./mixins/PortalLayer ./mixins/RefreshableLayer ./mixins/ScaleRangeLayer ./support/arcgisLayerUrl ./support/commonProperties ./support/FeatureIndex ./support/FeatureProcessing ./support/FeatureReduction ./support/FeatureReductionSelection ./support/FeatureTemplate ./support/FeatureType ./support/Field ./support/fieldUtils ./support/LabelClass ./support/labelingInfo ./support/layerSourceUtils ./support/Relationship ../renderers/support/jsonUtils ../renderers/support/styleUtils ../renderers/support/typeUtils ../symbols/support/ElevationInfo ../symbols/support/jsonUtils ../tasks/support/AttachmentQuery ../tasks/support/FeatureSet ../tasks/support/Query ../tasks/support/RelationshipQuery".split(" "),
function(b,e,n,h,l,m,k,a,f,d,c,q,r,x,z,v,w,p,y,g,u,t,A,C,B,F,D,H,aa,ga,P,K,ja,M,X,O,L,Q,G,V,U,Y,N,T,ba,fa,la,pa,ha,qa,Ca,sa,Ba,wa,Da,Ga){function Sa(a){return a&&null!=a.applyEdits}function ra(a){return a&&a.isInstanceOf&&a.isInstanceOf(q)}function da(a,b,c){return!(a&&a.hasOwnProperty(b)?!a[b]:!c)}var Aa=v({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),Ma=p.getLogger("esri.layers.FeatureLayer");
return function(e){function p(a){a=e.call(this)||this;a._handles=new x;a.featureReduction=null;a.capabilities=null;a.copyright=null;a.displayField=null;a.definitionExpression=null;a.dynamicDataSource=null;a.editFieldsInfo=null;a.elevationInfo=null;a.fields=null;a.fullExtent=null;a.gdbVersion=null;a.geometryType=null;a.hasM=void 0;a.hasZ=void 0;a.heightModelInfo=null;a.historicMoment=null;a.isTable=!1;a.labelsVisible=!0;a.labelingInfo=null;a.layerId=void 0;a.legendEnabled=!0;a.maxRecordCount=void 0;
a.tileMaxRecordCount=void 0;a.minScale=0;a.maxScale=0;a.objectIdField=null;a.operationalLayerType="ArcGISFeatureLayer";a.popupEnabled=!0;a.popupTemplate=null;a.relationships=null;a.returnM=void 0;a.returnZ=void 0;a.screenSizePerspectiveEnabled=!0;a.serviceDefinitionExpression=null;a.spatialReference=B.WGS84;a.templates=null;a.timeInfo=null;a.title=null;a.sublayerTitleMode="item-title";a.trackIdField=null;a.type="feature";a.typeIdField=null;a.types=null;a.indexes=new (q.ofType(O.FeatureIndex));a.userIsAdmin=
!1;a.version=void 0;a.visible=!0;return a}h(p,e);p.prototype.normalizeCtorArgs=function(a,b){return"string"===typeof a?n({url:a},b):a};p.prototype.load=function(){var a=this;if(this.portalItem&&this.portalItem.loaded&&this.source)this.addResolvingPromise(this.createGraphicsSource().then(function(b){return a._initLayerProperties(b)}));else{var b=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection"]}).always(function(){if(a.url&&null==a.layerId&&/FeatureServer|MapServer\/*$/i.test(a.url))return a._fetchFirstLayerId().then(function(b){null!=
b&&(a.layerId=b)})}).then(function(){if(!a.url&&!a._hasMemorySource())throw new r("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return a.createGraphicsSource().then(function(b){return a._initLayerProperties(b)})});this.addResolvingPromise(b);return this.when()}};Object.defineProperty(p.prototype,"allRenderers",{get:function(){return this._getAllRenderers(this.renderer)},enumerable:!0,configurable:!0});p.prototype.readCapabilities=function(a,b){b=
b.layerDefinition||b;return{data:this._readDataCapabilities(b),operations:this._readOperationsCapabilities(b.capabilities||a,b),query:this._readQueryCapabilities(b),queryRelated:this._readQueryRelatedCapabilities(b),editing:this._readEditingCapabilities(b)}};Object.defineProperty(p.prototype,"hasAttachments",{get:function(){Ma.warn("FeatureLayer.hasAttachments is deprecated. Use FeatureLayer.capabilities.data.supportsAttachment instead.");return this.hasService&&this._get("hasAttachments")||!1},enumerable:!0,
configurable:!0});p.prototype.readIsTable=function(a,b){b=b&&b.layerDefinition||b;return"Table"===b.type};Object.defineProperty(p.prototype,"hasService",{get:function(){return!this._hasMemorySource()},enumerable:!0,configurable:!0});p.prototype.readMinScale=function(a,b){return b.effectiveMinScale||a||0};p.prototype.readMaxScale=function(a,b){return b.effectiveMaxScale||a||0};p.prototype.readObjectIdFieldFromService=function(a,b){b=b.layerDefinition||b;if(b.objectIdField)return b.objectIdField;if(b.fields)for(a=
0,b=b.fields;a<b.length;a++){var c=b[a];if("esriFieldTypeOID"===c.type)return c.name}};Object.defineProperty(p.prototype,"outFields",{get:function(){var a=this,b=this._userOutFields,c=this.requiredFields,b=b&&b.slice(0),c=c&&c.slice(0);b?-1===b.indexOf("*")&&c.forEach(function(a){-1===b.indexOf(a)&&b.push(a)}):b=c;-1!==b.indexOf("*")?b=["*"]:this.loaded&&(b=b.filter(function(b){var c=!!a.getField(b);b&&!c&&Ma.error("[outFields] Invalid field: ",b);return c},this),b=b.map(function(b){return a.getField(b).name},
this),b=b.filter(function(a,b,c){return c.indexOf(a)===b}));return b},set:function(a){var b=this,c=this.requiredFields&&this.requiredFields.slice(0);a?-1===a.indexOf("*")&&c.forEach(function(b){-1===a.indexOf(b)&&a.push(b)}):a=c;this.loaded&&(a=a.filter(function(a){var c="*"===a||!!b.getField(a,b.fields);a&&!c&&Ma.error("[outFields] Invalid field: ",a);return c},this),a=a.map(function(a){return"*"===a?a:b.getField(a,b.fields).name},this));this._userOutFields=a},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,
"parsedUrl",{get:function(){var a=this.url?u.urlToObject(this.url):null;if(null!=a)if(null!=this.layerId)a.path=u.join(a.path,this.layerId.toString());else if(null!=this.dynamicDataSource){var b={source:fa.sourceToJSON(this.dynamicDataSource)};a.query={layer:JSON.stringify(b)}}return a},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"renderer",{set:function(a){var b=this._getAllRenderers(a);N.fixRendererFields(b,this.fields);this._set("renderer",a)},enumerable:!0,configurable:!0});
p.prototype.readRenderer=function(a,b,d){b=b.layerDefinition||b;var e=b.drawingInfo&&b.drawingInfo.renderer||void 0,g,h;if(e)(g=pa.read(e,b,d)||void 0)||Ma.error("Failed to create renderer",{rendererDefinition:b.drawingInfo.renderer,layer:this,context:d});else if(b.defaultSymbol)sa.read(b.defaultSymbol,b,d),b.types&&b.types.length?(g=new f.UniqueValueRenderer({defaultSymbol:h,field:b.typeIdField}),b.types.forEach(function(a){e.addUniqueValueInfo(a.id,sa.read(a.symbol,a,d))})):g=new f.SimpleRenderer({symbol:h});
else if("Table"!==b.type){switch(b.geometryType){case "esriGeometryPoint":case "esriGeometryMultipoint":h=new c.SimpleMarkerSymbol;break;case "esriGeometryPolyline":h=new c.SimpleLineSymbol;break;case "esriGeometryPolygon":h=new c.SimpleFillSymbol}g=h&&new f.SimpleRenderer({symbol:h})}return g};p.prototype.writeRenderer=function(a,b,c,d){pa.writeTarget(a,b,c,d)};Object.defineProperty(p.prototype,"requiredFields",{get:function(){var a=this.timeInfo,b=[],c=[],a=[this.objectIdField,this.typeIdField,
this.editFieldsInfo&&this.editFieldsInfo.creatorField,this.editFieldsInfo&&this.editFieldsInfo.creationDateField,this.editFieldsInfo&&this.editFieldsInfo.editorField,this.editFieldsInfo&&this.editFieldsInfo.editDateField,a&&a.startTimeField,a&&a.endTimeField,this.trackIdField];this.allRenderers.forEach(function(a){b=b.concat(a.requiredFields)});this.labelingInfo&&this.labelingInfo.length&&this.labelingInfo.forEach(function(a){c=c.concat(a.requiredFields)});var c=c.map(function(a){return a.replace(/['"]+/g,
"")}),a=a.concat(b),a=a.concat(c),d=this.elevationInfo&&this.elevationInfo.featureExpressionInfo;d&&(a=a.concat(d.requiredFields));this.popupTemplate&&(a=a.concat(this.popupTemplate.requiredFields));return a.filter(function(a,b,c){return!!a&&c.indexOf(a)===b&&"function"!==typeof a})},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"source",{set:function(a){var b=this._get("source");b!==a&&(b&&ra(b)&&this._resetMemorySource(b),a&&ra(a)&&this._initMemorySource(a),this._set("source",
a))},enumerable:!0,configurable:!0});p.prototype.castSource=function(a){return a?Array.isArray(a)||ra(a)?new H.default({layer:this,items:a}):a:null};p.prototype.readSource=function(a,b){a=wa.fromJSON(b.featureSet);return new H.default({layer:this,items:a&&a.features||[]})};p.prototype.readTemplates=function(a,b){var c=b.editFieldsInfo;b=c&&c.creatorField;c=c&&c.editorField;a=a&&a.map(function(a){return V.fromJSON(a)});this._fixTemplates(a,b);this._fixTemplates(a,c);return a};p.prototype.readTitle=
function(a,b){a=b.layerDefinition&&b.layerDefinition.name||b.name;b=b.title||b.layerDefinition&&b.layerDefinition.title;if(a){b=this.portalItem&&this.portalItem.title;if("item-title"===this.sublayerTitleMode)return this.url?M.titleFromUrlAndName(this.url,a):a;if(a=a||this.url&&M.parse(this.url).title)return"item-title-and-service-name"===this.sublayerTitleMode&&b&&(a=b+" - "+a),M.cleanTitle(a)}else if("item-title"===this.sublayerTitleMode&&b)return b};p.prototype.readTitleFromWebMap=function(a,b){return b.title||
b.layerDefinition&&b.layerDefinition.name};p.prototype.readTypeIdField=function(a,b){b=b.layerDefinition||b;if(a=b.typeIdField)if(b=this.getField(a,b.fields))a=b.name;return a};p.prototype.readTypes=function(a,b){var c=this;b=b.layerDefinition||b;a=b.types;var d=(b=b.editFieldsInfo)&&b.creatorField,e=b&&b.editorField;return a&&a.map(function(a){a=U.fromJSON(a);c._fixTemplates(a.templates,d);c._fixTemplates(a.templates,e);return a})};Object.defineProperty(p.prototype,"url",{set:function(a){a=M.sanitizeUrlWithLayerId(this,
a,Ma);this._set("url",a.url);null!=a.layerId&&this._set("layerId",a.layerId)},enumerable:!0,configurable:!0});p.prototype.writeUrl=function(a,b,c,d){M.writeUrlWithLayerId(this,a,b)};p.prototype.readVersion=function(a,b){b=b.layerDefinition||b;return b.currentVersion?b.currentVersion:b.hasOwnProperty("capabilities")||b.hasOwnProperty("drawingInfo")||b.hasOwnProperty("hasAttachments")||b.hasOwnProperty("htmlPopupType")||b.hasOwnProperty("relationships")||b.hasOwnProperty("timeInfo")||b.hasOwnProperty("typeIdField")||
b.hasOwnProperty("types")?10:9.3};p.prototype.readVisible=function(a,b){if(b.layerDefinition&&null!=b.layerDefinition.defaultVisibility)return!!b.layerDefinition.defaultVisibility;if(null!=b.visibility)return!!b.visibility};p.prototype.addAttachment=function(a,b){var c=this;return this.load().then(function(){return c._checkAttachmentSupport(a)}).then(function(){return"addAttachment"in c.source?c.source.addAttachment(a,b):g.reject(new r("FeatureLayer","Layer source does not support addAttachment capability"))})};
p.prototype.updateAttachment=function(a,b,c){var d=this;return this.load().then(function(){return d._checkAttachmentSupport(a)}).then(function(){return"updateAttachment"in d.source?d.source.updateAttachment(a,b,c):g.reject(new r("FeatureLayer","Layer source does not support updateAttachment capability"))})};p.prototype.applyEdits=function(a){var b=this,c,d,e={edits:a,result:g.create(function(a,b){c=a;d=b})};this.emit("apply-edits",e);return this.load().then(function(){return Sa(b.source)?b._processApplyEditsParams(a):
g.reject(new r("FeatureLayer","Layer source does not support applyEdits capability"))}).then(function(a){if(Sa(b.source))return b.source.applyEdits(a).then(function(a){var d=function(a){return a.filter(function(a){return!a.error}).map(w.clone)},d={addedFeatures:d(a.addFeatureResults),updatedFeatures:d(a.updateFeatureResults),deletedFeatures:d(a.deleteFeatureResults)};(d.addedFeatures.length||d.updatedFeatures.length||d.deletedFeatures.length)&&b.emit("edits",d);c(d);return a})}).catch(function(a){d(a);
throw a;})};p.prototype.on=function(a,b){return this.inherited(arguments)};p.prototype.createGraphicsSource=function(){var a=this;return this._hasMemorySource()?(this.emit("graphics-source-create",{graphicsSource:this.source}),this.source.load()):g.create(function(a){return b(["./graphics/sources/FeatureLayerSource"],a)}).then(function(b){return(new b.default({layer:a})).load()}).then(function(b){a.emit("graphics-source-create",{graphicsSource:b});return b})};p.prototype.createGraphicsController=
function(a){var c=this,d=a.layerView,e=q.ofType(k),f=this.source,h=f&&ra(f),l=n({},a.options,{layer:this,layerView:d,graphics:h?f:new e});return(h?g.create(function(a){return b(["./graphics/controllers/MemoryController"],a)}):"2d"===d.view.type?g.create(function(a){return b(["./graphics/controllers/AutoController2D"],a)}):g.create(function(a){return b(["./graphics/controllers/SnapshotController"],a)})).then(function(a){return new a(l)}).then(function(a){c.emit("graphics-controller-create",{graphicsController:a});
return a.when()})};p.prototype.createQuery=function(){var a=new Da,b=this.get("capabilities.data");a.gdbVersion=this.gdbVersion;a.historicMoment=this.historicMoment;a.returnGeometry=!0;b&&(b.supportsZ&&null!=this.returnZ&&(a.returnZ=this.returnZ),b.supportsM&&null!=this.returnM&&(a.returnM=this.returnM));a.outFields=this.outFields;a.where=this.definitionExpression||"1\x3d1";a.multipatchOption="multipatch"===this.geometryType?"xyFootprint":null;return a};p.prototype.deleteAttachments=function(a,b){var c=
this;return this.load().then(function(){return c._checkAttachmentSupport(a)}).then(function(){return"deleteAttachments"in c.source?c.source.deleteAttachments(a,b):g.reject(new r("FeatureLayer","Layer source does not support deleteAttachments capability"))})};p.prototype.getFeatureType=function(a){var b=this.typeIdField;if(!b||!a)return null;var c=a.attributes?a.attributes[b]:void 0;if(null==c)return null;var d=null;this.types.some(function(a){var b=a.id;if(null==b)return!1;b.toString()===c.toString()&&
(d=a);return!!d});return d};p.prototype.getFieldDomain=function(a,b){var c=this,d,e=!1;b=(b=b&&b.feature)&&b.attributes;var f=this.typeIdField&&b&&b[this.typeIdField];null!=f&&this.types&&(e=this.types.some(function(b){return b.id==f?((d=b.domains&&b.domains[a])&&"inherited"===d.type&&(d=c._getLayerDomain(a)),!0):!1}));e||d||(d=this._getLayerDomain(a));return d};p.prototype.getField=function(a,b){var c=this.processing?this.fields.concat(this.processing.fields):this.fields;return N.getField(a,b||c)};
p.prototype.graphicChanged=function(a){this.emit("graphic-update",a)};p.prototype.queryAttachments=function(a){var b=this;return this.load().then(function(){if(!b.get("capabilities.data.supportsAttachment"))return g.reject(new r("FeatureLayer","this layer doesn't support attachments"));var c=a.attachmentTypes,d=a.objectIds,e=a.globalIds,f=a.num,h=a.size,k=a.start,l=a.definitionExpression;return!b.get("capabilities.query.supportsAttachments")&&(c=c&&c.length,e=e&&e.length,h=h&&h.length,d&&1<d.length||
c||e||h||f||k||l)?g.reject(new r("FeatureLayer","when 'supportsQueryAttachments' is false, only objectIds of length 1 are supported",a)):d&&d.length||l?"queryAttachments"in b.source?b.source.queryAttachments(a):g.reject(new r("FeatureLayer","Layer source does not support queryAttachments capability",a)):g.reject(new r("FeatureLayer","objectIds or definitionExpression are required to perform attachment query",a))})};p.prototype.queryFeatures=function(a,b){var c=this;return this.load().then(function(){return c.source.queryFeatures(a||
c.createQuery(),b)}).then(function(a){if(a&&a.features)for(var b=0,d=a.features;b<d.length;b++){var e=d[b];e.layer=e.sourceLayer=c}return a})};p.prototype.queryFeaturesJSON=function(a,b){var c=this;return this.load().then(function(){if(!c.source.queryFeaturesJSON)return g.reject(new r("FeatureLayer","Layer source does not support queryFeaturesJSON capability"))}).then(function(){return c.source.queryFeaturesJSON(a||c.createQuery(),b)})};p.prototype.queryObjectIds=function(a,b){var c=this;return this.load().then(function(){return c.source.queryObjectIds?
c.source.queryObjectIds(a||c.createQuery(),b):g.reject(new r("FeatureLayer","Layer source does not support queryObjectIds capability"))})};p.prototype.queryFeatureCount=function(a,b){var c=this;return this.load().then(function(){return c.source.queryFeatureCount?c.source.queryFeatureCount(a||c.createQuery(),b):g.reject(new r("FeatureLayer","Layer source does not support queryFeatureCount capability"))})};p.prototype.queryExtent=function(a,b){var c=this;return this.load().then(function(){return c.source.queryExtent?
c.source.queryExtent(a||c.createQuery(),b):g.reject(new r("FeatureLayer","Layer source does not support queryExtent capability"))})};p.prototype.queryRelatedFeatures=function(a){var b=this;return this.load().then(function(){return"queryRelatedFeatures"in b.source?b.source.queryRelatedFeatures(a):g.reject(new r("FeatureLayer","Layer source does not support queryRelatedFeatures capability"))})};p.prototype.read=function(a,b){var c=a.featureCollection;if(c){var d=c.layers;d&&1===d.length&&(this.inherited(arguments,
[d[0],b]),null!=c.showLegend&&this.inherited(arguments,[{showLegend:c.showLegend},b]))}this.inherited(arguments,[a,b]);return this};p.prototype.write=function(a,b){if(b&&"web-scene"===b.origin&&b.messages){if(!this.url)return b.messages.push(new r("layer:unsupported","Layers ("+this.title+", "+this.id+") of type '"+this.declaredClass+"' require a url to a service to be written to web scenes",{layer:this})),null;if(this.isTable)return b.messages.push(new r("layer:unsupported","Layers ("+this.title+
", "+this.id+") of type '"+this.declaredClass+"' using a Table source cannot written to web scenes",{layer:this})),null}return this.inherited(arguments)};p.prototype.importLayerViewModule=function(a){switch(a.type){case "2d":return z("esri-featurelayer-webgl")&&z("esri-webgl")?g.create(function(a){return b(["../views/2d/layers/FeatureLayerView2D"],a)}):g.create(function(a){return b(["../views/2d/layers/FeatureLayerView2DLegacy"],a)});case "3d":return g.create(function(a){return b(["../views/3d/layers/FeatureLayerView3D"],
a)})}};p.prototype._checkAttachmentSupport=function(a){var b=a.attributes,c=this.objectIdField;if(!this.get("capabilities.data.supportsAttachment"))return g.reject(new r("FeatureLayer","this layer doesn't support attachments"));if(!a)return g.reject(new r("FeatureLayer","A feature is required to add/delete/update attachments"));if(!b)return g.reject(new r("FeatureLayer","'attributes' are required on a feature to query attachments"));if(!b[c])return g.reject(new r("FeatureLayer","feature is missing the identifying attribute "+
c))};p.prototype._getLayerDomain=function(a){if(!this.fields)return null;var b=null;this.fields.some(function(c){c.name===a&&(b=c.domain);return!!b});return b};p.prototype._fetchFirstLayerId=function(){return d(this.url,{query:{f:"json"},responseType:"json"}).then(function(a){if((a=a.data)&&Array.isArray(a.layers)&&0<a.layers.length)return a.layers[0].id})};p.prototype._initLayerProperties=function(a){this._set("source",a);a.layerDefinition&&this.read(a.layerDefinition,{origin:"service",url:this.parsedUrl});
this._verifySource();this._verifyFields();N.fixRendererFields(this._getAllRenderers(this.renderer),this.fields);return ha.loadStyleRenderer(this,{origin:"service"})};p.prototype._getAllRenderers=function(a){if(!a)return[];var b=[];[a,a.trackRenderer,a.observationRenderer,a.latestObservationRenderer].forEach(function(a){a&&(b.push(a),a.rendererInfos&&a.rendererInfos.forEach(function(a){a.renderer&&b.push(a.renderer)}))});return b};p.prototype._verifyFields=function(){var a=this.parsedUrl&&this.parsedUrl.path||
"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+a+")");this.isTable||this._hasMemorySource()||-1!==a.search(/\/FeatureServer\//i)||this.fields&&this.fields.some(function(a){return"geometry"===a.type})||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+a+")")};p.prototype._fixTemplates=function(a,b){a&&a.forEach(function(a){(a=
a.prototype&&a.prototype.attributes)&&b&&delete a[b]})};p.prototype._verifySource=function(){if(this._hasMemorySource()){if(this.url)throw new r("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url");}else{if(this.isTable)throw new r("feature-layer:source-type-not-supported","The table feature service type is not yet supported",{sourceType:"Table"});if(!this.url)throw new r("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source");
}};p.prototype._initMemorySource=function(a){var b=this;a.forEach(function(a){a.layer=b;a.sourceLayer=b});this._handles.add([a.on("after-add",function(a){a.item.layer=b;a.item.sourceLayer=b}),a.on("after-remove",function(a){a.item.layer=null;a.item.sourceLayer=null})],"fl-source")};p.prototype._resetMemorySource=function(a){a.forEach(function(a){a.layer=null;a.sourceLayer=null});this._handles.remove("fl-source")};p.prototype._hasMemorySource=function(){return!(this.url||!this.source)};p.prototype._readDataCapabilities=
function(a){return{supportsAttachment:da(a,"hasAttachments",!1),supportsM:da(a,"hasM",!1),supportsZ:da(a,"hasZ",!1)}};p.prototype._readOperationsCapabilities=function(a,b){a=a?a.toLowerCase().split(",").map(function(a){return a.trim()}):[];var c=-1!==a.indexOf("editing"),d=c&&-1!==a.indexOf("create"),e=c&&-1!==a.indexOf("delete"),f=c&&-1!==a.indexOf("update");!c||d||e||f||(d=e=f=!0);return{supportsCalculate:da(b,"supportsCalculate",!1),supportsTruncate:da(b,"supportsTruncate",!1),supportsValidateSql:da(b,
"supportsValidateSql",!1),supportsAdd:d,supportsDelete:e,supportsEditing:c,supportsQuery:-1!==a.indexOf("query"),supportsResizeAttachments:da(b,"supportsAttachmentsResizing",!1),supportsUpdate:f}};p.prototype._readQueryCapabilities=function(a){var b=a.advancedQueryCapabilities,c=a.ownershipBasedAccessControlForFeatures,d=a.archivingInfo,e=(a.supportedQueryFormats||"").split(",").reduce(function(a,b){(b=b.toLowerCase().trim())&&a.add(b);return a},new Set);return{supportsAttachments:da(b,"supportsQueryAttachments",
!1),supportsStatistics:da(b,"supportsStatistics",a.supportsStatistics),supportsCentroid:da(b,"supportsReturningGeometryCentroid",!1),supportsDistance:da(b,"supportsQueryWithDistance",!1),supportsDistinct:da(b,"supportsDistinct",a.supportsAdvancedQueries),supportsExtent:da(b,"supportsReturningQueryExtent",!1),supportsGeometryProperties:da(b,"supportsReturningGeometryProperties",!1),supportsHavingClause:da(b,"supportsHavingClause",!1),supportsOrderBy:da(b,"supportsOrderBy",a.supportsAdvancedQueries),
supportsPagination:da(b,"supportsPagination",!1),supportsQuantization:da(a,"supportsCoordinatesQuantization",!1),supportsResultType:da(b,"supportsQueryWithResultType",!1),supportsSqlExpression:da(b,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:da(a,"useStandardizedQueries",!1),supportsQueryByOthers:da(c,"allowOthersToQuery",!0),supportsHistoricMoment:da(d,"supportsQueryWithHistoricMoment",!1),supportsFormatPBF:e.has("pbf")}};p.prototype._readQueryRelatedCapabilities=function(a){a=a.advancedQueryCapabilities;
var b=da(a,"supportsAdvancedQueryRelated",!1);return{supportsPagination:da(a,"supportsQueryRelatedPagination",!1),supportsCount:b,supportsOrderBy:b}};p.prototype._readEditingCapabilities=function(a){var b=a.ownershipBasedAccessControlForFeatures;return{supportsGeometryUpdate:da(a,"allowGeometryUpdates",!0),supportsGlobalId:da(a,"supportsApplyEditsWithGlobalIds",!1),supportsRollbackOnFailure:da(a,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:da(a,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:da(a,
"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:da(b,"allowAnonymousToDelete",!0),supportsDeleteByOthers:da(b,"allowOthersToDelete",!0),supportsUpdateByAnonymous:da(b,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:da(b,"allowOthersToUpdate",!0)}};p.prototype._processApplyEditsParams=function(a){if(!a)return g.reject(new r("feature-layer:missing-parameters","'addFeatures', 'updateFeatures' or 'deleteFeatures' parameter is required"));a=n({},a);a.addFeatures=a.addFeatures||[];a.updateFeatures=
a.updateFeatures||[];a.deleteFeatures=a.deleteFeatures||[];if(a.addFeatures.length||a.updateFeatures.length||a.deleteFeatures.length){var b=function(a){var b=new k;b.geometry=a.geometry;b.attributes=a.attributes;return b};a.addFeatures=a.addFeatures.map(b);a.updateFeatures=a.updateFeatures.map(b);return this._normalizeGeometries(a)}return g.reject(new r("feature-layer:missing-parameters","'addFeatures', 'updateFeatures' or 'deleteFeatures' parameter is required"))};p.prototype._normalizeGeometries=
function(a){var b=a.addFeatures,c=a.updateFeatures,d=b.concat(c).map(function(a){return a.geometry});return F.normalizeCentralMeridian(d).then(function(d){var e=b.length,f=c.length;d.slice(0,e).forEach(function(b,c){a.addFeatures[c].geometry=b});d.slice(e,e+f).forEach(function(b,c){a.updateFeatures[c].geometry=b});return a})};l([t.property({types:{key:"type",base:Q.default,typeMap:{selection:G.default}},json:{origins:{"web-scene":{read:{source:"layerDefinition.featureReduction"},write:{target:"layerDefinition.featureReduction"}}}}})],
p.prototype,"featureReduction",void 0);l([t.property({readOnly:!0,dependsOn:["loaded","renderer","fields"]})],p.prototype,"allRenderers",null);l([t.property({readOnly:!0})],p.prototype,"capabilities",void 0);l([t.reader("service","capabilities","advancedQueryCapabilities archivingInfo supportsStatistics supportsAdvancedQueries hasAttachments hasM hasZ supportsAttachmentsResizing supportsCalculate supportsTruncate supportsValidateSql supportsCoordinatesQuantization useStandardizedQueries ownershipBasedAccessControlForFeatures allowGeometryUpdates supportsApplyEditsWithGlobalIds supportsRollbackOnFailureParameter allowUpdateWithoutMValues supportsAttachmentsByUploadId capabilities supportedQueryFormats".split(" "))],
p.prototype,"readCapabilities",null);l([t.property({type:String,json:{read:{source:"layerDefinition.copyrightText"},origins:{service:{read:{source:"copyrightText"}}}}})],p.prototype,"copyright",void 0);l([t.property({type:String,json:{read:{source:"layerDefinition.displayField"},origins:{service:{read:{source:"displayField"}}}}})],p.prototype,"displayField",void 0);l([t.property({type:String,json:{origins:{service:{read:!1,write:!1}},read:{source:"layerDefinition.definitionExpression"},write:{target:"layerDefinition.definitionExpression"}}})],
p.prototype,"definitionExpression",void 0);l([t.property({readOnly:!0,json:{read:sa.read}})],p.prototype,"defaultSymbol",void 0);l([t.property()],p.prototype,"dynamicDataSource",void 0);l([t.property({readOnly:!0})],p.prototype,"editFieldsInfo",void 0);l([t.property({type:Ca,json:{origins:{service:{read:{source:"elevationInfo"},write:{target:"elevationInfo",enabled:!1}}},read:{source:"layerDefinition.elevationInfo"},write:{target:"layerDefinition.elevationInfo"}}})],p.prototype,"elevationInfo",void 0);
l([t.property({type:[Y],json:{origins:{service:{read:!0}},read:{source:"layerDefinition.fields"}}})],p.prototype,"fields",void 0);l([t.property({type:A,json:{origins:{service:{read:{source:"extent"}}},read:{source:"layerDefinition.extent"}}})],p.prototype,"fullExtent",void 0);l([t.property()],p.prototype,"gdbVersion",void 0);l([t.property({json:{origins:{service:{read:Aa.read}},read:{source:"layerDefinition.geometryType",reader:Aa.read}}})],p.prototype,"geometryType",void 0);l([t.property({readOnly:!0,
dependsOn:["loaded"],json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasAttachments"}}})],p.prototype,"hasAttachments",null);l([t.property({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasM"}}})],p.prototype,"hasM",void 0);l([t.property({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasZ"}}})],p.prototype,"hasZ",void 0);l([t.property({readOnly:!0,type:C})],p.prototype,"heightModelInfo",void 0);l([t.property({type:Date})],
p.prototype,"historicMoment",void 0);l([t.property({json:{origins:{service:{read:!1},"portal-item":{read:!1}}}})],p.prototype,"id",void 0);l([t.property({readOnly:!0})],p.prototype,"isTable",void 0);l([t.reader("service","isTable",["type"]),t.reader("isTable",["layerDefinition.type"])],p.prototype,"readIsTable",null);l([t.property({dependsOn:["loaded","url","source"],readOnly:!0})],p.prototype,"hasService",null);l([t.property(X.labelsVisible)],p.prototype,"labelsVisible",void 0);l([t.property({type:[T],
json:{origins:{service:{read:{source:"drawingInfo.labelingInfo",reader:ba.reader},write:{target:"drawingInfo.labelingInfo",enabled:!1}}},read:{source:"layerDefinition.drawingInfo.labelingInfo",reader:ba.reader},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],p.prototype,"labelingInfo",void 0);l([t.property({type:Number,json:{origins:{service:{read:{source:"id"}}},read:!1}})],p.prototype,"layerId",void 0);l([t.property({type:Boolean,json:{read:{source:"showLegend"},write:{target:"showLegend"}}})],
p.prototype,"legendEnabled",void 0);l([t.property({type:Number,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.maxRecordCount"}}})],p.prototype,"maxRecordCount",void 0);l([t.property({type:Number,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.tileMaxRecordCount"}}})],p.prototype,"tileMaxRecordCount",void 0);l([t.property({type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.minScale"},write:{target:"layerDefinition.minScale"}}})],
p.prototype,"minScale",void 0);l([t.reader("service","minScale",["minScale","effectiveMinScale"])],p.prototype,"readMinScale",null);l([t.property({type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.maxScale"},write:{target:"layerDefinition.maxScale"}}})],p.prototype,"maxScale",void 0);l([t.reader("service","maxScale",["maxScale","effectiveMaxScale"])],p.prototype,"readMaxScale",null);l([t.property({type:String})],p.prototype,"objectIdField",void 0);l([t.reader("objectIdField",
["layerDefinition.objectIdField","layerDefinition.fields"]),t.reader("service","objectIdField",["objectIdField","fields"])],p.prototype,"readObjectIdFieldFromService",null);l([t.property()],p.prototype,"operationalLayerType",void 0);l([t.property({dependsOn:["requiredFields"]})],p.prototype,"outFields",null);l([t.property({readOnly:!0,dependsOn:["layerId"]})],p.prototype,"parsedUrl",null);l([t.property(X.popupEnabled)],p.prototype,"popupEnabled",void 0);l([t.property({type:a,json:{read:{source:"popupInfo"},
write:{target:"popupInfo"}}})],p.prototype,"popupTemplate",void 0);l([t.property({type:L})],p.prototype,"processing",void 0);l([t.property({type:[la],readOnly:!0})],p.prototype,"relationships",void 0);l([t.property({types:qa.types,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}}},write:{target:"layerDefinition.drawingInfo.renderer"}}})],p.prototype,"renderer",null);l([t.reader("service","renderer",["drawingInfo.renderer","defaultSymbol","type"]),t.reader("renderer",["layerDefinition.drawingInfo.renderer",
"layerDefinition.defaultSymbol","layerDefinition.type"])],p.prototype,"readRenderer",null);l([t.writer("renderer")],p.prototype,"writeRenderer",null);l([t.property({readOnly:!0,dependsOn:["allRenderers","labelingInfo","elevationInfo.featureExpressionInfo","popupTemplate.requiredFields"]})],p.prototype,"requiredFields",null);l([t.property({type:Boolean})],p.prototype,"returnM",void 0);l([t.property({type:Boolean})],p.prototype,"returnZ",void 0);l([t.property(X.screenSizePerspectiveEnabled)],p.prototype,
"screenSizePerspectiveEnabled",void 0);l([t.property()],p.prototype,"source",null);l([t.cast("source")],p.prototype,"castSource",null);l([t.reader("portal-item","source",["featureSet"]),t.reader("web-map","source",["featureSet"])],p.prototype,"readSource",null);l([t.property({readOnly:!0,json:{origins:{service:{read:{source:"definitionExpression"}}}}})],p.prototype,"serviceDefinitionExpression",void 0);l([t.property({type:B,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:{source:"layerDefinition.extent.spatialReference"}}})],
p.prototype,"spatialReference",void 0);l([t.property({type:[V]})],p.prototype,"templates",void 0);l([t.reader("templates",["editFieldsInfo","creatorField","editorField","templates"])],p.prototype,"readTemplates",null);l([t.property()],p.prototype,"timeInfo",void 0);l([t.property()],p.prototype,"title",void 0);l([t.reader("service","title",["name"]),t.reader("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],p.prototype,"readTitle",null);l([t.reader("web-map","title",
["layerDefinition.name","title"])],p.prototype,"readTitleFromWebMap",null);l([t.property({type:String})],p.prototype,"sublayerTitleMode",void 0);l([t.property({type:String,readOnly:!0,json:{read:{source:"timeInfo.trackIdField"}}})],p.prototype,"trackIdField",void 0);l([t.property({json:{read:!1}})],p.prototype,"type",void 0);l([t.property({type:String,readOnly:!0})],p.prototype,"typeIdField",void 0);l([t.reader("service","typeIdField"),t.reader("typeIdField",["layerDefinition.typeIdField"])],p.prototype,
"readTypeIdField",null);l([t.property({type:[U]})],p.prototype,"types",void 0);l([t.reader("service","types",["types"]),t.reader("types",["layerDefinition.types"])],p.prototype,"readTypes",null);l([t.property({type:q.ofType(O.FeatureIndex),readOnly:!0})],p.prototype,"indexes",void 0);l([t.property({type:String})],p.prototype,"url",null);l([t.writer("url")],p.prototype,"writeUrl",null);l([t.property({readOnly:!0})],p.prototype,"userIsAdmin",void 0);l([t.property({json:{origins:{"portal-item":{read:!1}}}})],
p.prototype,"version",void 0);l([t.reader("service","version","currentVersion capabilities drawingInfo hasAttachments htmlPopupType relationships timeInfo typeIdField types".split(" ")),t.reader("version","layerDefinition.currentVersion layerDefinition.capabilities layerDefinition.drawingInfo layerDefinition.hasAttachments layerDefinition.htmlPopupType layerDefinition.typeIdField layerDefinition.types".split(" "))],p.prototype,"readVersion",null);l([t.property({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],
p.prototype,"visible",void 0);l([t.reader("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],p.prototype,"readVisible",null);l([m(0,t.cast(Ba))],p.prototype,"queryAttachments",null);l([m(0,t.cast(Da))],p.prototype,"queryFeatures",null);l([m(0,t.cast(Da))],p.prototype,"queryFeaturesJSON",null);l([m(0,t.cast(Da))],p.prototype,"queryObjectIds",null);l([m(0,t.cast(Da))],p.prototype,"queryFeatureCount",null);l([m(0,t.cast(Da))],p.prototype,"queryExtent",null);l([m(0,t.cast(Ga))],
p.prototype,"queryRelatedFeatures",null);return p=l([t.subclass("esri.layers.FeatureLayer")],p)}(t.declared(D,ga,P,ja,K,aa,y))})},"esri/renderers":function(){define("require exports ./renderers/ClassBreaksRenderer ./renderers/HeatmapRenderer ./renderers/Renderer ./renderers/SimpleRenderer ./renderers/UniqueValueRenderer ./renderers/support/jsonUtils".split(" "),function(b,e,n,h,l,m,k,a){Object.defineProperty(e,"__esModule",{value:!0});e.ClassBreaksRenderer=n;e.HeatmapRenderer=h;e.BaseRenderer=l;e.SimpleRenderer=
m;e.UniqueValueRenderer=k;e.isRenderer=function(a){return a instanceof e.BaseRenderer};e.fromJSON=a.fromJSON})},"esri/renderers/ClassBreaksRenderer":function(){define("../core/declare ../core/lang ../core/kebabDictionary ../core/Error ../core/Logger ../core/accessorSupport/ensureType ../support/arcadeUtils ../symbols/Symbol ../symbols/PolygonSymbol3D ../symbols/support/jsonUtils ../symbols/support/typeUtils ./Renderer ./support/LegendOptions ./support/ClassBreakInfo".split(" "),function(b,e,n,h,l,
m,k,a,f,d,c,q,r,x){var z=l.getLogger("esri.renderers.ClassBreaksRenderer");r=r.LegendOptions;x=x.ClassBreakInfo;n=n({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});var v=m.ensureType(x),w=b(q,{declaredClass:"esri.renderers.ClassBreaksRenderer",properties:{backgroundFillSymbol:{types:{base:a,key:"type",typeMap:{"simple-fill":c.types.typeMap["simple-fill"],"picture-fill":c.types.typeMap["picture-fill"],"polygon-3d":c.types.typeMap["polygon-3d"]}},
value:null,json:{origins:{"web-scene":{read:d.read,write:{target:{backgroundFillSymbol:{type:f}},writer:d.writeTarget}}},read:d.read,write:d.writeTarget}},classBreakInfos:{type:[x],json:{read:function(a,b,c){if(Array.isArray(a)){var d=b.minValue;return a.map(function(a){var b=new x;b.read(a,c);null==b.minValue&&(b.minValue=d);null==b.maxValue&&(b.maxValue=b.minValue);d=b.maxValue;return b})}},write:function(a,b,c,d){a=a.map(function(a){return a.write({},d)});this._areClassBreaksConsecutive()&&a.forEach(function(a){delete a.classMinValue});
b[c]=a}}},minValue:{type:Number,readOnly:!0,dependsOn:["classBreakInfos"],get:function(){return this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0},json:{read:!1,write:{overridePolicy:function(){return 0!==this.classBreakInfos.length&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}},defaultLabel:{type:String,value:null,json:{write:!0}},defaultSymbol:{types:c.rendererTypes,value:null,json:{origins:{"web-scene":{read:d.read,write:{target:{defaultSymbol:{types:c.rendererTypes3D}},
writer:d.writeTarget}}},read:d.read,write:d.writeTarget}},valueExpression:{type:String,value:null,json:{write:!0}},valueExpressionTitle:{type:String,value:null,json:{write:!0}},compiledFunc:{dependsOn:["valueExpression"],get:function(){return k.createFunction(this.valueExpression)}},legendOptions:{type:r,value:null,json:{write:!0}},field:{value:null,cast:function(a){return null==a?a:"function"===typeof a?a:m.ensureString(a)},json:{type:String,write:function(a,b,c,d){"string"===typeof a?b[c]=a:d&&
d.messages?d.messages.push(new h("property:unsupported","ClassBreaksRenderer.field set to a function cannot be written to JSON")):z.error(".field: cannot write field to JSON since it's not a string value")}}},isMaxInclusive:!0,normalizationField:{type:String,value:null,json:{write:!0}},normalizationTotal:{type:Number,value:null,json:{write:!0}},normalizationType:{type:n.apiValues,value:null,dependsOn:["normalizationField","normalizationTotal"],get:function(){var a=this._get("normalizationType"),b=
!!this.normalizationField,c=null!=this.normalizationTotal;if(b||c)a=b&&"field"||c&&"percent-of-total",b&&c&&console.warn("warning: both normalizationField and normalizationTotal are set!");else if("field"===a||"percent-of-total"===a)a=null;return a},json:{type:n.jsonValues,read:n.read,write:n.write}},requiredFields:{dependsOn:["field","normalizationField","valueExpression"]},type:{type:["class-breaks"],value:"class-breaks",json:{type:["classBreaks"]}}},constructor:function(){this.classBreakInfos=
[]},addClassBreakInfo:function(a,b,c){a="number"===typeof a?new x({minValue:a,maxValue:b,symbol:c}):v(e.clone(a));this.classBreakInfos.push(a);1===this.classBreakInfos.length&&this.notifyChange("minValue")},removeClassBreakInfo:function(a,b){var c,d,e=this.classBreakInfos.length;for(d=0;d<e;d++)if(c=[this.classBreakInfos[d].minValue,this.classBreakInfos[d].maxValue],c[0]==a&&c[1]==b){this.classBreakInfos.splice(d,1);break}},getBreakIndex:function(a,b){var c=this.field,d=this.classBreakInfos,e=a.attributes,
f=d.length,h=this.isMaxInclusive;if(this.valueExpression)a=k.executeFunction(this.compiledFunc,k.createExecContext(a,k.getViewInfo(b)));else if("function"===typeof c)a=c(a);else if(a=parseFloat(e[c]),b=this.normalizationType)if(c=parseFloat(this.normalizationTotal),e=parseFloat(e[this.normalizationField]),"log"===b)a=Math.log(a)*Math.LOG10E;else if("percent-of-total"===b&&!isNaN(c))a=a/c*100;else if("field"===b&&!isNaN(e)){if(isNaN(a)||isNaN(e))return-1;a/=e}if(null!=a&&!isNaN(a)&&"number"===typeof a)for(e=
0;e<f;e++)if(b=[d[e].minValue,d[e].maxValue],b[0]<=a&&(h?a<=b[1]:a<b[1]))return e;return-1},getClassBreakInfo:function(a,b){a=this.getBreakIndex(a,b);return-1!==a?this.classBreakInfos[a]:null},getSymbol:function(a,b){a=this.getBreakIndex(a,b);return-1<a?this.classBreakInfos[a].symbol:this.defaultSymbol},getSymbols:function(){var a=[];this.classBreakInfos.forEach(function(b){b.symbol&&a.push(b.symbol)});this.defaultSymbol&&a.push(this.defaultSymbol);return a},clone:function(){return new w({field:this.field,
backgroundFillSymbol:this.backgroundFillSymbol&&this.backgroundFillSymbol.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:e.clone(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:e.clone(this.visualVariables),
legendOptions:e.clone(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})},collectRequiredFields:function(a){this.inherited(arguments);[this.field,this.normalizationField].forEach(function(b){b&&(a[b]=!0)});this.valueExpression&&k.extractFieldNames(this.valueExpression).forEach(function(b){a[b]=!0})},_areClassBreaksConsecutive:function(){for(var a=this.classBreakInfos,b=1;b<a.length;b++)if(a[b-1].maxValue!==a[b].minValue)return!1;return!0}});return w})},"esri/renderers/Renderer":function(){define("../core/declare ../core/Accessor ../core/JSONSupport ../core/kebabDictionary ../core/screenUtils ../core/lang ../core/Error ../support/arcadeUtils ../webdoc/support/opacityUtils ../Color ./support/utils ./support/AuthoringInfo".split(" "),
function(b,e,n,h,l,m,k,a,f,d,c,q){var r=h({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),x=h({widthAndDepth:"width-and-depth"}),z=h({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});h=h({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap"},
{ignoreUnknown:!0});var v=Math.PI,w=f.opacityToTransparency,p=f.transparencyToOpacity;return b([e,n],{declaredClass:"esri.renderers.Renderer",properties:{authoringInfo:{type:q,value:null,json:{write:!0}},requiredFields:{dependsOn:["visualVariables"],get:function(){var a=Object.create(null);this.collectRequiredFields(a);return Object.keys(a).sort()}},type:{type:h.apiValues,readOnly:!0,json:{type:h.jsonValues,read:!1,write:{writer:h.write,ignoreOrigin:!0}}},visualVariables:{json:{read:{source:["visualVariables",
"rotationType","rotationExpression"],reader:function(a,b){return this._readVariables(a,b)}},write:function(a,b,c,d){var e=[];a.forEach(function(a,b){"size"===a.type?e.push(this._writeSizeInfo(a,d,b)):"color"===a.type?e.push(this._writeColorInfo(a,d,b)):"opacity"===a.type?e.push(this._writeOpacityInfo(a,d,b)):"rotation"===a.type&&e.push(this._writeRotationInfo(a,d,b))},this);b.visualVariables=e}}}},constructor:function(){this._cache={}},_rotationRE:/^\[([^\]]+)\]$/i,_viewScaleRE:/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,
_visualVariablesSetter:function(a){var b=this._cache;this.visualVariables&&this.visualVariables.forEach(function(a,c){b.hasOwnProperty(c)&&(b[c]=null)},this);a&&a.some(function(a){return!!a.target})&&a.sort(function(a,b){return a.target===b.target?0:a.target?1:-1});a&&a.forEach(function(a,c){"color"===a.type?b[c]=this._processColorInfo(a):"opacity"===a.type?b[c]=this._processOpacityInfo(a):"size"===a.type?b[c]=this._processSizeInfo(a):"rotation"===a.type&&(b[c]=this._processRotationInfo(a))},this);
this._set("visualVariables",a)},getSymbol:function(a,b){},getVisualVariableValues:function(a,b){var c=this.visualVariables,d;c&&(d=c.map(function(c){var d,e=c.type,f=e+"Info";b=m.mixin({},b);b[f]=c;switch(e){case "size":d=this.getSize(a,b);break;case "color":d=this.getColor(a,b);break;case "opacity":d=this.getOpacity(a,b);break;case "rotation":d=this.getRotationAngle(a,b)}return{variable:c,value:d}},this).filter(function(a){return null!=a.value},this));return d},hasVisualVariables:function(a,b){return a?
!!this.getVisualVariablesForType(a,b):!!(this.getVisualVariablesForType("size",b)||this.getVisualVariablesForType("color",b)||this.getVisualVariablesForType("opacity",b)||this.getVisualVariablesForType("rotation",b))},getVisualVariablesForType:function(a,b){var c=this.visualVariables,d;c&&(d=c.filter(function(c){return c.type===a&&("string"===typeof b?c.target===b:!1===b?!c.target:!0)}))&&0===d.length&&(d=void 0);return d},getSize:function(a,b){var c=this._getVarInfo(b&&b.sizeInfo,"size"),d=c.variable,
c=this._cache[c.cacheKey],e=null;if(d)var f=d.minSize,e=d.maxSize,f="object"===typeof f&&f?this._getSize(a,f,c&&c.minSize,b):f,e="object"===typeof e&&e?this._getSize(a,e,c&&c.maxSize,b):e,e=this._getSize(a,d,c&&c.root,b,[f,e]);return e},getSizeRangeAtScale:function(a,b){var c;a=this._getVarInfo(a,"size");var d=this._cache[a.cacheKey],e={scale:b};if((a=a.variable)&&b){b=a.minSize;var f=a.maxSize;a="object"===typeof b&&b?this._getSize({},b,d&&d.minSize,e):b;d="object"===typeof f&&f?this._getSize({},
f,d&&d.maxSize,e):f;if(null!=a||null!=d)a>d&&(c=d,d=a,a=c),c={minSize:a,maxSize:d}}return c},getColor:function(a,b){var c=this._getVarInfo(b&&b.colorInfo,"color");return this._getColorComponent(a,c.variable,this._cache[c.cacheKey],b,!1)},getOpacity:function(a,b){var c=this._getVarInfo(b&&b.opacityInfo,"opacity");return this._getColorComponent(a,c.variable,this._cache[c.cacheKey],b,!0)},getRotationAngle:function(b,c){var d=this._getVarInfo(c&&c.rotationInfo,"rotation"),e=d.variable,f=this._cache[d.cacheKey],
g=e.axis||"heading",d="heading"===g&&"arithmetic"===e.rotationType?90:0,g="heading"===g&&"arithmetic"===e.rotationType?-1:1,e=e.field,f=f&&f.compiledFunc,h=b.attributes,k=0;if(e||f)f?k=a.executeFunction(f,a.createExecContext(b,a.getViewInfo(c))):"function"===typeof e?k=e.apply(this,arguments):h&&(k=h[e]||0),k="number"!==typeof k||isNaN(k)?null:d+g*k;return k},collectRequiredFields:function(b){var c=[];this.visualVariables&&(c=c.concat(this.visualVariables));c.forEach(function(c){c&&(c.field&&(b[c.field]=
!0),c.normalizationField&&(b[c.normalizationField]=!0),c.valueExpression&&a.extractFieldNames(c.valueExpression).forEach(function(a){b[a]=!0}))})},_getVarInfo:function(a,b){var c;a&&a.type===b&&this.visualVariables?(c=this.visualVariables.indexOf(a),a=this.visualVariables[c]):this.visualVariables&&(a=(a=this.getVisualVariablesForType(b))&&a[0],c=this.visualVariables.indexOf(a));return{variable:a,cacheKey:c}},_readSizeInfo:function(a){a.axis&&(a.axis=x.fromJSON(a.axis));a.valueUnit&&(a.valueUnit=z.fromJSON(a.valueUnit));
return a},_readColorInfo:function(a){a&&(a.colors&&a.colors.forEach(function(b,c){Array.isArray(b)?a.colors[c]=d.fromJSON(b):a.colors[c]=new d(b)}),a.stops&&a.stops.forEach(function(b,c){b.color&&Array.isArray(b.color)?a.stops[c].color=d.fromJSON(b.color):b.color&&(a.stops[c].color=new d(b.color))}));return a},_readOpacityInfo:function(a){var b;a&&(b=m.mixin({},a),b.transparencyValues&&(b.opacityValues=b.transparencyValues.map(p),delete b.transparencyValues),b.stops&&(b.stops=b.stops.map(function(a){a=
m.mixin({},a);a.opacity=p(a.transparency);delete a.transparency;return a})));return b},_readVariables:function(a,b){a&&(a=a.map(function(a){a=m.clone(a);a.type=r.fromJSON(a.type);"size"===a.type?a=this._readSizeInfo(a):"color"===a.type?a=this._readColorInfo(a):"opacity"===a.type&&(a=this._readOpacityInfo(a));return a},this));var c=b.rotationType;if(b=b.rotationExpression)c={type:"rotation",rotationType:c},(b=b.match(this._rotationRE))&&b[1]&&(c.field=b[1],a||(a=[]),a.push(c));return a},_createCache:function(b){var c=
b&&b.valueExpression,d=a.createSyntaxTree(c),d=a.createFunction(d),e=!(!b||!b.expression)||this._viewScaleRE.test(c);return{ipData:this._interpolateData(b),hasExpr:!!c,compiledFunc:d,isScaleDriven:e}},_processColorInfo:function(a){a&&(a.colors&&a.colors.forEach(function(b,c){b instanceof d||(a.colors[c]=new d(b))}),a.stops&&a.stops.forEach(function(b,c){!b.color||b.color instanceof d||(a.stops[c].color=new d(b.color))}),this._sortStops(a.stops));return this._createCache(a)},_processOpacityInfo:function(a){this._sortStops(a&&
a.stops);return this._createCache(a)},_processSizeInfo:function(a){a.stops&&Array.isArray(a.stops)?a.stops=this._processSizeInfoStops(a.stops):(a.minSize=a.minSize&&this._processSizeInfoSize(a.minSize),a.maxSize=a.maxSize&&this._processSizeInfoSize(a.maxSize));return{root:this._createCache(a),minSize:this._createCache(a.minSize),maxSize:this._createCache(a.maxSize)}},_processSizeInfoSize:function(a){"object"===typeof a?a.stops=this._processSizeInfoStops(a.stops):a=l.toPt(a);return a},_processSizeInfoStops:function(a){a&&
Array.isArray(a)&&(a.forEach(function(a){a.size=l.toPt(a.size)}),this._sortStops(a));return a},_sortStops:function(a){a&&Array.isArray(a)&&a.sort(function(a,b){return a.value-b.value})},_processRotationInfo:function(a){return this._createCache(a)},_getSize:function(b,d,e,f,h){var g=b.attributes,k=d.field,l=d.stops,m=0,p=e&&e.hasExpr,q=e&&e.compiledFunc,n=e&&e.ipData,t=e&&e.isScaleDriven,r="number"===typeof b,u=r?b:null;if(k||t||p){var y=f&&f.scale,z=h?h[0]:d.minSize,w=h?h[1]:d.maxSize,x=d.minDataValue,
A=d.maxDataValue,G=d.valueUnit||"unknown",V=d.valueRepresentation,m=d.scaleBy,U=d.normalizationField,Y=g?parseFloat(g[U]):void 0,N=f&&f.shape;t?u=null==y?this._getAverageValue(d):y:"number"!==typeof u&&(p?u=a.executeFunction(q,a.createExecContext(b,a.getViewInfo(f))):"function"===typeof k?u=k.apply(this,arguments):g&&(u=g[k]));if(null==u||U&&!r&&(isNaN(Y)||0===Y))return null;isNaN(Y)||r||(u/=Y);if(l)w=this._lookupData(u,n),u=w[0],z=w[1],u===z?m=l[u].size:(u=l[u].size,l=l[z].size,m=u+(l-u)*w[2]);else if(null!=
z&&null!=w&&null!=x&&null!=A)u<=x?m=z:u>=A?m=w:(l=(u-x)/(A-x),"area"===m&&N?(z=(u="circle"===N)?v*Math.pow(z/2,2):z*z,l=z+l*((u?v*Math.pow(w/2,2):w*w)-z),m=u?2*Math.sqrt(l/v):Math.sqrt(l)):m=z+l*(w-z));else if("unknown"===G)null!=z&&null!=x?(z&&x?(l=u/x,m="circle"===N?2*Math.sqrt(l*Math.pow(z/2,2)):"square"===N||"diamond"===N||"image"===N?Math.sqrt(l*Math.pow(z,2)):l*z):m=u+(z||x),m=m<z?z:m,null!=w&&m>w&&(m=w)):m=u;else{l=(f&&f.resolution?f.resolution:1)*c.meterIn[G];if("area"===V)m=Math.sqrt(u/v)/
l,m*=2;else if(m=u/l,"radius"===V||"distance"===V)m*=2;null!=z&&m<z&&(m=z);null!=w&&m>w&&(m=w)}}else d&&(m=l&&l[0]&&l[0].size,null==m&&(m=d.minSize));return m=isNaN(m)?0:m},_getAverageValue:function(a){var b=a.stops,c;b?(c=b[0].value,a=b[b.length-1].value):(c=a.minDataValue||0,a=a.maxDataValue||0);return(c+a)/2},_getColorComponent:function(b,c,d,e,f){var g=b.attributes,h=c&&c.field,k="number"===typeof b,l=k?b:null,m=d&&d.hasExpr,p=d&&d.compiledFunc,q=d&&d.ipData,n;if(h||m){var t=c.normalizationField,
r=g&&t?parseFloat(g[t]):void 0;"number"!==typeof l&&(m?l=a.executeFunction(p,a.createExecContext(b,a.getViewInfo(e))):"function"===typeof h?l=h.apply(this,arguments):g&&(l=g[h]));null==l||t&&!k&&(isNaN(r)||0===r)||(isNaN(r)||k||(l/=r),n=f?this._getOpacity(l,c,q):this._getColor(l,c,q,e&&e.color))}else c&&(g=c.stops,f?(n=g&&g[0]&&g[0].opacity,null==n&&(n=c.opacityValues&&c.opacityValues[0])):n=g&&g[0]&&g[0].color||c.colors&&c.colors[0]);return n},_interpolateData:function(a){var b;if(a)if(a.colors||
a.opacityValues){var c=(a.colors||a.opacityValues).length,d=a.minDataValue,e=(a.maxDataValue-d)/(c-1);b=[];for(a=0;a<c;a++)b[a]=d+a*e}else a.stops&&(b=a.stops.map(function(a){return a.value||0}));return b},_getOpacity:function(a,b,c){a=this._lookupData(a,c);var d;b=b||this.opacityInfo;a&&(c=a[0],d=a[1],c===d?d=this._getOpacValue(b,c):(c=this._getOpacValue(b,c),b=this._getOpacValue(b,d),d=c+(b-c)*a[2]));return d},_getOpacValue:function(a,b){return a.opacityValues?a.opacityValues[b]:a.stops[b].opacity},
_getColor:function(a,b,c,e){a=this._lookupData(a,c);b=b||this.colorInfo;if(a){c=a[0];var f=a[1];e=e||new d;c===f?e.setColor(this._getColorObj(b,c)):d.blendColors(this._getColorObj(b,c),this._getColorObj(b,f),a[2],e);return e}},_getColorObj:function(a,b){return a.colors?a.colors[b]:a.stops[b].color},_lookupData:function(a,b){var c;if(b){var d=0,e=b.length-1;b.some(function(b,c){if(a<b)return e=c,!0;d=c;return!1});c=[d,e,(a-b[d])/(b[e]-b[d])]}return c},_processForContext:function(a,b,c){if(b&&"web-scene"===
b.origin){var d=null!=a.expression,e=null!=a.valueExpressionTitle&&"rotation"===a.type;b.messages&&(d&&b.messages.push(new k("property:unsupported",a.type+"VisualVariable.expression is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:c+".expression",context:b})),e&&b.messages.push(new k("property:unsupported",a.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,
propertyName:c+".valueExpressionTitle",context:b})));d&&delete a.expression;e&&delete a.valueExpressionTitle}else"size"===a.type&&this._convertExpressionToArcade(a)},_writeRotationInfo:function(a,b,c){a&&(a=m.mixin({},a),this._processForContext(a,b,"visualVariables["+c+"]"),a.type=r.toJSON(a.type),a=m.fixJson(a,!0));return a},_convertExpressionToArcade:function(a){a&&a.expression&&(a.valueExpression="$view.scale")},_writeSizeInfo:function(a,b,c){if(a){a=m.mixin({},a);this._processForContext(a,b,"string"===
typeof c?c:"visualVariables["+c+"]");var d=a.minSize,e=a.maxSize;d&&(a.minSize="number"===typeof d?d:this._writeSizeInfo(d,b,"visualVariables["+c+"].minSize"));e&&(a.maxSize="number"===typeof e?e:this._writeSizeInfo(e,b,"visualVariables["+c+"].maxSize"));b=a.legendOptions;c=a.axis;a.type=r.toJSON(a.type);c&&(a.axis=x.toJSON(c));b&&(a.legendOptions=m.mixin({},b),b=b.customValues)&&(a.legendOptions.customValues=b.slice(0));a.stops&&(a.stops=a.stops.map(function(a){a=m.mixin({},a);null===a.label&&delete a.label;
return a}));a=m.fixJson(a,!0)}return a},_writeColorInfo:function(a,b,c){a&&(a=m.mixin({},a),this._processForContext(a,b,"visualVariables["+c+"]"),a.type=r.toJSON(a.type),a.colors&&(a.colors=a.colors.map(function(a){return d.toJSON(a)})),a.stops&&(a.stops=a.stops.map(function(a){a=m.mixin({},a);a.color&&(a.color=d.toJSON(a.color));null==a.value&&(a.value=0);null===a.label&&delete a.label;return a})),a.legendOptions&&(a.legendOptions=m.mixin({},a.legendOptions)),a=m.fixJson(a,!0));return a},_writeOpacityInfo:function(a,
b,c){var d;a&&(d=m.mixin({},a),this._processForContext(d,b,"visualVariables["+c+"]"),d.type=r.toJSON(d.type),d.opacityValues&&(d.transparencyValues=d.opacityValues.map(w),delete d.opacityValues),d.stops&&(d.stops=d.stops.map(function(a){a=m.mixin({},a);a.transparency=w(a.opacity);delete a.opacity;null===a.label&&delete a.label;return a})),d.legendOptions&&(d.legendOptions=m.mixin({},d.legendOptions)),d=m.fixJson(d,!0));return d}})})},"esri/renderers/support/AuthoringInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/kebabDictionary ../../core/lang ../../core/accessorSupport/decorators ./AuthoringInfoVisualVariable".split(" "),
function(b,e,n,h,l,m,k,a,f){var d=m({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),c=m({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance"}),q="inches feet yards miles nautical-miles millimeters centimeters decimeters meters kilometers decimal-degrees".split(" ");
return function(b){function e(a){a=b.call(this)||this;a.lengthUnit=null;a.visualVariables=null;return a}n(e,b);l=e;Object.defineProperty(e.prototype,"classificationMethod",{get:function(){var a=this._get("classificationMethod"),b=this.type;return b&&"relationship"!==b?"class-breaks-size"===b||"class-breaks-color"===b?a||"manual":null:a},set:function(a){this._set("classificationMethod",a)},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"fields",{get:function(){return this.type&&
"predominance"!==this.type?null:this._get("fields")},set:function(a){this._set("fields",a)},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"field1",{get:function(){return this.type&&"relationship"!==this.type?null:this._get("field1")},set:function(a){this._set("field1",a)},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"field2",{get:function(){return this.type&&"relationship"!==this.type?null:this._get("field2")},set:function(a){this._set("field2",a)},enumerable:!0,
configurable:!0});Object.defineProperty(e.prototype,"focus",{get:function(){return this.type&&"relationship"!==this.type?null:this._get("focus")},set:function(a){this._set("focus",a)},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"numClasses",{get:function(){return this.type&&"relationship"!==this.type?null:this._get("numClasses")},set:function(a){this._set("numClasses",a)},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"standardDeviationInterval",{get:function(){var a=
this.type;return a&&"relationship"!==a&&"class-breaks-size"!==a&&"class-breaks-color"!==a?null:this.classificationMethod&&"standard-deviation"!==this.classificationMethod?null:this._get("standardDeviationInterval")},set:function(a){this._set("standardDeviationInterval",a)},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"type",{get:function(){return this._get("type")},set:function(a){var b=a;"classed-size"===a?b="class-breaks-size":"classed-color"===a&&(b="class-breaks-color");this._set("type",
b)},enumerable:!0,configurable:!0});e.prototype.clone=function(){return new l({classificationMethod:this.classificationMethod,fields:this.fields&&this.fields.slice(0),field1:k.clone(this.field1),field2:k.clone(this.field2),focus:this.focus,numClasses:this.numClasses,lengthUnit:this.lengthUnit,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(function(a){return a.clone()})})};var l;h([a.property({type:d.apiValues,
value:null,dependsOn:["type"],json:{type:d.jsonValues,read:d.read,write:d.write}})],e.prototype,"classificationMethod",null);h([a.property({type:[String],value:null,dependsOn:["type"],json:{write:!0}})],e.prototype,"fields",null);h([a.property({value:null,dependsOn:["type"],json:{write:!0}})],e.prototype,"field1",null);h([a.property({value:null,dependsOn:["type"],json:{write:!0}})],e.prototype,"field2",null);h([a.property({type:String,value:null,dependsOn:["type"],json:{write:!0}})],e.prototype,"focus",
null);h([a.property({type:Number,value:null,dependsOn:["type"],json:{write:!0}})],e.prototype,"numClasses",null);h([a.property({type:q,json:{type:q,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],e.prototype,"lengthUnit",void 0);h([a.property({type:[.25,.33,.5,1],value:null,dependsOn:["classificationMethod","type"],json:{type:[.25,.33,.5,1],write:!0}})],e.prototype,"standardDeviationInterval",null);h([a.property({type:String,value:null,json:{type:c.jsonValues,read:c.read,write:c.write}})],
e.prototype,"type",null);h([a.property({type:[f],json:{write:!0}})],e.prototype,"visualVariables",void 0);return e=l=h([a.subclass("esri.renderers.support.AuthoringInfo")],e)}(a.declared(l))})},"esri/renderers/support/AuthoringInfoVisualVariable":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/kebabDictionary ../../core/accessorSupport/decorators ../../core/accessorSupport/decorators/cast".split(" "),
function(b,e,n,h,l,m,k,a){var f=m({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),d=m({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity"}),c={key:function(a){return"number"===typeof a?"number":"string"},typeMap:{number:Number,string:String},base:null},q=["high-to-low","above-and-below","centered-on","extremes"],r="seconds minutes hours days months years".split(" ");return function(b){function e(a){a=b.call(this)||this;a.endTime=null;a.field=null;a.maxSliderValue=null;
a.minSliderValue=null;a.startTime=null;a.type=null;a.units=null;return a}n(e,b);l=e;e.prototype.castEndTime=function(a){return"string"===typeof a||"number"===typeof a?a:null};e.prototype.castStartTime=function(a){return"string"===typeof a||"number"===typeof a?a:null};Object.defineProperty(e.prototype,"style",{get:function(){return"color"===this.type?this._get("style"):null},set:function(a){this._set("style",a)},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"theme",{get:function(){return"color"===
this.type?this._get("theme")||"high-to-low":null},set:function(a){this._set("theme",a)},enumerable:!0,configurable:!0});e.prototype.clone=function(){return new l({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})};var l;h([k.property({types:c,json:{write:!0}})],e.prototype,"endTime",void 0);h([a.cast("endTime")],e.prototype,"castEndTime",null);h([k.property({type:String,
json:{write:!0}})],e.prototype,"field",void 0);h([k.property({type:Number,json:{write:!0}})],e.prototype,"maxSliderValue",void 0);h([k.property({type:Number,json:{write:!0}})],e.prototype,"minSliderValue",void 0);h([k.property({types:c,json:{write:!0}})],e.prototype,"startTime",void 0);h([a.cast("startTime")],e.prototype,"castStartTime",null);h([k.property({type:f.apiValues,value:null,dependsOn:["type"],json:{type:f.jsonValues,read:f.read,write:f.write}})],e.prototype,"style",null);h([k.property({type:q,
value:null,dependsOn:["type"],json:{type:q,write:!0}})],e.prototype,"theme",null);h([k.property({type:d.apiValues,json:{type:d.jsonValues,read:d.read,write:d.write}})],e.prototype,"type",void 0);h([k.property({type:r,json:{type:r,write:!0}})],e.prototype,"units",void 0);return e=l=h([k.subclass("esri.renderers.support.AuthoringInfoVisualVariable")],e)}(k.declared(l))})},"esri/renderers/support/LegendOptions":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),
function(b,e,n,h,l,m){Object.defineProperty(e,"__esModule",{value:!0});b=function(b){function a(){var a=null!==b&&b.apply(this,arguments)||this;a.title=null;return a}n(a,b);e=a;a.prototype.clone=function(){return new e({title:this.title})};var e;h([m.property({type:String,json:{write:!0}})],a.prototype,"title",void 0);return a=e=h([m.subclass("esri.renderers.support.LegendOptions")],a)}(m.declared(l));e.LegendOptions=b;e.default=b})},"esri/renderers/support/ClassBreakInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ../../symbols/support/jsonUtils ../../symbols/support/typeUtils".split(" "),
function(b,e,n,h,l,m,k,a){Object.defineProperty(e,"__esModule",{value:!0});b=function(b){function d(){var a=null!==b&&b.apply(this,arguments)||this;a.description=null;a.label=null;a.minValue=null;a.maxValue=0;a.symbol=null;return a}n(d,b);c=d;d.prototype.clone=function(){return new c({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?this.symbol.clone():null})};var c;h([m.property({type:String,json:{write:!0}})],d.prototype,"description",
void 0);h([m.property({type:String,json:{write:!0}})],d.prototype,"label",void 0);h([m.property({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],d.prototype,"minValue",void 0);h([m.property({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],d.prototype,"maxValue",void 0);h([m.property({types:a.rendererTypes,json:{origins:{"web-scene":{read:k.read,write:{target:{symbol:{types:a.rendererTypes3D}},writer:k.writeTarget}}},read:k.read,
write:k.writeTarget}})],d.prototype,"symbol",void 0);return d=c=h([m.subclass("esri.renderers.support.ClassBreakInfo")],d)}(m.declared(l));e.ClassBreakInfo=b;e.default=b})},"esri/renderers/HeatmapRenderer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../Color ../core/lang ../core/accessorSupport/decorators ./Renderer ./support/HeatmapColorStop".split(" "),function(b,e,n,h,l,m,k,a,f){return function(a){function b(b){b=a.call(this)||this;
b.blurRadius=10;b.colorStops=[new f.HeatmapColorStop({ratio:0,color:new l("rgba(255, 140, 0, 0)")}),new f.HeatmapColorStop({ratio:.75,color:new l("rgba(255, 140, 0, 1)")}),new f.HeatmapColorStop({ratio:.9,color:new l("rgba(255, 0,   0, 1)")})];b.field=null;b.fieldOffset=0;b.maxPixelIntensity=100;b.minPixelIntensity=0;b.type="heatmap";return b}n(b,a);d=b;b.prototype.clone=function(){return new d({blurRadius:this.blurRadius,colorStops:m.clone(this.colorStops),field:this.field,maxPixelIntensity:this.maxPixelIntensity,
minPixelIntensity:this.minPixelIntensity})};var d;h([k.property({type:Number,json:{write:!0}})],b.prototype,"blurRadius",void 0);h([k.property({type:[f.HeatmapColorStop],json:{write:!0}})],b.prototype,"colorStops",void 0);h([k.property({type:String,json:{write:!0}})],b.prototype,"field",void 0);h([k.property({type:Number,json:{write:{overridePolicy:function(a,b,c){return{enabled:null==c}}}}})],b.prototype,"fieldOffset",void 0);h([k.property({type:Number,json:{write:!0}})],b.prototype,"maxPixelIntensity",
void 0);h([k.property({type:Number,json:{write:!0}})],b.prototype,"minPixelIntensity",void 0);h([k.property({dependsOn:["field"],readOnly:!0})],b.prototype,"requiredFields",void 0);h([k.enumeration.serializable()({heatmap:"heatmap"})],b.prototype,"type",void 0);return b=d=h([k.subclass("esri.renderers.HeatmapRenderer")],b)}(k.declared(a))})},"esri/renderers/support/HeatmapColorStop":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),
function(b,e,n,h,l,m,k){Object.defineProperty(e,"__esModule",{value:!0});b=function(a){function b(b){b=a.call(this)||this;b.color=null;b.ratio=null;return b}n(b,a);d=b;b.prototype.clone=function(){return new d({color:this.color,ratio:this.ratio})};var d;h([k.property({type:l,json:{write:!0}})],b.prototype,"color",void 0);h([k.property({type:Number,json:{write:!0}})],b.prototype,"ratio",void 0);return b=d=h([k.subclass("esri.renderers.support.HeatmapColorStop")],b)}(k.declared(m));e.HeatmapColorStop=
b;e.default=b})},"esri/renderers/SimpleRenderer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Renderer ../symbols/support/jsonUtils ../symbols/support/typeUtils".split(" "),function(b,e,n,h,l,m,k,a,f){return function(b){function c(){var a=null!==b&&b.apply(this,arguments)||this;a.description=null;a.label=null;a.symbol=null;a.type="simple";return a}n(c,b);d=c;c.prototype.writeSymbolWebScene=
function(b,c,d,e){a.writeTarget(b,c,d,e)};c.prototype.writeSymbol=function(b,c,d,e){a.writeTarget(b,c,d,e)};c.prototype.readSymbol=function(b,c,d){return a.read(b,c,d)};c.prototype.getSymbol=function(a,b){return this.symbol};c.prototype.getSymbols=function(){return this.symbol?[this.symbol]:[]};c.prototype.clone=function(){return new d({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:l.clone(this.visualVariables),authoringInfo:this.authoringInfo&&
this.authoringInfo.clone()})};var d;h([m.property({type:String,json:{write:!0}})],c.prototype,"description",void 0);h([m.property({type:String,json:{write:!0}})],c.prototype,"label",void 0);h([m.property({types:f.rendererTypes})],c.prototype,"symbol",void 0);h([m.writer("web-scene","symbol",{symbol:{types:f.rendererTypes3D}})],c.prototype,"writeSymbolWebScene",null);h([m.writer("symbol")],c.prototype,"writeSymbol",null);h([m.reader("symbol")],c.prototype,"readSymbol",null);h([m.enumeration.serializable()({simple:"simple"})],
c.prototype,"type",void 0);return c=d=h([m.subclass("esri.renderers.SimpleRenderer")],c)}(m.declared(k))})},"esri/renderers/UniqueValueRenderer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../symbols ../core/arrayUtils ../core/Error ../core/lang ../core/Logger ../core/urlUtils ../core/accessorSupport/decorators ../core/accessorSupport/ensureType ../portal/Portal ./Renderer ./support/diffUtils ./support/LegendOptions ./support/UniqueValueInfo ../support/arcadeUtils ../symbols/support/jsonUtils ../symbols/support/styleUtils ../symbols/support/typeUtils".split(" "),
function(b,e,n,h,l,m,k,a,f,d,c,q,r,x,z,v,w,p,y,g,u,t){var A=d.getLogger("esri.renderers.UniqueValueRenderer"),C=r.ensureType(p.default);return function(b){function d(a){a=b.call(this)||this;a._valueInfoMap={};a._isDefaultSymbolDerived=!1;a.type="unique-value";a.backgroundFillSymbol=null;a.field=null;a.field2=null;a.field3=null;a.valueExpression=null;a.valueExpressionTitle=null;a.legendOptions=null;a.defaultLabel=null;a.fieldDelimiter=null;a.portal=null;a.styleOrigin=null;a.diff={uniqueValueInfos:function(a,
b){if(a||b){if(!a||!b)return{type:"complete",oldValue:a,newValue:b};for(var c=!1,d={type:"collection",added:[],removed:[],changed:[],unchanged:[]},e=function(e){var f=k.find(a,function(a){return a.value===b[e].value});f?v.diff(f,b[e])?d.changed.push({type:"complete",oldValue:f,newValue:b[e]}):d.unchanged.push({oldValue:f,newValue:b[e]}):d.added.push(b[e]);c=!0},f=0;f<b.length;f++)e(f);e=function(e){k.find(b,function(b){return b.value===a[e].value})||(d.removed.push(a[e]),c=!0)};for(f=0;f<a.length;f++)e(f);
return c?d:void 0}}};a._set("uniqueValueInfos",[]);return a}n(d,b);e=d;d.prototype.writeBackgroundFillSymbolWebScene=function(a,b,c,d){g.writeTarget(a,b,c,d)};d.prototype.castField=function(a){return null==a?a:"function"===typeof a?a:r.ensureString(a)};d.prototype.writeField=function(b,c,d,e){"string"===typeof b?c[d]=b:e&&e.messages?e.messages.push(new a("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):A.error(".field: cannot write field to JSON since it's not a string value")};
Object.defineProperty(d.prototype,"compiledFunc",{get:function(){return y.createFunction(this.valueExpression)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"defaultSymbol",{set:function(a){this._isDefaultSymbolDerived=!1;this._set("defaultSymbol",a)},enumerable:!0,configurable:!0});d.prototype.readDefaultSymbol=function(a,b,c){return g.read(a,b,c)};d.prototype.writeDefaultSymbolWebScene=function(a,b,c,d){this._isDefaultSymbolDerived||g.writeTarget(a,b,c,d)};d.prototype.writeDefaultSymbol=
function(a,b,c,d){this._isDefaultSymbolDerived||g.writeTarget(a,b,c,d)};d.prototype.readPortal=function(a,b,c){return c.portal||x.getDefault()};d.prototype.readStyleOrigin=function(a,b,d){if(b.styleName)return Object.freeze({styleName:b.styleName});if(b.styleUrl)return a=c.read(b.styleUrl,d),Object.freeze({styleUrl:a})};d.prototype.writeStyleOrigin=function(a,b,d,e){a.styleName?b.styleName=a.styleName:a.styleUrl&&(b.styleUrl=c.write(a.styleUrl,e),c.isAbsolute(b.styleUrl)&&(b.styleUrl=c.normalize(b.styleUrl)))};
Object.defineProperty(d.prototype,"uniqueValueInfos",{set:function(a){this.styleOrigin?A.error("#uniqueValueInfos\x3d","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",a),this._updateValueInfoMap())},enumerable:!0,configurable:!0});d.prototype.addUniqueValueInfo=function(a,b){this.styleOrigin?A.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(a="object"===typeof a?
C(a):new p.default({value:a,symbol:b}),this.uniqueValueInfos.push(a),this._valueInfoMap[a.value]=a)};d.prototype.removeUniqueValueInfo=function(a){if(this.styleOrigin)A.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");else for(var b=0;b<this.uniqueValueInfos.length;b++)if(this.uniqueValueInfos[b].value===a+""){delete this._valueInfoMap[a];this.uniqueValueInfos.splice(b,1);break}};d.prototype.getUniqueValueInfo=function(a,b){var c=
this.field,d=a.attributes,e;this.valueExpression?e=y.executeFunction(this.compiledFunc,y.createExecContext(a,y.getViewInfo(b))):"function"!==typeof c&&this.field2?(a=this.field2,b=this.field3,e=[],c&&e.push(d[c]),a&&e.push(d[a]),b&&e.push(d[b]),e=e.join(this.fieldDelimiter||"")):"function"===typeof c?e=c(a):c&&(e=d[c]);return this._valueInfoMap[e+""]};d.prototype.getSymbol=function(a,b){return(a=this.getUniqueValueInfo(a,b))&&a.symbol||this.defaultSymbol};d.prototype.getSymbols=function(){for(var a=
[],b=0,c=this.uniqueValueInfos;b<c.length;b++){var d=c[b];d.symbol&&a.push(d.symbol)}this.defaultSymbol&&a.push(this.defaultSymbol);return a};d.prototype.clone=function(){var a=new e({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:f.clone(this.defaultSymbol),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:f.clone(this.visualVariables),legendOptions:f.clone(this.legendOptions),
authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),backgroundFillSymbol:f.clone(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(a._isDefaultSymbolDerived=!0);a._set("portal",this.portal);var b=f.clone(this.uniqueValueInfos);this.styleOrigin&&(a._set("styleOrigin",Object.freeze(f.clone(this.styleOrigin))),Object.freeze(b));a._set("uniqueValueInfos",b);a._updateValueInfoMap();return a};d.prototype.collectRequiredFields=function(a){this.inherited(arguments);[this.field,this.field2,
this.field3].forEach(function(b){b&&"string"===typeof b&&(a[b]=!0)});this.valueExpression&&y.extractFieldNames(this.valueExpression).forEach(function(b){a[b]=!0})};d.prototype.populateFromStyle=function(){var a=this;return u.fetchStyle(this.styleOrigin,{portal:this.portal}).then(function(b){var c=[];a._valueInfoMap={};b&&b.data&&Array.isArray(b.data.items)&&b.data.items.forEach(function(d){var e=new m.WebStyleSymbol({styleUrl:b.styleUrl,styleName:b.styleName,portal:a.portal,name:d.name});a.defaultSymbol||
d.name!==b.data.defaultItem||(a.defaultSymbol=e,a._isDefaultSymbolDerived=!0);e=new p.default({value:d.name,symbol:e});c.push(e);a._valueInfoMap[d.name]=e});a._set("uniqueValueInfos",Object.freeze(c));!a.defaultSymbol&&a.uniqueValueInfos.length&&(a.defaultSymbol=a.uniqueValueInfos[0].symbol,a._isDefaultSymbolDerived=!0);return a})};d.prototype._updateValueInfoMap=function(){var a=this;this._valueInfoMap={};this.uniqueValueInfos.forEach(function(b){return a._valueInfoMap[b.value+""]=b})};d.fromPortalStyle=
function(a,b){var c=new e(b&&b.properties);c._set("styleOrigin",Object.freeze({styleName:a}));c._set("portal",b&&b.portal||x.getDefault());b=c.populateFromStyle();b.catch(function(b){A.error("#fromPortalStyle('"+a+"'[, ...])","Failed to create unique value renderer from style name",b)});return b};d.fromStyleUrl=function(a,b){b=new e(b&&b.properties);b._set("styleOrigin",Object.freeze({styleUrl:a}));b=b.populateFromStyle();b.catch(function(b){A.error("#fromStyleUrl('"+a+"'[, ...])","Failed to create unique value renderer from style URL",
b)});return b};var e;h([q.enumeration.serializable()({uniqueValue:"unique-value"})],d.prototype,"type",void 0);h([q.property({types:{base:m.BaseSymbol,key:"type",typeMap:{"simple-fill":t.rendererTypes.typeMap["simple-fill"],"picture-fill":t.rendererTypes.typeMap["picture-fill"],"polygon-3d":t.rendererTypes.typeMap["polygon-3d"]}},json:{read:g.read,write:g.writeTarget}})],d.prototype,"backgroundFillSymbol",void 0);h([q.writer("web-scene","backgroundFillSymbol",{backgroundFillSymbol:{type:m.PolygonSymbol3D}})],
d.prototype,"writeBackgroundFillSymbolWebScene",null);h([q.property({json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],d.prototype,"field",void 0);h([q.cast("field")],d.prototype,"castField",null);h([q.writer("field")],d.prototype,"writeField",null);h([q.property({type:String,json:{write:!0}})],d.prototype,"field2",void 0);h([q.property({type:String,json:{write:!0}})],d.prototype,"field3",void 0);h([q.property({type:String,json:{write:!0}})],d.prototype,"valueExpression",void 0);
h([q.property({type:String,json:{write:!0}})],d.prototype,"valueExpressionTitle",void 0);h([q.property({dependsOn:["valueExpression"]})],d.prototype,"compiledFunc",null);h([q.property({type:w.default,json:{write:!0}})],d.prototype,"legendOptions",void 0);h([q.property({type:String,json:{write:!0}})],d.prototype,"defaultLabel",void 0);h([q.property({types:t.rendererTypes})],d.prototype,"defaultSymbol",null);h([q.reader("defaultSymbol")],d.prototype,"readDefaultSymbol",null);h([q.writer("web-scene",
"defaultSymbol",{defaultSymbol:{types:t.rendererTypes3D}})],d.prototype,"writeDefaultSymbolWebScene",null);h([q.writer("defaultSymbol")],d.prototype,"writeDefaultSymbol",null);h([q.property({type:String,json:{write:!0}})],d.prototype,"fieldDelimiter",void 0);h([q.property({type:x,readOnly:!0})],d.prototype,"portal",void 0);h([q.reader("portal",["styleName"])],d.prototype,"readPortal",null);h([q.property({readOnly:!0})],d.prototype,"styleOrigin",void 0);h([q.reader("styleOrigin",["styleName","styleUrl"])],
d.prototype,"readStyleOrigin",null);h([q.writer("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],d.prototype,"writeStyleOrigin",null);h([q.property({type:[p.default],json:{write:{overridePolicy:function(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],d.prototype,"uniqueValueInfos",null);h([q.property({dependsOn:["field","field2","field3","valueExpression"],readOnly:!0})],d.prototype,"requiredFields",void 0);h([l(1,q.cast(t.ensureType))],d.prototype,"addUniqueValueInfo",null);
return d=e=h([q.subclass("esri.renderers.UniqueValueRenderer")],d)}(q.declared(z))})},"esri/renderers/support/diffUtils":function(){define(["require","exports","../../core/Accessor","../../core/Collection","../../core/accessorSupport/utils"],function(b,e,n,h,l){function m(a){return a instanceof h?Object.keys(a.items):a instanceof n?l.getProperties(a).keys():a?Object.keys(a):[]}function k(a,b){return a instanceof h?a.items[b]:a[b]}function a(a,b){return Array.isArray(a)&&Array.isArray(b)?a.length!==
b.length:!1}function f(a){return a?a.declaredClass:null}function d(b,e){var h=b.diff;if(h&&"function"===typeof h)return h(b,e);var l=m(b),q=m(e);if(0!==l.length||0!==q.length){if(!l.length||!q.length||a(b,e))return{type:"complete",oldValue:b,newValue:e};var r=q.filter(function(a){return-1===l.indexOf(a)}),p=l.filter(function(a){return-1===q.indexOf(a)}),r=l.filter(function(a){return-1<q.indexOf(a)&&k(b,a)!==k(e,a)}).concat(r,p).sort();if((p=f(b))&&-1<c.indexOf(p)&&r.length)return{type:"complete",
oldValue:b,newValue:e};var y,p=b instanceof n&&e instanceof n,g;for(g in r){var u=r[g],t=k(b,u),A=k(e,u),C=void 0;(p||"function"!==typeof t&&"function"!==typeof A)&&t!==A&&(null!=t||null!=A)&&(C=h&&h[u]&&"function"===typeof h[u]?h[u](t,A):"object"===typeof t&&"object"===typeof A&&f(t)===f(A)?d(t,A):{type:"complete",oldValue:t,newValue:A})&&(y=y||{type:"partial",diff:{}},y.diff[u]=C)}return y}}Object.defineProperty(e,"__esModule",{value:!0});var c=["esri.Color","esri.portal.Portal"];e.diff=function(a,
b){if("function"!==typeof a&&"function"!==typeof b&&(a||b))return!a||!b||"object"===typeof a&&"object"===typeof b&&f(a)!==f(b)?{type:"complete",oldValue:a,newValue:b}:d(a,b)}})},"esri/renderers/support/UniqueValueInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ../../symbols/support/jsonUtils ../../symbols/support/typeUtils".split(" "),function(b,e,n,h,l,m,k,a){Object.defineProperty(e,
"__esModule",{value:!0});b=function(b){function d(){var a=null!==b&&b.apply(this,arguments)||this;a.description=null;a.label=null;a.symbol=null;a.value=null;return a}n(d,b);c=d;d.prototype.clone=function(){return new c({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})};var c;h([m.property({type:String,json:{write:!0}})],d.prototype,"description",void 0);h([m.property({type:String,json:{write:!0}})],d.prototype,"label",void 0);h([m.property({types:a.rendererTypes,
json:{origins:{"web-scene":{read:k.read,write:{target:{symbol:{types:a.rendererTypes3D}},writer:k.writeTarget}}},read:k.read,write:k.writeTarget}})],d.prototype,"symbol",void 0);h([m.property({type:String,json:{write:!0}})],d.prototype,"value",void 0);return d=c=h([m.subclass("esri.renderers.support.UniqueValueInfo")],d)}(m.declared(l));e.UniqueValueInfo=b;e.default=b})},"esri/symbols/support/styleUtils":function(){define("require exports ../../request ../../symbols ../../core/Error ../../core/promiseUtils ../../core/urlUtils ../../portal/Portal ../../portal/PortalQueryParams ./jsonUtils ./StyleOrigin ./Thumbnail".split(" "),
function(b,e,n,h,l,m,k,a,f,d,c,q){function r(a,b){return p(a).then(function(b){return{data:b.data,baseUrl:k.removeFile(a),styleUrl:a}})}function x(b,c){c=c.portal||a.getDefault();var d,e=c.url+" - "+(c.user&&c.user.username)+" - "+b;y[e]||(y[e]=z(b,c).then(function(a){d=a;return a.fetchData()}).then(function(a){return{data:a,baseUrl:d.itemUrl,styleName:b}}));return y[e]}function z(a,b){return b.load().then(function(){var c=new f({disableExtraQuery:!0,query:"owner:"+g+" AND type:"+u+' AND typekeywords:"'+
a+'"'});return b.queryItems(c)}).then(function(b){b=b.results;var c=null,d=a.toLowerCase();if(b&&Array.isArray(b))for(var e=0;e<b.length;e++){var f=b[e];if(f.typeKeywords.some(function(a){return a.toLowerCase()===d})&&f.type===u&&f.owner===g){c=f;break}}if(c)return c.load();throw new l("symbolstyleutils:style-not-found","The style '"+a+"' could not be found",{styleName:a});})}function v(a,b){return a.styleUrl?r(a.styleUrl,b):a.styleName?x(a.styleName,b):m.reject(new l("symbolstyleutils:style-url-and-name-missing",
"Either styleUrl or styleName is required to resolve a style"))}function w(a,b,e){for(var f=a.data,g={portal:e.portal,url:k.urlToObject(a.baseUrl),origin:"portal-item"},n=function(f){if(f.name!==b)return"continue";var l=k.read(f.webRef,g),m={portal:e.portal,url:k.urlToObject(k.removeFile(l)),origin:"portal-item"};return{value:p(l).then(function(l){if((l=d.fromJSON(l.data,m))&&l.isInstanceOf(h.BaseSymbol3D)){if(f.thumbnail)if(f.thumbnail.href){var p=k.read(f.thumbnail.href,g);l.thumbnail=new q.default({url:p})}else f.thumbnail.imageData&&
(l.thumbnail=new q.default({url:"data:image/png;base64,"+f.thumbnail.imageData}));a.styleUrl?l.styleOrigin=new c({portal:e.portal,styleUrl:a.styleUrl,name:b}):a.styleName&&(l.styleOrigin=new c({portal:e.portal,styleName:a.styleName,name:b}))}return l})}},t=0,f=f.items;t<f.length;t++){var r=n(f[t]);if("object"===typeof r)return r.value}return m.reject(new l("symbolstyleutils:symbol-name-not-found","The symbol name '"+b+"' could not be found",{symbolName:b}))}function p(a){return n(k.normalize(a),{responseType:"json",
query:{f:"json"}})}Object.defineProperty(e,"__esModule",{value:!0});var y={};e.fetchStyle=v;e.resolveWebStyleSymbol=function(a,b){return a.name?v(a,b).then(function(c){return w(c,a.name,b)}):m.reject(new l("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference"))};e.fetchSymbolFromStyle=w;e.styleNameFromItem=function(a){var b=0;for(a=a.typeKeywords;b<a.length;b++){var c=a[b];if(/^Esri.*Style$/.test(c)&&"Esri Style"!==c)return c}};var g="esri_en",u="Style"})},
"esri/renderers/support/jsonUtils":function(){define("require exports ../../core/Error ../../core/object ../../core/Warning ../ClassBreaksRenderer ../HeatmapRenderer ../SimpleRenderer ../UniqueValueRenderer".split(" "),function(b,e,n,h,l,m,k,a,f){function d(a,b,c){if(!a)return null;if(a&&(a.styleName||a.styleUrl)&&"uniqueValue"!==a.type)return c&&c.messages&&c.messages.push(new l("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+a.type+"'",{definition:a,
context:c})),null;b=a?q[a.type]||null:null;if(b)return b=new b,b.read(a,c),b;c&&c.messages&&a&&c.messages.push(new l("renderer:unsupported","Renderers of type '"+(a.type||"unknown")+"' are not supported",{definition:a,context:c}));return null}function c(a,b,c){return a?c&&"web-scene"===c.origin&&"heatmap"===a.type?(c.messages&&c.messages.push(new n("renderer:unsupported","Renderer of type '"+a.declaredClass+"' are not supported in scenes.",{renderer:a,context:c})),null):a.write(b,c):null}Object.defineProperty(e,
"__esModule",{value:!0});var q={simple:a,uniqueValue:f,classBreaks:m,heatmap:k};e.read=d;e.writeTarget=function(a,b,d,e){(a=c(a,{},e))&&h.setDeepValue(d,a,b)};e.write=c;e.fromJSON=function(a,b){return d(a,null,b)}})},"esri/layers/support/FeatureIndex":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(b,e,n,h,l,m){Object.defineProperty(e,"__esModule",{value:!0});
b=function(b){function a(a){return b.call(this,a)||this}n(a,b);e=a;a.prototype.clone=function(){return new e({name:this.name,fields:this.fields,isAscending:this.isAscending,isUnique:this.isUnique,description:this.description})};var e;h([m.property({constructOnly:!0})],a.prototype,"name",void 0);h([m.property({constructOnly:!0})],a.prototype,"fields",void 0);h([m.property({constructOnly:!0})],a.prototype,"isAscending",void 0);h([m.property({constructOnly:!0})],a.prototype,"isUnique",void 0);h([m.property({constructOnly:!0})],
a.prototype,"description",void 0);return a=e=h([m.subclass("esri.layers.support.FeatureIndex")],a)}(m.declared(l));e.FeatureIndex=b;e.default=b})},"esri/layers/support/FeatureProcessing":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/lang ../../core/accessorSupport/decorators ./Field ./fieldUtils".split(" "),function(b,e,n,h,l,m,k,a,f){return function(b){function c(){return null!==b&&b.apply(this,arguments)||
this}n(c,b);d=c;c.fromWorker=function(b){if(!b)return null;b=JSON.parse(b);var c=new d;c.fields=b.fields&&b.fields.map(function(b){return a.fromJSON(b)});c.options=b.options;c.process=new (Function.bind.apply(Function,[void 0].concat(b.process.args,[b.process.body])));return c};Object.defineProperty(c.prototype,"version",{get:function(){return(this._get("version")||0)+1},enumerable:!0,configurable:!0});c.prototype.clone=function(){return new d(m.clone({fields:this.fields,options:this.options,process:this.process}))};
c.prototype.getField=function(a){return f.getField(a,this.fields)};c.prototype.refresh=function(){this.notifyChange("version")};c.prototype.toWorker=function(){var a=this.process.toString();return JSON.stringify({fields:this.fields,options:this.options,process:{body:a.substring(a.indexOf("{")+1,a.lastIndexOf("}")),args:a.slice(a.indexOf("(")+1,a.indexOf(")")).match(/([^\s,]+)/g)}})};var d;h([k.property({type:[a]})],c.prototype,"fields",void 0);h([k.property()],c.prototype,"options",void 0);h([k.property()],
c.prototype,"process",void 0);h([k.property({readOnly:!0,dependsOn:["process","options","fields"]})],c.prototype,"version",null);return c=d=h([k.subclass("esri.layers.support.FeatureProcessing")],c)}(k.declared(l))})},"esri/layers/support/fieldUtils":function(){define(["require","exports","@dojo/framework/shim/Set","../../core/object","./domains"],function(b,e,n,h,l){function m(a,b,c){if(a)for(var d=0;d<a.length;d++){var e=a[d],f=h.getDeepValue(e,b);(f=f&&"function"!==typeof f&&k(f,c))&&h.setDeepValue(e,
f.name,b)}}function k(a,b){if("string"!==typeof a)return null;if(null!=b){a=a.toLowerCase();for(var c=0;c<b.length;c++){var d=b[c];if(d&&d.name.toLowerCase()===a)return d}}return null}function a(a){return"number"===typeof a&&!isNaN(a)&&isFinite(a)}function f(b){return null===b||a(b)}function d(a){return"number"===typeof a&&isFinite(a)&&Math.floor(a)===a}function c(a){return null===a||d(a)}function q(a){return null!=a&&"string"===typeof a}function r(a){return null===a||q(a)}function x(a){return!0}
function z(b,e){var g;switch(b.type){case "date":case "integer":case "long":case "small-integer":case "esriFieldTypeDate":case "esriFieldTypeInteger":case "esriFieldTypeLong":case "esriFieldTypeSmallInteger":g=b.nullable?c:d;break;case "double":case "single":case "esriFieldTypeSingle":case "esriFieldTypeDouble":g=b.nullable?f:a;break;case "string":case "esriFieldTypeString":g=b.nullable?r:q;break;default:g=x}return 1===arguments.length?g:g(e)}function v(a){return null!=a&&g.has(a.type)}function w(a,
b){return a.nullable&&null===b?null:v(a)&&!p(a.type,b)?u.OUT_OF_RANGE:z(a,b)?a.domain?l.validateDomainValue(a.domain,b):null:t.INVALID_TYPE}function p(a,b){return(a=y(a))?b>=a.min&&b<=a.max:!1}function y(a){switch(a){case "esriFieldTypeSmallInteger":case "small-integer":return{min:-32768,max:32767};case "esriFieldTypeInteger":case "integer":return{min:-2147483648,max:2147483647};case "esriFieldTypeSingle":case "single":return{min:-3.4E38,max:1.2E38};case "esriFieldTypeDouble":case "double":return{min:-Number.MAX_VALUE,
max:Number.MAX_VALUE}}}Object.defineProperty(e,"__esModule",{value:!0});e.fixRendererFields=function(a,b){if(null!=a&&null!=b){var c=0;for(a=Array.isArray(a)?a:[a];c<a.length;c++){var d=a[c];m(e.rendererFields,d,b);if(d.visualVariables)for(var f=0,d=d.visualVariables;f<d.length;f++)m(e.visualVariableFields,d[f],b)}}};e.getField=k;e.getFieldDefaultValue=function(a){var b=a.defaultValue;if(void 0!==b&&z(a,b))return b;if(a.nullable)return null};e.isValueMatchingFieldType=z;e.rendererFields="field field2 field3 normalizationField rotationInfo.field proportionalSymbolInfo.field proportionalSymbolInfo.normalizationField colorInfo.field colorInfo.normalizationField".split(" ");
e.visualVariableFields=["field","normalizationField"];e.numericTypes=["integer","small-integer","single","double"];var g=new n.default(e.numericTypes.concat(["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]));e.isNumericField=v;e.isStringField=function(a){return null!=a&&("string"===a.type||"esriFieldTypeString"===a.type)};e.isDateField=function(a){return null!=a&&("date"===a.type||"esriFieldTypeDate"===a.type)};e.isValidFieldValue=function(a,b){return null===
w(a,b)};var u;(u=e.NumericRangeValidationError||(e.NumericRangeValidationError={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range";var t;(t=e.TypeValidationError||(e.TypeValidationError={})).INVALID_TYPE="type-validation-error::invalid-type";e.validateFieldValue=w;e.isNumberInRange=p;e.getFieldRange=function(a){var b=l.getDomainRange(a.domain);if(b)return b;if(v(a))return y(a.type)};e.validationErrorToString=function(a,b,c){switch(a){case l.DomainValidationError.INVALID_CODED_VALUE:return"Value "+
c+" is not in the coded domain - field: "+b.name+", domain: "+JSON.stringify(b.domain);case l.DomainValidationError.VALUE_OUT_OF_RANGE:return"Value "+c+" is out of the range of valid values - field: "+b.name+", domain: "+JSON.stringify(b.domain);case t.INVALID_TYPE:return"Value "+c+" is not a valid value for the field type - field: "+b.name+", type: "+b.type+", nullable: "+b.nullable;case u.OUT_OF_RANGE:return a=y(b.type),"Value "+c+" is out of range for the number type - field: "+b.name+", type: "+
b.type+", value range is "+a.min+" to "+a.max}}})},"@dojo/framework/shim/Set":function(){(function(b){"object"===typeof module&&"object"===typeof module.exports?(b=b(require,exports),void 0!==b&&(module.exports=b)):"function"===typeof define&&define.amd&&define("require exports tslib ./global ./iterator ./support/has ./Symbol".split(" "),b)})(function(b,e){Object.defineProperty(e,"__esModule",{value:!0});var n=b("tslib"),h=b("./global"),l=b("./iterator"),m=b("./support/has");b("./Symbol");e.Set=h.default.Set;
m.default("es6-set")||(e.Set=(k=function(){function a(a){this._setData=[];this[Symbol.toStringTag]="Set";if(a)if(l.isArrayLike(a))for(var b=0;b<a.length;b++)this.add(a[b]);else try{for(var b=n.__values(a),c=b.next();!c.done;c=b.next())this.add(c.value)}catch(x){e={error:x}}finally{try{c&&!c.done&&(f=b.return)&&f.call(b)}finally{if(e)throw e.error;}}var e,f}a.prototype.add=function(a){if(this.has(a))return this;this._setData.push(a);return this};a.prototype.clear=function(){this._setData.length=0};
a.prototype.delete=function(a){a=this._setData.indexOf(a);if(-1===a)return!1;this._setData.splice(a,1);return!0};a.prototype.entries=function(){return new l.ShimIterator(this._setData.map(function(a){return[a,a]}))};a.prototype.forEach=function(a,b){for(var c=this.values(),d=c.next();!d.done;)a.call(b,d.value,d.value,this),d=c.next()};a.prototype.has=function(a){return-1<this._setData.indexOf(a)};a.prototype.keys=function(){return new l.ShimIterator(this._setData)};Object.defineProperty(a.prototype,
"size",{get:function(){return this._setData.length},enumerable:!0,configurable:!0});a.prototype.values=function(){return new l.ShimIterator(this._setData)};a.prototype[Symbol.iterator]=function(){return new l.ShimIterator(this._setData)};return a}(),k[Symbol.species]=k,k));e.default=e.Set;var k})},"tslib/tslib":function(){var b,e,n,h,l,m,k,a,f,d,c,q,r,x,z,v,w,p,y;(function(a){function b(a,b){a!==c&&("function"===typeof Object.create?Object.defineProperty(a,"__esModule",{value:!0}):a.__esModule=!0);
return function(c,d){return a[c]=b?b(c,d):d}}var c="object"===typeof global?global:"object"===typeof self?self:"object"===typeof this?this:{};"function"===typeof define&&define.amd?define("tslib",["exports"],function(d){a(b(c,b(d)))}):"object"===typeof module&&"object"===typeof module.exports?a(b(c,b(module.exports))):a(b(c))})(function(g){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};b=function(a,
b){function c(){this.constructor=a}u(a,b);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};e=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a};n=function(a,b){var c={},d;for(d in a)Object.prototype.hasOwnProperty.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&"function"===typeof Object.getOwnPropertySymbols){var e=0;for(d=Object.getOwnPropertySymbols(a);e<d.length;e++)0>
b.indexOf(d[e])&&(c[d[e]]=a[d[e]])}return c};h=function(a,b,c,d){var e=arguments.length,f=3>e?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d,g;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)f=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;0<=h;h--)if(g=a[h])f=(3>e?g(f):3<e?g(b,c,f):g(b,c))||f;return 3<e&&f&&Object.defineProperty(b,c,f),f};l=function(a,b){return function(c,d){b(c,d,a)}};m=function(a,b){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(a,
b)};k=function(a,b,c,d){return new (c||(c=Promise))(function(e,f){function g(a){try{k(d.next(a))}catch(K){f(K)}}function h(a){try{k(d["throw"](a))}catch(K){f(K)}}function k(a){a.done?e(a.value):(new c(function(b){b(a.value)})).then(g,h)}k((d=d.apply(a,b||[])).next())})};a=function(a,b){function c(a){return function(b){return d([a,b])}}function d(c){if(f)throw new TypeError("Generator is already executing.");for(;e;)try{if(f=1,g&&(h=c[0]&2?g["return"]:c[0]?g["throw"]||((h=g["return"])&&h.call(g),0):
g.next)&&!(h=h.call(g,c[1])).done)return h;if(g=0,h)c=[c[0]&2,h.value];switch(c[0]){case 0:case 1:h=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++;g=c[1];c=[0];continue;case 7:c=e.ops.pop();e.trys.pop();continue;default:if(!(h=e.trys,h=0<h.length&&h[h.length-1])&&(6===c[0]||2===c[0])){e=0;continue}if(3===c[0]&&(!h||c[1]>h[0]&&c[1]<h[3]))e.label=c[1];else if(6===c[0]&&e.label<h[1])e.label=h[1],h=c;else if(h&&e.label<h[2])e.label=h[2],e.ops.push(c);else{h[2]&&e.ops.pop();e.trys.pop();
continue}}c=b.call(a,e)}catch(K){c=[6,K],g=0}finally{f=h=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}var e={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},f,g,h,k;return k={next:c(0),"throw":c(1),"return":c(2)},"function"===typeof Symbol&&(k[Symbol.iterator]=function(){return this}),k};f=function(a,b){for(var c in a)b.hasOwnProperty(c)||(b[c]=a[c])};d=function(a){var b="function"===typeof Symbol&&a[Symbol.iterator],c=0;return b?b.call(a):{next:function(){a&&
c>=a.length&&(a=void 0);return{value:a&&a[c++],done:!a}}}};c=function(a,b){var c="function"===typeof Symbol&&a[Symbol.iterator];if(!c)return a;a=c.call(a);var d,e=[],f;try{for(;(void 0===b||0<b--)&&!(d=a.next()).done;)e.push(d.value)}catch(H){f={error:H}}finally{try{d&&!d.done&&(c=a["return"])&&c.call(a)}finally{if(f)throw f.error;}}return e};q=function(){for(var a=[],b=0;b<arguments.length;b++)a=a.concat(c(arguments[b]));return a};r=function(a){return this instanceof r?(this.v=a,this):new r(a)};
x=function(a,b,c){function d(a){k[a]&&(l[a]=function(b){return new Promise(function(c,d){1<m.push([a,b,c,d])||e(a,b)})})}function e(a,b){try{var c=k[a](b);c.value instanceof r?Promise.resolve(c.value.v).then(f,g):h(m[0][2],c)}catch(O){h(m[0][3],O)}}function f(a){e("next",a)}function g(a){e("throw",a)}function h(a,b){(a(b),m.shift(),m.length)&&e(m[0][0],m[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var k=c.apply(a,b||[]),l,m=[];return l={},d("next"),
d("throw"),d("return"),l[Symbol.asyncIterator]=function(){return this},l};z=function(a){function b(b,e){c[b]=a[b]?function(c){return(d=!d)?{value:r(a[b](c)),done:"return"===b}:e?e(c):c}:e}var c,d;return c={},b("next"),b("throw",function(a){throw a;}),b("return"),c[Symbol.iterator]=function(){return this},c};v=function(a){function b(b){f[b]=a[b]&&function(d){return new Promise(function(e,f){d=a[b](d);c(e,f,d.done,d.value)})}}function c(a,b,c,d){Promise.resolve(d).then(function(b){a({value:b,done:c})},
b)}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=a[Symbol.asyncIterator],f;return e?e.call(a):(a="function"===typeof d?d(a):a[Symbol.iterator](),f={},b("next"),b("throw"),b("return"),f[Symbol.asyncIterator]=function(){return this},f)};w=function(a,b){Object.defineProperty?Object.defineProperty(a,"raw",{value:b}):a.raw=b;return a};p=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b["default"]=
a;return b};y=function(a){return a&&a.__esModule?a:{"default":a}};g("__extends",b);g("__assign",e);g("__rest",n);g("__decorate",h);g("__param",l);g("__metadata",m);g("__awaiter",k);g("__generator",a);g("__exportStar",f);g("__values",d);g("__read",c);g("__spread",q);g("__await",r);g("__asyncGenerator",x);g("__asyncDelegator",z);g("__asyncValues",v);g("__makeTemplateObject",w);g("__importStar",p);g("__importDefault",y)})},"@dojo/framework/shim/global":function(){(function(b){"object"===typeof module&&
"object"===typeof module.exports?(b=b(require,exports),void 0!==b&&(module.exports=b)):"function"===typeof define&&define.amd&&define(["require","exports"],b)})(function(b,e){Object.defineProperty(e,"__esModule",{value:!0});b=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof global)return global}();e.default=b})},"@dojo/framework/shim/iterator":function(){(function(b){"object"===typeof module&&"object"===typeof module.exports?
(b=b(require,exports),void 0!==b&&(module.exports=b)):"function"===typeof define&&define.amd&&define(["require","exports","./Symbol","./string"],b)})(function(b,e){function n(a){return a&&"function"===typeof a[Symbol.iterator]}function h(a){return a&&"number"===typeof a.length}function l(b){if(n(b))return b[Symbol.iterator]();if(h(b))return new a(b)}Object.defineProperty(e,"__esModule",{value:!0});b("./Symbol");var m=b("./string"),k={done:!0,value:void 0},a=function(){function a(a){this._nextIndex=
-1;n(a)?this._nativeIterator=a[Symbol.iterator]():this._list=a}a.prototype.next=function(){return this._nativeIterator?this._nativeIterator.next():this._list?++this._nextIndex<this._list.length?{done:!1,value:this._list[this._nextIndex]}:k:k};a.prototype[Symbol.iterator]=function(){return this};return a}();e.ShimIterator=a;e.isIterable=n;e.isArrayLike=h;e.get=l;e.forOf=function(a,b,c){function d(){e=!0}var e=!1;if(h(a)&&"string"===typeof a)for(var f=a.length,k=0;k<f;++k){var n=a[k];if(k+1<f){var w=
n.charCodeAt(0);w>=m.HIGH_SURROGATE_MIN&&w<=m.HIGH_SURROGATE_MAX&&(n+=a[++k])}b.call(c,n,a,d);if(e)break}else if(f=l(a))for(k=f.next();!k.done;){b.call(c,k.value,a,d);if(e)break;k=f.next()}}})},"@dojo/framework/shim/Symbol":function(){(function(b){"object"===typeof module&&"object"===typeof module.exports?(b=b(require,exports),void 0!==b&&(module.exports=b)):"function"===typeof define&&define.amd&&define(["require","exports","./support/has","./global","./support/util"],b)})(function(b,e){function n(a){return a&&
("symbol"===typeof a||"Symbol"===a["@@toStringTag"])||!1}Object.defineProperty(e,"__esModule",{value:!0});var h=b("./support/has"),l=b("./global"),m=b("./support/util");e.Symbol=l.default.Symbol;if(!h.default("es6-symbol")){var k=function(a){if(!n(a))throw new TypeError(a+" is not a symbol");return a},a=Object.defineProperties,f=Object.defineProperty,d=Object.create,c=Object.prototype,q={},r=function(){var a=d(null);return function(b){for(var d=0,e;a[String(b)+(d||"")];)++d;b+=String(d||"");a[b]=
!0;e="@@"+b;Object.getOwnPropertyDescriptor(c,e)||f(c,e,{set:function(a){f(this,e,m.getValueDescriptor(a))}});return e}}(),x=function v(a){if(this instanceof x)throw new TypeError("TypeError: Symbol is not a constructor");return v(a)};e.Symbol=l.default.Symbol=function w(b){if(this instanceof w)throw new TypeError("TypeError: Symbol is not a constructor");var c=Object.create(x.prototype);b=void 0===b?"":String(b);return a(c,{__description__:m.getValueDescriptor(b),__name__:m.getValueDescriptor(r(b))})};
f(e.Symbol,"for",m.getValueDescriptor(function(a){return q[a]?q[a]:q[a]=e.Symbol(String(a))}));a(e.Symbol,{keyFor:m.getValueDescriptor(function(a){var b;k(a);for(b in q)if(q[b]===a)return b}),hasInstance:m.getValueDescriptor(e.Symbol.for("hasInstance"),!1,!1),isConcatSpreadable:m.getValueDescriptor(e.Symbol.for("isConcatSpreadable"),!1,!1),iterator:m.getValueDescriptor(e.Symbol.for("iterator"),!1,!1),match:m.getValueDescriptor(e.Symbol.for("match"),!1,!1),observable:m.getValueDescriptor(e.Symbol.for("observable"),
!1,!1),replace:m.getValueDescriptor(e.Symbol.for("replace"),!1,!1),search:m.getValueDescriptor(e.Symbol.for("search"),!1,!1),species:m.getValueDescriptor(e.Symbol.for("species"),!1,!1),split:m.getValueDescriptor(e.Symbol.for("split"),!1,!1),toPrimitive:m.getValueDescriptor(e.Symbol.for("toPrimitive"),!1,!1),toStringTag:m.getValueDescriptor(e.Symbol.for("toStringTag"),!1,!1),unscopables:m.getValueDescriptor(e.Symbol.for("unscopables"),!1,!1)});a(x.prototype,{constructor:m.getValueDescriptor(e.Symbol),
toString:m.getValueDescriptor(function(){return this.__name__},!1,!1)});a(e.Symbol.prototype,{toString:m.getValueDescriptor(function(){return"Symbol ("+k(this).__description__+")"}),valueOf:m.getValueDescriptor(function(){return k(this)})});f(e.Symbol.prototype,e.Symbol.toPrimitive,m.getValueDescriptor(function(){return k(this)}));f(e.Symbol.prototype,e.Symbol.toStringTag,m.getValueDescriptor("Symbol",!1,!1,!0));f(x.prototype,e.Symbol.toPrimitive,m.getValueDescriptor(e.Symbol.prototype[e.Symbol.toPrimitive],
!1,!1,!0));f(x.prototype,e.Symbol.toStringTag,m.getValueDescriptor(e.Symbol.prototype[e.Symbol.toStringTag],!1,!1,!0))}e.isSymbol=n;"hasInstance isConcatSpreadable iterator species replace search split match toPrimitive toStringTag unscopables observable".split(" ").forEach(function(a){e.Symbol[a]||Object.defineProperty(e.Symbol,a,m.getValueDescriptor(e.Symbol.for(a),!1,!1))});e.default=e.Symbol})},"@dojo/framework/shim/support/has":function(){(function(b){"object"===typeof module&&"object"===typeof module.exports?
(b=b(require,exports),void 0!==b&&(module.exports=b)):"function"===typeof define&&define.amd&&define("require exports tslib ../../has/has ../global ../../has/has".split(" "),b)})(function(b,e){Object.defineProperty(e,"__esModule",{value:!0});var n=b("tslib"),h=b("../../has/has"),l=b("../global");e.default=h.default;n.__exportStar(b("../../has/has"),e);h.add("es6-array",function(){return["from","of"].every(function(b){return b in l.default.Array})&&["findIndex","find","copyWithin"].every(function(b){return b in
l.default.Array.prototype})},!0);h.add("es6-array-fill",function(){return"fill"in l.default.Array.prototype?1===[1].fill(9,Number.POSITIVE_INFINITY)[0]:!1},!0);h.add("es7-array",function(){return"includes"in l.default.Array.prototype},!0);h.add("es6-map",function(){if("function"===typeof l.default.Map)try{var b=new l.default.Map([[0,1]]);return b.has(0)&&"function"===typeof b.keys&&h.default("es6-symbol")&&"function"===typeof b.values&&"function"===typeof b.entries}catch(a){}return!1},!0);h.add("es6-math",
function(){return"clz32 sign log10 log2 log1p expm1 cosh sinh tanh acosh asinh atanh trunc fround cbrt hypot".split(" ").every(function(b){return"function"===typeof l.default.Math[b]})},!0);h.add("es6-math-imul",function(){return"imul"in l.default.Math?-5===Math.imul(4294967295,5):!1},!0);h.add("es6-object",function(){return h.default("es6-symbol")&&["assign","is","getOwnPropertySymbols","setPrototypeOf"].every(function(b){return"function"===typeof l.default.Object[b]})},!0);h.add("es2017-object",
function(){return["values","entries","getOwnPropertyDescriptors"].every(function(b){return"function"===typeof l.default.Object[b]})},!0);h.add("es-observable",function(){return"undefined"!==typeof l.default.Observable},!0);h.add("es6-promise",function(){return"undefined"!==typeof l.default.Promise&&h.default("es6-symbol")},!0);h.add("es6-set",function(){if("function"===typeof l.default.Set){var b=new l.default.Set([1]);return b.has(1)&&"keys"in b&&"function"===typeof b.keys&&h.default("es6-symbol")}return!1},
!0);h.add("es6-string",function(){return["fromCodePoint"].every(function(b){return"function"===typeof l.default.String[b]})&&"codePointAt normalize repeat startsWith endsWith includes".split(" ").every(function(b){return"function"===typeof l.default.String.prototype[b]})},!0);h.add("es6-string-raw",function(){function b(a){for(var b=1;b<arguments.length;b++);b=n.__spread(a);b.raw=a.raw;return b}if("raw"in l.default.String){var a=b(m||(m=n.__makeTemplateObject(["a\n",""],["a\\n",""])),1);a.raw=["a\\n"];
return"a:\\n"===l.default.String.raw(a,42)}return!1},!0);h.add("es2017-string",function(){return["padStart","padEnd"].every(function(b){return"function"===typeof l.default.String.prototype[b]})},!0);h.add("es6-symbol",function(){return"undefined"!==typeof l.default.Symbol&&"symbol"===typeof Symbol()},!0);h.add("es6-weakmap",function(){if("undefined"!==typeof l.default.WeakMap){var b={},a={},e=new l.default.WeakMap([[b,1]]);Object.freeze(b);return 1===e.get(b)&&e.set(a,2)===e&&h.default("es6-symbol")}return!1},
!0);h.add("microtasks",function(){return h.default("es6-promise")||h.default("host-node")||h.default("dom-mutationobserver")},!0);h.add("postmessage",function(){return"undefined"!==typeof l.default.window&&"function"===typeof l.default.postMessage},!0);h.add("raf",function(){return"function"===typeof l.default.requestAnimationFrame},!0);h.add("setimmediate",function(){return"undefined"!==typeof l.default.setImmediate},!0);h.add("dom-mutationobserver",function(){if(h.default("host-browser")&&(l.default.MutationObserver||
l.default.WebKitMutationObserver)){var b=document.createElement("div"),a=new (l.default.MutationObserver||l.default.WebKitMutationObserver)(function(){});a.observe(b,{attributes:!0});b.style.setProperty("display","block");return!!a.takeRecords().length}return!1},!0);h.add("dom-webanimation",function(){return h.default("host-browser")&&void 0!==l.default.Animation&&void 0!==l.default.KeyframeEffect},!0);h.add("abort-controller",function(){return"undefined"!==typeof l.default.AbortController});h.add("abort-signal",
function(){return"undefined"!==typeof l.default.AbortSignal});var m})},"@dojo/framework/has/has":function(){(function(b){"object"===typeof module&&"object"===typeof module.exports?(b=b(require,exports),void 0!==b&&(module.exports=b)):"function"===typeof define&&define.amd&&define(["require","exports"],b)})(function(b,e){function n(b){b=b.toLowerCase();return!!(b in a||b in e.testCache||e.testFunctions[b])}function h(b,d,c){void 0===c&&(c=!1);var f=b.toLowerCase();if(n(f)&&!c&&!(f in a))throw new TypeError('Feature "'+
b+'" exists and overwrite not true.');"function"===typeof d?e.testFunctions[f]=d:d&&d.then?m[b]=d.then(function(a){e.testCache[b]=a;delete m[b]},function(){delete m[b]}):(e.testCache[f]=d,delete e.testFunctions[f])}function l(b){var d=b.toLowerCase();if(d in a)b=a[d];else if(e.testFunctions[d])b=e.testCache[d]=e.testFunctions[d].call(null),delete e.testFunctions[d];else if(d in e.testCache)b=e.testCache[d];else{if(b in m)return!1;throw new TypeError('Attempt to detect unregistered has feature "'+
b+'"');}return b}Object.defineProperty(e,"__esModule",{value:!0});e.testCache={};e.testFunctions={};var m={};b="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};var k=(b.DojoHasEnvironment||{}).staticFeatures;"DojoHasEnvironment"in b&&delete b.DojoHasEnvironment;var a=k?"function"===typeof k?k.apply(b):k:{};e.load=function(a,b,c,e){a?b([a],c):c()};e.normalize=function(a,b){function c(a){var b=d[e++];if(":"===b)return null;if("?"===d[e++]){if(!a&&
l(b))return c();c(!0);return c(a)}return b}var d=a.match(/[\?:]|[^:\?]*/g)||[],e=0;return(a=c())&&b(a)};e.exists=n;e.add=h;e.default=l;h("debug",!0);h("host-browser","undefined"!==typeof document&&"undefined"!==typeof location);h("host-node",function(){if("object"===typeof process&&process.versions&&process.versions.node)return process.versions.node})})},"@dojo/framework/shim/support/util":function(){(function(b){"object"===typeof module&&"object"===typeof module.exports?(b=b(require,exports),void 0!==
b&&(module.exports=b)):"function"===typeof define&&define.amd&&define(["require","exports"],b)})(function(b,e){Object.defineProperty(e,"__esModule",{value:!0});e.getValueDescriptor=function(b,e,l,m){void 0===e&&(e=!1);void 0===l&&(l=!0);void 0===m&&(m=!0);return{value:b,enumerable:e,writable:l,configurable:m}};e.wrapNative=function(b){return function(e){for(var h=[],m=1;m<arguments.length;m++)h[m-1]=arguments[m];return b.apply(e,h)}}})},"@dojo/framework/shim/string":function(){(function(b){"object"===
typeof module&&"object"===typeof module.exports?(b=b(require,exports),void 0!==b&&(module.exports=b)):"function"===typeof define&&define.amd&&define("require exports tslib ./global ./support/has ./support/util".split(" "),b)})(function(b,e){Object.defineProperty(e,"__esModule",{value:!0});var n=b("tslib"),h=b("./global"),l=b("./support/has");b=b("./support/util");e.HIGH_SURROGATE_MIN=55296;e.HIGH_SURROGATE_MAX=56319;e.LOW_SURROGATE_MIN=56320;e.LOW_SURROGATE_MAX=57343;if(l.default("es6-string")&&l.default("es6-string-raw"))e.fromCodePoint=
h.default.String.fromCodePoint,e.raw=h.default.String.raw,e.codePointAt=b.wrapNative(h.default.String.prototype.codePointAt),e.endsWith=b.wrapNative(h.default.String.prototype.endsWith),e.includes=b.wrapNative(h.default.String.prototype.includes),e.normalize=b.wrapNative(h.default.String.prototype.normalize),e.repeat=b.wrapNative(h.default.String.prototype.repeat),e.startsWith=b.wrapNative(h.default.String.prototype.startsWith);else{var m=function(b,a,e,d,c){void 0===c&&(c=!1);if(null==a)throw new TypeError("string."+
b+" requires a valid string to search against.");b=a.length;return[a,String(e),Math.min(Math.max(d!==d?c?b:0:d,0),b)]};e.fromCodePoint=function(){for(var b=0;b<arguments.length;b++);b=arguments.length;if(!b)return"";for(var a=String.fromCharCode,f=[],d=-1,c="";++d<b;){var h=Number(arguments[d]);if(!(isFinite(h)&&Math.floor(h)===h&&0<=h&&1114111>=h))throw RangeError("string.fromCodePoint: Invalid code point "+h);65535>=h?f.push(h):(h-=65536,f.push((h>>10)+e.HIGH_SURROGATE_MIN,h%1024+e.LOW_SURROGATE_MIN));
if(d+1===b||16384<f.length)c+=a.apply(null,f),f.length=0}return c};e.raw=function(b){for(var a=[],e=1;e<arguments.length;e++)a[e-1]=arguments[e];var e=b.raw,d="",c=a.length;if(null==b||null==b.raw)throw new TypeError("string.raw requires a valid callSite object with a raw value");for(var h=0,k=e.length;h<k;h++)d+=e[h]+(h<c&&h<k-1?a[h]:"");return d};e.codePointAt=function(b,a){void 0===a&&(a=0);if(null==b)throw new TypeError("string.codePointAt requries a valid string.");var f=b.length;a!==a&&(a=0);
if(!(0>a||a>=f)){var d=b.charCodeAt(a);return d>=e.HIGH_SURROGATE_MIN&&d<=e.HIGH_SURROGATE_MAX&&f>a+1&&(b=b.charCodeAt(a+1),b>=e.LOW_SURROGATE_MIN&&b<=e.LOW_SURROGATE_MAX)?1024*(d-e.HIGH_SURROGATE_MIN)+b-e.LOW_SURROGATE_MIN+65536:d}};e.endsWith=function(b,a,e){null==e&&(e=b.length);e=n.__read(m("endsWith",b,a,e,!0),3);b=e[0];a=e[1];e=e[2];var d=e-a.length;return 0>d?!1:b.slice(d,e)===a};e.includes=function(b,a,e){void 0===e&&(e=0);e=n.__read(m("includes",b,a,e),3);b=e[0];a=e[1];e=e[2];return-1!==
b.indexOf(a,e)};e.repeat=function(b,a){void 0===a&&(a=0);if(null==b)throw new TypeError("string.repeat requires a valid string.");a!==a&&(a=0);if(0>a||Infinity===a)throw new RangeError("string.repeat requires a non-negative finite count.");for(var e="";a;)a%2&&(e+=b),1<a&&(b+=b),a>>=1;return e};e.startsWith=function(b,a,e){void 0===e&&(e=0);a=String(a);e=n.__read(m("startsWith",b,a,e),3);b=e[0];a=e[1];e=e[2];var d=e+a.length;return d>b.length?!1:b.slice(e,d)===a}}l.default("es2017-string")?(e.padEnd=
b.wrapNative(h.default.String.prototype.padEnd),e.padStart=b.wrapNative(h.default.String.prototype.padStart)):(e.padEnd=function(b,a,f){void 0===f&&(f=" ");if(null===b||void 0===b)throw new TypeError("string.repeat requires a valid string.");if(Infinity===a)throw new RangeError("string.padEnd requires a non-negative finite count.");if(null===a||void 0===a||0>a)a=0;b=String(b);a-=b.length;0<a&&(b+=e.repeat(f,Math.floor(a/f.length))+f.slice(0,a%f.length));return b},e.padStart=function(b,a,f){void 0===
f&&(f=" ");if(null===b||void 0===b)throw new TypeError("string.repeat requires a valid string.");if(Infinity===a)throw new RangeError("string.padStart requires a non-negative finite count.");if(null===a||void 0===a||0>a)a=0;b=String(b);a-=b.length;0<a&&(b=e.repeat(f,Math.floor(a/f.length))+f.slice(0,a%f.length)+b);return b})})},"esri/layers/support/FeatureReduction":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),
function(b,e,n,h,l,m){Object.defineProperty(e,"__esModule",{value:!0});b=function(b){function a(){var a=null!==b&&b.apply(this,arguments)||this;a.type=null;return a}n(a,b);h([m.property({type:String,readOnly:!0,json:{read:!1,write:!0}})],a.prototype,"type",void 0);return a=h([m.subclass("esri.layers.support.FeatureReduction")],a)}(m.declared(l));e.FeatureReduction=b;e.default=b})},"esri/layers/support/FeatureReductionSelection":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./FeatureReduction".split(" "),
function(b,e,n,h,l,m){Object.defineProperty(e,"__esModule",{value:!0});b=function(b){function a(){var a=null!==b&&b.apply(this,arguments)||this;a.type="selection";return a}n(a,b);h([l.property()],a.prototype,"type",void 0);return a=h([l.subclass("esri.layers.support.FeatureReductionSelection")],a)}(l.declared(m.default));e.FeatureReductionSelection=b;e.default=b})},"esri/layers/support/FeatureTemplate":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/kebabDictionary ../../core/lang ../../core/accessorSupport/decorators".split(" "),
function(b,e,n,h,l,m,k,a){var f=m({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",
esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});return function(b){function c(a){a=b.call(this,a)||this;a.name=null;a.description=null;a.drawingTool=null;a.prototype=null;a.thumbnail=null;return a}n(c,b);c.prototype.writeDrawingTool=function(a,b){b.drawingTool=f.toJSON(a)};c.prototype.writePrototype=function(a,b){b.prototype=k.fixJson(k.clone(a),!0)};c.prototype.writeThumbnail=function(a,b){b.thumbnail=k.fixJson(k.clone(a))};h([a.property({json:{write:!0}})],c.prototype,
"name",void 0);h([a.property({json:{write:!0}})],c.prototype,"description",void 0);h([a.property({json:{read:f.read,write:f.write}})],c.prototype,"drawingTool",void 0);h([a.writer("drawingTool")],c.prototype,"writeDrawingTool",null);h([a.property({json:{write:!0}})],c.prototype,"prototype",void 0);h([a.writer("prototype")],c.prototype,"writePrototype",null);h([a.property({json:{write:!0}})],c.prototype,"thumbnail",void 0);h([a.writer("thumbnail")],c.prototype,"writeThumbnail",null);return c=h([a.subclass("esri.layers.support.FeatureTemplate")],
c)}(a.declared(l))})},"esri/layers/support/FeatureType":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators ./domains ./FeatureTemplate".split(" "),function(b,e,n,h,l,m,k,a,f){return function(b){function c(a){a=b.call(this,a)||this;a.id=null;a.name=null;a.domains=null;a.templates=null;return a}n(c,b);c.prototype.readDomains=function(b){var c={},d;for(d in b)if(b.hasOwnProperty(d)){var e=
b[d];switch(e.type){case "range":c[d]=a.RangeDomain.fromJSON(e);break;case "codedValue":c[d]=a.CodedValueDomain.fromJSON(e);break;case "inherited":c[d]=a.InheritedDomain.fromJSON(e)}}return c};c.prototype.writeDomains=function(a,b){var c={},d;for(d in a)a.hasOwnProperty(d)&&(c[d]=a[d]&&a[d].toJSON());m.fixJson(c);b.domains=c};c.prototype.readTemplates=function(a){return a&&a.map(function(a){return new f(a)})};c.prototype.writeTemplates=function(a,b){b.templates=a&&a.map(function(a){return a.toJSON()})};
h([k.property({json:{write:!0}})],c.prototype,"id",void 0);h([k.property({json:{write:!0}})],c.prototype,"name",void 0);h([k.property({json:{write:!0}})],c.prototype,"domains",void 0);h([k.reader("domains")],c.prototype,"readDomains",null);h([k.writer("domains")],c.prototype,"writeDomains",null);h([k.property({json:{write:!0}})],c.prototype,"templates",void 0);h([k.reader("templates")],c.prototype,"readTemplates",null);h([k.writer("templates")],c.prototype,"writeTemplates",null);return c=h([k.subclass("esri.layers.support.FeatureType")],
c)}(k.declared(l))})},"esri/layers/support/LabelClass":function(){define("../../core/date ../../core/JSONSupport ../../core/lang ../../core/kebabDictionary dojo/number ./LabelExpressionInfo ./labelUtils ./types ../../support/arcadeUtils ../../arcade/Feature ../../symbols/support/jsonUtils ../../symbols/support/typeUtils".split(" "),function(b,e,n,h,l,m,k,a,f,d,c,q){function r(a){a=(a=f.createSyntaxTree(a))&&a.body&&a.body[0]&&a.body[0].body&&a.body[0].body.body;if(!a||1!==a.length)return null;a="ExpressionStatement"===
a[0].type&&a[0].expression;if(!a||"MemberExpression"!==a.type)return null;var b=a.object;if(!b||"Identifier"!==b.type||"$feature"!==b.name)return null;a=a.property;if(!a)return null;switch(a.type){case "Literal":return a.value;case "Identifier":return a.name}return null}function x(b){return b?"service"===b.origin?!1:!b.layer||!a.isOfType(b.layer,"map-image"):!0}h=h({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",
esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",
esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",
esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});var z=new d,v=e.createSubclass({declaredClass:"esri.layers.support.LabelClass",properties:{name:{type:String,value:null,json:{write:!0}},labelExpression:{type:String,value:null,json:{read:function(a,b,c,d){b=b.labelExpressionInfo;if(!b||!b.value&&!b.expression)return a},write:{allowNull:!0,writer:function(a,b,c,d){this.labelExpressionInfo&&x(d)&&(null!=this.labelExpressionInfo.value?a=this._templateStringToSql(this.labelExpressionInfo.value):
null!=this.labelExpressionInfo.expression&&(d=r(this.labelExpressionInfo.expression))&&(a="["+d+"]"));null!=a&&(b[c]=a)}}}},labelExpressionInfo:{value:null,type:m,json:{write:{overridePolicy:function(a,b,c){return x(c)?{allowNull:!0}:{enabled:!1}},writer:function(a,b,c,d){if(null==a&&null!=this.labelExpression&&x(d))a=new m({expression:this.getLabelExpressionArcade()});else if(!a)return;a=a.toJSON(d);a.expression&&(b[c]=a)}}}},labelPlacement:{type:h.apiValues,value:null,json:{type:h.jsonValues,read:h.read,
write:h.write}},maxScale:{type:Number,value:0,json:{write:function(a,b){if(a||this.minScale)b.maxScale=a}}},minScale:{type:Number,value:0,json:{write:function(a,b){if(a||this.maxScale)b.minScale=a}}},requiredFields:{readOnly:!0,dependsOn:["labelExpression","labelExpressionInfo","where"],get:function(){var a=Object.create(null);this._collectRequiredFields(a);return Object.keys(a)}},symbol:{value:null,types:q.labelTypes,json:{origins:{"web-scene":{read:c.read,write:{target:{symbol:{types:q.labelTypes3D}},
writer:c.writeTarget}}},read:c.read,write:c.writeTarget}},useCodedValues:{type:Boolean,value:null,json:{write:!0}},where:{type:String,value:null,json:{write:!0}}},getLabelExpression:function(){var a={expression:"",type:"none"};this.labelExpressionInfo?this.labelExpressionInfo.value?(a.expression=this.labelExpressionInfo.value,a.type="conventional"):this.labelExpressionInfo.expression&&(a.expression=this.labelExpressionInfo.expression,a.type="arcade"):null!=this.labelExpression&&(a.expression=this._sqlToTemplateString(this.labelExpression),
a.type="conventional");return a},getLabelExpressionArcade:function(){var a=this.getLabelExpression();if(!a)return null;switch(a.type){case "conventional":return k.convertTemplatedStringToArcade(a.expression);case "arcade":return a.expression}return null},getOptions:function(a){a={spatialReference:a};var b=this.labelExpressionInfo;if(b){var c=b.expression;c&&!b.value&&(a.hasArcadeExpression=!0,a.compiledArcadeFunc=f.createFunction(c))}return a},getLabelExpressionSingleField:function(){var a=this.getLabelExpression();
if(!a)return null;switch(a.type){case "conventional":return(a=a.expression.match(w))&&a[1].trim()||null;case "arcade":return r(a.expression)}return null},clone:function(){return new v({labelExpression:this.labelExpression,labelExpressionInfo:n.clone(this.labelExpressionInfo),labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,symbol:this.symbol.clone(),where:this.where,useCodedValues:this.useCodedValues})},_collectRequiredFields:function(a){this._collectLabelExpressionRequiredFields(this.getLabelExpression(),
a);this._collectWhereRequiredFields(this.where,a)},_sqlToTemplateString:function(a){return a.replace(/\[/g,"{").replace(/\]/g,"}")},_templateStringToSql:function(a){return a.replace(/\{/g,"[").replace(/\}/g,"]")},_collectWhereRequiredFields:function(a,b){null!=a&&(a=a.split(" "),3===a.length&&(b[a[0]]=!0),7===a.length&&(b[a[0]]=!0,b[a[4]]=!0))},_collectLabelExpressionRequiredFields:function(a,b){"arcade"===a.type?f.extractFieldNames(a.expression).forEach(function(a){b[a]=!0}):(a=a.expression.match(/{[^}]*}/g))&&
a.forEach(function(a){b[a.slice(1,-1)]=!0})}});v.evaluateWhere=function(a,b){var c=function(a,b,c){switch(b){case "\x3d":return a==c?!0:!1;case "\x3c\x3e":return a!=c?!0:!1;case "\x3e":return a>c?!0:!1;case "\x3e\x3d":return a>=c?!0:!1;case "\x3c":return a<c?!0:!1;case "\x3c\x3d":return a<=c?!0:!1}return!1};try{if(null==a)return!0;var d=a.split(" ");if(3===d.length)return c(b[d[0]],d[1],d[2]);if(7===d.length){var e=c(b[d[0]],d[1],d[2]),f=d[3],h=c(b[d[4]],d[5],d[6]);switch(f){case "AND":return e&&
h;case "OR":return e||h}}return!1}catch(B){console.log("Error.: can't parse \x3d "+a)}};v.buildLabelText=function(a,b,c,d){var e="";if(d&&d.hasArcadeExpression)d.compiledArcadeFunc&&(z.repurposeFromGraphicLikeObject(b.geometry,b.attributes,{fields:c}),a=f.executeFunction(d.compiledArcadeFunc,{vars:{$feature:z},spatialReference:d.spatialReference}),null!=a&&(e=a.toString()));else var g=b&&b.attributes||{},e=a.replace(/{[^}]*}/g,function(a){return v.formatField(a.slice(1,-1),a,g,c,d)});return e};v.formatField=
function(a,c,d,e,f){var g=a.toLowerCase();for(a=0;a<e.length;a++)if(e[a].name.toLowerCase()===g){c=d[e[a].name];var h=e[a].domain;if(h&&"object"===typeof h){if("codedValue"==h.type)for(d=0;d<h.codedValues.length;d++)h.codedValues[d].code==c&&(c=h.codedValues[d].name);else"range"==h.type&&h.minValue<=c&&c<=h.maxValue&&(c=h.name);break}h=e[a].type;"date"==h?(h=b.fromJSON(f&&f.dateFormat||"shortDate"),(h="DateFormat"+b.getFormat(h))&&(c=n.substitute({myKey:c},"{myKey:"+h+"}"))):("integer"==h||"small-integer"==
h||"long"==h||"double"==h)&&f&&f.numberFormat&&f.numberFormat.digitSeparator&&f.numberFormat.places&&(c=l.format(c,{places:f.numberFormat.places}))}return null==c?"":c};var w=/^\s*\{([^}]+)\}\s*$/i;return v})},"esri/layers/support/LabelExpressionInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ./labelUtils".split(" "),function(b,e,n,h,l,m,k){return function(a){function b(){var b=
null!==a&&a.apply(this,arguments)||this;b.value=null;b.expression=null;return b}n(b,a);d=b;b.prototype.readExpression=function(a,b){return b.value?k.convertTemplatedStringToArcade(b.value):a};b.prototype.writeExpression=function(a,b,d){null!=this.value&&(a=k.convertTemplatedStringToArcade(this.value));b[d]=a};b.prototype.clone=function(){return new d({value:this.value,expression:this.expression})};var d;h([m.property({json:{read:!1,write:!1}})],b.prototype,"value",void 0);h([m.property({json:{write:{allowNull:!0}}})],
b.prototype,"expression",void 0);h([m.reader("expression",["expression","value"])],b.prototype,"readExpression",null);h([m.writer("expression")],b.prototype,"writeExpression",null);return b=d=h([m.subclass("esri.layers.support.LabelExpressionInfo")],b)}(m.declared(l))})},"esri/layers/support/labelUtils":function(){define(["require","exports","../../core/string"],function(b,e,n){Object.defineProperty(e,"__esModule",{value:!0});var h=/__begin__/ig,l=/__end__/ig,m=/^__begin__/i,k=/__end__$/i;e.convertTemplatedStringToArcade=
function(a){a?(a=n.replace(a,function(a,b){return'__begin__$feature["'+b+'"]__end__'}),a=m.test(a)?a.replace(m,""):'"'+a,a=k.test(a)?a.replace(k,""):a+'"',a=a.replace(h,'" + ').replace(l,' + "')):a='""';return a}})},"esri/core/string":function(){define(["require","exports","./object"],function(b,e,n){Object.defineProperty(e,"__esModule",{value:!0});e.replace=function(b,e,m){void 0===m&&(m=/\{([^\}]+)\}/g);return b.replace(m,"function"===typeof e?e:function(b,a){return n.getDeepValue(a,e)})}})},"esri/layers/support/labelingInfo":function(){define(["require",
"exports","./LabelClass"],function(b,e,n){Object.defineProperty(e,"__esModule",{value:!0});var h=/\[([^\[\]]+)\]/gi;e.reader=function(b,e,k){var a=this;return b?b.map(function(b){var d=new n;d.read(b,k);if(d.labelExpression){var c=e.fields||e.layerDefinition&&e.layerDefinition.fields||a.fields;d.labelExpression=d.labelExpression.replace(h,function(a,b){a:if(c){a=b.toLowerCase();for(var d=0;d<c.length;d++){var e=c[d].name;if(e.toLowerCase()===a){b=e;break a}}}return"["+b+"]"})}return d}):null}})},
"esri/layers/support/layerSourceUtils":function(){define(["require","exports","../../core/kebabDictionary","../../core/lang"],function(b,e,n,h){function l(a){return null!=a&&a.hasOwnProperty("mapLayerId")}function m(a){return null!=a&&a.hasOwnProperty("dataSource")}function k(a){if(!a)return a;l(a)&&(a.type=e.MAPLAYER);if(m(a)&&(a.type=e.DATALAYER,!a.dataSource.type)){var b=a.dataSource;b.workspaceId?b.type=b.gdbVersion?"table":b.query||b.oidFields?"query-table":"raster":b.leftTableKey&&b.rightTableKey&&
b.leftTableSource&&b.rightTableSource&&(b.type="join-table",b.leftTableSource=k(b.leftTableSource),b.rightTableSource=k(b.rightTableSource))}return a}function a(b){var f={};if(b.type===e.MAPLAYER)f.mapLayerId=b.mapLayerId,b.gdbVersion&&(f.gdbVersion=b.gdbVersion);else if(b.type===e.DATALAYER){b.fields&&(f.fields=b.fields);var k;k=b.dataSource;var l;switch(k.type){case "table":l={dataSourceName:k.dataSourceName,workspaceId:k.workspaceId,gdbVersion:k.gdbVersion};break;case "query-table":l={geometryType:d.toJSON(k.geometryType),
workspaceId:k.workspaceId,query:k.query,oidFields:k.oidFields,spatialReference:k.spatialReference};break;case "join-table":l={leftTableSource:a(k.leftTableSource),rightTableSource:a(k.rightTableSource),leftTableKey:k.leftTableKey,rightTableKey:k.rightTableKey,joinType:r.toJSON(k.joinType)};break;case "raster":l={workspaceId:k.workspaceId,dataSourceName:k.dataSourceName}}l.type=q.toJSON(k.type);k=h.fixJson(l);f.dataSource=k}f.type=c.toJSON(b.type);return h.fixJson(f)}function f(a){var b={};if(c.fromJSON(a.type)===
e.MAPLAYER)b.mapLayerId=a.mapLayerId,a.gdbVersion&&(b.gdbVersion=a.gdbVersion);else if(c.fromJSON(a.type)===e.DATALAYER){a.fields&&(b.fields=a.fields);var k;k=a.dataSource;var l;switch(k.type){case "table":l={dataSourceName:k.dataSourceName,workspaceId:k.workspaceId,gdbVersion:k.gdbVersion};break;case "queryTable":l={geometryType:d.fromJSON(k.geometryType),workspaceId:k.workspaceId,query:k.query,oidFields:k.oidFields,spatialReference:k.spatialReference};break;case "joinTable":l={leftTableSource:f(k.leftTableSource),
rightTableSource:f(k.rightTableSource),leftTableKey:k.leftTableKey,rightTableKey:k.rightTableKey,joinType:r.fromJSON(k.joinType)};break;case "raster":l={workspaceId:k.workspaceId,dataSourceName:k.dataSourceName}}l.type=q.fromJSON(k.type);k=h.fixJson(l);b.dataSource=k}b.type=c.fromJSON(a.type);return h.fixJson(b)}Object.defineProperty(e,"__esModule",{value:!0});e.MAPLAYER="map-layer";e.DATALAYER="data-layer";var d=n({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",
esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),c=n({mapLayer:e.MAPLAYER,dataLayer:e.DATALAYER}),q=n({joinTable:"join-table",queryTable:"query-table"}),r=n({esriLeftOuterJoin:"left-outer-join",esriLeftInnerJoin:"left-inner-join"});e.isMapLayerSource=l;e.isDataLayerSource=m;e.castSource=k;e.sourceToJSON=a;e.sourceFromJSON=f})},"esri/layers/support/Relationship":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/kebabDictionary ../../core/accessorSupport/decorators".split(" "),
function(b,e,n,h,l,m,k){var a=m({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"});return function(b){function d(a){a=b.call(this,a)||this;a.cardinality=null;a.id=null;a.keyField=null;a.name=null;a.relatedTableId=null;return a}n(d,b);h([k.property({json:{read:a.read,write:a.write}})],d.prototype,"cardinality",void 0);h([k.property({json:{read:!0,write:!0}})],d.prototype,"id",void 0);h([k.property({json:{read:!0,write:!0}})],
d.prototype,"keyField",void 0);h([k.property({json:{read:!0,write:!0}})],d.prototype,"name",void 0);h([k.property({json:{read:!0,write:!0}})],d.prototype,"relatedTableId",void 0);return d=h([k.subclass("esri.layers.support.Relationship")],d)}(k.declared(l))})},"esri/renderers/support/styleUtils":function(){define(["require","exports","../../core/promiseUtils","../../core/Warning"],function(b,e,n,h){Object.defineProperty(e,"__esModule",{value:!0});e.loadStyleRenderer=function(b,e){var k=b&&b.getAtOrigin&&
b.getAtOrigin("renderer",e.origin);return k&&"unique-value"===k.type&&k.styleOrigin?k.populateFromStyle().catch(function(a){e&&e.messages&&e.messages.push(new h("renderer:style-reference","Failed to create unique value renderer from style reference: "+a.message,{error:a,context:e}));b.clear("renderer",e.origin)}).then(function(){return null}):n.resolve(null)}})},"esri/renderers/support/typeUtils":function(){define("require exports ../ClassBreaksRenderer ../HeatmapRenderer ../Renderer ../SimpleRenderer ../UniqueValueRenderer".split(" "),
function(b,e,n,h,l,m,k){Object.defineProperty(e,"__esModule",{value:!0});e.types={key:"type",base:l,typeMap:{heatmap:h,simple:m,"unique-value":k,"class-breaks":n}}})},"esri/layers/support/sublayerUtils":function(){define(["require","exports","./layerSourceUtils"],function(b,e,n){function h(b,e){function h(b){var c=b.sublayers;a.unshift(b.id);c&&c.forEach(h)}if(!b||!b.length)return!0;var a=[];e.forEach(h);if(b.length>a.length)return!1;e=0;for(var f=a.length,d=0;d<b.length;d++){for(var c=b[d].id;e<
f&&a[e]!==c;)e++;if(e>=f)return!1}return!0}Object.defineProperty(e,"__esModule",{value:!0});e.isExportDynamic=function(b,e,k){return b.some(function(a){var b=a.source;return!(!b||b.type===n.MAPLAYER&&b.mapLayerId===a.id&&(!b.gdbVersion||b.gdbVersion===k.gdbVersion))||null!=a.renderer||null!=a.labelingInfo||a.hasOwnProperty("opacity")&&null!=a.opacity||a.hasOwnProperty("labelsVisible")&&null!=a.labelsVisible})?!0:!h(b,e)};e.sameStructureAsService=function(b,e){return e.flatten(function(b){return(b=
b.sublayers)&&b.toArray().reverse()}).toArray().reverse().every(function(e,a){return(a=b[a])&&e.id===a.id&&(null==e.sublayers&&null==a.sublayers||null!=e.sublayers&&null!=a.sublayers&&e.sublayers.map(function(a){return a.id}).join(",")===a.sublayers.map(function(a){return a.id}).join(","))})}})},"esri/layers/support/arcgisLayers":function(){define("require exports ../../core/tsSupport/assignHelper dojo/when ../../request ../../core/Error ../../core/promiseUtils ./arcgisLayerUrl ./arcgisLayerUrl ./lazyLayerLoader".split(" "),
function(b,e,n,h,l,m,k,a,f,d){function c(a,b){return a.sublayerIds.map(function(c){return new a.Constructor(n({},b,{layerId:c,sublayerTitleMode:"service-name"}))})}function q(a){var b=f.parse(a);if(!b)return k.reject(new m("arcgis-layers:url-mismatch","The url '${url}' is not a valid arcgis resource",{url:a}));var c=b.serverType,e=b.sublayer,l={FeatureServer:"FeatureLayer",StreamServer:"StreamLayer",VectorTileServer:"VectorTileLayer"};switch(c){case "MapServer":c=null!=e?"FeatureLayer":x(a).then(function(a){return a?
"TileLayer":"MapImageLayer"});break;case "ImageServer":c=v(a).then(function(a){var b=a.tileInfo&&a.tileInfo.format;return a.tileInfo?b&&"LERC"===b.toUpperCase()&&a.cacheType&&"elevation"===a.cacheType.toLowerCase()?"ElevationLayer":"TileLayer":"ImageryLayer"});break;case "SceneServer":c=v(b.url.path).then(function(a){var b={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer"};return a&&Array.isArray(a.layers)&&0<a.layers.length&&(a=a.layers[0].layerType,
null!=b[a])?b[a]:"SceneLayer"});break;default:c=l[c]}var n={FeatureLayer:!0,SceneLayer:!0},q={parsedUrl:b,Constructor:null,sublayerIds:null},w;return h(c).then(function(b){w=b;if(n[b]&&null==e)return r(a).then(function(a){1!==a.length&&(q.sublayerIds=a)})}).then(function(){return(0,d.layerLookupMap[w])()}).then(function(a){q.Constructor=a;return q})}function r(a){return v(a).then(function(a){return a&&Array.isArray(a.layers)?a.layers.map(function(a){return a.id}).reverse():[]})}function x(a){return v(a).then(function(a){return a.tileInfo})}
function z(a,b){a=a.Constructor.prototype.declaredClass;return"esri.layers.FeatureLayer"===a||"esri.layers.StreamLayer"===a?n({outFields:["*"]},b):b}function v(a){return l(a,{responseType:"json",query:{f:"json"}}).then(function(a){return a.data})}Object.defineProperty(e,"__esModule",{value:!0});e.fromUrl=function(a){return q(a.url).then(function(d){var e=z(d,n({},a.properties,{url:a.url}));return d.sublayerIds?k.create(function(a){return b(["../GroupLayer"],a)}).then(function(a){var b=new a({title:d.parsedUrl.title});
c(d,e).forEach(function(a){return b.add(a)});return k.resolve(b)}):k.resolve(new d.Constructor(e))})};e.fetchServerVersion=function(b){if(!a.test(b))return k.reject();b=b.replace(/(.*\/rest)\/.*/i,"$1")+"/info";return l(b,{query:{f:"json"},responseType:"json"}).then(function(a){return a.data&&a.data.currentVersion?a.data.currentVersion:k.reject()})}})},"esri/layers/support/lazyLayerLoader":function(){define(["require","exports","../../core/promiseUtils"],function(b,e,n){Object.defineProperty(e,"__esModule",
{value:!0});e.layerLookupMap={CSVLayer:function(){return n.create(function(e){return b(["../CSVLayer"],e)})},ElevationLayer:function(){return n.create(function(e){return b(["../ElevationLayer"],e)})},FeatureLayer:function(){return n.create(function(e){return b(["../FeatureLayer"],e)})},GroupLayer:function(){return n.create(function(e){return b(["../GroupLayer"],e)})},GeoRSSLayer:function(){return n.create(function(e){return b(["../GeoRSSLayer"],e)})},ImageryLayer:function(){return n.create(function(e){return b(["../ImageryLayer"],
e)})},KMLLayer:function(){return n.create(function(e){return b(["../KMLLayer"],e)})},MapImageLayer:function(){return n.create(function(e){return b(["../MapImageLayer"],e)})},MapNotesLayer:function(){return n.create(function(e){return b(["../MapNotesLayer"],e)})},OpenStreetMapLayer:function(){return n.create(function(e){return b(["../OpenStreetMapLayer"],e)})},PointCloudLayer:function(){return n.create(function(e){return b(["../PointCloudLayer"],e)})},SceneLayer:function(){return n.create(function(e){return b(["../SceneLayer"],
e)})},IntegratedMeshLayer:function(){return n.create(function(e){return b(["../IntegratedMeshLayer"],e)})},StreamLayer:function(){return n.create(function(e){return b(["../StreamLayer"],e)})},TileLayer:function(){return n.create(function(e){return b(["../TileLayer"],e)})},UnknownLayer:function(){return n.create(function(e){return b(["../UnknownLayer"],e)})},UnsupportedLayer:function(){return n.create(function(e){return b(["../UnsupportedLayer"],e)})},VectorTileLayer:function(){return n.create(function(e){return b(["../VectorTileLayer"],
e)})},WebTileLayer:function(){return n.create(function(e){return b(["../WebTileLayer"],e)})},WMSLayer:function(){return n.create(function(e){return b(["../WMSLayer"],e)})},WMTSLayer:function(){return n.create(function(e){return b(["../WMTSLayer"],e)})},BingMapsLayer:function(){return n.create(function(e){return b(["../BingMapsLayer"],e)})}}})},"esri/plugins/popupManager":function(){define(["../views/PopupManager"],function(b){return{add:function(e,n){e.popupManager||(e.popupManager=new b(n),e.popupManager.view=
e)},remove:function(b){var e=b.popupManager;e&&(e.destroy(),b.popupManager=null)}}})},"esri/views/PopupManager":function(){define("../core/promiseUtils dojo/on dojo/Deferred ../layers/graphics/dehydratedFeatures ../geometry/support/scaleUtils ../geometry/Extent ../tasks/support/Query ../layers/GroupLayer ../core/Accessor".split(" "),function(b,e,n,h,l,m,k,a,f){return f.createSubclass({declaredClass:"esri.views.PopupManager",properties:{map:{dependsOn:["view.map"],readOnly:!0}},constructor:function(){this._featureLayersCache=
{}},destroy:function(){this._featureLayersCache={};this.view=null},_clickHandle:null,_featureLayersCache:null,enabled:!1,_enabledSetter:function(a){this._clickHandle&&(a?this._clickHandle.resume():this._clickHandle.pause());this._set("enabled",a)},_mapGetter:function(){return this.get("view.map")||null},view:null,_viewSetter:function(a){this._clickHandle&&(this._clickHandle.remove(),this._clickHandle=null);a&&(this._clickHandle=e.pausable(a,"click",this._clickHandler.bind(this)),this.enabled||this._clickHandle.pause());
this._set("view",a)},_closePopup:function(){var a=this.get("view.popup");a&&(a.clear(),a.close())},_showPopup:function(d,c,e){function f(a){return v.allLayerViews.find(function(b){return b.layer===a})}function q(a){if(null==a)return!1;var b=f(a);return null==b?!1:a.loaded&&!b.suspended&&(a.popupEnabled&&a.popupTemplate||"graphics"===a.type||"geo-rss"===a.type||"map-notes"===a.type||"kml"===a.type||b.getPopupData)}function z(a){return(a=f(a))&&a.hasDraped}var v=this.view;d=v.popup;var w=this,p=[],
y="3d"===v.type;this.map.layers.toArray().forEach(function(b){b.isInstanceOf(a)?b.layers.toArray().forEach(function(a){q(a)&&(!y||f(a)&&f(a).getPopupData||z(a))&&p.push(a)}):q(b)&&(!y||f(b)&&f(b).getPopupData||z(b))&&p.push(b)});0<v.graphics.length&&p.push(v.graphics);(e&&v.graphics.includes(e)?e.getEffectivePopupTemplate():!e||q(e.layer))||(e=null);if(p.length||e){var g=[],u=!!e,t=w._calculateClickTolerance(p);if(c){var A=1;"2d"===v.type&&(A=v.state.resolution);var C=v.basemapTerrain;C&&C.overlayManager&&
(A=C.overlayManager.overlayPixelSizeInMapUnits(c));t*=A;C&&!C.spatialReference.equals(v.spatialReference)&&(t*=l.getMetersPerUnitForSR(C.spatialReference)/l.getMetersPerUnitForSR(v.spatialReference));var C=c.clone().offset(-t,-t),t=c.clone().offset(t,t),B=new m(Math.min(C.x,t.x),Math.min(C.y,t.y),Math.max(C.x,t.x),Math.max(C.y,t.y),v.spatialReference),C=function(a){var d;if("imagery"===a.type){d=new k;d.geometry=c;var g=f(a),l={rasterAttributeTableFieldPrefix:"Raster.",returnDomainValues:!0};l.layerView=
g;d=a.queryVisibleRasters(d,l).then(function(a){u=u||0<a.length;return a})}else if("scene"===a.type||!w._featureLayersCache[a.id]&&"function"!==typeof a.queryFeatures){if("map-image"===a.type||"tile"===a.type||"wms"===a.type)return g=f(a),g.getPopupData(B);var l=[],m,n=!1;"esri.core.Collection\x3cesri.Graphic\x3e"===a.declaredClass?(g=a,m=!0):"graphics"===a.type?(g=a.graphics,m=!0):(g=(g=f(a))&&g.loadedGraphics,m=!1,n=!0);g&&(l=g.filter(function(a){return a&&(!m||a.getEffectivePopupTemplate())&&a.visible&&
B.intersects(a.geometry)}).toArray(),n&&(l=l.map(function(b){return h.hydrateGraphic(b,a)})));0<l.length&&(u=!0,d="scene"===a.type?w._fetchSceneAttributes(a,l):b.resolve(l))}else d=a.createQuery(),d.geometry=B,d=a.queryFeatures(d).then(function(b){b=b.features;if(e&&e.layer===a&&a.objectIdField){var c=a.objectIdField,d=e.attributes[c];b=b.filter(function(a){return a.attributes[c]!==d})}if(!e&&"graphics3DGraphics"in f(a)){var g=[],h=f(a).graphics3DGraphics,k;for(k in h)g.push(h[k].graphic.attributes[a.objectIdField]);
b=b.filter(function(b){return-1!==g.indexOf(b.attributes[a.objectIdField])})}u=u||0<b.length;return b});return d};if(y&&!e||!y)var g=p.map(C).filter(function(a){return!!a}),F=function(a){return a.reduce(function(a,b){return a.concat(b.items?F(b.items):b)},[])},g=F(g);e&&(e.layer&&"scene"===e.layer.type?g.unshift(this._fetchSceneAttributes(e.layer,[e])):e.getEffectivePopupTemplate()&&(C=new n,g.unshift(C.resolve([e]))));g.some(function(a){return!a.isFulfilled()})||u?g.length&&d.open({promises:g,location:c}):
w._closePopup()}else w._closePopup()}else w._closePopup()},_fetchSceneAttributes:function(a,c){return this.view.whenLayerView(a).then(function(d){var e=this._getOutFields(a.popupTemplate),f=c.map(function(a){return d.whenGraphicAttributes(a,e).catch(function(){return a})});return b.eachAlways(f)}.bind(this)).then(function(a){return a.map(function(a){return a.value})})},_getOutFields:function(a){var b=["*"];if("esri.PopupTemplate"===a.declaredClass){var d=null==a.content||Array.isArray(a.content)&&
a.content.every(function(a){return"attachments"===a.type||"fields"===a.type&&null==a.fieldInfos||"text"===a.type&&-1===a.text.indexOf("{")});a.fieldInfos&&!a.expressionInfos&&d&&(b=[],a.fieldInfos.forEach(function(a){var c=a.fieldName&&a.fieldName.toLowerCase();c&&"shape"!==c&&0!==c.indexOf("relationships/")&&b.push(a.fieldName)}))}return b},_calculateClickTolerance:function(a){var b=6;a.forEach(function(a){if(a=a.renderer)"simple"===a.type?((a=a.symbol)&&a.xoffset&&(b=Math.max(b,Math.abs(a.xoffset))),
a&&a.yoffset&&(b=Math.max(b,Math.abs(a.yoffset)))):"unique-value"!==a.type&&"class-breaks"!==a.type||(a.uniqueValueInfos||a.classBreakInfos).forEach(function(a){(a=a.symbol)&&a.xoffset&&(b=Math.max(b,Math.abs(a.xoffset)));a&&a.yoffset&&(b=Math.max(b,Math.abs(a.yoffset)))})});return b},_clickHandler:function(b){function c(a){return d.allLayerViews.find(function(b){return b.layer===a})}var d=this.view,e=b.screenPoint,f=this;if(0===b.button&&d.popup&&d.ready){var h="3d"===d.type,k=d.map.allLayers.some(function(b){if(b.isInstanceOf(a))return!1;
var d;null==b?d=!1:(d=c(b),d=null==d?!1:b.loaded&&!d.suspended&&(b.popupEnabled&&b.popupTemplate||"graphics"===b.type||d.getPopupData));d&&!(d=!h)&&(d=(b=c(b))&&b.hasDraped);return d?!0:!1});null!=e?this.view.hitTest(e.x,e.y).then(function(a){k||0<a.results.length?0<a.results.length?(a=a.results[0],f._showPopup(b,a.mapPoint,a.graphic)):f._showPopup(b,b.mapPoint,null):f._closePopup()}):f._showPopup(b,b.mapPoint)}}})})},"esri/layers/graphics/dehydratedFeatures":function(){define("require exports ../../Graphic ../../core/lang ../../geometry/SpatialReference ../../geometry/support/aaBoundingBox ../../geometry/support/aaBoundingRect ../../geometry/support/quantizationUtils ./dehydratedFeatureComparison".split(" "),
function(b,e,n,h,l,m,k,a,f){function d(a){switch(a){case "esriGeometryPoint":return"point";case "esriGeometryMultipoint":return"multipoint";case "esriGeometryPolyline":return"polyline";case "esriGeometryPolygon":return"polygon";case "esriGeometryEnvelope":return"extent"}}function c(a,b,c,d){return{uid:n.generateUID(),objectId:d&&a.attributes?a.attributes[d]:null,attributes:a.attributes,geometry:q(a.geometry,b,c),visible:!0}}function q(a,b,c){if(!a)return null;switch(b){case "point":return a={x:a.x,
y:a.y,z:a.z,m:a.m,hasZ:null!=a.z,hasM:null!=a.m,type:b,spatialReference:c};case "polyline":return a={paths:a.paths,hasZ:!!a.hasZ,hasM:!!a.hasM,type:b,spatialReference:c};case "polygon":return a={rings:a.rings,hasZ:!!a.hasZ,hasM:!!a.hasM,type:b,spatialReference:c};case "multipoint":return a={points:a.points,hasZ:!!a.hasZ,hasM:!!a.hasM,type:b,spatialReference:c};case "extent":return a={xmin:a.xmin,ymin:a.ymin,zmin:a.zmin,mmin:a.mmin,xmax:a.xmax,ymax:a.ymax,zmax:a.zmax,mmax:a.mmax,hasZ:!!a.hasZ,hasM:!!a.hasM,
type:b,spatialReference:c}}}function r(a){return"declaredClass"in a}function x(a){var b=a.spatialReference.toJSON();switch(a.type){case "point":return{x:a.x,y:a.y,z:a.z,m:a.m,spatialReference:b};case "polygon":var c=a.hasZ,d=a.hasM;return{rings:a.rings,hasZ:c,hasM:d,spatialReference:b};case "polyline":var e=a.paths,c=a.hasZ,d=a.hasM;return{paths:e,hasZ:c,hasM:d,spatialReference:b};case "extent":var e=a.xmin,f=a.xmax,h=a.ymin,k=a.ymax,l=a.zmin,m=a.zmax,n=a.mmin,p=a.mmax,c=a.hasZ,d=a.hasM;return{xmin:e,
xmax:f,ymin:h,ymax:k,zmin:l,zmax:m,mmin:n,mmax:p,hasZ:c,hasM:d,spatialReference:b};case "multipoint":return e=a.points,c=a.hasZ,d=a.hasM,{points:e,hasZ:c,hasM:d,spatialReference:b}}}function z(a,b){m.empty(b);"mesh"===a.type&&(a=a.extent);switch(a.type){case "point":b[0]=b[3]=a.x;b[1]=b[4]=a.y;a.hasZ&&(b[2]=b[5]=a.z);break;case "polyline":for(var c=0;c<a.paths.length;c++)m.expandWithNestedArray(b,a.paths[c],a.hasZ);break;case "polygon":for(c=0;c<a.rings.length;c++)m.expandWithNestedArray(b,a.rings[c],
a.hasZ);break;case "multipoint":m.expandWithNestedArray(b,a.points,a.hasZ);break;case "extent":b[0]=a.xmin,b[1]=a.ymin,b[3]=a.xmax,b[4]=a.ymax,null!=a.zmin&&(b[2]=a.zmin),null!=a.zmax&&(b[5]=a.zmax)}}function v(a,b){k.empty(b);"mesh"===a.type&&(a=a.extent);switch(a.type){case "point":b[0]=b[2]=a.x;b[1]=b[3]=a.y;break;case "polyline":for(var c=0;c<a.paths.length;c++)k.expandWithNestedArray(b,a.paths[c]);break;case "polygon":for(c=0;c<a.rings.length;c++)k.expandWithNestedArray(b,a.rings[c]);break;case "multipoint":k.expandWithNestedArray(b,
a.points);break;case "extent":b[0]=a.xmin,b[1]=a.ymin,b[2]=a.xmax,b[3]=a.ymax}}Object.defineProperty(e,"__esModule",{value:!0});e.equals=f.equals;e.isPoint=function(a){return"point"===a.type};e.mapJSONGeometryType=d;e.fromFeatureSetJSON=function(b){var e=d(b.geometryType),f=l.fromJSON(b.spatialReference),h=b.transform;return b.features.map(function(d){d=c(d,e,f,b.objectIdFieldName);var g=d.geometry;if(g&&h)switch(g.type){case "point":d.geometry=a.hydratePoint(h,g,g,g.hasZ,g.hasM);break;case "multipoint":d.geometry=
a.hydrateMultipoint(h,g,g,g.hasZ,g.hasM);break;case "polygon":d.geometry=a.hydratePolygon(h,g,g,g.hasZ,g.hasM);break;case "polyline":d.geometry=a.hydratePolyline(h,g,g,g.hasZ,g.hasM)}return d})};e.fromJSON=c;e.fromJSONGeometry=q;e.makeDehydratedPoint=function(a,b,c,d){return{x:a,y:b,z:c,hasZ:null!=c,hasM:!1,spatialReference:d,type:"point"}};e.isHydratedGeometry=function(a){return"declaredClass"in a};e.isHydratedGraphic=r;e.hydrateGraphic=function(a,b){if(!a||r(a))return a;b=new n({layer:b,sourceLayer:b});
b.visible=a.visible;b.symbol=h.clone(a.symbol);b.attributes=h.clone(a.attributes);a.geometry&&("mesh"===a.geometry.type?b.geometry=a.geometry:b.read({geometry:x(a.geometry)}));return b};e.computeAABB=z;e.expandAABB=function(a,b){z(a,w);m.expand(b,w)};e.computeAABR=v;e.expandAABR=function(a,b){v(a,p);k.expand(b,p)};var w=m.create(),p=k.create()})},"esri/geometry/support/aaBoundingBox":function(){define(["require","exports","../Extent","./aaBoundingRect"],function(b,e,n,h){function l(a){void 0===a&&
(a=e.ZERO);return[a[0],a[1],a[2],a[3],a[4],a[5]]}function m(a){return a[0]>=a[3]?0:a[3]-a[0]}function k(a){return a[1]>=a[4]?0:a[4]-a[1]}function a(a){return a[2]>=a[5]?0:a[5]-a[2]}function f(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];return a}function d(a){return 6===a.length}Object.defineProperty(e,"__esModule",{value:!0});e.create=l;e.fromValues=function(a,b,d,e,f,h){return[a,b,d,e,f,h]};e.fromExtent=function(a,b){void 0===b&&(b=l());b[0]=a.xmin;b[1]=a.ymin;b[2]=a.zmin;b[3]=
a.xmax;b[4]=a.ymax;b[5]=a.zmax;return b};e.toExtent=function(a,b){return isFinite(a[2])||isFinite(a[5])?new n({xmin:a[0],xmax:a[3],ymin:a[1],ymax:a[4],zmin:a[2],zmax:a[5],spatialReference:b}):new n({xmin:a[0],xmax:a[3],ymin:a[1],ymax:a[4],spatialReference:b})};e.fromMinMax=function(a,b,d){void 0===d&&(d=l());d[0]=a[0];d[1]=a[1];d[2]=a[2];d[3]=b[0];d[4]=b[1];d[5]=b[2];return d};e.expandPointInPlace=function(a,b){b[0]<a[0]&&(a[0]=b[0]);b[0]>a[3]&&(a[3]=b[0]);b[1]<a[1]&&(a[1]=b[1]);b[1]>a[4]&&(a[4]=
b[1]);b[2]<a[2]&&(a[2]=b[2]);b[2]>a[5]&&(a[5]=b[2])};e.expand=function(a,b,e){void 0===e&&(e=a);d(b)?(e[0]=Math.min(a[0],b[0]),e[1]=Math.min(a[1],b[1]),e[2]=Math.min(a[2],b[2]),e[3]=Math.max(a[3],b[3]),e[4]=Math.max(a[4],b[4]),e[5]=Math.max(a[5],b[5])):h.is(b)?(e[0]=Math.min(a[0],b[0]),e[1]=Math.min(a[1],b[1]),e[3]=Math.max(a[3],b[2]),e[4]=Math.max(a[4],b[3])):2===b.length?(e[0]=Math.min(a[0],b[0]),e[1]=Math.min(a[1],b[1]),e[3]=Math.max(a[3],b[0]),e[4]=Math.max(a[4],b[1])):3===b.length&&(e[0]=Math.min(a[0],
b[0]),e[1]=Math.min(a[1],b[1]),e[2]=Math.min(a[2],b[2]),e[3]=Math.max(a[3],b[0]),e[4]=Math.max(a[4],b[1]),e[5]=Math.max(a[5],b[2]));return e};e.expandWithBuffer=function(a,b,d,e,f){void 0===f&&(f=a);var c=a[0],h=a[1],k=a[2],l=a[3],g=a[4];a=a[5];for(var m=0;m<e;m++)c=Math.min(c,b[d+3*m]),h=Math.min(h,b[d+3*m+1]),k=Math.min(k,b[d+3*m+2]),l=Math.max(l,b[d+3*m]),g=Math.max(g,b[d+3*m+1]),a=Math.max(a,b[d+3*m+2]);f[0]=c;f[1]=h;f[2]=k;f[3]=l;f[4]=g;f[5]=a;return f};e.expandWithNestedArray=function(a,b,d,
e){void 0===e&&(e=a);var c=b.length,f=a[0],h=a[1],k=a[2],l=a[3],g=a[4];a=a[5];if(d)for(d=0;d<c;d++){var m=b[d],f=Math.min(f,m[0]),h=Math.min(h,m[1]),k=Math.min(k,m[2]),l=Math.max(l,m[0]),g=Math.max(g,m[1]);a=Math.max(a,m[2])}else for(d=0;d<c;d++)m=b[d],f=Math.min(f,m[0]),h=Math.min(h,m[1]),l=Math.max(l,m[0]),g=Math.max(g,m[1]);e[0]=f;e[1]=h;e[2]=k;e[3]=l;e[4]=g;e[5]=a;return e};e.allFinite=function(a){for(var b=0;6>b;b++)if(!isFinite(a[b]))return!1;return!0};e.width=m;e.depth=k;e.height=a;e.diameter=
function(b){var c=m(b),d=a(b);b=k(b);return Math.sqrt(c*c+d*d+b*b)};e.center=function(b,d){void 0===d&&(d=[0,0,0]);d[0]=b[0]+m(b)/2;d[1]=b[1]+k(b)/2;d[2]=b[2]+a(b)/2;return d};e.size=function(b,d){void 0===d&&(d=[0,0,0]);d[0]=m(b);d[1]=k(b);d[2]=a(b);return d};e.maximumDimension=function(b){return Math.max(m(b),a(b),k(b))};e.containsPoint=function(a,b){return b[0]>=a[0]&&b[1]>=a[1]&&b[2]>=a[2]&&b[0]<=a[3]&&b[1]<=a[4]&&b[2]<=a[5]};e.containsPointWithMargin=function(a,b,d){return b[0]>=a[0]-d&&b[1]>=
a[1]-d&&b[2]>=a[2]-d&&b[0]<=a[3]+d&&b[1]<=a[4]+d&&b[2]<=a[5]+d};e.contains=function(a,b){return b[0]>=a[0]&&b[1]>=a[1]&&b[2]>=a[2]&&b[3]<=a[3]&&b[4]<=a[4]&&b[5]<=a[5]};e.intersects=function(a,b){return Math.max(b[0],a[0])<=Math.min(b[3],a[3])&&Math.max(b[1],a[1])<=Math.min(b[4],a[4])&&Math.max(b[2],a[2])<=Math.min(b[5],a[5])};e.offset=function(a,b,d,e,f){void 0===f&&(f=a);f[0]=a[0]+b;f[1]=a[1]+d;f[2]=a[2]+e;f[3]=a[3]+b;f[4]=a[4]+d;f[5]=a[5]+e;return f};e.setMin=function(a,b,d){void 0===d&&(d=a);d[0]=
b[0];d[1]=b[1];d[2]=b[2];d!==a&&(d[3]=a[3],d[4]=a[4],d[5]=a[5]);return d};e.setMax=function(a,b,d){void 0===d&&(d=a);d[3]=b[0];d[4]=b[1];d[5]=b[2];d!==a&&(d[0]=a[0],d[1]=a[1],d[2]=a[2]);return a};e.set=f;e.empty=function(a){return a?f(a,e.NEGATIVE_INFINITY):l(e.NEGATIVE_INFINITY)};e.toRect=function(a,b){b||(b=h.create());b[0]=a[0];b[1]=a[1];b[2]=a[3];b[3]=a[4];return b};e.fromRect=function(a,b){a[0]=b[0];a[1]=b[1];a[3]=b[2];a[4]=b[3];return a};e.is=d;e.isPoint=function(b){return 0===m(b)&&0===k(b)&&
0===a(b)};e.equals=function(a,b,e){if(null==a||null==b)return a===b;if(!d(a)||!d(b))return!1;if(e)for(var c=0;c<a.length;c++){if(!e(a[c],b[c]))return!1}else for(c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0};e.POSITIVE_INFINITY=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];e.NEGATIVE_INFINITY=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity];e.ZERO=[0,0,0,0,0,0]})},"esri/geometry/support/quantizationUtils":function(){define(["require","exports"],function(b,e){function n(a,
b){return Math.round((b-a.translate[0])/a.scale[0])}function h(a,b){return Math.round((a.translate[1]-b)/a.scale[1])}function l(a,b,c){for(var d=[],e,f,g,k,l=0;l<c.length;l++){var m=c[l];if(0<l){if(g=n(a,m[0]),k=h(a,m[1]),g!==e||k!==f)d.push(b(m,g-e,k-f)),e=g,f=k}else e=n(a,m[0]),f=h(a,m[1]),d.push(b(m,e,f))}return 0<d.length?d:null}function m(a,b,c,d){return l(a,c?d?g:y:d?y:p,b)}function k(a,b,c,d){var e=[];c=c?d?g:y:d?y:p;for(d=0;d<b.length;d++){var f=l(a,c,b[d]);f&&3<=f.length&&e.push(f)}return e.length?
e:null}function a(a,b,c,d){var e=[];c=c?d?g:y:d?y:p;for(d=0;d<b.length;d++){var f=l(a,c,b[d]);f&&2<=f.length&&e.push(f)}return e.length?e:null}function f(a,b){return b*a.scale[0]+a.translate[0]}function d(a,b){return a.translate[1]-b*a.scale[1]}function c(a,b,c){var e=Array(c.length);if(!c.length)return e;var g=a.scale,h=g[0],g=g[1],k=f(a,c[0][0]);a=d(a,c[0][1]);e[0]=b(c[0],k,a);for(var l=1;l<c.length;l++){var m=c[l],k=k+m[0]*h;a-=m[1]*g;e[l]=b(m,k,a)}return e}function q(a,b,d){for(var e=Array(d.length),
f=0;f<d.length;f++)e[f]=c(a,b,d[f]);return e}function r(a,b,d,e){return c(a,d?e?g:y:e?y:p,b)}function x(a,b,c,d){return q(a,c?d?g:y:d?y:p,b)}function z(a,b,c,d){return q(a,c?d?g:y:d?y:p,b)}function v(a,b,c){var d=c[0],e=d[0],d=d[1],f=Math.min(e,b[0]),g=Math.min(d,b[1]),h=Math.max(e,b[2]);b=Math.max(d,b[3]);for(var k=1;k<c.length;k++){var l=c[k],m=l[0],l=l[1],e=e+m,d=d+l;0>m&&(f=Math.min(f,e));0<m&&(h=Math.max(h,e));0>l?g=Math.min(g,d):0<l&&(b=Math.max(b,d))}a[0]=f;a[1]=g;a[2]=h;a[3]=b;return a}function w(a,
b){if(!b.length)return null;a[0]=a[1]=Number.POSITIVE_INFINITY;a[2]=a[3]=Number.NEGATIVE_INFINITY;for(var c=0;c<b.length;c++)v(a,a,b[c]);return a}Object.defineProperty(e,"__esModule",{value:!0});var p=function(a,b,c){return[b,c]},y=function(a,b,c){return[b,c,a[2]]},g=function(a,b,c){return[b,c,a[2],a[3]]};e.toTransform=function(a){return a?{originPosition:"upperLeft",scale:[a.tolerance,a.tolerance],translate:[a.extent.xmin,a.extent.ymax]}:null};e.equals=function(a,b){if(a===b||null==a&&null==b)return!0;
if(null==a||null==b)return!1;var c,d,e,f;a&&"upperLeft"===a.originPosition?(c=a.translate[0],d=a.translate[1],a=a.scale[0]):(c=a.extent.xmin,d=a.extent.ymax,a=a.tolerance);b&&"upperLeft"===b.originPosition?(e=b.translate[0],f=b.translate[1],b=b.scale[0]):(e=b.extent.xmin,f=b.extent.ymax,b=b.tolerance);return c===e&&d===f&&a===b};e.quantizeX=n;e.quantizeY=h;e.quantizeBounds=function(a,b,c){b[0]=n(a,c[0]);b[3]=h(a,c[1]);b[2]=n(a,c[2]);b[1]=h(a,c[3]);return b};e.quantizePoints=m;e.quantizeRings=k;e.quantizePaths=
a;e.hydrateX=f;e.hydrateY=d;e.hydrateCoordsArray=c;e.hydrateCoordsArrayArray=q;e.hydrateBounds=function(a,b,c){return c?(b[0]=f(a,c[0]),b[1]=d(a,c[3]),b[2]=f(a,c[2]),b[3]=d(a,c[1]),b):[f(a,b[0]),d(a,b[3]),f(a,b[2]),d(a,b[1])]};e.hydratePoints=r;e.hydratePaths=x;e.hydrateRings=z;e.getQuantizedBoundsCoordsArray=v;e.getQuantizedBoundsCoordsArrayArray=w;e.getQuantizedBoundsPoints=function(a){var b=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return v(b,
b,a)};e.getQuantizedBoundsPaths=function(a){return w([0,0,0,0],a)};e.getQuantizedBoundsRings=function(a){return w([0,0,0,0],a)};e.quantizeExtent=function(a,b,c,d,e){b.xmin=n(a,c.xmin);b.ymin=h(a,c.ymin);b.xmax=n(a,c.xmax);b.ymax=h(a,c.ymax);b!==c&&(d&&(b.zmin=c.zmin,b.zmax=c.zmax),e&&(b.mmin=c.mmin,b.mmax=c.mmax));return b};e.quantizeMultipoint=function(a,b,c,d,e){b.points=m(a,c.points,d,e);return b};e.quantizePoint=function(a,b,c,d,e){b.x=n(a,c.x);b.y=h(a,c.y);b!==c&&(d&&(b.z=c.z),e&&(b.m=c.m));
return b};e.quantizePolygon=function(a,b,c,d,e){a=k(a,c.rings,d,e);if(!a)return null;b.rings=a;return b};e.quantizePolyline=function(b,c,d,e,f){b=a(b,d.paths,e,f);if(!b)return null;c.paths=b;return c};e.hydrateExtent=function(a,b,c,e,g){b.xmin=f(a,c.xmin);b.ymin=d(a,c.ymin);b.xmax=f(a,c.xmax);b.ymax=d(a,c.ymax);b!==c&&(e&&(b.zmin=c.zmin,b.zmax=c.zmax),g&&(b.mmin=c.mmin,b.mmax=c.mmax));return b};e.hydrateMultipoint=function(a,b,c,d,e){b.points=r(a,c.points,d,e);return b};e.hydratePoint=function(a,
b,c,e,g){b.x=f(a,c.x);b.y=d(a,c.y);b!==c&&(e&&(b.z=c.z),g&&(b.m=c.m));return b};e.hydratePolygon=function(a,b,c,d,e){b.rings=z(a,c.rings,d,e);return b};e.hydratePolyline=function(a,b,c,d,e){b.paths=x(a,c.paths,d,e);return b}})},"esri/layers/graphics/dehydratedFeatureComparison":function(){define(["require","exports"],function(b,e){function n(a,b){if(a===b)return!0;if(null==a||null==b||a.length!==b.length)return!1;for(var d=0;d<a.length;d++){var c=a[d],e=b[d];if(c.length!==e.length)return!1;for(var f=
0;f<c.length;f++)if(c[f]!==e[f])return!1}return!0}function h(a,b){if(a===b)return!0;if(null==a||null==b||a.length!==b.length)return!1;for(var d=0;d<a.length;d++)if(!n(a[d],b[d]))return!1;return!0}function l(a,b){return a===b||a&&b&&a.equals(b)}function m(a,b){if(a===b)return!0;if(!a||!b||a.type!==b.type)return!1;switch(a.type){case "point":return l(a.spatialReference,b.spatialReference)?a.x===b.x&&a.y===b.y&&a.z===b.z&&a.m===b.m:!1;case "extent":return a.hasZ===b.hasZ&&a.hasM===b.hasM&&l(a.spatialReference,
b.spatialReference)?a.xmin===b.xmin&&a.ymin===b.ymin&&a.zmin===b.zmin&&a.xmax===b.xmax&&a.ymax===b.ymax&&a.zmax===b.zmax:!1;case "polyline":return a.hasZ===b.hasZ&&a.hasM===b.hasM&&l(a.spatialReference,b.spatialReference)?h(a.paths,b.paths):!1;case "polygon":return a.hasZ===b.hasZ&&a.hasM===b.hasM&&l(a.spatialReference,b.spatialReference)?h(a.rings,b.rings):!1;case "multipoint":return a.hasZ===b.hasZ&&a.hasM===b.hasM&&l(a.spatialReference,b.spatialReference)?n(a.points,b.points):!1;case "mesh":return!1}}
function k(a,b){if(a===b)return!0;if(!a||!b)return!1;for(var d in a)if(!(d in b)||a[d]!==b[d])return!1;for(d in b)if(!(d in a))return!1;return!0}Object.defineProperty(e,"__esModule",{value:!0});e.equals=function(a,b){return a===b?!0:null!=a&&null!=b&&a.objectId===b.objectId&&m(a.geometry,b.geometry)&&k(a.attributes,b.attributes)?!0:!1}})},"esri/layers/GroupLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/asyncUtils ../core/loadAll ../core/MultiOriginJSONSupport ../core/promiseUtils ../core/accessorSupport/decorators ../core/accessorSupport/utils ./Layer ./mixins/OperationalLayer ./mixins/PortalLayer ../support/LayersMixin".split(" "),
function(b,e,n,h,l,m,k,a,f,d,c,q,r,x){return function(c){function e(a){a=c.call(this)||this;a._visibilityHandles={};a.fullExtent=void 0;a.operationalLayerType="GroupLayer";a.spatialReference=void 0;a.type="group";a._visibilityWatcher=a._visibilityWatcher.bind(a);return a}n(e,c);e.prototype.initialize=function(){this._enforceVisibility(this.visibilityMode,this.visible);this.watch("visible",this._visibleWatcher.bind(this),!0)};e.prototype._writeLayers=function(a,b,c,d){var e=[];if(!a)return e;a.forEach(function(a){a.write&&
(a=a.write(null,d))&&a.layerType&&e.push(a)});b.layers=e};Object.defineProperty(e.prototype,"visibilityMode",{set:function(a){var b=this._get("visibilityMode")!==a;this._set("visibilityMode",a);b&&this._enforceVisibility(a,this.visible)},enumerable:!0,configurable:!0});e.prototype.load=function(){this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection","Scene Service"]}));return this.when()};e.prototype.loadAll=function(){var a=this;return l.safeCast(m.loadAll(this,
function(b){b(a.layers)}))};e.prototype.layerAdded=function(a){a.visible&&"exclusive"===this.visibilityMode?this._turnOffOtherLayers(a):"inherited"===this.visibilityMode&&(a.visible=this.visible);this._visibilityHandles[a.uid]=a.watch("visible",this._visibilityWatcher,!0)};e.prototype.layerRemoved=function(a){var b=this._visibilityHandles[a.uid];b&&(b.remove(),delete this._visibilityHandles[a.uid]);this._enforceVisibility(this.visibilityMode,this.visible)};e.prototype.importLayerViewModule=function(c){switch(c.type){case "2d":return a.create(function(a){b(["../views/layers/GroupLayerView"],
a)});case "3d":return a.create(function(a){b(["../views/layers/GroupLayerView"],a)})}};e.prototype._turnOffOtherLayers=function(a){this.layers.forEach(function(b){b!==a&&(b.visible=!1)})};e.prototype._enforceVisibility=function(a,b){if(d.getProperties(this).initialized){var c=this.layers,e=c.find(function(a){return a.visible});switch(a){case "exclusive":c.length&&!e&&(e=c.getItemAt(0),e.visible=!0);this._turnOffOtherLayers(e);break;case "inherited":c.forEach(function(a){a.visible=b})}}};e.prototype._visibleWatcher=
function(a){"inherited"===this.visibilityMode&&this.layers.forEach(function(b){b.visible=a})};e.prototype._visibilityWatcher=function(a,b,c,d){switch(this.visibilityMode){case "exclusive":a?this._turnOffOtherLayers(d):this._isAnyLayerVisible()||(d.visible=!0);break;case "inherited":d.visible=this.visible}};e.prototype._isAnyLayerVisible=function(){return this.layers.some(function(a){return a.visible})};h([f.property()],e.prototype,"fullExtent",void 0);h([f.property({json:{read:!1,write:{ignoreOrigin:!0}}})],
e.prototype,"layers",void 0);h([f.writer("layers")],e.prototype,"_writeLayers",null);h([f.property()],e.prototype,"operationalLayerType",void 0);h([f.property({json:{write:!1}})],e.prototype,"portalItem",void 0);h([f.property()],e.prototype,"spatialReference",void 0);h([f.property({json:{read:!1},readOnly:!0,value:"group"})],e.prototype,"type",void 0);h([f.property({json:{read:!1,write:!1}})],e.prototype,"url",void 0);h([f.property({type:String,value:"independent",json:{write:!0}})],e.prototype,"visibilityMode",
null);return e=h([f.subclass("esri.layers.GroupLayer")],e)}(f.declared(c,x,k,q,r))})},"esri/portal/support/layersCreator":function(){define("require exports ../../core/has ../../core/promiseUtils ../../layers/Layer ../../layers/support/lazyLayerLoader ../PortalItem ./mapNotesUtils ./portalLayers ../../renderers/support/styleUtils".split(" "),function(b,e,n,h,l,m,k,a,f,d){function c(a,b,c){var e,f={};b.itemId&&(f.portalItem={id:b.itemId,portal:c.context.portal});e=new a(f);e.read(b,c.context);return d.loadStyleRenderer(e,
c.context).then(function(){return h.resolve(e)})}function q(a,b){return r(a,b).then(function(d){return c(d,a,b)})}function r(b,c){var d=c.context,e=x(d),g=b.layerType||b.type;!g&&c&&c.defaultLayerType&&(g=c.defaultLayerType);c=(c=e[g])?m.layerLookupMap[c]:m.layerLookupMap.UnknownLayer;if("Feature Collection"===b.type){if(b.itemId)return(new k({id:b.itemId,portal:d&&d.portal})).load().then(f.selectLayerClassPath).then(function(a){return m.layerLookupMap[a.className||"UnknownLayer"]}).then(function(a){return a()})}else"ArcGISFeatureLayer"===
g&&a.isMapNotesLayer(b)&&(c=m.layerLookupMap.MapNotesLayer);b.wmtsInfo&&(c=m.layerLookupMap.WMTSLayer);return c()}function x(a){switch(a.origin){case "web-scene":switch(a.layerContainerType){case "basemap":a=y;break;case "ground":a=p;break;default:a=w}break;default:switch(a.layerContainerType){case "basemap":a=u;break;default:a=g}}return a}function z(a,b,c){return b&&b.filter?c.then(function(a){var c=b.filter(a);return void 0===c?h.resolve(a):c instanceof l?h.resolve(c):c}):c}function v(a,b,c){if(!b)return[];
for(var d=[],e=[],f=0;f<b.length;f++){var g=b[f],k=q(g,c);d.push(k);e.push(null);if("GroupLayer"===g.layerType&&g.layers&&Array.isArray(g.layers)&&0<g.layers.length){g=g.layers.map(function(a){return q(a,c)});d.push.apply(d,g);for(var l=0;l<g.length;l++)e.push(k)}}var m={};return d.map(function(b,d){var f=function(a,b){m[b.id]=d;var c=a.findIndex(function(a){if(!a.id)return!1;a=m[a.id];return void 0===a?!1:d<a});0>c&&(c=void 0);a.add(b,c)};return z(a,c,b).then(function(b){if(null===e[d])f(a,b);else return e[d].then(function(a){f(a.layers,
b);return h.resolve(b)});return h.resolve(b)})})}Object.defineProperty(e,"__esModule",{value:!0});var w={ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",PointCloudLayer:"PointCloudLayer",ArcGISSceneServiceLayer:"SceneLayer",IntegratedMeshLayer:"IntegratedMeshLayer",ArcGISTiledElevationServiceLayer:"ElevationLayer",ArcGISTiledImageServiceLayer:"TileLayer",ArcGISTiledMapServiceLayer:"TileLayer",GroupLayer:"GroupLayer",WebTiledLayer:"WebTileLayer",
CSV:"CSVLayer",VectorTileLayer:"VectorTileLayer",WMS:"WMSLayer",DefaultTileLayer:"TileLayer"},p={ArcGISTiledElevationServiceLayer:"ElevationLayer",DefaultTileLayer:"ElevationLayer"},y={ArcGISTiledMapServiceLayer:"TileLayer",ArcGISTiledImageServiceLayer:"TileLayer",OpenStreetMap:"OpenStreetMapLayer",WebTiledLayer:"WebTileLayer",VectorTileLayer:"VectorTileLayer",ArcGISImageServiceLayer:"UnsupportedLayer",WMS:"UnsupportedLayer",ArcGISMapServiceLayer:"UnsupportedLayer",DefaultTileLayer:"TileLayer"},g=
{ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"UnsupportedLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISStreamLayer:"StreamLayer",ArcGISTiledImageServiceLayer:"TileLayer",ArcGISTiledMapServiceLayer:"TileLayer",VectorTileLayer:"VectorTileLayer",WebTiledLayer:"WebTileLayer",CSV:"CSVLayer",GeoRSS:"GeoRSSLayer",KML:"KMLLayer",WMS:"WMSLayer",BingMapsAerial:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",DefaultTileLayer:"TileLayer"},
u={ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"UnsupportedLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISTiledImageServiceLayer:"TileLayer",ArcGISTiledMapServiceLayer:"TileLayer",OpenStreetMap:"OpenStreetMapLayer",VectorTileLayer:"VectorTileLayer",WebTiledLayer:"WebTileLayer",BingMapsAerial:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",WMS:"WMSLayer",DefaultTileLayer:"TileLayer"};e.createLayer=q;e.processLayer=z;e.populateLayers=v;e.populateOperationalLayers=
function(a,b,c){return v(a,b,c)}})},"esri/portal/support/mapNotesUtils":function(){define(["require","exports"],function(b,e){Object.defineProperty(e,"__esModule",{value:!0});e.isMapNotesLayer=function(b){var e=["TITLE","DESCRIPTION","IMAGE_URL","IMAGE_LINK_URL"];if((b=b.layers||b.featureCollection&&b.featureCollection.layers)&&Array.isArray(b))return b=b[0],b.layerDefinition.fields&&b.layerDefinition.fields.forEach(function(b){b=e.indexOf(b.name);-1<b&&e.splice(b,1)}),e.length?!1:!0}})},"esri/portal/support/portalLayers":function(){define("require exports ../../core/tsSupport/assignHelper ../../request ../../core/Collection ../../core/Error ../../core/promiseUtils ../../layers/support/lazyLayerLoader ../PortalItem ./mapNotesUtils".split(" "),
function(b,e,n,h,l,m,k,a,f,d){function c(a){switch(a.type){case "Map Service":return r(a);case "Feature Service":return x(a);case "Feature Collection":return v(a);case "Scene Service":return z(a);case "Image Service":return w(a);case "Stream Service":return{className:"StreamLayer"};case "Vector Tile Service":return{className:"VectorTileLayer"};case "KML":return{className:"KMLLayer"};case "WMTS":return{className:"WMTSLayer"};case "WMS":return{className:"WMSLayer"};default:return k.reject(new m("portal:unknown-item-type",
"Unknown item type '${type}'",{type:a.type}))}}function q(b){return(0,a.layerLookupMap[b.className])().then(function(a){return{constructor:a,properties:b.properties}})}function r(a){return p(a).then(function(a){return a?{className:"TileLayer"}:{className:"MapImageLayer"}})}function x(a){return y(a).then(function(a){if("object"===typeof a){var b={outFields:["*"]};null!=a.id&&(b.layerId=a.id);return{className:"FeatureLayer",properties:b}}return{className:"GroupLayer"}})}function z(a){return y(a).then(function(b){if("object"===
typeof b){var c={},d=void 0;null!=b.id?(c.layerId=b.id,d=a.url+"/layers/"+b.id):d=a.url;if(Array.isArray(a.typeKeywords)&&0<a.typeKeywords.length){b={IntegratedMesh:"IntegratedMeshLayer","3DObject":"SceneLayer",Point:"SceneLayer",PointCloud:"PointCloudLayer"};for(var e=0,f=Object.keys(b);e<f.length;e++){var h=f[e];if(-1!==a.typeKeywords.indexOf(h))return{className:b[h]}}}return g(d).then(function(a){var b="SceneLayer";null!=a&&"IntegratedMesh"===a.layerType?b="IntegratedMeshLayer":null!=a&&"PointCloud"===
a.layerType&&(b="PointCloudLayer");return{className:b,properties:c}})}return{className:"GroupLayer"}})}function v(a){return a.load().then(function(){return a.fetchData()}).then(function(a){if(a&&Array.isArray(a.layers)){if(d.isMapNotesLayer(a))return{className:"MapNotesLayer"};if(1===a.layers.length)return{className:"FeatureLayer"}}return{className:"GroupLayer"}})}function w(a){return p(a).then(function(b){var c=new l(a.typeKeywords);return b?c.find(function(a){return"elevation 3d layer"===a.toLowerCase()})?
{className:"ElevationLayer"}:{className:"TileLayer"}:{className:"ImageryLayer"}})}function p(a){return g(a.url).then(function(a){return a.tileInfo})}function y(a){return!a.url||a.url.match(/\/\d+$/)?k.resolve({}):a.load().then(function(){return a.fetchData()}).then(function(b){return b&&Array.isArray(b.layers)?1===b.layers.length?{id:b.layers[0].id}:!1:g(a.url).then(function(a){return a&&Array.isArray(a.layers)?1===a.layers.length?{id:a.layers[0].id}:!1:{}})})}function g(a){return h(a,{responseType:"json",
query:{f:"json"}}).then(function(a){return a.data})}Object.defineProperty(e,"__esModule",{value:!0});e.fromItem=function(a){!a.portalItem||a.portalItem instanceof f||a.portalItem.constructor&&a.portalItem.constructor._meta||(a=n({},a,{portalItem:new f(a.portalItem)}));return a.portalItem.load().then(c).then(q).then(function(b){var c=n({portalItem:a.portalItem},b.properties);b=b.constructor;"esri.layers.FeatureLayer"===b.declaredClass&&(c.outFields=["*"]);return k.resolve(new b(c))})};e.selectLayerClassPath=
c})},"esri/views/layers/LayerView":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Evented ../../core/Handles ../../core/Identifiable ../../core/Logger ../../core/Promise ../../core/promiseUtils ../../core/accessorSupport/decorators".split(" "),function(b,e,n,h,l,m,k,a,f,d,c,q){return function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.handles=new k;b.layer=null;b.parent=null;b.view=
null;return b}n(b,a);b.prototype.initialize=function(){var a=this;this.addResolvingPromise(this.layer);this.when().catch(function(b){if("layerview:create-error"!==b.name){var d=a.layer&&a.layer.id||"no id",e=a.layer&&a.layer.title||"no title";f.getLogger(a.declaredClass).error("#resolve()","Failed to resolve layer view (layer title: '"+e+"', id: '"+d+"')",b);return c.reject(b)}})};b.prototype.destroy=function(){this.layer=this.view=this.parent=null};Object.defineProperty(b.prototype,"suspended",{get:function(){return!this.canResume()},
enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"updating",{get:function(){return!this.suspended&&this.isUpdating()},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"visible",{get:function(){return!0===this.get("layer.visible")},set:function(a){void 0===a?this._clearOverride("visible"):this._override("visible",a)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"fullOpacity",{get:function(){var a=this.get("layer.opacity"),a=null!=a?a:1,b=this.get("parent.fullOpacity");
return a*(null!=b?b:1)},enumerable:!0,configurable:!0});b.prototype.canResume=function(){return!this.get("parent.suspended")&&this.get("view.ready")&&this.get("layer.loaded")&&this.visible||!1};b.prototype.isUpdating=function(){return!1};h([q.property()],b.prototype,"layer",void 0);h([q.property()],b.prototype,"parent",void 0);h([q.property({readOnly:!0,dependsOn:["view","visible","layer.loaded","parent.suspended"]})],b.prototype,"suspended",null);h([q.property({type:Boolean,dependsOn:["suspended"],
readOnly:!0})],b.prototype,"updating",null);h([q.property()],b.prototype,"view",void 0);h([q.property({dependsOn:["layer.visible"]})],b.prototype,"visible",null);h([q.property({dependsOn:["layer.opacity","parent.fullOpacity"]})],b.prototype,"fullOpacity",null);return b=h([q.subclass("esri.views.layers.LayerView")],b)}(q.declared(l,m,a,d))})},"esri/views/View":function(){define("../Graphic ../core/Accessor ../core/Collection ../core/CollectionFlattener ../core/Evented ../core/Handles ../core/lang ../core/Logger ../core/Promise ../core/watchUtils ../core/promiseUtils ../core/scheduling ../geometry/Extent ../geometry/HeightModelInfo ../geometry/SpatialReference ./LayerViewManager ./RefreshManager ./BasemapView ./GroundView ./support/DefaultsFromMap ./input/Input ./navigation/Navigation".split(" "),
function(b,e,n,h,l,m,k,a,f,d,c,q,r,x,z,v,w,p,y,g,u,t){var A=a.getLogger("esri.views.View");return e.createSubclass([f,l],{declaredClass:"esri.views.View",properties:{allLayerViews:{readOnly:!0},basemapView:{},animation:{},resizing:{},interacting:{},graphics:{type:n.ofType(b)},groundView:{},defaultsFromMap:g,heightModelInfo:{readOnly:!0,type:x,dependsOn:["map.heightModelInfo?","defaultsFromMap.heightModelInfo"]},initialExtent:{readOnly:!0,type:r,dependsOn:["defaultsFromMap.extent"]},initialExtentRequired:{},
layerViews:{type:n},map:{},ready:{readOnly:!0,dependsOn:"map spatialReference width height initialExtentRequired initialExtent defaultsFromMap.isSpatialReferenceDone map.loaded?".split(" ")},size:{readOnly:!0,dependsOn:["width","height"],get:function(){return[this.width,this.height]}},spatialReference:{type:z,dependsOn:["defaultsFromMap.spatialReference","defaultsFromMap.vcsWkid","defaultsFromMap.latestVcsWkid"]},stationary:{dependsOn:["animation","interacting","resizing"]},type:{},updating:{},padding:{},
width:{},height:{},cursor:{},spatialReferenceWarningDelay:1E3,renderContext:{},input:{readOnly:!0},navigation:{readOnly:!0}},constructor:function(a){this._viewHandles=new m;this._viewHandles.add(this.watch("ready",function(a,b){this._currentSpatialReference=a?this.spatialReference:null;this.notifyChange("spatialReference");!a&&b&&this.layerViewManager.clear()}.bind(this)));this.allLayerViews=new h({root:this,rootCollectionNames:["basemapView.baseLayerViews","groundView.layerViews","layerViews","basemapView.referenceLayerViews"],
getChildrenFunction:function(a){return a.layerViews}});this.defaultsFromMap=new g({view:this});this.input=new u;this.navigation=new t},getDefaults:function(){return k.mixin(this.inherited(arguments),{layerViews:[],graphics:[],padding:{left:0,top:0,right:0,bottom:0}})},initialize:function(){var a=this.validate().then(function(){this._isValid=!0;this.notifyChange("ready");var a=function(){return d.whenOnce(this,"ready").then(function(){return c.after(0)}.bind(this)).then(function(){if(!this.ready)return a()}.bind(this))}.bind(this);
return a()}.bind(this));this.addResolvingPromise(a);this.basemapView=new p({view:this});this.groundView=new y({view:this});this.layerViewManager=new v({view:this});this.refreshManager=new w({view:this});this._resetInitialViewPropertiesFromContent();var b;d.init(this.defaultsFromMap,"isSpatialReferenceDone",function(a){var d=!!(this.map&&0<this.map.allLayers.length);a&&!this.spatialReference&&d||!b?a&&!this.spatialReference&&d&&!b&&(b=c.after(this.spatialReferenceWarningDelay),b.then(function(){A.warn("#spatialReference",
"no spatial reference could be derived from the currently added map layers")}).catch(function(){})):(b.cancel(),b=null)}.bind(this),!0)},destroy:function(){this.destroyed||(this.basemapView.destroy(),this.groundView.destroy(),this.destroyLayerViews(),this.refreshManager.destroy(),this.defaultsFromMap.destroy(),this.defaultsFromMap=null,this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this._viewHandles.destroy(),this.map=null)},destroyLayerViews:function(){this.layerViewManager.destroy()},
_viewHandles:null,_isValid:!1,_readyCycleForced:!1,_userSpatialReference:null,_currentSpatialReference:null,animation:null,basemapView:null,groundView:null,graphics:null,heightModelInfo:null,_heightModelInfoGetter:function(){return this.getDefaultHeightModelInfo()},interacting:!1,layerViews:null,map:null,_mapSetter:function(a){var b=this._get("map");a!==b&&(a&&a.load&&a.load(),this._forceReadyCycle(),this._resetInitialViewPropertiesFromContent(),this._set("map",a))},padding:null,_readyGetter:function(){return!!(this._isValid&&
!this._readyCycleForced&&this.map&&0!==this.width&&0!==this.height&&this.spatialReference&&(!this.map.load||this.map.loaded)&&(this._currentSpatialReference||!this.initialExtentRequired||this.initialExtent||this.defaultsFromMap&&this.defaultsFromMap.isSpatialReferenceDone)&&this.defaultsFromMap&&this.defaultsFromMap.isTileInfoDone&&this.isSpatialReferenceSupported(this.spatialReference))},spatialReference:null,_spatialReferenceGetter:function(){var a=this._userSpatialReference||this._currentSpatialReference||
this.getDefaultSpatialReference()||null;a&&this.isHeightModelInfoRequired&&this.defaultsFromMap&&(a=a.clone(),a.vcsWkid=this.defaultsFromMap.vcsWkid,a.latestVcsWkid=this.defaultsFromMap.latestVcsWkid);return a},_spatialReferenceSetter:function(a){this._userSpatialReference=a;this._set("spatialReference",a)},stationary:!0,_stationaryGetter:function(){return!this.animation&&!this.interacting&&!this.resizing},type:null,updating:!1,initialExtentRequired:!0,initialExtent:null,_initialExtentGetter:function(){return this.defaultsFromMap&&
this.defaultsFromMap.extent},cursor:"default",renderContext:null,input:null,navigation:null,whenLayerView:function(a){return this.layerViewManager.whenLayerView(a)},getDefaultSpatialReference:function(){return this.get("defaultsFromMap.spatialReference")},getDefaultHeightModelInfo:function(){return this.get("map.supportsHeightModelInfo")&&this.get("map.heightModelInfo")||this.get("defaultsFromMap.heightModelInfo")||null},validate:function(){return c.resolve()},isSpatialReferenceSupported:function(){return!0},
isTileInfoRequired:function(){return!1},when:function(a,b,c){this.isResolved()&&!this.ready&&A.warn("#when()",'Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use watchUtils.whenOnce(view, "ready").then(...) instead.');return this.inherited(arguments)},_resetInitialViewPropertiesFromContent:function(){if(this.defaultsFromMap){var a=this.defaultsFromMap.start.bind(this.defaultsFromMap);this.defaultsFromMap.reset();this._currentSpatialReference=
null;this.notifyChange("spatialReference");this._viewHandles.remove("defaultsFromMap");this._viewHandles.add([d.watch(this,"spatialReference",a),d.watch(this,"initialExtentRequired",a),q.schedule(a)],"defaultsFromMap")}},_forceReadyCycle:function(){this.ready&&(this._readyCycleForced=!0,d.whenFalseOnce(this,"ready",function(){this._readyCycleForced=!1;this.notifyChange("ready")}.bind(this)),this.notifyChange("ready"))}})})},"esri/views/LayerViewManager":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/Error ../core/Handles ../core/promiseUtils ../core/scheduling ../core/watchUtils ../core/accessorSupport/decorators ./LayerViewFactory".split(" "),
function(b,e,n,h,l,m,k,a,f,d,c,q){return function(b){function e(){var a=b.call(this)||this;a._promisesMap=new Map;a._layerViewsMap=new Map;a._handles=new k;a.factory=new q;a.ready=!1;a.layersToLayerViews=function(){var a=new Map;a.set("view.map.basemap.baseLayers","view.basemapView.baseLayerViews");a.set("view.map.ground.layers","view.groundView.layerViews");a.set("view.map.layers","view.layerViews");a.set("view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews");return a}();a._doWork=
a._doWork.bind(a);a.refresh=a.refresh.bind(a);a._handles.add(d.init(a,"view.ready",function(b){return a.ready=b}));a._handles.add(a.watch(["view.map.basemap","view.map.ground","view.map.layers","ready"],a.refresh),"watcher");return a}n(e,b);e.prototype.destroy=function(){this._handles&&(this.clear(),this.view=null,this.factory.destroy(),this.factory=null,this._handles.destroy(),this._map=this._layerViewsMap=this._promisesMap=this._handles=null)};e.prototype.clear=function(){this.destroyed||(this._layerViewsMap.forEach(this._disposeLayerView,
this),this._promisesMap.forEach(function(a){return a.cancel()}),this._layerViewsMap.clear(),this._promisesMap.clear(),this._refreshCollections())};e.prototype.refresh=function(){var a=this._handles;a.remove("refresh");a.add(f.schedule(this._doWork),"refresh")};e.prototype.whenLayerView=function(b){this.refresh();this._doWork();return this._promisesMap.has(b)?this._promisesMap.get(b):a.reject(new m("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:b}))};e.prototype._doWork=
function(){var a=this,b=this._handles,c=this.get("view.map");this._map!==c&&(this.clear(),this._map=c);if(b.has("refresh")){b.remove("refresh");b.remove("collection-change");this.factory.paused=!this.ready;var d=this._map&&this._map.allLayers;d&&(d.forEach(this._createLayerView,this),this._refreshCollections(),this._promisesMap.forEach(function(b,c){d.includes(c)||a._disposeLayerView(a._layerViewsMap.get(c),c)}),b.add(d.on("change",this.refresh),"collection-change"))}};e.prototype._refreshCollections=
function(){var a=this;this.layersToLayerViews.forEach(function(b,c){a._populateLayerViewsOwners(a.get(c),a.get(b),a.view)})};e.prototype._populateLayerViewsOwners=function(a,b,c){var d=this;if(a&&b){var e=0;a.forEach(function(a){var f=d._layerViewsMap.get(a);f&&(f.layer=a,f.parent=c,b.getItemAt(e)!==f&&b.splice(e,0,f),a.layers&&d._populateLayerViewsOwners(a.layers,f.layerViews,f),e+=1)});e<b.length&&b.splice(e,b.length)}else b&&b.removeAll()};e.prototype._createLayerView=function(a){var b=this,c=
this.view,d=this.factory,e=this._layerViewsMap,f=this._promisesMap;e.has(a)?a.load():f.has(a)||(d=d.create(c,a).then(function(d){if(!b._map||!b._map.allLayers.some(function(b){return a===b}))throw new m("view:no-layerview-for-layer","The layer has been removed from the map",{layer:a});e.set(a,d);b._refreshCollections();a.emit("layerview-create",{view:c,layerView:d});c.emit("layerview-create",{layer:a,layerView:d});return d.when()}),f.set(a,d),d.always(this.refresh))};e.prototype._disposeLayerView=
function(a,b){if(this._promisesMap.has(b)&&(this._promisesMap.get(b).cancel(),this._promisesMap.delete(b),a)){b=a.layer;var c=a.view;this.factory.dispose(a);a.layer=a.parent=a.view=null;this._layerViewsMap.delete(b);b.emit("layerview-destroy",{view:c,layerView:a});c.emit("layerview-destroy",{layer:b,layerView:a})}};h([c.property()],e.prototype,"ready",void 0);h([c.property()],e.prototype,"view",void 0);return e=h([c.subclass("esri.views.LayerViewManager")],e)}(c.declared(l))})},"esri/views/LayerViewFactory":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/Deferred dojo/when ../core/Accessor ../core/Collection ../core/Error ../core/Logger ../core/watchUtils ../core/accessorSupport/decorators".split(" "),
function(b,e,n,h,l,m,k,a,f,d,c,q){var r=d.getLogger("esri.views.LayerViewFactory");return function(b){function d(){var c=null!==b&&b.apply(this,arguments)||this;c.creationRequests=new a;c.paused=!0;return c}n(d,b);d.prototype.initialize=function(){var a=this;c.whenFalse(this,"paused",function(){a.creationRequests.toArray().forEach(a._processRequest,a)},!0)};d.prototype.destroy=function(){this.creationRequests.drain(function(a){return a.deferred.cancel(void 0)})};Object.defineProperty(d.prototype,
"working",{get:function(){return 0<this.creationRequests.length},enumerable:!0,configurable:!0});d.prototype.create=function(a,b){var c=this.getLayerViewPromise(b);if(c)return c;var d=this.creationRequests,e={deferred:new l(function(){var a=new f("cancelled:layerview-create","layerview creation cancelled",{layer:b});d.remove(e);e.creationPromise&&e.creationPromise.cancel(a);return a}),view:a,layer:b,started:!1,creationPromise:null};d.push(e);this.paused||this._processRequest(e);return e.deferred.promise};
d.prototype.dispose=function(a){a.layer.destroyLayerView(a)};d.prototype.getLayerViewPromise=function(a){var b=this.creationRequests&&this.creationRequests.find(function(b){return b.layer===a});return b&&b.deferred.promise};d.prototype._processRequest=function(a){var b=this;if(!a.started){a.started=!0;var c=a.deferred,d=a.layer,e=a.view;d.load().then(function(b){if(!c.isCanceled())return a.creationPromise=b.createLayerView(e),a.creationPromise}).then(function(b){return c.isCanceled()?b:a.creationPromise=
m(b.when())}).catch(function(a){c.isCanceled()||(r.error("Failed to create view for layer '"+d.title+", id:"+d.id+"' of type '"+d.type+"'.",{error:a}),c.reject(new f("layerview:create-error","layerview creation failed",{layer:d,error:a})))}).then(function(d){b.creationRequests&&b.creationRequests.remove(a);c.isFulfilled()?d&&b.dispose(d):c.resolve(d);return d})}};h([q.property()],d.prototype,"creationRequests",void 0);h([q.property()],d.prototype,"paused",void 0);h([q.property()],d.prototype,"view",
void 0);h([q.property({dependsOn:["paused","creationRequests.length"],readOnly:!0})],d.prototype,"working",null);return d=h([q.subclass("esri.views.LayerViewFactory")],d)}(q.declared(k))})},"esri/views/RefreshManager":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/Handles ../core/accessorSupport/decorators".split(" "),function(b,e,n,h,l,m,k){return function(a){function b(){var b=null!==a&&a.apply(this,arguments)||
this;b._handles=new m;b._currentTick=0;return b}n(b,a);b.prototype.initialize=function(){var a=this;this.view.allLayerViews.on("after-changes",function(){a.notifyChange("tickInterval");a._handles.remove("layerViewsUpdating");a._handles.add(a._getLayerViewHandles(),"layerViewsUpdating")});this.watch("tickInterval",function(){return a._restartTicking()});this.watch("view.ready",function(){return a._restartTicking()});this._restartTicking()};b.prototype.destroy=function(){this._handles&&(this._handles.destroy(),
this._handles=null,this._intervalID&&clearInterval(this._intervalID),this._currentTick=0)};Object.defineProperty(b.prototype,"tickInterval",{get:function(){var a=this.view.allLayerViews.filter(function(a){return!!a.refresh});return this._getCommonInterval(a)},enumerable:!0,configurable:!0});b.prototype._restartTicking=function(){var a=this;this._currentTick=0;this._intervalID&&clearInterval(this._intervalID);this.get("view.ready")&&this.tickInterval&&(this._intervalID=setInterval(function(){var b=
Date.now();a._currentTick+=a.tickInterval;a.view.allLayerViews.forEach(function(c){if(c.refresh){var d=Math.round(6E4*c.refreshInterval),e=0===a._currentTick%d,f=6E3>b-c.refreshTimestamp;d&&e&&!f&&c.refresh(b)}})},this.tickInterval))};b.prototype._getLayerViewHandles=function(){var a=this,b=[];this.view.allLayerViews.forEach(function(c){if(c.refresh){var d=c.watch("refreshInterval",function(){return a.notifyChange("tickInterval")});b.push(d);c.layer&&(d=c.layer.on("refresh",function(){var a=Date.now();
6E3>a-c.refreshTimestamp||c.refresh(a)}),b.push(d))}});return b};b.prototype._getCommonInterval=function(a){var b=function(a,c){return isNaN(a)||isNaN(c)?0:0>=c?a:b(c,a%c)};return a.toArray().reduce(function(a,c){return b(Math.round(6E4*c.refreshInterval),a)},0)};h([k.property()],b.prototype,"view",void 0);h([k.property({readOnly:!0})],b.prototype,"tickInterval",null);return b=h([k.subclass("esri.views.RefreshManager")],b)}(k.declared(l))})},"esri/views/BasemapView":function(){define(["../core/Accessor",
"../core/Collection","../core/watchUtils"],function(b,e,n){return b.createSubclass({declaredClass:"esri.views.BasemapView",properties:{view:{},baseLayerViews:{type:e},referenceLayerViews:{type:e}},constructor:function(){this._loadingHdl=n.init(this,"view.map.basemap",this._loadBasemap)},getDefaults:function(){return{baseLayerViews:[],referenceLayerViews:[]}},destroy:function(){this.view=null;this._loadingHdl&&(this._loadingHdl.remove(),this._loadingHdl=null)},_suspendedGetter:function(){return this.view?
this.view.suspended:!0},_loadBasemap:function(b){b&&b.load()}})})},"esri/views/GroundView":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/Collection ../core/Handles ../core/watchUtils ../core/accessorSupport/decorators ./support/GroundViewElevationSampler".split(" "),function(b,e,n,h,l,m,k,a,f,d){return function(b){function c(a){a=b.call(this)||this;a.handles=new k;a.view=null;a.layerViews=new m;return a}n(c,b);c.prototype.initialize=
function(){var b=this;this.handles.add(a.when(this,"view.map.ground",function(a){return a.load()}));this.handles.add(this.layerViews.on("after-changes",function(){return b.layerViewsAfterChangesHandler()}))};c.prototype.destroy=function(){this._set("view",null);this.handles&&(this.handles.destroy(),this.handles=null)};Object.defineProperty(c.prototype,"elevationSampler",{get:function(){return this.view&&"2d"!==this.view.type&&this.view.ready&&this.view.basemapTerrain&&this.view.basemapTerrain.ready?
new d({view:this.view}):null},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"updating",{get:function(){return this.suspended?!1:this.layerViews.some(function(a){return a.updating})},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"suspended",{get:function(){return!this.view||this.view.suspended},enumerable:!0,configurable:!0});c.prototype.layerViewsAfterChangesHandler=function(){var a=this;this.handles.remove("updating");this.handles.add(this.layerViews.map(function(b){return b.watch("updating",
function(){return a.updateUpdating()},!0)}).toArray(),"updating");this.updateUpdating()};c.prototype.updateUpdating=function(){this.notifyChange("updating")};h([f.property({readOnly:!0,dependsOn:["view.ready","view.basemapTerrain?.ready"]})],c.prototype,"elevationSampler",null);h([f.property({type:Boolean,dependsOn:["suspended"],readOnly:!0})],c.prototype,"updating",null);h([f.property({constructOnly:!0})],c.prototype,"view",void 0);h([f.property({type:m,readOnly:!0})],c.prototype,"layerViews",void 0);
h([f.property({readOnly:!0,dependsOn:["view.suspended"]})],c.prototype,"suspended",null);return c=h([f.subclass("esri.views.GroundView")],c)}(f.declared(l))})},"esri/views/support/GroundViewElevationSampler":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Evented ../../core/Logger ../../core/accessorSupport/decorators ../../geometry/support/aaBoundingRect ../../geometry/support/contains ../../geometry/support/webMercatorUtils ../../layers/support/ElevationSampler ../3d/terrain/TerrainConst".split(" "),
function(b,e,n,h,l,m,k,a,f,d,c,q,r){var x=k.getLogger("esri.views.support.GroundViewElevationSampler");return function(b){function e(a){a=b.call(this,a)||this;a.demResolution={min:-1,max:-1};a.noDataValue=r.noDataValueOpt.noDataValue;return a}n(e,b);e.prototype.initialize=function(){var a=this;this.view.basemapTerrain.on("elevation-change",function(){return a.emit("changed",{})})};Object.defineProperty(e.prototype,"extent",{get:function(){var a=this.view.basemapTerrain;return a.extent&&a.spatialReference?
f.toExtent(a.extent,a.spatialReference):null},enumerable:!0,configurable:!0});e.prototype.elevationAt=function(a){var b=a.spatialReference,e=this.spatialReference;if(!c.canProject(b,e))return x.error("Cannot sample elevation at a location with spatial reference ("+(b?b.wkid:"unknown")+") different from the view ("+e.wkid+")"),null;d.extentContainsPoint(this.extent,a)||(b=this.extent,x.warn("#elevationAt()","Point used to sample elevation ("+a.x+", "+a.y+") is outside of the sampler extent ("+(b.xmin+
", "+b.ymin+", "+b.xmax+", "+b.ymax)+")"));return this.view.basemapTerrain.getElevation(a)};e.prototype.queryElevation=function(a){return q.updateGeometryElevation(a.clone(),this)};h([a.property({readOnly:!0})],e.prototype,"demResolution",void 0);h([a.property({readOnly:!0,dependsOn:["view.basemapTerrain.extent","view.basemapTerrain.spatialReference"]})],e.prototype,"extent",null);h([a.property({readOnly:!0})],e.prototype,"noDataValue",void 0);h([a.property({readOnly:!0,aliasOf:"view.basemapTerrain.spatialReference"})],
e.prototype,"spatialReference",void 0);h([a.property({constructOnly:!0})],e.prototype,"view",void 0);return e=h([a.subclass("esri.views.support.GroundViewElevationSampler")],e)}(a.declared(l,m))})},"esri/layers/support/ElevationSampler":function(){define("require exports ../../geometry ../../core/Logger ../../geometry/support/aaBoundingRect ../../geometry/support/contains ../../geometry/support/scaleUtils ../../geometry/support/webMercatorUtils".split(" "),function(b,e,n,h,l,m,k,a){function f(a,b){var c=
d(a,b.spatialReference);if(!c)return null;switch(a.type){case "point":a.z=b.elevationAt(c)||0;break;case "polyline":r.spatialReference=c.spatialReference;for(var e=a.hasM&&!a.hasZ,f=0;f<a.paths.length;f++)for(var g=a.paths[f],h=c.paths[f],k=0;k<g.length;k++){var l=g[k],m=h[k];r.x=m[0];r.y=m[1];m=b.elevationAt(r)||0;e&&(l[3]=l[2]);l[2]=m}a.hasZ=!0;break;case "multipoint":r.spatialReference=c.spatialReference;e=a.hasM&&!a.hasZ;for(f=0;f<a.points.length;f++)g=a.points[f],h=c.points[f],r.x=h[0],r.y=h[1],
h=b.elevationAt(r)||0,e&&(g[3]=g[2]),g[2]=h;a.hasZ=!0}return a}function d(b,d){var e=b.spatialReference;return e.equals(d)?b:a.canProject(e,d)?a.project(b,d):(c.error("Cannot project geometry spatial reference (wkid:"+e.wkid+") to elevation sampler spatial reference (wkid:"+d.wkid+")"),null)}Object.defineProperty(e,"__esModule",{value:!0});var c=h.getLogger("esri.layers.support.ElevationSampler"),q=function(){function a(a,b,c){this.tile=a;this.noDataValue=c;this.extent=l.toExtent(a.tile.extent,b.spatialReference);
c=k.getMetersPerUnitForSR(b.spatialReference);a=b.lodAt(a.tile.level).resolution*c;this.demResolution={min:a,max:a}}Object.defineProperty(a.prototype,"spatialReference",{get:function(){return this.extent.spatialReference},enumerable:!0,configurable:!0});a.prototype.contains=function(a){a=d(a,this.spatialReference);return m.extentContainsPoint(this.extent,a)};a.prototype.elevationAt=function(a){var b=d(a,this.spatialReference);if(!b)return null;if(!this.contains(a)){var e=this.extent;c.warn("#elevationAt()",
"Point used to sample elevation ("+a.x+", "+a.y+") is outside of the sampler extent ("+(e.xmin+", "+e.ymin+", "+e.xmax+", "+e.ymax)+")")}return this.tile.sample(b.x,b.y)};a.prototype.queryElevation=function(a){return f(a.clone(),this)};a.prototype.on=function(a,b){return x};return a}();e.TileElevationSampler=q;b=function(){function a(a,b,c){var d=this,e;"number"===typeof b?(this.noDataValue=b,e=null):(e=b,this.noDataValue=c);this.samplers=e?a.map(function(a){return new q(a,e,d.noDataValue)}):a;if(a=
this.samplers[0])for(this.extent=a.extent.clone(),a=a.demResolution,this.demResolution={min:a.min,max:a.max},a=1;a<this.samplers.length;a++)b=this.samplers[a],this.extent.union(b.extent),this.demResolution.min=Math.min(this.demResolution.min,b.demResolution.min),this.demResolution.max=Math.max(this.demResolution.max,b.demResolution.max);else this.extent=l.toExtent(l.create(),e.spatialReference),this.demResolution={min:0,max:0}}Object.defineProperty(a.prototype,"spatialReference",{get:function(){return this.extent.spatialReference},
enumerable:!0,configurable:!0});a.prototype.elevationAt=function(a){var b=d(a,this.spatialReference);if(!b)return null;for(var e=0,f=this.samplers;e<f.length;e++){var g=f[e];if(g.contains(b))return g.elevationAt(b)}c.warn("#elevationAt()","Point used to sample elevation ("+a.x+", "+a.y+") is outside of the sampler");return null};a.prototype.queryElevation=function(a){return f(a.clone(),this)};a.prototype.on=function(a,b){return x};return a}();e.MultiTileElevationSampler=b;e.updateGeometryElevation=
f;var r=new n.Point,x={remove:function(){}}})},"esri/views/3d/terrain/TerrainConst":function(){define(["require","exports","../../../geometry/support/aaBoundingRect","./TilingScheme"],function(b,e,n,h){Object.defineProperty(e,"__esModule",{value:!0});(function(b){b[b.MAP=0]="MAP";b[b.ELEVATION=1]="ELEVATION";b[b.COUNT=2]="COUNT"})(e.LayerClass||(e.LayerClass={}));(function(b){b[b.NONE=0]="NONE";b[b.SPLIT=1]="SPLIT";b[b.VSPLITMERGE=2]="VSPLITMERGE";b[b.MERGE=4]="MERGE";b[b.DECODE_ELEVATION=8]="DECODE_ELEVATION";
b[b.UPDATE_GEOMETRY=16]="UPDATE_GEOMETRY";b[b.UPDATE_TEXTURE=32]="UPDATE_TEXTURE"})(e.TileUpdateTypes||(e.TileUpdateTypes={}));e.TILE_LOADING_DEBUGLOG=!1;e.MAX_ROOT_TILES=64;e.MAX_TILE_TESSELATION=512;e.ELEVATION_NODATA_VALUE=3.40282347E38/10;e.noDataValueOpt={noDataValue:e.ELEVATION_NODATA_VALUE};e.ELEVATION_DESIRED_RESOLUTION_LEVEL=4;e.TILEMAP_SIZE_EXP=5;e.TILEMAP_SIZE=1<<e.TILEMAP_SIZE_EXP;e.WEBMERCATOR_WORLD_EXTENT=n.create();h.WebMercatorAuxiliarySphere.getExtent(0,0,0,e.WEBMERCATOR_WORLD_EXTENT);
e.GEOGRAPHIC_WORLD_EXTENT=n.create([-180,-90,180,90]);e.TOO_MANY_ROOT_TILES_AFTER_CHANGE_ERROR="Cannot extend surface to encompass all layers because it would result in too many root tiles.";e.TOO_MANY_ROOT_TILES_FOR_LAYER_ERROR="Surface extent is too large for tile resolution at level 0.";e.DEFAULT_TILE_BACKGROUND="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAIAAADTED8xAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAA2JJREFUeNrs3d1O20AQgFFvRJInQLQBhHj/h0JVW34El1yQ2F73DVq3jTys55zrqUBbPrErZUSZ+vcOsto4AjK76Lqu1vr8+G3mPzjc3D/+eJj/Bcz/cd75R80fbu79BsAVCAQAAgABgABAACAAEAAIAAQAAgABQPOKfQAy83Ho+HnnHzXv49B4A4AAQAAgABAACAAEAAIAAYAAQAAgABAANM4+AKnZB4ifd/5R8/YB8AYAAYAAQAAgABAACAAEAAIAAYAAQAAgAGicfQBSsw8QP+/8o+btA+ANAAIAAYAAQAAgABAACAAEAAIAAYAAQADQOPsApGYfIH7e+UfN2wfAGwAEAAIAAYAAQAAgABAACAAEAAIAAXA201QdggAggH0AUrMPED8/jsPL03fns/y8fQC8AUAAIAAQAAgABAACAAGAAEAAIAAQAAgAGmcfgNTsA8TP2weImrcPgDcACAAEAAIAAYAAQAAgABAACAAEAAIAAUDj7AOQmn2A+Hn7AFHz9gHwBgABgABAACAAEAAIAAQAAgABgABgNS4cAf9pu9u3O1+m/n2aplKK/0j+TX86/tVP5+eZ3+729gFIfwWyDxA7bx8gat4+ANkJAAGAAEAAIAAQAAgABAACAAGAAEAAIABonn0AUrMPED9vHyBq3j4A3gAgABAACAAEAAIAAYAAQAAgABAA51VrdQgCAAHAsuwDkJp9gPj5vj+9vvx0PsvP2wfAGwAEAAIAAYAAQAAgABAACAAEAAIAAYAAoHH2AUjNPkD8vH2AqHn7AHgDgABAACAAEAAIAAQAAgABgABAACAAEAA0zj4AqdkHiJ+3DxA1bx8AbwAQACQ0DL0AyKuOowBwBYKUSikCIHUBAsAVCAQAAgABgABAALBy9gFIzT5A/Lx9gKj5y6trVyC8AUAAIAAQAAgAVq90Pg5N5gA2AsAVCAQAAgABgABAALB29gFIzT5A/Lx9gKj5q6+3rkB4A4AAQAAgABAACADWzB/IIHsCAsAVCARAlKlWhyAAEAAIABZjH4DU7APEz5+OH2+vT85n+fkvhztXILwBQAAgABAACAAEAGtWigBIHcBGALgCgQBAACAAyPMO9nHosxuHodZx5vB2t691HIdh/nx/Os7/Zsz/fvgXAAAA//8DAF1P1hM2ICMfAAAAAElFTkSuQmCC"})},
"esri/views/3d/terrain/TilingScheme":function(){define("require exports ../../../geometry ../../../core/Error ../../../geometry/SpatialReference ../../../geometry/support/aaBoundingRect ../../../geometry/support/scaleUtils ../../../layers/support/TileInfo ../support/mathUtils ../support/projectionUtils".split(" "),function(b,e,n,h,l,m,k,a,f,d){var c=d.webMercator.x2lon,q=d.webMercator.y2lat;b=function(){function b(a){var c=b._checkUnsupported(a);if(c)throw c;this.spatialReference=a.spatialReference;
this._isWebMercator=this.spatialReference.isWebMercator;this._isWGS84=this.spatialReference.isWGS84;this.origin=[a.origin.x,a.origin.y];this.pixelSize=[a.size[0],a.size[1]];this.dpi=a.dpi;var d=a.lods.reduce(function(a,b,c){b.level<a.min&&(a.min=b.level,a.minIndex=c);a.max=Math.max(a.max,b.level);return a},{min:Infinity,minIndex:0,max:-Infinity}),e=a.lods[d.minIndex],f=Math.pow(2,e.level),c=e.resolution*f,e=e.scale*f;this.levels=Array(d.max+1);for(d=0;d<this.levels.length;d++)this.levels[d]={resolution:c,
scale:e,tileSize:[c*a.size[0],c*a.size[1]]},c/=2,e/=2}b.prototype.clone=function(){return new b(this.toTileInfo())};b.prototype.toTileInfo=function(){return new a({dpi:this.dpi,origin:{x:this.origin[0],y:this.origin[1],spatialReference:this.spatialReference},size:this.pixelSize,spatialReference:this.spatialReference,lods:this.levels.map(function(a,b){return{level:b,scale:a.scale,resolution:a.resolution}})})};b.prototype.getExtent=function(a,b,d,e,h){void 0===e&&(e=m.create());var g=this.levels[a];
a=g.tileSize[0];g=g.tileSize[1];e[0]=this.origin[0]+d*a;e[2]=e[0]+a;e[3]=this.origin[1]-b*g;e[1]=e[3]-g;h&&(this._isWebMercator?(h[0]=c(e[0]),h[1]=q(e[1]),h[2]=c(e[2]),h[3]=q(e[3])):this._isWGS84&&(h[0]=f.deg2rad(e[0]),h[1]=f.deg2rad(e[1]),h[2]=f.deg2rad(e[2]),h[3]=f.deg2rad(e[3])));return e};b.prototype.getExtentGeometry=function(a,b,c,d){void 0===d&&(d=new n.Extent);this.getExtent(a,b,c,r);d.spatialReference=this.spatialReference;d.xmin=r[0];d.ymin=r[1];d.xmax=r[2];d.ymax=r[3];d.zmin=void 0;d.zmax=
void 0;return d};b.prototype.ensureMaxLod=function(a){for(;this.levels.length<=a;){var b=this.levels[this.levels.length-1],c=b.resolution/2;this.levels.push({resolution:c,scale:b.scale/2,tileSize:[c*this.pixelSize[0],c*this.pixelSize[1]]})}};b.prototype.capMaxLod=function(a){this.levels.length>a+1&&(this.levels.length=a+1)};b.prototype.getMaxLod=function(){return this.levels.length-1};b.prototype.scaleAtLevel=function(a){return this.levels[0].scale/Math.pow(2,a)};b.prototype.levelAtScale=function(a){var b=
this.levels[0].scale;return a>=b?0:Math.log(b/a)*Math.LOG2E};b.prototype.resolutionAtLevel=function(a){return this.levels[0].resolution/Math.pow(2,a)};b.prototype.compatibleWith=function(a){if(!(a instanceof b)){if(b._checkUnsupported(a))return!1;a=new b(a)}if(!a.spatialReference.equals(this.spatialReference)||a.pixelSize[0]!==this.pixelSize[0]||a.pixelSize[1]!==this.pixelSize[1])return!1;var c=Math.min(this.levels.length,a.levels.length)-1,d=this.levels[c].resolution,e=.5*d;if(!f.floatEqualAbsolute(a.origin[0],
this.origin[0],e)||!f.floatEqualAbsolute(a.origin[1],this.origin[1],e))return!1;e=.5*d/Math.pow(2,c)/Math.max(this.pixelSize[0],this.pixelSize[1])*12;return f.floatEqualAbsolute(d,a.levels[c].resolution,e)};b.prototype.rootTilesInExtent=function(a,c,d){var e=this.levels[0].tileSize;b.computeRowColExtent(a,e,this.origin,r);a=r[1];var f=r[3],g=r[0],h=r[2],k=h-g,l=f-a;k*l>d&&(d=Math.floor(Math.sqrt(d)),l>d&&(a=a+Math.floor(.5*l)-Math.floor(.5*d),f=a+d),k>d&&(g=g+Math.floor(.5*k)-Math.floor(.5*d),h=g+
d));d=Array((h-g)*(f-a));k=0;for(l=a;l<f;l++)for(var m=g;m<h;m++)d[k++]=[0,l,m];c&&(c[0]=this.origin[0]+g*e[0],c[1]=this.origin[1]-f*e[1],c[2]=this.origin[0]+h*e[0],c[3]=this.origin[1]-a*e[1]);return d};b.computeRowColExtent=function(a,b,c,d){var e=.001*(a[2]-a[0]+(a[3]-a[1]));d[0]=Math.floor((a[0]+e-c[0])/b[0]);d[2]=Math.ceil((a[2]-e-c[0])/b[0]);d[1]=Math.floor((c[1]-a[3]+e)/b[1]);d[3]=Math.ceil((c[1]-a[1]-e)/b[1])};b.isPowerOfTwo=function(a){a=a.lods;var b=a[0].resolution*Math.pow(2,a[0].level);
return!a.some(function(a){return!f.floatEqualRelative(a.resolution,b/Math.pow(2,a.level))})};b.hasGapInLevels=function(a){a=a.lods.map(function(a){return a.level});a.sort(function(a,b){return a-b});for(var b=1;b<a.length;b++)if(a[b]!==a[0]+b)return!0;return!1};b.tileSizeSupported=function(a){var b=a.size[1];return b===a.size[0]&&0===(b&b-1)&&128<=b&&512>=b};b._checkUnsupported=function(a){return a?1>a.lods.length?new h("tilingscheme:generic","Tiling scheme must have at least one level"):b.isPowerOfTwo(a)?
null:new h("tilingscheme:power-of-two","Tiling scheme must be power of two"):new h("tilingscheme:tile-info-missing","Tiling scheme must have tiling information")};b.checkUnsupported=function(a){var c=b._checkUnsupported(a);return c?c:b.hasGapInLevels(a)?new h("tilingscheme:gaps","Tiling scheme levels must not have gaps between min and max level"):b.tileSizeSupported(a)?null:new h("tilingscheme:tile-size","Tiles must be square and size must be one of [128, 256, 512]")};b.fromExtent=function(c,d){var e=
c[2]-c[0],f=c[3]-c[1],h=k.getMetersPerUnitForSR(d),g=1.2*Math.max(e,f);c=new b(new a({size:[256,256],origin:{x:c[0]-.5*(g-e),y:c[3]+.5*(g-f)},lods:[{level:0,resolution:g/256,scale:1/(256/96*.0254/(g*h))}],spatialReference:d}));c.ensureMaxLod(20);return c};b.makeWebMercatorAuxiliarySphere=function(a){void 0===a&&(a=19);var c=new b(b.WebMercatorAuxiliarySphereTileInfo);c.ensureMaxLod(a);return c};b.makeWGS84WithTileSize=function(c,d){void 0===d&&(d=16);var e=256/c;c=new b(new a({size:[c,c],origin:{x:-180,
y:90,spatialReference:l.WGS84},spatialReference:l.WGS84,lods:[{level:0,resolution:.703125*e,scale:2.95497598570834E8*e}]}));c.ensureMaxLod(d);return c};b.WebMercatorAuxiliarySphereTileInfo=new a({size:[256,256],origin:{x:-2.0037508342787E7,y:2.0037508342787E7,spatialReference:l.WebMercator},spatialReference:l.WebMercator,lods:[{level:0,resolution:156543.03392800014,scale:5.91657527591555E8}]});b.WebMercatorAuxiliarySphere=b.makeWebMercatorAuxiliarySphere(19);return b}();var r=m.create();return b})},
"esri/views/support/DefaultsFromMap":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/arrayUtils ../../core/Handles ../../core/Logger ../../core/watchUtils ../../core/accessorSupport/decorators ../../geometry/support/heightModelInfoUtils ../../geometry/support/webMercatorUtils ../../portal/support/geometryServiceUtils".split(" "),function(b,e,n,h,l,m,k,a,f,d,c,q,r){function x(a){return a?JSON.stringify(a.toJSON()):
"undefined"}function z(a){switch(a){case 0:return"Waiting";case 1:return"Found";case 2:return"Exhausted"}return"Unknown: "+a}var v=a.getLogger("esri.views.support.DefaultsFromMap");return function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b._handles=new k;b._waitTask=null;b._isStarted=!1;b._spatialReferenceCandidates=null;b._extentCandidates=null;b.logDebugInformation=!1;b.isSpatialReferenceDone=!1;b.isTileInfoDone=!1;b.isHeightModelInfoSearching=!1;b.spatialReference=null;b.extent=
null;b.heightModelInfo=null;b.vcsWkid=null;b.latestVcsWkid=null;b.mapCollectionPaths=e.DefaultMapCollectionPaths.slice();b.tileInfo=null;return b}n(b,a);e=b;b.prototype.initialize=function(){var a=this;this.watch("mapCollectionPaths",function(){a._isStarted&&(a.reset(),a.start())})};b.prototype.destroy=function(){this._set("view",null);this._handles&&(this._handles.destroy(),this._handles=null,this._isStarted=!1);this._cancelLoading()};b.prototype.reset=function(){this._handles.removeAll();this._isStarted=
!1;this._set("isSpatialReferenceDone",!1);this._set("isTileInfoDone",!1);this._set("isHeightModelInfoSearching",!1);this._set("spatialReference",null);this._set("extent",null);this._set("heightModelInfo",null);this._set("vcsWkid",null);this._set("latestVcsWkid",null);this._set("tileInfo",null);this._extentCandidates=this._spatialReferenceCandidates=null};b.prototype.start=function(){this._handles.removeAll();this._isStarted=!0;for(var a=this._updateLayerChange.bind(this),b=0,c=this.mapCollectionPaths;b<
c.length;b++)this._handles.add(f.on(this.view,"map."+c[b],"change",a,a,a,!0))};b.prototype._ownerNameFromCollectionName=function(a){var b=a.lastIndexOf(".");return-1===b?"view":"view."+a.slice(0,b)};b.prototype._ensureLoadedOwnersFromCollectionName=function(a){a=this._ownerNameFromCollectionName(a).split(".");for(var b,c=0;c<a.length;c++){b=this.get(a.slice(0,c+1).join("."));if(!b)break;if(b.load&&!b.isFulfilled())return{owner:null,loading:b.load()}}return{owner:b}};b.prototype._cancelLoading=function(){this._waitTask=
null;this._extentProjectTask&&(this._extentProjectTask.cancel(),this._extentProjectTask=null)};b.prototype._updateWhen=function(a){var b=this,c=!0,d=!1,e=a.always(function(){c?d=!0:e===b._waitTask&&b._update()}),c=!1;d||(this._waitTask=e);return d};b.prototype._updateLayerChange=function(){this.isSpatialReferenceDone&&!this.spatialReference&&this._set("isSpatialReferenceDone",!1);this._update()};b.prototype._update=function(){var a=this;this._cancelLoading();if(this.view){if(!this.isSpatialReferenceDone){this._debugLog("Starting search for spatial reference...");
var b=this._processMapCollections(function(b){return a._processSpatialReferenceSource(b)});this._debugLog("Search ended with status '"+z(b)+"'");if(0!==b){var d=null,b=this._spatialReferenceCandidates;!b||1>b.length?(d=this.defaultSpatialReference,this._debugLog("No spatial reference found, locking to default ("+x(d)+")")):(this.defaultSpatialReference&&1<b.length&&-1<m.findIndex(b,function(b){return b.equals(a.defaultSpatialReference)})&&(b=[this.defaultSpatialReference]),d=b[0],this._debugLog("Locking to "+
x(d)));this._set("spatialReference",d);this._set("isSpatialReferenceDone",!0);d&&(b=this.logDebugInformation,this.logDebugInformation=!1,this._processMapCollections(function(b){return a._findExtent(b,d)}),this.extent||this._projectExtentCandidate(),this.logDebugInformation=b)}}null==this.heightModelInfo&&this.view.isHeightModelInfoRequired&&(this._debugLog("Starting search for height model info..."),b=this._processMapCollections(function(b){return a._processHeightModelInfoSource(b)},function(a){return c.mayHaveHeightModelInfo(a)}),
this._debugLog("Search ended with status "+z(b)),this._set("isHeightModelInfoSearching",0===b));null==this.tileInfo&&(b=!1,this.view.isTileInfoRequired()&&(b=this._deriveTileInfo()),b||this._set("isTileInfoDone",!0))}};b.prototype._processMapCollections=function(a,b){for(var c=0,d=this.mapCollectionPaths;c<d.length;c++){var e="map."+d[c],f=this._ensureLoadedOwnersFromCollectionName(e);this._debugLog("Processing collection "+e+"...");if(f.loading&&!this._updateWhen(f.loading))return this._debugLog("Collection "+
e+" owner is loading -\x3e wait"),0;f=f.owner;if(!f||f.isRejected&&f.isRejected())this._debugLog("Collection "+e+" owner is invalid or rejected -\x3e skip");else if(f=this.view.get(e)){if(e=this._processMapCollection(f,a,b),2!==e)return e}else this._debugLog("Collection "+e+" does not exist -\x3e skip")}return 2};b.prototype._processMapCollection=function(a,b,c){for(var d=0;d<a.length;d++){var e=a.getItemAt(d);if(null==c||c(e)){if(e.load&&!e.isFulfilled()&&!this._updateWhen(e.load()))return this._debugLog("Source "+
e.id+" is loading -\x3e wait"),0;if(!e.load||e.isResolved()){if(b(e))return 1;if(e.layers&&(e=this._processMapCollection(e.layers,b),2!==e))return e}}else this._debugLog("Source "+e.id+" is skipped due to predicate")}return 2};b.prototype._processSpatialReferenceSource=function(a){var b=this._getSupportedSpatialReferences(a);if(0===b.length)return!1;this._spatialReferenceCandidates?(b=m.intersect(b,this._spatialReferenceCandidates,function(a,b){return a.equals(b)}),0<b.length?this._spatialReferenceCandidates=
b:this._debugLog("Layer "+a.id+" is ignored because its supported spatial\n          references are not compatible with the previous candidates")):this._spatialReferenceCandidates=b;return 1===this._spatialReferenceCandidates.length};b.prototype._findExtent=function(a,b){var c=a.fullExtents||(a.fullExtent?[a.fullExtent]:[]),d=m.find(c,function(a){return a.spatialReference.equals(b)});if(d)return this._set("extent",d),!0;0<this._getSupportedSpatialReferences(a).length&&(c=c.map(function(b){return{extent:b,
layer:a}}),this._extentCandidates=(this._extentCandidates||[]).concat(c));return!1};b.prototype._projectExtentCandidate=function(){var a=this;if(this._extentCandidates&&this._extentCandidates.length){var b=this.spatialReference,c=m.find(this._extentCandidates,function(a){return q.canProject(a.extent.spatialReference,b)});c?this._set("extent",q.project(c.extent,b)):(c=this._extentCandidates[0],this._extentProjectTask=r.projectGeometry(c.extent,b,c.layer.portalItem).then(function(b){a._set("extent",
b)}))}};b.prototype._getSupportedSpatialReferences=function(a){var b=this,c=a.supportedSpatialReferences||(a.spatialReference?[a.spatialReference]:[]);if(0===c.length)return this._debugLog("Layer "+a.id+" is ignored because it does not have any spatial references"),[];c=c.filter(function(c){return b.view.isSpatialReferenceSupported(c,a,function(a){return b._debugLog(a)})});0===c.length?this._debugLog("Layer "+a.id+" has spatial references but none of them are supported (or layer doesn't require locking)"):
this._debugLog("Layer "+a.id+" has spatial references. Resulting candidate set: "+c.map(x).join(", "));return c};b.prototype._processHeightModelInfoSource=function(a){var b=c.deriveHeightModelInfoFromLayer(a);return b?(this._set("heightModelInfo",b),this._set("isHeightModelInfoSearching",!1),a.spatialReference&&(this._set("vcsWkid",a.spatialReference.vcsWkid),this._set("latestVcsWkid",a.spatialReference.latestVcsWkid)),!0):!1};b.prototype._deriveTileInfo=function(){if(!this.isSpatialReferenceDone)return!0;
var a=this.get("view.map");if(!a)return!0;var b=a.basemap,c=b&&b.get("baseLayers.0"),a=a.get("layers.0"),d=!1,e=null;b&&"failed"!==b.loadStatus?b.loaded?c&&"failed"!==c.loadStatus?c.loaded?e=c.tileInfo:(this._updateWhen(c.load()),d=!0):a&&"failed"!==a.loadStatus?a.loaded?e=a.tileInfo:(this._updateWhen(a.load()),d=!0):d=!0:(this._updateWhen(b.load()),d=!0):a&&"failed"!==a.loadStatus&&(a.loaded?e=a.tileInfo:(this._updateWhen(a.load()),d=!0));e&&!e.spatialReference.equals(this.spatialReference)&&(e=
null);d||this._set("tileInfo",e);return d};b.prototype._debugLog=function(a){this.logDebugInformation&&v.info(a)};var e;b.DefaultMapCollectionPaths=["basemap.baseLayers","layers","ground.layers","basemap.referenceLayers"];h([d.property()],b.prototype,"logDebugInformation",void 0);h([d.property({readOnly:!0})],b.prototype,"isSpatialReferenceDone",void 0);h([d.property({readOnly:!0})],b.prototype,"isTileInfoDone",void 0);h([d.property({readOnly:!0})],b.prototype,"isHeightModelInfoSearching",void 0);
h([d.property({constructOnly:!0})],b.prototype,"view",void 0);h([d.property({readOnly:!0})],b.prototype,"spatialReference",void 0);h([d.property({readOnly:!0})],b.prototype,"extent",void 0);h([d.property({readOnly:!0})],b.prototype,"heightModelInfo",void 0);h([d.property({readOnly:!0})],b.prototype,"vcsWkid",void 0);h([d.property({readOnly:!0})],b.prototype,"latestVcsWkid",void 0);h([d.property()],b.prototype,"mapCollectionPaths",void 0);h([d.property()],b.prototype,"defaultSpatialReference",void 0);
h([d.property({readOnly:!0})],b.prototype,"tileInfo",void 0);return b=e=h([d.subclass("esri.views.support.DefaultsFromMap")],b)}(d.declared(l))})},"esri/geometry/support/heightModelInfoUtils":function(){define(["require","exports","../../core/Error","../HeightModelInfo","../../layers/support/arcgisLayerUrl"],function(b,e,n,h,l){function m(a,b,c){if(k(a)&&k(b)){if(null==a||null==b)return 0;if(c||a.heightUnit===b.heightUnit){if(a.heightModel!==b.heightModel)return 2;switch(a.heightModel){case "gravity-related-height":return 0;
case "ellipsoidal":return a.vertCRS===b.vertCRS?0:3;default:return 4}}else return 1}else return 4}function k(a){return null==a||null!=a.heightModel&&null!=a.heightUnit}function a(a){var b=a.url&&l.parse(a.url);return null==(a.spatialReference&&a.spatialReference.vcsWkid)&&b&&"ImageServer"===b.serverType||!a.heightModelInfo?f(a)?h.deriveUnitFromSR(c,a.spatialReference):null:a.heightModelInfo}function f(a){return a.hasOwnProperty("capabilities")?!!(a.capabilities&&a.capabilities.data&&a.capabilities.data.supportsZ):
d(a)}function d(a){switch(a.type){case "elevation":case "integrated-mesh":case "point-cloud":case "scene":return!0}return!1}Object.defineProperty(e,"__esModule",{value:!0});e.validateWebSceneError=function(a,b){if(!a)return null;if(!k(a))return new n("webscene:unsupported-height-model-info","The vertical coordinate system of the scene is not supported",{heightModelInfo:a});var c=a.heightUnit;a=h.deriveUnitFromSR(a,b).heightUnit;return c!==a?new n("webscene:incompatible-height-unit","The vertical units of the scene ("+
c+") must match the horizontal units of the scene ("+a+")",{verticalUnit:c,horizontalUnit:a}):null};e.rejectLayerError=function(b,c,d){var e=a(b),k=m(e,c,d),l=null;if(e){var p=h.deriveUnitFromSR(e,b.spatialReference).heightUnit;d||p===e.heightUnit||(l=new n("layerview:unmatched-height-unit","The vertical units of the layer must match the horizontal units ("+p+")",{horizontalUnit:p}))}if(null==b.heightModelInfo&&null==b.spatialReference&&f(b)||4===k||l)return new n("layerview:unsupported-height-model-info",
"The vertical coordinate system of the layer is not supported",{heightModelInfo:e,error:l});l=null;switch(k){case 1:b=e.heightUnit||"unknown";d=c.heightUnit||"unknown";l=new n("layerview:incompatible-height-unit","The vertical units of the layer ("+b+") must match the vertical units of the scene ("+d+")",{layerUnit:b,sceneUnit:d});break;case 2:b=e.heightModel||"unknown";d=c.heightModel||"unknown";l=new n("layerview:incompatible-height-model","The height model of the layer ("+b+") must match the height model of the scene ("+
d+")",{layerHeightModel:b,sceneHeightModel:d});break;case 3:b=e.vertCRS||"unknown",d=c.vertCRS||"unknown",l=new n("layerview:incompatible-vertical-datum","The vertical datum of the layer ("+b+") must match the vertical datum of the scene ("+d+")",{layerDatum:b,sceneDatum:d})}return l?new n("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:e,sceneHeightModelInfo:c,error:l}):null};e.deriveHeightModelInfoFromLayer=
a;e.mayHaveHeightModelInfo=function(a){return null!=a.layers||d(a)||a.hasOwnProperty("capabilities")||a.hasOwnProperty("heightModelInfo")};var c=new h({heightModel:"gravity-related-height"})})},"esri/portal/support/geometryServiceUtils":function(){define("require exports ../../config ../../core/Error ../../core/promiseUtils ../Portal ../PortalItem ../../tasks/GeometryService ../../tasks/support/ProjectParameters".split(" "),function(b,e,n,h,l,m,k,a,f){function d(b){void 0===b&&(b=null);if(n.geometryServiceUrl)return l.resolve(new a({url:n.geometryServiceUrl}));
if(!b)return l.reject(new h("internal:geometry-service-url-not-configured"));var c;b.isInstanceOf(k)?c=b.portal||m.getDefault():b.isInstanceOf(m)&&(c=b);return c.load().then(function(b){if(b.helperServices&&b.helperServices.geometry&&b.helperServices.geometry.url)return l.resolve(new a({url:b.helperServices.geometry.url}));throw new h("internal:geometry-service-url-not-configured");})}Object.defineProperty(e,"__esModule",{value:!0});e.create=d;e.projectGeometry=function(a,b,e){void 0===e&&(e=null);
return d(e).then(function(c){var d=new f;d.geometries=[a];d.outSpatialReference=b;return c.project(d)}).then(function(a){return a&&Array.isArray(a)&&1===a.length?a[0]:l.reject()})}})},"esri/views/input/Input":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators ./gamepad/GamepadSettings".split(" "),function(b,e,n,h,l,m,k){return function(a){function b(){var b=null!==a&&a.apply(this,
arguments)||this;b.gamepad=new k;return b}n(b,a);h([m.property({readOnly:!0})],b.prototype,"gamepad",void 0);return b=h([m.subclass("esri.views.input.Input")],b)}(m.declared(l))})},"esri/views/input/gamepad/GamepadSettings":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/Collection ../../../core/accessorSupport/decorators ./GamepadInputDevice".split(" "),function(b,e,n,h,l,m,k,a){return function(b){function d(){var a=
b.call(this)||this;a.devices=new m;a.enabledFocusMode="document";return a}n(d,b);h([k.property({type:m.ofType(a),readOnly:!0})],d.prototype,"devices",void 0);h([k.property({type:["document","view","none"]})],d.prototype,"enabledFocusMode",void 0);return d=h([k.subclass("esri.views.input.gamepad.GamepadSettings")],d)}(k.declared(l))})},"esri/views/input/gamepad/GamepadInputDevice":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/accessorSupport/decorators".split(" "),
function(b,e,n,h,l,m){var k=/^(3dconnexion|space(mouse|navigator|pilot|explorer))/i,a={standard:.15,spacemouse:.025,unknown:0};return function(b){function d(a){var c=b.call(this)||this;c.native=null;c._detectedDeviceType="unknown";"standard"===a.mapping?c._detectedDeviceType="standard":k.test(a.id)?c._detectedDeviceType="spacemouse":c._detectedDeviceType="unknown";c.native=a;return c}n(d,b);Object.defineProperty(d.prototype,"deviceType",{get:function(){return this._detectedDeviceType},enumerable:!0,
configurable:!0});Object.defineProperty(d.prototype,"axisThreshold",{get:function(){return a[this.deviceType]},enumerable:!0,configurable:!0});h([m.property({nonNullable:!0,readOnly:!0})],d.prototype,"native",void 0);h([m.property({type:String,readOnly:!0})],d.prototype,"deviceType",null);h([m.property({type:Number,readOnly:!0})],d.prototype,"axisThreshold",null);return d=h([m.subclass("esri.views.input.gamepad.GamepadInputDevice")],d)}(m.declared(l))})},"esri/views/navigation/Navigation":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators ./gamepad/GamepadSettings".split(" "),
function(b,e,n,h,l,m,k){return function(a){function b(b){b=a.call(this,b)||this;b.gamepad=new k;return b}n(b,a);h([m.property({readOnly:!0})],b.prototype,"gamepad",void 0);return b=h([m.subclass("esri.views.navigation.Navigation")],b)}(m.declared(l))})},"esri/views/navigation/gamepad/GamepadSettings":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/accessorSupport/decorators ../../input/gamepad/GamepadInputDevice".split(" "),
function(b,e,n,h,l,m,k){return function(a){function b(){var b=a.call(this)||this;b.enabled=!0;b.device=null;b.mode="pan";b.tiltDirection="forward-down";b.velocityFactor=1;return b}n(b,a);h([m.property({type:Boolean,nonNullable:!0})],b.prototype,"enabled",void 0);h([m.property({type:k})],b.prototype,"device",void 0);h([m.property({type:["pan","zoom"],nonNullable:!0})],b.prototype,"mode",void 0);h([m.property({type:["forward-down","forward-up"],nonNullable:!0})],b.prototype,"tiltDirection",void 0);
h([m.property({type:Number,nonNullable:!0})],b.prototype,"velocityFactor",void 0);return b=h([m.subclass("esri.views.navigation.gamepad.GamepadSettings")],b)}(m.declared(l))})},"esri/views/ViewAnimation":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/Deferred ../core/Accessor ../core/Error ../core/Promise ../core/promiseUtils ../core/scheduling ../core/accessorSupport/decorators".split(" "),function(b,e,n,h,l,m,k,a,f,d,c){b=function(a){function b(b){b=
a.call(this)||this;b.state="running";b.target=null;return b}n(b,a);b.prototype.initialize=function(){this._dfd=new l;this.addResolvingPromise(this._dfd.promise)};Object.defineProperty(b.prototype,"done",{get:function(){return"finished"===this.state||"stopped"===this.state},enumerable:!0,configurable:!0});b.prototype.stop=function(){"stopped"!==this.state&&"finished"!==this.state&&(this._set("state","stopped"),d.schedule(this._dfd.reject.bind(this._dfd,new k("ViewAnimation stopped"))))};b.prototype.finish=
function(){"stopped"!==this.state&&"finished"!==this.state&&(this._set("state","finished"),d.schedule(this._dfd.resolve))};b.prototype.update=function(a,b){b||(b=f.isThenable(a)?"waiting-for-target":"running");this._set("target",a);this._set("state",b)};h([c.property({readOnly:!0,dependsOn:["state"]})],b.prototype,"done",null);h([c.property({readOnly:!0,type:String})],b.prototype,"state",void 0);h([c.property()],b.prototype,"target",void 0);return b=h([c.subclass("esri.views.ViewAnimation")],b)}(c.declared(m,
a));(b||(b={})).State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"};return b})},"esri/widgets/Widget":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/dom ../core/Accessor ../core/Collection ../core/Evented ../core/Handles ../core/Logger ../core/watchUtils ../core/accessorSupport/decorators ./support/widget maquette".split(" "),function(b,e,n,h,l,m,k,a,
f,d,c,q,r,x,z){var v=c.getLogger("esri.widgets.Widget"),w=0;return function(b){function c(a,c){a=b.call(this)||this;a._attached=!1;a.destroyed=!1;a.domNode=null;a.iconClass="esri-icon-checkbox-unchecked";a.visible=!0;a._internalHandles=new d;a.render=a.render.bind(a);return a}h(c,b);c.prototype.normalizeCtorArgs=function(a,b){a=n({},a);b&&(a.container=b);return a};c.prototype.initialize=function(){var b=this;this._internalHandles.add(this._renderableProps.map(function(c){return q.init(b,c,function(b,
d){var e=this;a.isCollection(d)&&this._internalHandles.remove(this.declaredClass+":"+c+"-collection-change-event-listener");a.isCollection(b)&&(b=b.on("change",function(){return e.scheduleRender()}),this._internalHandles.add(b,this.declaredClass+":"+c+"-collection-change-event-listener"));this.scheduleRender()})}));this._delegatedEventNames.length&&this._internalHandles.add(q.init(this,"viewModel",function(){b._get("viewModel")&&b._internalHandles.remove("delegated-events");b._delegatedEventNames.map(function(a){return b.viewModel.on(a,
function(c){b.emit(a,c)})})}),"delegated-events");this.postInitialize();this._internalHandles.add(q.whenOnce(this,"container",function(a){return b._attach(a)}))};c.prototype.postInitialize=function(){};c.prototype.destroy=function(){this.destroyed||(this.viewModel&&this.viewModel.destroy(),this._detach(this.container),this._internalHandles.destroy(),this._set("destroyed",!0))};c.prototype.startup=function(){v.warn("Widget.startup() is deprecated and no longer needed")};Object.defineProperty(c.prototype,
"container",{set:function(a){this._get("container")||this._set("container",a)},enumerable:!0,configurable:!0});c.prototype.castContainer=function(a){return m.byId(a)};Object.defineProperty(c.prototype,"id",{get:function(){return this._get("id")||this.get("container.id")||Date.now().toString(16)+"-widget-"+w++},set:function(a){a&&this._set("id",a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"label",{get:function(){return this.declaredClass.split(".").pop()},enumerable:!0,configurable:!0});
c.prototype.scheduleRender=function(){this._projector.scheduleRender()};c.prototype.on=function(a,b){var c=this.inherited(arguments);this._internalHandles.add(c);return c};c.prototype.classes=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return x.classes.apply(this,a)};c.prototype.own=function(a){1<arguments.length&&(a=Array.prototype.slice.call(arguments));this._internalHandles.add(a)};c.prototype.renderNow=function(){this._projector.renderNow()};c.prototype._attach=function(a){a&&
(this._projector.merge(a,this.render),this._attached=!0)};c.prototype._detach=function(a){a&&this._attached&&(this._projector.detach(this.render),a.parentNode&&a.parentNode.removeChild(a),this._attached=!1)};l([r.shared(z.createProjector())],c.prototype,"_projector",void 0);l([r.shared([])],c.prototype,"_renderableProps",void 0);l([r.shared([])],c.prototype,"_delegatedEventNames",void 0);l([r.property({value:null})],c.prototype,"container",null);l([r.cast("container")],c.prototype,"castContainer",
null);l([r.property({readOnly:!0})],c.prototype,"destroyed",void 0);l([r.property({aliasOf:"container"})],c.prototype,"domNode",void 0);l([r.property({readOnly:!0})],c.prototype,"iconClass",void 0);l([r.property({dependsOn:["container"]})],c.prototype,"id",null);l([r.property({readOnly:!0})],c.prototype,"label",null);l([r.property()],c.prototype,"viewModel",void 0);l([r.property()],c.prototype,"visible",void 0);return c=l([r.subclass("esri.widgets.Widget")],c)}(r.declared(k,f))})},"esri/widgets/support/widget":function(){define("require exports ./decorators ./jsxFactory ./widgetUtils ./shim/SVGElement".split(" "),
function(b,e,n,h,l){function m(b){for(var a in b)e.hasOwnProperty(a)||(e[a]=b[a])}Object.defineProperty(e,"__esModule",{value:!0});m(n);m(h);m(l);e.isWidget=function(b){return b&&"function"===typeof b.render};e.isWidgetBase=function(b){return b&&"function"===typeof b.postMixInProperties&&"function"===typeof b.buildRendering&&"function"===typeof b.postCreate&&"function"===typeof b.startup}})},"esri/widgets/support/decorators":function(){define(["require","exports","./decorators/accessibleHandler",
"./decorators/renderable","./decorators/vmEvent"],function(b,e,n,h,l){function m(b){for(var a in b)e.hasOwnProperty(a)||(e[a]=b[a])}Object.defineProperty(e,"__esModule",{value:!0});m(n);m(h);m(l)})},"esri/widgets/support/decorators/accessibleHandler":function(){define(["require","exports","dojo/keys"],function(b,e,n){function h(b){return function(e){for(var h=[],a=1;a<arguments.length;a++)h[a-1]=arguments[a];a=e.type;if(e instanceof KeyboardEvent||"keyup"===a||"keydown"===a||"keypress"===a){if(e.keyCode===
n.ENTER||e.keyCode===n.SPACE)e.preventDefault(),e.target.click()}else b.call.apply(b,[this,e].concat(h))}}Object.defineProperty(e,"__esModule",{value:!0});e.accessibleHandler=function(){return function(b,e){return{value:h(b[e])}}}})},"esri/widgets/support/decorators/renderable":function(){define(["require","exports","./propUtils"],function(b,e,n){Object.defineProperty(e,"__esModule",{value:!0});e.renderable=function(b){var e="string"===typeof b?n.splitProps(b):b;return function(b,h){b._renderableProps||
(b._renderableProps=[]);b=b._renderableProps;e?b.push.apply(b,n.normalizePropNames(e,h)):b.push(h)}}})},"esri/widgets/support/decorators/propUtils":function(){define(["require","exports"],function(b,e){Object.defineProperty(e,"__esModule",{value:!0});e.splitProps=function(b){return b.split(",").map(function(b){return b.trim()})};e.normalizePropNames=function(b,e){return b.map(function(b){b=0===b.indexOf(e)?b:e+"."+b;return b})}})},"esri/widgets/support/decorators/vmEvent":function(){define(["require",
"exports","./propUtils"],function(b,e,n){Object.defineProperty(e,"__esModule",{value:!0});e.vmEvent=function(b){return function(e){e._delegatedEventNames||(e._delegatedEventNames=[]);var h=Array.isArray(b)?b:n.splitProps(b);e._delegatedEventNames=e._delegatedEventNames.concat(h)}}})},"esri/widgets/support/jsxFactory":function(){define(["require","exports","maquette-jsx"],function(b,e,n){Object.defineProperty(e,"__esModule",{value:!0});e.tsx=n.jsx})},"maquette-jsx/dist/maquette-jsx.umd":function(){(function(b,
e){"object"===typeof exports&&"undefined"!==typeof module?e(exports):"function"===typeof define&&define.amd?define(["exports"],e):e(b.maquetteCssTransitions={})})(this,function(b){var e=function(b,l){for(var h=0,k=b.length;h<k;h++){var a=b[h];Array.isArray(a)?e(a,l):null!==a&&void 0!==a&&!1!==a&&(a.hasOwnProperty("vnodeSelector")||(a={vnodeSelector:"",properties:void 0,children:void 0,text:a.toString(),domNode:null}),l.push(a))}},n=function(b,l){for(var h=[],k=2;k<arguments.length;k++)h[k-2]=arguments[k];
if(1===h.length&&"string"===typeof h[0])return{vnodeSelector:b,properties:l||void 0,children:void 0,text:h[0],domNode:null};k=[];e(h,k);return{vnodeSelector:b,properties:l||void 0,children:k,text:void 0,domNode:null}};b.jsx=n;b.enableGlobalJsx=function(){window.jsx=n};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/widgets/support/widgetUtils":function(){define("require exports ../../core/ArrayPool ../../core/has ../../core/Logger maquette-css-transitions".split(" "),function(b,e,n,h,l,
m){Object.defineProperty(e,"__esModule",{value:!0});l.getLogger("esri.widgets.support.widgetUtils");e.join=function(){for(var b=[],a=0;a<arguments.length;a++)b[a]=arguments[a];return b.join(" ")};e.classes=function(b){for(var a=n.acquire(),e=0;e<arguments.length;e++){var d=arguments[e],c=typeof d;if("string"===c)a.push(d);else if(Array.isArray(d))a.push.apply(a,d);else if("object"===c)for(var h in d)d[h]&&a.push(h)}e=a.join(" ");n.release(a);return e};e.isRtl=function(){return"rtl"===document.dir};
e.storeNode=function(b){this[b.getAttribute("data-node-ref")]=b};e.cssTransition=function(b,a){return("enter"===b?m.createEnterCssTransition:m.createExitCssTransition)(a)}})},"maquette-css-transitions/dist/maquette-css-transitions.umd":function(){(function(b,e){"object"===typeof exports&&"undefined"!==typeof module?e(exports):"function"===typeof define&&define.amd?define(["exports"],e):e(b.maquetteCssTransitions={})})(this,function(b){var e,n,h=function(b){if("WebkitTransition"in b.style)e="webkitTransitionEnd",
n="webkitAnimationEnd";else if("transition"in b.style)e="transitionend",n="animationend";else throw Error("Your browser is not supported!");};b.createEnterCssTransition=function(b,m){void 0===m&&(m=b+"-active");return function(k){e||h(k);var a=!1,f=function(d){a||(a=!0,k.removeEventListener(e,f),k.removeEventListener(n,f),k.classList.remove(b),k.classList.remove(m))};k.classList.add(b);k.addEventListener(e,f);k.addEventListener(n,f);requestAnimationFrame(function(){k.classList.add(m)})}};b.createExitCssTransition=
function(b,m){void 0===m&&(m=b+"-active");return function(k,a){e||h(k);var f=!1,d=function(b){f||(f=!0,k.removeEventListener(e,d),k.removeEventListener(n,d),a())};k.classList.add(b);k.addEventListener(e,d);k.addEventListener(n,d);requestAnimationFrame(function(){k.classList.add(m)})}};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/widgets/support/shim/SVGElement":function(){define(["require","exports","../../../core/has"],function(b,e,n){Object.defineProperty(e,"__esModule",{value:!0});
n.add("esri-svg-classlist","classList"in SVGElement.prototype);var h=function(){function b(b){this._node=b}b.prototype.add=function(b){var e=this._node;e.className.baseVal=(e.className.baseVal+" "+b).trim()};b.prototype.contains=function(b){return-1<this._node.className.baseVal.split(" ").indexOf(b)};b.prototype.remove=function(b){for(var e=this._node,a="",f=0,d=e.className.baseVal.split(" ");f<d.length;f++){var c=d[f];c!==b&&(a+=c+" ")}e.className.baseVal=a.trim()};b.prototype.toggle=function(b,
e){var a=this.contains(b),f;if(f=a?!0!==e&&"remove":!1!==e&&"add")this[f](b);return void 0!==e?e:!a};return b}();e.DOMTokenListSubset=h;n("esri-svg-classlist")||Object.defineProperty(SVGElement.prototype,"classList",{get:function(){return new h(this)}})})},"maquette/dist/maquette.umd":function(){(function(b,e){"object"===typeof exports&&"undefined"!==typeof module?e(exports):"function"===typeof define&&define.amd?define(["exports"],e):e(b.maquette={})})(this,function(b){var e=[],n=function(a,b){var c=
{};Object.keys(a).forEach(function(b){c[b]=a[b]});b&&Object.keys(b).forEach(function(a){c[a]=b[a]});return c},h=function(a,b){return a.vnodeSelector!==b.vnodeSelector?!1:a.properties&&b.properties?a.properties.key!==b.properties.key?!1:a.properties.bind===b.properties.bind:!a.properties&&!b.properties},l=function(a){if("string"!==typeof a)throw Error("Style values must be strings");},m=function(a,b,c,d){var e=a[b];if(""!==e.vnodeSelector){var f=e.properties;if(!(f&&(void 0===f.key?f.bind:f.key)))for(f=
0;f<a.length;f++)if(f!==b&&h(a[f],e))throw Error(c.vnodeSelector+" had a "+e.vnodeSelector+" child "+("added"===d?d:"removed")+", but there is now more than one. You must add unique key properties to make them distinguishable.");}},k=[],a=!1,f=function(a){(a.children||[]).forEach(f);a.properties&&a.properties.afterRemoved&&a.properties.afterRemoved.apply(a.properties.bind||a.properties,[a.domNode])},d=function(){a=!1;k.forEach(f);k.length=0},c=function(b){k.push(b);a||(a=!0,"undefined"!==typeof window&&
"requestIdleCallback"in window?window.requestIdleCallback(d,{timeout:16}):setTimeout(d,16))},q=function(a){var b=a.domNode;if(a.properties){var d=a.properties.exitAnimation;if(d){b.style.pointerEvents="none";d(b,function(){b.parentNode&&(b.parentNode.removeChild(b),c(a))},a.properties);return}}b.parentNode&&(b.parentNode.removeChild(b),c(a))},r=function(a,b,c){if(b)for(var d=c.eventHandlerInterceptor,e=Object.keys(b),f=e.length,g=function(f){f=e[f];var g=b[f];if("className"===f)throw Error('Property "className" is not supported, use "class".');
if("class"===f)w(a,g,!0);else if("classes"===f){var h=Object.keys(g),k=h.length;for(f=0;f<k;f++){var m=h[f];g[m]&&a.classList.add(m)}}else if("styles"===f)for(h=Object.keys(g),k=h.length,f=0;f<k;f++){var m=h[f],n=g[m];n&&(l(n),c.styleApplyer(a,m,n))}else"key"!==f&&null!==g&&void 0!==g&&(h=typeof g,"function"===h?0===f.lastIndexOf("on",0)&&(d&&(g=d(f,g,a,b)),"oninput"===f&&function(){var a=g;g=function(b){a.apply(this,[b]);b.target["oninput-value"]=b.target.value}}(),a[f]=g):"http://www.w3.org/2000/svg"===
c.namespace?"href"===f?a.setAttributeNS("http://www.w3.org/1999/xlink",f,g):a.setAttribute(f,g):"string"===h&&"value"!==f&&"innerHTML"!==f?a.setAttribute(f,g):a[f]=g)},h=0;h<f;h++)g(h)},x=function(a,b,c){var d=b.children;if(d)for(var e=0;e<d.length;e++)z(d[e],a,void 0,c);b.text&&(a.textContent=b.text);r(a,b.properties,c);b.properties&&b.properties.afterCreate&&b.properties.afterCreate.apply(b.properties.bind||b.properties,[a,c,b.vnodeSelector,b.properties,b.children])},z=function(a,b,c,d){var e,f=
0,g=a.vnodeSelector,h=b.ownerDocument;if(""===g)e=a.domNode=h.createTextNode(a.text),void 0!==c?b.insertBefore(e,c):b.appendChild(e);else{for(var k=0;k<=g.length;++k){var l=g.charAt(k);if(k===g.length||"."===l||"#"===l)l=g.charAt(f-1),f=g.slice(f,k),"."===l?e.classList.add(f):"#"===l?e.id=f:("svg"===f&&(d=n(d,{namespace:"http://www.w3.org/2000/svg"})),void 0!==d.namespace?e=a.domNode=h.createElementNS(d.namespace,f):(e=a.domNode=a.domNode||h.createElement(f),"input"===f&&a.properties&&void 0!==a.properties.type&&
e.setAttribute("type",a.properties.type)),void 0!==c?b.insertBefore(e,c):e.parentNode!==b&&b.appendChild(e)),f=k+1}x(e,a,d)}},v,w=function(a,b,c){b&&b.split(" ").forEach(function(b){return a.classList.toggle(b,c)})};v=function(a,b,c){var d=a.domNode;if(a===b)return!1;var f=!1;if(""===b.vnodeSelector){if(b.text!==a.text)return a=d.ownerDocument.createTextNode(b.text),d.parentNode.replaceChild(a,d),b.domNode=a,!0;b.domNode=d}else{0===b.vnodeSelector.lastIndexOf("svg",0)&&(c=n(c,{namespace:"http://www.w3.org/2000/svg"}));
a.text!==b.text&&(f=!0,void 0===b.text?d.removeChild(d.firstChild):d.textContent=b.text);b.domNode=d;var g;g=a.children;var k=b.children,p=c;if(g===k)g=!1;else{g=g||e;for(var k=k||e,r=g.length,t=k.length,u=0,x=0,y=!1;x<t;){var A=u<r?g[u]:void 0,B=k[x];if(void 0!==A&&h(A,B))y=v(A,B,p)||y,u++;else{b:{var A=g,D=B;if(""!==D.vnodeSelector)for(var F=u+1;F<A.length;F++)if(h(A[F],D)){A=F;break b}A=-1}if(0<=A){for(;u<A;u++)q(g[u]),m(g,u,b,"removed");y=v(g[A],B,p)||y;u=A+1}else z(B,d,u<r?g[u].domNode:void 0,
p),B.properties&&(A=B.properties.enterAnimation)&&A(B.domNode,B.properties),m(k,x,b,"added")}x++}if(r>u)for(;u<r;u++)q(g[u]),m(g,u,b,"removed");g=y}f=g||f;g=a.properties;k=b.properties;p=c;if(k){r=!1;t=Object.keys(k);x=t.length;for(y=0;y<x;y++)if(A=t[y],B=k[A],u=g[A],"class"===A)u!==B&&(w(d,u,!1),w(d,B,!0));else if("classes"===A)for(var D=d.classList,F=Object.keys(B),C=F.length,A=0;A<C;A++){var N=F[A],T=!!B[N];T!==!!u[N]&&(r=!0,T?D.add(N):D.remove(N))}else if("styles"===A)for(D=Object.keys(B),F=D.length,
A=0;A<F;A++)C=D[A],N=B[C],N!==u[C]&&(r=!0,N?(l(N),p.styleApplyer(d,C,N)):p.styleApplyer(d,C,""));else B||"string"!==typeof u||(B=""),"value"===A?(D=d[A],D!==B&&(d["oninput-value"]?D===d["oninput-value"]:B!==u)&&(d[A]=B,d["oninput-value"]=void 0),B!==u&&(r=!0)):B!==u&&(u=typeof B,"function"===u&&p.eventHandlerInterceptor||("http://www.w3.org/2000/svg"===p.namespace?"href"===A?d.setAttributeNS("http://www.w3.org/1999/xlink",A,B):d.setAttribute(A,B):"string"===u&&"innerHTML"!==A?"role"===A&&""===B?d.removeAttribute(A):
d.setAttribute(A,B):d[A]!==B&&(d[A]=B),r=!0));g=r}else g=void 0;f=g||f;b.properties&&b.properties.afterUpdate&&b.properties.afterUpdate.apply(b.properties.bind||b.properties,[d,c,b.vnodeSelector,b.properties,b.children])}f&&b.properties&&b.properties.updateAnimation&&b.properties.updateAnimation(d,b.properties,a.properties);return!1};var p=function(a,b){return{getLastRender:function(){return a},update:function(c){if(a.vnodeSelector!==c.vnodeSelector)throw Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");
var d=a;a=c;v(d,c,b)},domNode:a.domNode}},y={namespace:void 0,performanceLogger:function(){},eventHandlerInterceptor:void 0,styleApplyer:function(a,b,c){a.style[b]=c}},g={create:function(a,b){b=n(y,b);z(a,document.createElement("div"),void 0,b);return p(a,b)},append:function(a,b,c){c=n(y,c);z(b,a,void 0,c);return p(b,c)},insertBefore:function(a,b,c){c=n(y,c);z(b,a.parentNode,a,c);return p(b,c)},merge:function(a,b,c){c=n(y,c);b.domNode=a;x(a,b,c);return p(b,c)},replace:function(a,b,c){c=n(y,c);z(b,
a.parentNode,a,c);a.parentNode.removeChild(a);return p(b,c)}},u=function(a,b,c){for(var d=0,e=b.length;d<e;d++){var f=b[d];Array.isArray(f)?u(a,f,c):null!==f&&void 0!==f&&!1!==f&&("string"===typeof f&&(f={vnodeSelector:"",properties:void 0,children:void 0,text:f.toString(),domNode:null}),c.push(f))}},t;t=Array.prototype.find?function(a,b){return a.find(b)}:function(a,b){return a.filter(b)[0]};var A=function(a,b){var c=a;b.forEach(function(a){c=c&&c.children?t(c.children,function(b){return b.domNode===
a}):void 0});return c},C=function(a,b,c){var d=function(d){c("domEvent",d);var e=b(),f;f=d.currentTarget;for(var g=e.domNode,h=[];f!==g;)h.push(f),f=f.parentNode;f=h;f.reverse();e=A(e.getLastRender(),f);a.scheduleRender();var k;e&&(k=e.properties["on"+d.type].apply(e.properties.bind||this,arguments));c("domEventProcessed",d);return k};return function(a,b,c,e){return d}};b.dom=g;b.h=function(a,b,c){if(Array.isArray(b))c=b,b=void 0;else if(b&&("string"===typeof b||b.hasOwnProperty("vnodeSelector"))||
c&&("string"===typeof c||c.hasOwnProperty("vnodeSelector")))throw Error("h called with invalid arguments");var d,e;void 0!==c&&1===c.length&&"string"===typeof c[0]?d=c[0]:c&&(e=[],u(a,c,e),0===e.length&&(e=void 0));return{vnodeSelector:a,properties:b,children:e,text:""===d?void 0:d,domNode:null}};b.createProjector=function(a){var b,c=n(y,a),d=c.performanceLogger,e=!0,f,h=!1,k=[],l=[],m=function(a,e,f){var g;c.eventHandlerInterceptor=C(b,function(){return g},d);g=a(e,f(),c);k.push(g);l.push(f)},p=
function(){f=void 0;if(e){e=!1;d("renderStart",void 0);for(var a=0;a<k.length;a++){var b=l[a]();d("rendered",void 0);k[a].update(b);d("patched",void 0)}d("renderDone",void 0);e=!0}};return b={renderNow:p,scheduleRender:function(){f||h||(f=requestAnimationFrame(p))},stop:function(){f&&(cancelAnimationFrame(f),f=void 0);h=!0},resume:function(){h=!1;e=!0;b.scheduleRender()},append:function(a,b){m(g.append,a,b)},insertBefore:function(a,b){m(g.insertBefore,a,b)},merge:function(a,b){m(g.merge,a,b)},replace:function(a,
b){m(g.replace,a,b)},detach:function(a){for(var b=0;b<l.length;b++)if(l[b]===a)return l.splice(b,1),k.splice(b,1)[0];throw Error("renderFunction was not found");}}};b.createCache=function(){var a,b;return{invalidate:function(){a=b=void 0},result:function(c,d){if(a)for(var e=0;e<c.length;e++)a[e]!==c[e]&&(b=void 0);b||(b=d(),a=c);return b}}};b.createMapping=function(a,b,c){var d=[],e=[];return{results:e,map:function(f){for(var g=f.map(a),h=e.slice(),k=0,l=0;l<f.length;l++){var m=f[l],n=g[l];if(n===
d[k])e[l]=h[k],c(m,h[k],l),k++;else{for(var p=!1,q=1;q<d.length+1;q++){var r=(k+q)%d.length;if(d[r]===n){e[l]=h[r];c(f[l],h[r],l);k=r+1;p=!0;break}}p||(e[l]=b(m,l))}}e.length=f.length;d=g}}};Object.defineProperty(b,"__esModule",{value:!0})})},"*now":function(b){b(['dojo/i18n!*preload*dojo/nls/dojo*["ar","ca","cs","da","de","el","en-gb","en-us","es-es","fi-fi","fr-fr","he-il","hu","it-it","ja-jp","ko-kr","nl-nl","nb","pl","pt-br","pt-pt","ru","sk","sl","sv","th","tr","zh-tw","zh-cn","ROOT"]'])},"*noref":1}});
require.boot&&require.apply(null,require.boot);